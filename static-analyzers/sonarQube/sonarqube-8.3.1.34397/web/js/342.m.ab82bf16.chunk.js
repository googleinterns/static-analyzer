(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{1689:function(e,t,s){var n=s(311),a=s(1690);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1},o=(n(a,r),a.locals?a.locals:{});e.exports=o},1690:function(e,t,s){(t=s(312)(!1)).push([e.i,'.issues-main-header .component-name{line-height:24px}.issues-main-header-spinner{margin-right:2px}.concise-issues-list-header-inner{width:260px;text-align:center}.concise-issues-list-header .spinner{margin-top:4px;margin-left:1px;margin-right:1px}.concise-issues-list-header-button{border:none}.concise-issues-list-header-button path{fill:#777;transition:fill .3s ease}.concise-issues-list-header-button:hover path{fill:#4b9fd5}.concise-issue-component{margin-top:16px;margin-bottom:4px;padding-left:8px;padding-right:8px}.concise-issue-box{position:relative;z-index:1;margin-bottom:4px;padding:7px;border:2px solid #e6e6e6;background-color:#fff;cursor:pointer;transition:background-color .3s ease,border-color .3s ease}.concise-issue-box:hover{border:2px dashed #4b9fd5}.concise-issue-box:focus{outline:none}.concise-issue-box.selected{z-index:2;border:2px solid #4b9fd5;cursor:default}.concise-issue-box-message{overflow:hidden;text-overflow:ellipsis;font-weight:700}.concise-issue-box-message:focus{outline:none}.concise-issue-box.selected .concise-issue-box-message{cursor:pointer}.concise-issue-box-attributes{margin-top:8px;line-height:16px;font-size:12px;display:flex;align-items:flex-start;flex-wrap:wrap;justify-content:flex-start}.concise-issue-box:not(.selected) .location-index{background-color:#ccc}.concise-issue-locations{display:inline-block;margin-bottom:-4px;margin-left:8px}.concise-issue-box-attributes>.location-index{margin-bottom:4px;margin-right:4px}.concise-issue-box-attributes>.concise-issue-expand{background-color:transparent;border:1px solid #d18582;height:16px;color:#d18582;font-weight:700;font-size:16px;line-height:8px;padding-bottom:6px}.concise-issue-box-attributes>.concise-issue-expand:hover{background-color:#d18582;color:#fff}.concise-issue-locations-navigator-location{position:relative;z-index:3;display:inline-flex;align-items:flex-start;max-width:100%;border:none}.concise-issue-locations-navigator-file{position:relative}.concise-issue-locations-navigator-file+.concise-issue-locations-navigator-file{margin-top:12px}.concise-issue-locations-navigator-file:not(:last-child):before{position:absolute;display:block;width:0;top:13px;bottom:-16px;left:4px;border-left:1px dotted #d18582;content:""}.concise-issue-location-file{height:16px;padding-bottom:4px;font-size:12px;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.concise-issue-location-file-circle,.concise-issue-location-file-circle-multiple,.concise-issue-location-file-circle-multiple:after,.concise-issue-location-file-circle-multiple:before{position:relative;top:1px;display:inline-block;width:9px;height:9px;border:1px solid #d18582;border-radius:100%;box-sizing:border-box;background-color:#f2dede}.concise-issue-location-file-circle-multiple{top:-2px}.concise-issue-location-file-circle-multiple:before{position:absolute;z-index:7;top:2px;left:-1px;content:""}.concise-issue-location-file-circle-multiple:after{position:absolute;z-index:8;top:5px;left:-1px;content:""}.concise-issue-location-file-locations{padding-left:16px}.concise-issue-location-file-more{border-color:rgba(209,133,130,.2);color:#d18582!important;font-style:italic;font-weight:400}.concise-issue-location-file-more:focus,.concise-issue-location-file-more:hover{border-color:rgba(209,133,130,.6)}.component-source-container{border:1px solid #cdcdcd}.component-source-container+.component-source-container{margin-top:8px}.component-source-container-header{background-color:#efefef;padding:8px}.issues-my-issues-filter{margin-bottom:24px;text-align:center}.issues-page-actions{display:inline-block;min-width:80px;text-align:right}.issues .issue-list{min-width:640px;width:800px}.issues .issue{border:2px solid transparent;cursor:pointer}.issues .issue:focus-within,.issues .issue:hover{border:2px dashed #4b9fd5;transition:all .3s ease;outline:0}.issues .issue a:focus,.issues .issue button:focus{box-shadow:none;outline:1px dotted #4b9fd5}@media (max-width:1320px){.issues .issue-list{width:calc(60vw - 40px)}}.issue-location{display:inline-block;vertical-align:top;line-height:18px;height:18px;box-sizing:border-box;background-color:#f2dede;transition:background-color .3s ease}.issues-workspace-list-component{padding:10px 10px 6px}.issues-workspace-list-item+.issues-workspace-list-item{margin-top:5px}.issues-workspace-list-component+.issues-workspace-list-item{margin-top:10px}.issues-workspace-list-item:first-child .issues-workspace-list-component{padding-top:0}.issues-workspace-list-component+.issues-workspace-list-item{margin-top:0}.issues-predefined-periods{display:flex}.issues-predefined-periods .search-navigator-facet{width:auto;margin-right:4px}.bulk-change-radio-button{margin:0 -4px;padding:0 4px}.bulk-change-radio-button:hover{background-color:#f3f3f3}.navigation-keyboard-shortcuts>span{background-color:hsla(0,0%,78.4%,.5);border-radius:16px;display:inline-block;font-size:12px;height:16px;padding:4px 8px}',""]),e.exports=t},1840:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return gs}));var n=s(356),a=s.n(n),r=s(434),o=s.n(r),i=s(466),c=s.n(i),l=s(364),h=s.n(l),p=s(487),u=s(2),d=s(328),g=s(304),m=s(310),f=s(342),b=s.n(f),y=s(358),S=s.n(y),C=s(325),v=s(316),k=s.n(v),O=s(32),I=s.n(O),E=s(5),x=s(415),j=s(350),F=s(331),T=s(1060),w=s(991),L=s(447),R=(s(562),s(329)),N=s(22),P=s(436);function _(e){const{openIssue:t,selectedLocationIndex:s}=e;if(t&&(t.secondaryLocations.length>0||t.flows.length>0)){const n=e.selectedFlowIndex||(t.flows.length>0?0:void 0);if(!Object(P.b)(t,n))return{locationsNavigator:!0,selectedFlowIndex:n,selectedLocationIndex:!s||s<0?0:s}}return null}function q(){return{locationsNavigator:!1}}function A(e){const{selectedFlowIndex:t,selectedLocationIndex:s,openIssue:n}=e;if(n){const e=(void 0!==t?n.flows[t]:n.secondaryLocations).length-1;return s===e?{selectedLocationIndex:-1}:{selectedLocationIndex:void 0!==s&&s<e?s+1:s}}return null}function z(e){const{selectedFlowIndex:t,selectedLocationIndex:s,openIssue:n}=e;if(n){if(-1===s){return{selectedLocationIndex:(void 0!==t?n.flows[t]:n.secondaryLocations).length-1}}return{selectedLocationIndex:void 0!==s&&s>0?s-1:s}}return null}function B(e){const{openIssue:t,selectedFlowIndex:s}=e;return t&&void 0!==s&&t.flows.length>s+1?{selectedFlowIndex:s+1,selectedLocationIndex:0}:null}function D(e){const{openIssue:t,selectedFlowIndex:s}=e;return t&&void 0!==s&&s>0?{selectedFlowIndex:s-1,selectedLocationIndex:0}:null}var M=s(426),K=s(309),H=s(998);function U({issue:e}){if(!e||!e.secondaryLocations.length&&!e.flows.length)return null;const t=e.flows.length>1;return u.createElement("div",{className:"navigation-keyboard-shortcuts big-spacer-top text-center"},u.createElement("span",null,"alt + ↑ ↓ ",t&&u.createElement(u.Fragment,null,"←→"),Object(E.translate)("issues.to_navigate_issue_locations")))}var W=s(315),V=s.n(W),J=s(318),G=s(557);function X(e){return u.createElement(V.a,{mouseEnterDelay:.5,overlay:Object(E.translateWithParameters)("issue.this_issue_involves_x_code_locations",Object(J.formatMeasure)(e.count,"INT"))},u.createElement(G.a,{onClick:e.onClick,selected:e.selected},"+",e.count))}class Y extends u.PureComponent{constructor(){super(...arguments),this.state={collapsed:!0},this.handleExpandClick=()=>{this.setState({collapsed:!1})}}renderExpandButton(){return u.createElement(m.Button,{className:"concise-issue-expand location-index link-no-underline",onClick:this.handleExpandClick},"...")}render(){const{secondaryLocations:e,flows:t}=this.props.issue,s=[];return e.length>0&&s.push(u.createElement(X,{count:e.length,key:"-1",selected:!this.props.selectedFlowIndex})),t.forEach((e,t)=>{s.push(u.createElement(X,{count:e.length,key:t,onClick:()=>this.props.onFlowSelect(t),selected:t===this.props.selectedFlowIndex}))}),!this.state.collapsed||s.length<=8?s:u.createElement(u.Fragment,null,s.slice(0,7),this.renderExpandButton())}}var Q=s(424),Z=s.n(Q),$=s(719);class ee extends u.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),this.props.onClick(this.props.index)}}componentDidMount(){this.props.selected&&this.node&&this.props.scroll(this.node)}componentDidUpdate(e){this.props.selected&&e.selected!==this.props.selected&&this.node&&this.props.scroll(this.node)}render(){const{index:e,message:t,selected:s}=this.props;return u.createElement("div",{className:"little-spacer-top",ref:e=>this.node=e},u.createElement("a",{className:"concise-issue-locations-navigator-location",href:"#",onClick:this.handleClick},u.createElement(G.a,{selected:s},e+1),u.createElement($.a,{selected:s},t)))}}var te=s(390);class se extends u.PureComponent{constructor(){super(...arguments),this.state={collapsed:!0},this.handleMoreLocationsClick=e=>{e.preventDefault(),e.currentTarget.blur(),this.setState({collapsed:!1})},this.groupByFile=e=>{const t=[];let s,n,a=[],r=0;for(let o=0;o<e.length;o++){const i=e[o];i.component===s?a.push(i):(a.length>0&&t.push({component:s,componentName:n,firstLocationIndex:r,locations:a}),a=[i],s=i.component,n=i.componentName,r=o)}return a.length>0&&t.push({component:s,componentName:n,firstLocationIndex:r,locations:a}),t},this.renderLocation=(e,t)=>u.createElement(ee,{index:e,key:e,message:t,onClick:this.props.onLocationSelect,scroll:this.props.scroll,selected:e===this.props.selectedLocationIndex}),this.renderGroup=(e,t,{onlyFirst:s=!1,onlyLast:n=!1}={})=>{const{firstLocationIndex:a}=e,r=e.locations.length-1;return u.createElement("div",{className:"concise-issue-locations-navigator-file",key:t},u.createElement("div",{className:"concise-issue-location-file"},u.createElement("i",{className:"concise-issue-location-file-circle little-spacer-right"}),Object(te.collapsePath)(e.componentName||"",15)),e.locations.length>0&&u.createElement("div",{className:"concise-issue-location-file-locations"},s&&this.renderLocation(a,e.locations[0].msg),n&&this.renderLocation(a+r,e.locations[r].msg),!s&&!n&&e.locations.map((e,t)=>this.renderLocation(a+t,e.msg))))}}componentWillReceiveProps(e){e.issue.key!==this.props.issue.key&&this.setState({collapsed:!0});const{locations:t}=e;e.selectedLocationIndex&&e.selectedLocationIndex>0&&void 0!==t&&e.selectedLocationIndex<t.length-1&&this.setState({collapsed:!1})}render(){const{locations:e}=this.props,t=this.groupByFile(e);if(e.length>2&&t.length>1&&this.state.collapsed){const s=t[0],n=t[t.length-1];return u.createElement("div",{className:"concise-issue-locations-navigator spacer-top"},this.renderGroup(s,0,{onlyFirst:!0}),u.createElement("div",{className:"concise-issue-locations-navigator-file"},u.createElement("div",{className:"concise-issue-location-file"},u.createElement("i",{className:"concise-issue-location-file-circle-multiple little-spacer-right"}),u.createElement("a",{className:"concise-issue-location-file-more",href:"#",onClick:this.handleMoreLocationsClick},Object(E.translateWithParameters)("issues.x_more_locations",e.length-2)))),this.renderGroup(n,t.length-1,{onlyLast:!0}))}return u.createElement("div",{className:"concise-issue-locations-navigator spacer-top"},t.map((e,t)=>this.renderGroup(e,t)))}}class ne extends u.PureComponent{render(){const e=Object(P.f)(this.props.issue,this.props.selectedFlowIndex);if(!e||0===e.length||e.every(e=>!e.msg))return null;const t=[this.props.issue.component,...e.map(e=>e.component)];return Z()(t).length>1?u.createElement(se,{issue:this.props.issue,locations:e,onLocationSelect:this.props.onLocationSelect,scroll:this.props.scroll,selectedLocationIndex:this.props.selectedLocationIndex}):u.createElement("div",{className:"concise-issue-locations-navigator spacer-top"},e.map((e,t)=>u.createElement(ee,{index:t,key:t,message:e.msg,onClick:this.props.onLocationSelect,scroll:this.props.scroll,selected:t===this.props.selectedLocationIndex})))}}class ae extends u.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),this.props.onClick(this.props.issue.key)},this.handleScroll=()=>{const{selectedFlowIndex:e}=this.props,{flows:t,secondaryLocations:s}=this.props.issue,n=t.length>0?t[e||0]:s;!n||n.length<15?this.rootElement&&this.props.scroll(this.rootElement):this.messageElement&&this.props.scroll(this.messageElement,window.innerHeight-250)}}componentDidMount(){this.props.selected&&this.handleScroll()}componentDidUpdate(e){this.props.selected&&e.selected!==this.props.selected&&this.handleScroll()}render(){const{issue:e,selected:t}=this.props,s=t?{}:{onClick:this.handleClick,role:"listitem",tabIndex:0},n=t?{onClick:this.handleClick,role:"listitem",tabIndex:0}:{};return u.createElement("div",Object.assign({className:K("concise-issue-box","clearfix",{selected:t}),ref:e=>this.rootElement=e},s),u.createElement("div",Object.assign({className:"concise-issue-box-message"},n,{ref:e=>this.messageElement=e}),e.message),u.createElement("div",{className:"concise-issue-box-attributes"},u.createElement(H.a,{className:"display-block little-spacer-right",type:e.type}),u.createElement(Y,{issue:e,onFlowSelect:this.props.onFlowSelect,selectedFlowIndex:this.props.selectedFlowIndex})),t&&u.createElement(u.Fragment,null,u.createElement(ne,{issue:e,onLocationSelect:this.props.onLocationSelect,scroll:this.props.scroll,selectedFlowIndex:this.props.selectedFlowIndex,selectedLocationIndex:this.props.selectedLocationIndex}),u.createElement(U,{issue:e})))}}function re(e){return u.createElement("div",{className:"concise-issue-component note text-ellipsis"},Object(te.collapsePath)(e.path,20))}class oe extends u.PureComponent{render(){const{issue:e,previousIssue:t,selected:s}=this.props,n=!t||t.component!==e.component;return u.createElement("div",null,n&&u.createElement(re,{path:e.componentLongName}),u.createElement(ae,{issue:e,onClick:this.props.onSelect,onFlowSelect:this.props.onFlowSelect,onLocationSelect:this.props.onLocationSelect,scroll:this.props.scroll,selected:s,selectedFlowIndex:s?this.props.selectedFlowIndex:void 0,selectedLocationIndex:s?this.props.selectedLocationIndex:void 0}))}}class ie extends u.PureComponent{constructor(){super(...arguments),this.handleScroll=(e,t=100)=>{const s=document.querySelector(".layout-page-side");e&&s&&Object(M.scrollToElement)(e,{topOffset:150,bottomOffset:t,parent:s})}}render(){return u.createElement("div",null,this.props.issues.map((e,t)=>u.createElement(oe,{issue:e,key:e.key,onFlowSelect:this.props.onFlowSelect,onLocationSelect:this.props.onLocationSelect,onSelect:this.props.onIssueSelect,previousIssue:t>0?this.props.issues[t-1]:void 0,scroll:this.handleScroll,selected:e.key===this.props.selected,selectedFlowIndex:this.props.selectedFlowIndex,selectedLocationIndex:this.props.selectedLocationIndex})))}}var ce=s(1687),le=s.n(ce),he=s(669),pe=s.n(he),ue=s(997);function de(e){return u.createElement(ue.a,{className:"spacer-left",current:e.current,label:Object(E.translate)("issues.issues"),total:e.total})}function ge(e){const{displayBackButton:t=!0,paging:s,selectedIndex:n}=e;return u.createElement("header",{className:"layout-page-header-panel concise-issues-list-header"},u.createElement("div",{className:"layout-page-header-panel-inner concise-issues-list-header-inner"},t&&u.createElement(le.a,{className:"pull-left",disabled:e.loading,onClick:e.onBackClick}),e.loading?u.createElement("i",{className:"spinner pull-right"}):u.createElement(pe.a,{className:"pull-right",onClick:e.onReload}),s&&u.createElement(de,{current:n,total:s.total})))}var me=s(326),fe=s.n(me),be=s(508),ye=s(502),Se=s(366),Ce=s(333);class ve extends u.PureComponent{constructor(){super(...arguments),this.handleSearch=(e,t)=>Object(P.o)(e,this.props.organization,t),this.handleItemClick=(e,t)=>{const{assignees:s}=this.props;if(""===e)this.props.onChange({assigned:!this.props.assigned,assignees:[]});else if(t){const t=fe()(s.includes(e)?a()(s,e):[...s,e]);this.props.onChange({assigned:!0,assignees:t})}else this.props.onChange({assigned:!0,assignees:s.includes(e)&&s.length<2?[]:[e]})},this.handleClear=()=>{this.props.onChange({assigned:!0,assignees:[]})},this.getAssigneeName=e=>{if(""===e)return Object(E.translate)("unassigned");{const t=this.props.referencedUsers[e];return t?Object(Ce.c)(t)?t.name:Object(E.translateWithParameters)("user.x_deleted",t.login):e}},this.loadSearchResultCount=e=>this.props.loadSearchResultCount("assignees",{assigned:void 0,assignees:e.map(e=>e.login)}),this.getSortedItems=()=>{const{stats:e={}}=this.props;return fe()(Object.keys(e),e=>""===e?0:1,t=>-e[t])},this.renderFacetItem=e=>{if(""===e)return Object(E.translate)("unassigned");const t=this.props.referencedUsers[e];if(!t)return e;const s=t.name||t.login;return u.createElement(u.Fragment,null,u.createElement(Se.a,{className:"little-spacer-right",hash:t.avatar,name:s,size:16}),Object(Ce.c)(t)?s:Object(E.translateWithParameters)("user.x_deleted",s))},this.renderSearchResult=(e,t)=>{const s=Object(Ce.c)(e)?e.name:Object(E.translateWithParameters)("user.x_deleted",e.login);return u.createElement(u.Fragment,null,u.createElement(Se.a,{className:"little-spacer-right",hash:e.avatar,name:e.name||e.login,size:16}),Object(be.highlightTerm)(s,t))}}render(){const e=[...this.props.assignees];return this.props.assigned||e.push(""),u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.assignees"),fetching:this.props.fetching,getFacetItemText:this.getAssigneeName,getSearchResultKey:e=>e.login,getSearchResultText:e=>e.name||e.login,getSortedItems:this.getSortedItems,loadSearchResultCount:this.loadSearchResultCount,onChange:this.props.onChange,onClear:this.handleClear,onItemClick:this.handleItemClick,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"assignees",query:o()(this.props.query,"assigned","assignees"),renderFacetItem:this.renderFacetItem,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_users"),stats:this.props.stats,values:e})}}var ke=s(352);class Oe extends u.PureComponent{constructor(){super(...arguments),this.identity=e=>e,this.handleSearch=(e,t)=>{const{component:s}=this.props,n=s&&["TRK","VW","APP"].includes(s.qualifier)?s.key:void 0;return Object(ke.i)({organization:this.props.organization,project:n,ps:100,q:e}).then(e=>({maxResults:100===e.length,results:e}))},this.loadSearchResultCount=e=>this.props.loadSearchResultCount("authors",{authors:e}),this.renderSearchResult=(e,t)=>Object(be.highlightTerm)(e,t)}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.authors"),fetching:this.props.fetching,getFacetItemText:this.identity,getSearchResultKey:this.identity,getSearchResultText:this.identity,loadSearchResultCount:this.loadSearchResultCount,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"authors",query:o()(this.props.query,"authors"),renderFacetItem:this.identity,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_authors"),stats:this.props.stats,values:this.props.authors})}}var Ie=s(1062),Ee=s.n(Ie),xe=s(624),je=s(1688),Fe=s.n(je),Te=s(351),we=s(363),Le=s.n(we),Re=s(349),Ne=s.n(Re),Pe=s(28),_e=s(629),qe=s(440),Ae=s(455),ze=s(456);function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function De(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Me extends u.PureComponent{constructor(){super(...arguments),this.property="createdAt",this.hasValue=()=>void 0!==this.props.createdAfter||this.props.createdAt.length>0||void 0!==this.props.createdBefore||this.props.createdInLast.length>0||this.props.sinceLeakPeriod,this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleClear=()=>{this.resetTo({})},this.resetTo=e=>{this.props.onChange(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(s),!0).forEach((function(t){De(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({createdAfter:void 0,createdAt:void 0,createdBefore:void 0,createdInLast:void 0,sinceLeakPeriod:void 0},e))},this.handleBarClick=({createdAfter:e,createdBefore:t})=>{this.resetTo({createdAfter:e,createdBefore:t})},this.handlePeriodChange=({from:e,to:t})=>{this.resetTo({createdAfter:e,createdBefore:t})},this.handlePeriodClick=e=>this.resetTo({createdInLast:e}),this.handleLeakPeriodClick=()=>this.resetTo({sinceLeakPeriod:!0})}getValues(){const{createdAfter:e,createdAt:t,createdBefore:s,createdInLast:n,sinceLeakPeriod:a}=this.props,{formatDate:r}=this.props.intl,o=[];return e&&o.push(r(e,Te.longFormatterOption)),t&&o.push(r(t,Te.longFormatterOption)),s&&o.push(r(s,Te.longFormatterOption)),"1w"===n&&o.push(Object(E.translate)("issues.facet.createdAt.last_week")),"1m"===n&&o.push(Object(E.translate)("issues.facet.createdAt.last_month")),"1y"===n&&o.push(Object(E.translate)("issues.facet.createdAt.last_year")),a&&o.push(Object(E.translate)("issues.new_code")),o}renderBarChart(){const{createdBefore:e,stats:t}=this.props;if(!t)return null;const s=Object.keys(t);if(s.length<2||s.every(e=>!t[e]))return null;const{formatDate:n}=this.props.intl,a=s.map((a,r)=>{const o=Object(Pe.parseDate)(a);let i;r<s.length-1?(i=Object(Pe.parseDate)(s[r+1]),i.setDate(i.getDate()-1)):i=e?Object(Pe.parseDate)(e):void 0;const c=i||new Date;return{createdAfter:o,createdBefore:i,tooltip:u.createElement(u.Fragment,null,Object(J.formatMeasure)(t[a],"SHORT_INT"),u.createElement("br",null),n(o,Te.longFormatterOption),!xe(c,o)&&" - ".concat(n(c,Te.longFormatterOption))),x:r,y:t[a]}}),r=Math.floor(250/a.length),o=r*a.length-1+10,i=Ee()(a.map(e=>e.y)),c=a.map(e=>e.y===i?Object(J.formatMeasure)(i,"SHORT_INT"):"");return u.createElement(Fe.a,{barsWidth:r-1,data:a,height:75,onBarClick:this.handleBarClick,padding:[25,0,5,10],width:o,xValues:c})}renderExactDate(){return u.createElement("div",{className:"search-navigator-facet-container"},u.createElement(Ne.a,{date:this.props.createdAt}),u.createElement("br",null),u.createElement("span",{className:"note"},u.createElement(Le.a,{date:this.props.createdAt})))}renderPeriodSelectors(){const{createdAfter:e,createdBefore:t}=this.props;return u.createElement("div",{className:"search-navigator-date-facet-selection"},u.createElement(_e.a,{onChange:this.handlePeriodChange,value:{from:e,to:t}}))}renderPredefinedPeriods(){const{component:e,createdInLast:t,sinceLeakPeriod:s}=this.props;return u.createElement("div",{className:"spacer-top issues-predefined-periods"},u.createElement(ze.a,{active:!this.hasValue(),name:Object(E.translate)("issues.facet.createdAt.all"),onClick:this.handlePeriodClick,tooltip:Object(E.translate)("issues.facet.createdAt.all"),value:""}),e?u.createElement(ze.a,{active:s,name:Object(E.translate)("issues.new_code"),onClick:this.handleLeakPeriodClick,tooltip:Object(E.translate)("issues.new_code_period"),value:""}):u.createElement(u.Fragment,null,u.createElement(ze.a,{active:"1w"===t,name:Object(E.translate)("issues.facet.createdAt.last_week"),onClick:this.handlePeriodClick,tooltip:Object(E.translate)("issues.facet.createdAt.last_week"),value:"1w"}),u.createElement(ze.a,{active:"1m"===t,name:Object(E.translate)("issues.facet.createdAt.last_month"),onClick:this.handlePeriodClick,tooltip:Object(E.translate)("issues.facet.createdAt.last_month"),value:"1m"}),u.createElement(ze.a,{active:"1y"===t,name:Object(E.translate)("issues.facet.createdAt.last_year"),onClick:this.handlePeriodClick,tooltip:Object(E.translate)("issues.facet.createdAt.last_year"),value:"1y"})))}renderInner(){const{createdAt:e}=this.props;return e?this.renderExactDate():u.createElement("div",null,this.renderBarChart(),this.renderPeriodSelectors(),this.renderPredefinedPeriods())}render(){return u.createElement(qe.a,{property:this.property},u.createElement(Ae.a,{fetching:this.props.fetching,name:Object(E.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:this.getValues()}),this.props.open&&this.renderInner())}}Me.defaultProps={open:!0};var Ke=Object(g.injectIntl)(Me),He=s(343),Ue=s.n(He),We=s(360);class Ve extends u.PureComponent{constructor(){super(...arguments),this.getFacetItemText=e=>Object(te.collapsePath)(e,15),this.getSearchResultKey=e=>e.path,this.getSearchResultText=e=>e.name,this.handleSearch=(e,t)=>Object(We.p)({component:this.props.componentKey,q:e,p:t,ps:30}).then(({components:e,paging:t})=>({paging:t,results:e.filter(e=>void 0!==e.path)})),this.loadSearchResultCount=e=>this.props.loadSearchResultCount("directories",{directories:e.map(e=>e.path)}),this.renderDirectory=e=>u.createElement(u.Fragment,null,u.createElement(Ue.a,{className:"little-spacer-right",qualifier:"DIR"}),e),this.renderFacetItem=e=>this.renderDirectory(Object(te.collapsePath)(e,15)),this.renderSearchResult=(e,t)=>this.renderDirectory(Object(be.highlightTerm)(Object(te.collapsePath)(e.path,15),t))}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.directories"),fetching:this.props.fetching,getFacetItemText:this.getFacetItemText,getSearchResultKey:this.getSearchResultKey,getSearchResultText:this.getSearchResultText,loadSearchResultCount:this.loadSearchResultCount,minSearchLength:3,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"directories",query:o()(this.props.query,"directories"),renderFacetItem:this.renderFacetItem,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_directories"),stats:this.props.stats,values:this.props.directories})}}var Je=s(410);class Ge extends u.PureComponent{constructor(){super(...arguments),this.getFilePath=e=>{const{referencedComponents:t}=this.props;return t[e]?Object(te.collapsePath)(t[e].path||"",15):e},this.getReferencedComponent=e=>{const{referencedComponents:t}=this.props,s=Object.keys(t).find(s=>t[s].key===e);return s?t[s]:void 0},this.getFacetItemText=e=>{const{referencedComponents:t}=this.props;return t[e]?t[e].path||"":e},this.getSearchResultKey=e=>{const t=this.getReferencedComponent(e.key);return t?t.uuid:e.key},this.getSearchResultText=e=>e.path,this.handleSearch=(e,t)=>Object(We.r)({component:this.props.componentKey,q:e,p:t,ps:30}).then(({components:e,paging:t})=>({paging:t,results:e.filter(e=>void 0!==e.path)})),this.loadSearchResultCount=e=>this.props.loadSearchResultCount("files",{files:e.map(e=>{const t=this.getReferencedComponent(e.key);return t&&t.uuid}).filter(Je.isDefined)}),this.renderFile=e=>u.createElement(u.Fragment,null,u.createElement(Ue.a,{className:"little-spacer-right",qualifier:"FIL"}),e),this.renderFacetItem=e=>{const t=this.getFilePath(e);return this.renderFile(t)},this.renderSearchResult=(e,t)=>this.renderFile(Object(be.highlightTerm)(Object(te.collapsePath)(e.path,15),t))}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.files"),fetching:this.props.fetching,getFacetItemText:this.getFacetItemText,getSearchResultKey:this.getSearchResultKey,getSearchResultText:this.getSearchResultText,loadSearchResultCount:this.loadSearchResultCount,minSearchLength:3,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"files",query:o()(this.props.query,"files"),renderFacetItem:this.renderFacetItem,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_files"),stats:this.props.stats,values:this.props.fileUuids})}}var Xe=s(539),Ye=s.n(Xe),Qe=s(317),Ze=s(319);class $e extends u.PureComponent{constructor(){super(...arguments),this.getLanguageName=e=>{const{referencedLanguages:t}=this.props;return t[e]?t[e].name:e},this.handleSearch=e=>{const t=this.getAllPossibleOptions().filter(t=>t.name.toLowerCase().includes(e.toLowerCase())),s={pageIndex:1,pageSize:t.length,total:t.length};return Promise.resolve({paging:s,results:t})},this.getAllPossibleOptions=()=>{const{installedLanguages:e,stats:t={}}=this.props;return Ye()([...e,...Object.keys(t).map(e=>({key:e,name:e}))],e=>e.key)},this.loadSearchResultCount=e=>this.props.loadSearchResultCount("languages",{languages:e.map(e=>e.key)}),this.renderSearchResult=({name:e},t)=>Object(be.highlightTerm)(e,t)}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.languages"),fetching:this.props.fetching,getFacetItemText:this.getLanguageName,getSearchResultKey:e=>e.key,getSearchResultText:e=>e.name,loadSearchResultCount:this.loadSearchResultCount,minSearchLength:1,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"languages",query:o()(this.props.query,"languages"),renderFacetItem:this.getLanguageName,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_languages"),stats:this.props.stats,values:this.props.languages})}}var et=Object(Qe.connect)(e=>({installedLanguages:Object.values(Object(Ze.getLanguages)(e))}))($e),tt=s(819);class st extends u.PureComponent{constructor(){super(...arguments),this.handleSearch=(e,t=1)=>{const{component:s,organization:n}=this.props;return s&&["VW","SVW","APP"].includes(s.qualifier)?Object(We.w)({component:s.key,p:t,ps:30,q:e,qualifiers:"TRK"}).then(({components:e,paging:t})=>({paging:t,results:e.map(e=>({key:e.refKey||e.key,name:e.name,organization:e.organization}))})):Object(We.y)({p:t,ps:30,filter:e?'query = "'.concat(e,'"'):"",organization:n&&n.key}).then(({components:e,paging:t})=>({paging:t,results:e.map(e=>({key:e.key,name:e.name,organization:e.organization}))}))},this.getProjectName=e=>{const{referencedComponents:t}=this.props;return t[e]?t[e].name:e},this.loadSearchResultCount=e=>this.props.loadSearchResultCount("projects",{projects:e.map(e=>e.key)}),this.renderFacetItem=e=>{const{referencedComponents:t}=this.props;return t[e]?this.renderProject(t[e]):u.createElement("span",null,u.createElement(Ue.a,{className:"little-spacer-right",qualifier:"TRK"}),e)},this.renderProject=e=>u.createElement("span",null,u.createElement(Ue.a,{className:"little-spacer-right",qualifier:"TRK"}),!this.props.organization&&u.createElement(tt.a,{link:!1,organizationKey:e.organization}),e.name),this.renderSearchResult=(e,t)=>u.createElement(u.Fragment,null,u.createElement(Ue.a,{className:"little-spacer-right",qualifier:"TRK"}),!this.props.organization&&u.createElement(tt.a,{link:!1,organizationKey:e.organization}),Object(be.highlightTerm)(e.name,t))}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.projects"),fetching:this.props.fetching,getFacetItemText:this.getProjectName,getSearchResultKey:e=>e.key,getSearchResultText:e=>e.name,loadSearchResultCount:this.loadSearchResultCount,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"projects",query:o()(this.props.query,"projects"),renderFacetItem:this.renderFacetItem,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_projects"),stats:this.props.stats,values:this.props.projects})}}var nt=s(603),at=s.n(nt),rt=s(476),ot=s(564);const it=["","FALSE-POSITIVE","FIXED","REMOVED","WONTFIX"];class ct extends u.PureComponent{constructor(){super(...arguments),this.property="resolutions",this.handleItemClick=(e,t)=>{const{resolutions:s}=this.props;if(""===e)this.props.onChange({resolved:!this.props.resolved,resolutions:[]});else if(t){const t=at()(s.includes(e)?a()(s,e):[...s,e]);this.props.onChange({resolved:!0,[this.property]:t})}else this.props.onChange({resolved:!0,[this.property]:s.includes(e)&&s.length<2?[]:[e]})},this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleClear=()=>{this.props.onChange({resolved:!1,resolutions:[]})},this.renderItem=e=>{const t=this.isFacetItemActive(e),s=this.getStat(e);return u.createElement(ze.a,{active:t,disabled:0===s&&!t,halfWidth:!0,key:e,name:this.getFacetItemName(e),onClick:this.handleItemClick,stat:Object(P.e)(s),tooltip:this.getFacetItemName(e),value:e})}}isFacetItemActive(e){return""===e?!this.props.resolved:this.props.resolutions.includes(e)}getFacetItemName(e){return""===e?Object(E.translate)("unresolved"):Object(E.translate)("issue.resolution",e)}getStat(e){const{stats:t}=this.props;return t?t[e]:void 0}render(){const{resolutions:e,stats:t={}}=this.props,s=e.map(e=>this.getFacetItemName(e));return u.createElement(qe.a,{property:this.property},u.createElement(Ae.a,{fetching:this.props.fetching,name:Object(E.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:s}),this.props.open&&u.createElement(u.Fragment,null,u.createElement(rt.a,null,it.map(this.renderItem)),u.createElement(ot.a,{options:Object.keys(t).length,values:e.length})))}}ct.defaultProps={open:!0};var lt=s(397);class ht extends u.PureComponent{constructor(){super(...arguments),this.handleSearch=(e,t=1)=>{const{languages:s,organization:n}=this.props;return Object(lt.f)({f:"name,langName",languages:s.length?s.join():void 0,organization:n,q:e,p:t,ps:30,s:"name",include_external:!0}).then(e=>({paging:{pageIndex:e.p,pageSize:e.ps,total:e.total},results:e.rules}))},this.loadSearchResultCount=e=>this.props.loadSearchResultCount("rules",{rules:e.map(e=>e.key)}),this.getRuleName=e=>{const t=this.props.referencedRules[e];return t?this.formatRuleName(t.name,t.langName):e},this.formatRuleName=(e,t)=>t?"(".concat(t,") ").concat(e):e,this.renderSearchResult=e=>this.formatRuleName(e.name,e.langName)}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.rules"),fetching:this.props.fetching,getFacetItemText:this.getRuleName,getSearchResultKey:e=>e.key,getSearchResultText:e=>e.name,loadSearchResultCount:this.loadSearchResultCount,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"rules",query:o()(this.props.query,"rules"),renderFacetItem:this.getRuleName,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_rules"),stats:this.props.stats,values:this.props.rules})}}var pt=s(379);const ut=["BLOCKER","MINOR","CRITICAL","INFO","MAJOR"];class dt extends u.PureComponent{constructor(){super(...arguments),this.property="severities",this.handleItemClick=(e,t)=>{const{severities:s}=this.props;if(t){const t=at()(s.includes(e)?a()(s,e):[...s,e]);this.props.onChange({[this.property]:t})}else this.props.onChange({[this.property]:s.includes(e)&&s.length<2?[]:[e]})},this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleClear=()=>{this.props.onChange({[this.property]:[]})},this.renderItem=e=>{const t=this.props.severities.includes(e),s=this.getStat(e);return u.createElement(ze.a,{active:t,disabled:0===s&&!t,halfWidth:!0,key:e,name:u.createElement(pt.a,{severity:e}),onClick:this.handleItemClick,stat:Object(P.e)(s),tooltip:Object(E.translate)("severity",e),value:e})}}getStat(e){const{stats:t}=this.props;return t?t[e]:void 0}render(){const{severities:e,stats:t={}}=this.props,s=e.map(e=>Object(E.translate)("severity",e));return u.createElement(qe.a,{property:this.property},u.createElement(Ae.a,{fetching:this.props.fetching,name:Object(E.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:s}),this.props.open&&u.createElement(u.Fragment,null,u.createElement(rt.a,null,ut.map(this.renderItem)),u.createElement(ot.a,{options:Object.keys(t).length,values:e.length})))}}dt.defaultProps={open:!0};var gt=s(994),mt=s(558);const ft=["OPEN","CONFIRMED","REOPENED","RESOLVED","CLOSED"];class bt extends u.PureComponent{constructor(){super(...arguments),this.property="statuses",this.handleItemClick=(e,t)=>{const{statuses:s}=this.props;if(t){const t=at()(s.includes(e)?a()(s,e):[...s,e]);this.props.onChange({[this.property]:t})}else this.props.onChange({[this.property]:s.includes(e)&&s.length<2?[]:[e]})},this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleClear=()=>{this.props.onChange({[this.property]:[]})},this.renderItem=e=>{const t=this.props.statuses.includes(e),s=this.getStat(e);return u.createElement(ze.a,{active:t,disabled:0===s&&!t,halfWidth:!0,key:e,name:u.createElement(mt.a,{resolution:void 0,status:e}),onClick:this.handleItemClick,stat:Object(P.e)(s),tooltip:Object(E.translate)("issue.status",e),value:e})}}getStat(e){const{stats:t}=this.props;return t?t[e]:void 0}render(){const{statuses:e,stats:t={}}=this.props,s=e.map(e=>Object(E.translate)("issue.status",e));return u.createElement(qe.a,{property:this.property},u.createElement(Ae.a,{fetching:this.props.fetching,name:Object(E.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:s}),this.props.open&&u.createElement(u.Fragment,null,u.createElement(rt.a,{title:Object(E.translate)("issues")},ft.map(this.renderItem)),u.createElement(ot.a,{options:Object.keys(t).length,values:e.length})))}}bt.defaultProps={open:!0};var yt=s(402),St=s.n(yt),Ct=s(332);class vt extends u.PureComponent{constructor(){super(...arguments),this.handleSearch=e=>{const{component:t}=this.props,s=t&&["TRK","VW","APP"].includes(t.qualifier)?t.key:void 0;return Object(ke.j)({organization:this.props.organization,project:s,ps:100,q:e}).then(e=>({maxResults:100===e.length,results:e}))},this.getTagName=e=>e,this.loadSearchResultCount=e=>this.props.loadSearchResultCount("tags",{tags:e}),this.renderTag=e=>u.createElement(u.Fragment,null,u.createElement(St.a,{className:"little-spacer-right",fill:Ct.colors.gray60}),e),this.renderSearchResult=(e,t)=>u.createElement(u.Fragment,null,u.createElement(St.a,{className:"little-spacer-right",fill:Ct.colors.gray60}),Object(be.highlightTerm)(e,t))}render(){return u.createElement(ye.a,{facetHeader:Object(E.translate)("issues.facet.tags"),fetching:this.props.fetching,getFacetItemText:this.getTagName,getSearchResultKey:e=>e,getSearchResultText:e=>e,loadSearchResultCount:this.loadSearchResultCount,onChange:this.props.onChange,onSearch:this.handleSearch,onToggle:this.props.onToggle,open:this.props.open,property:"tags",query:o()(this.props.query,"tags"),renderFacetItem:this.renderTag,renderSearchResult:this.renderSearchResult,searchPlaceholder:Object(E.translate)("search.search_for_tags"),stats:this.props.stats,values:this.props.tags})}}var kt=s(369),Ot=s.n(kt),It=s(468);class Et extends u.PureComponent{constructor(){super(...arguments),this.property="types",this.handleItemClick=(e,t)=>{const{types:s}=this.props;if(t){const t=at()(s.includes(e)?a()(s,e):[...s,e]);this.props.onChange({[this.property]:t})}else this.props.onChange({[this.property]:s.includes(e)&&s.length<2?[]:[e]})},this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleClear=()=>{this.props.onChange({[this.property]:[]})},this.renderItem=e=>{const t=this.isFacetItemActive(e),s=this.getStat(e);return u.createElement(ze.a,{active:t,disabled:0===s&&!t,key:e,name:u.createElement("span",{className:"display-flex-center"},u.createElement(Ot.a,{className:"little-spacer-right",query:e})," ",Object(E.translate)("issue.type",e)),onClick:this.handleItemClick,stat:Object(P.e)(s),value:e})}}getStat(e){const{stats:t}=this.props;return t?t[e]:void 0}isFacetItemActive(e){return this.props.types.includes(e)}render(){const{types:e,stats:t={}}=this.props,s=e.map(e=>Object(E.translate)("issue.type",e));return u.createElement(qe.a,{property:this.property},u.createElement(Ae.a,{fetching:this.props.fetching,name:Object(E.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:s}),this.props.open&&u.createElement(u.Fragment,null,u.createElement(rt.a,null,It.a.filter(e=>"SECURITY_HOTSPOT"!==e).map(this.renderItem)),u.createElement(ot.a,{options:Object.keys(t).length,values:e.length})))}}Et.defaultProps={open:!0};class xt extends u.PureComponent{renderComponentFacets(){const{component:e,facets:t,loadingFacets:s,openFacets:n,query:a}=this.props;if(!e)return null;const r={componentKey:e.key,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,query:a};return u.createElement(u.Fragment,null,"DIR"!==e.qualifier&&u.createElement(Ve,Object.assign({directories:a.directories,fetching:!0===s.directories,open:!!n.directories,stats:t.directories},r)),u.createElement(Ge,Object.assign({fetching:!0===s.files,fileUuids:a.files,open:!!n.files,referencedComponents:this.props.referencedComponentsById,stats:t.files},r)))}render(){const{component:e,facets:t,hideAuthorFacet:s,openFacets:n,query:a}=this.props,r=!e||!["TRK","BRC","DIR","DEV_PRJ"].includes(e.qualifier),o=!(s||e&&"DEV"===e.qualifier),i=e&&e.organization||this.props.organization&&this.props.organization.key;return u.createElement(u.Fragment,null,u.createElement(Et,{fetching:!0===this.props.loadingFacets.types,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.types,stats:t.types,types:a.types}),u.createElement(dt,{fetching:!0===this.props.loadingFacets.severities,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.severities,severities:a.severities,stats:t.severities}),u.createElement(ct,{fetching:!0===this.props.loadingFacets.resolutions,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.resolutions,resolutions:a.resolutions,resolved:a.resolved,stats:t.resolutions}),u.createElement(bt,{fetching:!0===this.props.loadingFacets.statuses,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.statuses,stats:t.statuses,statuses:a.statuses}),u.createElement(gt.a,{cwe:a.cwe,cweOpen:!!n.cwe,cweStats:t.cwe,fetchingCwe:!0===this.props.loadingFacets.cwe,fetchingOwaspTop10:!0===this.props.loadingFacets.owaspTop10,fetchingSansTop25:!0===this.props.loadingFacets.sansTop25,fetchingSonarSourceSecurity:!0===this.props.loadingFacets.sonarsourceSecurity,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.standards,owaspTop10:a.owaspTop10,owaspTop10Open:!!n.owaspTop10,owaspTop10Stats:t.owaspTop10,query:a,sansTop25:a.sansTop25,sansTop25Open:!!n.sansTop25,sansTop25Stats:t.sansTop25,sonarsourceSecurity:a.sonarsourceSecurity,sonarsourceSecurityOpen:!!n.sonarsourceSecurity,sonarsourceSecurityStats:t.sonarsourceSecurity}),u.createElement(Ke,{component:e,createdAfter:a.createdAfter,createdAt:a.createdAt,createdBefore:a.createdBefore,createdInLast:a.createdInLast,fetching:!0===this.props.loadingFacets.createdAt,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.createdAt,sinceLeakPeriod:a.sinceLeakPeriod,stats:t.createdAt}),u.createElement(et,{fetching:!0===this.props.loadingFacets.languages,languages:a.languages,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.languages,query:a,referencedLanguages:this.props.referencedLanguages,stats:t.languages}),u.createElement(ht,{fetching:!0===this.props.loadingFacets.rules,languages:a.languages,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.rules,organization:i,query:a,referencedRules:this.props.referencedRules,rules:a.rules,stats:t.rules}),u.createElement(vt,{component:e,fetching:!0===this.props.loadingFacets.tags,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.tags,organization:i,query:a,stats:t.tags,tags:a.tags}),r&&u.createElement(st,{component:e,fetching:!0===this.props.loadingFacets.projects,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.projects,organization:this.props.organization,projects:a.projects,query:a,referencedComponents:this.props.referencedComponentsByKey,stats:t.projects}),this.renderComponentFacets(),!this.props.myIssues&&u.createElement(ve,{assigned:a.assigned,assignees:a.assignees,fetching:!0===this.props.loadingFacets.assignees,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.assignees,organization:i,query:a,referencedUsers:this.props.referencedUsers,stats:t.assignees}),o&&u.createElement(Oe,{authors:a.authors,component:e,fetching:!0===this.props.loadingFacets.authors,loadSearchResultCount:this.props.loadSearchResultCount,onChange:this.props.onFilterChange,onToggle:this.props.onFacetToggle,open:!!n.authors,organization:i,query:a,stats:t.authors}))}}s(1689);var jt=s(809),Ft=s.n(jt),Tt=s(322),wt=s.n(Tt),Lt=s(327),Rt=s.n(Lt),Nt=s(438),Pt=s.n(Nt),_t=s(1063),qt=s.n(_t),At=s(340),zt=s.n(At),Bt=s(321),Dt=s(472);const Mt=qt.a,Kt=qt.a;class Ht extends u.PureComponent{constructor(e){super(e),this.mounted=!1,this.loadIssues=()=>this.props.fetchIssues({additionalFields:"actions,transitions",ps:500}),this.getDefaultAssignee=()=>{const{currentUser:e}=this.props,{issues:t}=this.state,s=[];if(Object(Ce.b)(e)){t.filter(t=>t.assignee!==e.login).length>0&&s.push({avatar:e.avatar,label:e.name,value:e.login})}return t.filter(e=>e.assignee).length>0&&s.push({label:Object(E.translate)("unassigned"),value:""}),s},this.handleAssigneeSearch=e=>Object(P.o)(e,this.state.organization).then(({results:e})=>e.map(e=>{const t=e.name||e.login;return{avatar:e.avatar,label:Object(Ce.c)(e)?t:Object(E.translateWithParameters)("user.x_deleted",t),value:e.login}})),this.handleAssigneeSelect=e=>{this.setState({assignee:e})},this.handleTagsSearch=e=>Object(ke.j)({organization:this.state.organization,q:e}).then(e=>e.map(e=>({label:e,value:e}))),this.handleTagsSelect=e=>t=>{this.setState({[e]:t})},this.handleFieldCheck=e=>t=>{t?"notifications"===e&&this.setState({[e]:!0}):this.setState({[e]:void 0})},this.handleRadioTransitionChange=e=>{this.setState({transition:e})},this.handleCommentChange=e=>{this.setState({comment:e.currentTarget.value})},this.handleSelectFieldChange=e=>t=>{t?this.setState({[e]:t.value}):this.setState({[e]:void 0})},this.handleSubmit=e=>{e.preventDefault();const t=Ft()({add_tags:this.state.addTags&&this.state.addTags.map(e=>e.value).join(),assign:this.state.assignee?this.state.assignee.value:null,comment:this.state.comment,do_transition:this.state.transition,remove_tags:this.state.removeTags&&this.state.removeTags.map(e=>e.value).join(),sendNotifications:this.state.notifications,set_severity:this.state.severity,set_type:this.state.type},e=>void 0!==e),s=this.state.issues.map(e=>e.key);this.setState({submitting:!0}),Object(ke.b)(s,t).then(()=>{this.setState({submitting:!1}),this.props.onDone()},e=>{this.setState({submitting:!1}),Object(Bt.a)(e)})},this.renderLoading=()=>u.createElement("div",null,u.createElement("div",{className:"modal-head"},u.createElement("h2",null,Object(E.translate)("bulk_change"))),u.createElement("div",{className:"modal-body"},u.createElement("div",{className:"text-center"},u.createElement("i",{className:"spinner spacer"}))),u.createElement("div",{className:"modal-foot"},u.createElement(m.ResetButtonLink,{onClick:this.props.onClose},Object(E.translate)("cancel")))),this.renderAffected=e=>u.createElement("div",{className:"pull-right note"},"(",Object(E.translateWithParameters)("issue_bulk_change.x_issues",e),")"),this.renderField=(e,t,s,n)=>u.createElement("div",{className:"modal-field",id:"issues-bulk-change-".concat(e)},u.createElement("label",{htmlFor:e},Object(E.translate)(t)),n,void 0!==s&&this.renderAffected(s)),this.renderAssigneeOption=e=>u.createElement("span",null,void 0!==e.avatar&&u.createElement(Se.a,{className:"spacer-right",hash:e.avatar,name:e.label,size:16}),e.label),this.renderAssigneeField=()=>{const e=this.state.issues.filter(Ut("assign")).length;if(0===e)return null;const t=u.createElement(Mt,{className:"input-super-large",clearable:!0,defaultOptions:this.getDefaultAssignee(),onSearch:this.handleAssigneeSearch,onSelect:this.handleAssigneeSelect,renderOption:this.renderAssigneeOption,resetOnBlur:!1,value:this.state.assignee});return this.renderField("assignee","issue.assign.formlink",e,t)},this.renderTypeField=()=>{const e=this.state.issues.filter(Ut("set_type")).length;if(0===e)return null;const t=["BUG","VULNERABILITY","CODE_SMELL"].map(e=>({label:Object(E.translate)("issue.type",e),value:e})),s=e=>u.createElement(u.Fragment,null,u.createElement(Ot.a,{query:e.value}),u.createElement("span",{className:"little-spacer-left"},e.label)),n=u.createElement(zt.a,{className:"input-super-large",clearable:!0,onChange:this.handleSelectFieldChange("type"),optionRenderer:s,options:t,searchable:!1,value:this.state.type,valueRenderer:s});return this.renderField("type","issue.set_type",e,n)},this.renderSeverityField=()=>{const e=this.state.issues.filter(Ut("set_severity")).length;if(0===e)return null;const t=["BLOCKER","CRITICAL","MAJOR","MINOR","INFO"].map(e=>({label:Object(E.translate)("severity",e),value:e})),s=u.createElement(zt.a,{className:"input-super-large",clearable:!0,onChange:this.handleSelectFieldChange("severity"),optionRenderer:e=>u.createElement(pt.a,{severity:e.value}),options:t,searchable:!1,value:this.state.severity,valueRenderer:e=>u.createElement(pt.a,{severity:e.value})});return this.renderField("severity","issue.set_severity",e,s)},this.renderTagOption=e=>u.createElement("span",null,e.label),this.renderTagsField=(e,t,s)=>{const{initialTags:n}=this.state,a=this.state.issues.filter(Ut("set_tags")).length;if(void 0===n||0===a)return null;const r=u.createElement(Kt,{canCreate:s,className:"input-super-large",clearable:!0,defaultOptions:this.state.initialTags,minimumQueryLength:0,multi:!0,onMultiSelect:this.handleTagsSelect(e),onSearch:this.handleTagsSearch,promptTextCreator:Wt,renderOption:this.renderTagOption,resetOnBlur:!1,value:this.state[e]});return this.renderField(e,t,a,r)},this.renderTransitionsField=()=>{const e=this.getAvailableTransitions(this.state.issues);return 0===e.length?null:u.createElement("div",{className:"modal-field"},u.createElement("label",null,Object(E.translate)("issue.transition")),e.map(e=>u.createElement("span",{className:"bulk-change-radio-button display-flex-center display-flex-space-between",key:e.transition},u.createElement(Pt.a,{checked:this.state.transition===e.transition,onCheck:this.handleRadioTransitionChange,value:e.transition},Object(E.translate)("issue.transition",e.transition)),this.renderAffected(e.count))))},this.renderCommentField=()=>0===this.state.issues.filter(Ut("comment")).length?null:u.createElement("div",{className:"modal-field"},u.createElement("label",{htmlFor:"comment"},u.createElement("span",{className:"text-middle"},Object(E.translate)("issue.comment.formlink")),u.createElement(wt.a,{className:"spacer-left",overlay:Object(E.translate)("issue_bulk_change.comment.help")})),u.createElement("textarea",{id:"comment",onChange:this.handleCommentChange,rows:4,value:this.state.comment||""}),u.createElement(Dt.a,{className:"modal-field-descriptor text-right"})),this.renderNotificationsField=()=>u.createElement(b.a,{checked:void 0!==this.state.notifications,className:"display-inline-block spacer-top",id:"send-notifications",onCheck:this.handleFieldCheck("notifications"),right:!0},u.createElement("strong",{className:"little-spacer-right"},Object(E.translate)("issue.send_notifications"))),this.renderForm=()=>{const{issues:e,paging:t,submitting:s}=this.state,n=t&&t.total>500;return u.createElement("form",{id:"bulk-change-form",onSubmit:this.handleSubmit},u.createElement("div",{className:"modal-head"},u.createElement("h2",null,Object(E.translateWithParameters)("issue_bulk_change.form.title",e.length))),u.createElement("div",{className:"modal-body modal-container"},n&&u.createElement(C.Alert,{variant:"warning"},u.createElement(g.FormattedMessage,{defaultMessage:Object(E.translate)("issue_bulk_change.max_issues_reached"),id:"issue_bulk_change.max_issues_reached",values:{max:u.createElement("strong",null,500)}})),this.renderAssigneeField(),this.renderTypeField(),this.renderSeverityField(),this.renderTagsField("addTags","issue.add_tags",!0),this.renderTagsField("removeTags","issue.remove_tags",!1),this.renderTransitionsField(),this.renderCommentField(),e.length>0&&this.renderNotificationsField(),0===e.length&&u.createElement(C.Alert,{variant:"warning"},Object(E.translate)("issue_bulk_change.no_match"))),u.createElement("div",{className:"modal-foot"},s&&u.createElement("i",{className:"spinner spacer-right"}),u.createElement(m.SubmitButton,{disabled:s||0===e.length,id:"bulk-change-submit"},Object(E.translate)("apply")),u.createElement(m.ResetButtonLink,{onClick:this.props.onClose},Object(E.translate)("cancel"))))};let t=e.component&&e.component.organization;e.organization&&!t&&(t=e.organization.key),this.state={initialTags:[],issues:[],loading:!0,submitting:!1,organization:t}}componentDidMount(){this.mounted=!0,Promise.all([this.loadIssues(),Object(ke.j)({organization:this.state.organization})]).then(([{issues:e,paging:t},s])=>{this.mounted&&(e.length>500&&(e=e.slice(0,500)),this.setState({initialTags:s.map(e=>({label:e,value:e})),issues:e,loading:!1,paging:t}))},()=>{})}componentWillUnmount(){this.mounted=!1}getAvailableTransitions(e){const t={};return e.forEach(e=>{e.transitions&&e.transitions.forEach(e=>{void 0!==t[e]?t[e]++:t[e]=1})}),fe()(Object.keys(t)).map(e=>({transition:e,count:t[e]}))}render(){return u.createElement(Rt.a,{contentLabel:"modal",onRequestClose:this.props.onClose,size:"small"},this.state.loading?this.renderLoading():this.renderForm())}}function Ut(e){return t=>t.actions&&t.actions.includes(e)}function Wt(e){return"+ ".concat(e)}var Vt=s(796);function Jt({component:e,issue:t,organization:s,selectedFlowIndex:n,selectedLocationIndex:a}){const r=!s&&(!e||["VW","SVW"].includes(e.qualifier)),o=!e||!["TRK","BRC","DIR"].includes(e.qualifier),i=!e||!["BRC","DIR"].includes(e.qualifier),c=Object(P.h)(t,n,a),l=c?c.componentName:t.componentLongName;return u.createElement("div",{className:"component-name text-ellipsis"},r&&u.createElement(tt.a,{link:!1,organizationKey:t.organization}),o&&u.createElement("span",{title:t.projectName},Object(te.limitComponentName)(t.projectName),u.createElement("span",{className:"slash-separator"})),i&&void 0!==t.subProject&&void 0!==t.subProjectName&&u.createElement("span",{title:t.subProjectName},Object(te.limitComponentName)(t.subProjectName),u.createElement("span",{className:"slash-separator"})),Object(te.collapsePath)(l||""))}function Gt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(s),!0).forEach((function(t){Yt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Qt extends u.PureComponent{constructor(){super(...arguments),this.handleFilter=(e,t)=>{const{onFilterChange:s}=this.props,n={issues:[]};if(e.startsWith("tag###")){s(Xt({},n,{tags:[e.substr(6)]}))}else switch(e){case"type":s(Xt({},n,{types:[t.type]}));break;case"severity":s(Xt({},n,{severities:[t.severity]}));break;case"status":s(Xt({},n,{statuses:[t.status]}));break;case"resolution":t.resolution?s(Xt({},n,{resolved:!0,resolutions:[t.resolution]})):s(Xt({},n,{resolved:!1,resolutions:[]}));break;case"assignee":t.assignee?s(Xt({},n,{assigned:!0,assignees:[t.assignee]})):s(Xt({},n,{assigned:!1,assignees:[]}));break;case"rule":s(Xt({},n,{rules:[t.rule]}));break;case"project":s(Xt({},n,{projects:[t.projectKey]}));break;case"module":t.subProjectUuid&&s(Xt({},n,{modules:[t.subProjectUuid]}));break;case"file":s(Xt({},n,{files:[t.componentUuid]}))}}}render(){const{branchLike:e,component:t,issue:s,previousIssue:n}=this.props,a=!n||n.component!==s.component;return u.createElement("div",{className:"issues-workspace-list-item"},a&&u.createElement("div",{className:"issues-workspace-list-component note"},u.createElement(Jt,{component:t,issue:this.props.issue,organization:this.props.organization})),u.createElement(Vt.a,{branchLike:e,checked:this.props.checked,issue:s,onChange:this.props.onChange,onCheck:this.props.onCheck,onClick:this.props.onClick,onFilter:this.handleFilter,onPopupToggle:this.props.onPopupToggle,openPopup:this.props.openPopup,selected:this.props.selected}))}}class Zt extends u.PureComponent{constructor(){super(...arguments),this.state={prerender:!0}}componentDidMount(){setTimeout(()=>{this.setState({prerender:!1}),this.props.selectedIssue&&Object(P.n)(this.props.selectedIssue.key,!1)},42)}render(){const{branchLike:e,checked:t,component:s,issues:n,openPopup:a,selectedIssue:r}=this.props,{prerender:o}=this.state;return o?u.createElement("div",null,u.createElement("i",{className:"spinner"})):u.createElement("div",null,n.map((o,i)=>u.createElement(Qt,{branchLike:e,checked:t.includes(o.key),component:s,issue:o,key:o.key,onChange:this.props.onIssueChange,onCheck:this.props.onIssueCheck,onClick:this.props.onIssueClick,onFilterChange:this.props.onFilterChange,onPopupToggle:this.props.onPopupToggle,openPopup:a&&a.issue===o.key?a.name:void 0,organization:this.props.organization,previousIssue:i>0?n[i-1]:void 0,selected:null!=r&&r.key===o.key})))}}var $t=s(589),es=s(323);var ts=Object(es.lazyLoadComponent)(()=>Promise.all([s.e(2),s.e(16),s.e(359)]).then(s.bind(null,1923)),"CrossComponentSourceViewer");class ss extends u.PureComponent{constructor(){super(...arguments),this.scrollToIssue=(e=!0)=>{if(this.node){const t=this.node.querySelector('[data-issue="'.concat(this.props.openIssue.key,'"]'));t&&this.handleScroll(t,void 0,e)}},this.handleScroll=(e,t=window.innerHeight/2,s=!0)=>{Object(M.scrollToElement)(e,{topOffset:t-100,bottomOffset:t,smooth:s})},this.handleLoaded=()=>{this.scrollToIssue(!1)}}componentDidUpdate(e){const{openIssue:t,selectedLocationIndex:s}=this.props,n=-1===s&&s!==e.selectedLocationIndex;e.openIssue.component!==t.component||e.openIssue===t&&!n||this.scrollToIssue()}render(){const{openIssue:e,selectedFlowIndex:t,selectedLocationIndex:s}=this.props,n=Object(P.f)(e,t).map((e,t)=>(e.index=t,e)),a=Object(P.h)(e,t,s),r=this.props.locationsNavigator&&void 0!==s?a&&{index:s,text:a.msg}:void 0;if(n.length>0)return u.createElement("div",{ref:e=>this.node=e},u.createElement(ts,{branchLike:this.props.branchLike,highlightedLocationMessage:r,issue:e,issues:this.props.issues,locations:n,onIssueChange:this.props.onIssueChange,onLoaded:this.handleLoaded,onLocationSelect:this.props.onLocationSelect,scroll:this.handleScroll,selectedFlowIndex:t}));{const t=a?a.textRange.startLine:e.textRange&&e.textRange.endLine,s=a?a.component:e.component,o=void 0!==n&&n.every(e=>!e.msg),i=n.filter(e=>e.component===s),c=s===e.component?this.props.loadIssues:()=>Promise.resolve([]),l=s===e.component?e.key:void 0;return u.createElement("div",{ref:e=>this.node=e},u.createElement($t.a,{aroundLine:t,branchLike:this.props.branchLike,component:s,displayAllIssues:!0,displayIssueLocationsCount:!0,displayIssueLocationsLink:!1,displayLocationMarkers:!o,highlightedLocationMessage:r,highlightedLocations:i,loadIssues:c,onIssueChange:this.props.onIssueChange,onIssueSelect:this.props.onIssueSelect,onLoaded:this.handleLoaded,onLocationSelect:this.props.onLocationSelect,scroll:this.handleScroll,selectedIssue:l,slimHeader:!0}))}}}class ns extends u.PureComponent{constructor(){super(...arguments),this.handleClick=e=>()=>{this.props.onMyIssuesChange(e)}}render(){const{myIssues:e}=this.props;return u.createElement("div",{className:"issues-my-issues-filter"},u.createElement("div",{className:"button-group"},u.createElement(m.Button,{className:e?"button-active":void 0,onClick:this.handleClick(!0)},Object(E.translate)("issues.my_issues")),u.createElement(m.Button,{className:e?void 0:"button-active",onClick:this.handleClick(!1)},Object(E.translate)("all"))))}}s(680);function as(){return u.createElement("div",{className:"empty-search"},u.createElement("h3",null,Object(E.translate)("issues.no_issues")))}function rs(){return u.createElement("div",{className:"empty-search"},u.createElement("h3",null,Object(E.translate)("issues.no_my_issues")))}var os=s(555);function is({effort:e}){return u.createElement("div",{className:"display-inline-block bordered-left spacer-left"},u.createElement("div",{className:"spacer-left"},u.createElement(g.FormattedMessage,{defaultMessage:Object(E.translate)("issue.x_effort"),id:"issue.x_effort",values:{0:u.createElement("strong",null,Object(J.formatMeasure)(e,"WORK_DUR"))}})))}class cs extends u.PureComponent{renderShortcuts(){return u.createElement("span",{className:"note big-spacer-right"},u.createElement("span",{className:"big-spacer-right"},u.createElement("span",{className:"shortcut-button little-spacer-right"},"↑"),u.createElement("span",{className:"shortcut-button little-spacer-right"},"↓"),Object(E.translate)("issues.to_select_issues")),u.createElement("span",null,u.createElement("span",{className:"shortcut-button little-spacer-right"},"←"),u.createElement("span",{className:"shortcut-button little-spacer-right"},"→"),Object(E.translate)("issues.to_navigate")))}render(){const{effortTotal:e,paging:t,selectedIndex:s}=this.props;return u.createElement("div",{className:"pull-right"},this.renderShortcuts(),u.createElement("div",{className:"issues-page-actions"},u.createElement(pe.a,{onClick:this.props.onReload}),null!=t&&u.createElement(de,{className:"spacer-left",current:s,total:t.total}),void 0!==e&&u.createElement(is,{effort:e})),this.props.canSetHome&&u.createElement(os.a,{className:"huge-spacer-left",currentPage:Object(N.isSonarCloud)()?{type:"MY_ISSUES"}:{type:"ISSUES"}}))}}function ls(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)s=r[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)s=r[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function hs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ps(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(s),!0).forEach((function(t){us(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function us(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ds={resolved:"false"};class gs extends u.PureComponent{constructor(e){super(e),this.mounted=!1,this.handleKeyDown=e=>{"issues"===p.getScope()&&(18===e.keyCode?(e.preventDefault(),this.setState(_)):40===e.keyCode&&e.altKey?(e.preventDefault(),this.selectNextLocation()):38===e.keyCode&&e.altKey?(e.preventDefault(),this.selectPreviousLocation()):37===e.keyCode&&e.altKey?(e.preventDefault(),this.selectPreviousFlow()):39===e.keyCode&&e.altKey&&(e.preventDefault(),this.selectNextFlow()))},this.handleKeyUp=e=>{"issues"===p.getScope()&&18===e.keyCode&&this.setState(q)},this.getOpenIssue=(e,t)=>{const s=Object(P.g)(e.location.query);return s?t.find(e=>e.key===s):void 0},this.selectNextIssue=()=>{const{issues:e}=this.state,t=this.getSelectedIndex();void 0!==t&&t<e.length-1&&(this.state.openIssue?this.openIssue(e[t+1].key):this.setState({selected:e[t+1].key,selectedFlowIndex:void 0,selectedLocationIndex:void 0}))},this.selectPreviousIssue=()=>{const{issues:e}=this.state,t=this.getSelectedIndex();void 0!==t&&t>0&&(this.state.openIssue?this.openIssue(e[t-1].key):this.setState({selected:e[t-1].key,selectedFlowIndex:void 0,selectedLocationIndex:void 0}))},this.openIssue=e=>{const t={pathname:this.props.location.pathname,query:ps({},Object(P.p)(this.state.query),{},Object(R.d)(this.props.branchLike),{id:this.props.component&&this.props.component.key,myIssues:this.state.myIssues?"true":void 0,open:e})};this.state.openIssue?t.query.open&&t.query.open===this.state.openIssue.key?this.setState({locationsNavigator:!1,selectedFlowIndex:void 0,selectedLocationIndex:void 0},this.scrollToSelectedIssue):this.props.router.replace(t):this.props.router.push(t)},this.closeIssue=()=>{this.state.query&&this.props.router.push({pathname:this.props.location.pathname,query:ps({},Object(P.p)(this.state.query),{},Object(R.d)(this.props.branchLike),{id:this.props.component&&this.props.component.key,myIssues:this.state.myIssues?"true":void 0,open:void 0})})},this.openSelectedIssue=()=>{const{selected:e}=this.state;e&&this.openIssue(e)},this.scrollToSelectedIssue=(e=!0)=>{const{selected:t}=this.state;t&&Object(P.n)(t,e)},this.fetchIssues=(e,t=!1,s=!0)=>{const{component:n}=this.props,{myIssues:a,openFacets:r,query:o}=this.state,i=t?Object.keys(r).filter(e=>r[e]).filter(e=>e!==P.a).map(P.j).join(","):void 0,c=n&&n.organization||this.props.organization&&this.props.organization.key,l=ps({},Object(R.d)(this.props.branchLike),{componentKeys:n&&n.key,s:"FILE_LINE"},Object(P.p)(o),{ps:"100",organization:c,facets:i},e);return o.sort&&Object.assign(l,{asc:"false"}),a&&Object.assign(l,{assignees:"__me__"}),this.props.fetchIssues(l,Boolean(s&&this.props.multiOrganizations))},this.fetchIssuesPage=e=>this.fetchIssues({p:e}),this.fetchIssuesUntil=(e,t)=>{const s=(e,n)=>this.fetchIssuesPage(e).then(a=>{let{issues:r,paging:o}=a,i=ls(a,["issues","paging"]);const c=[...n,...r];return t(r,o)?ps({issues:c,paging:o},i):s(e+1,c)});return s(e,[])},this.fetchMoreIssues=()=>{const{paging:e}=this.state;if(!e)return Promise.reject();const t=e.pageIndex+1;return this.setState({checkAll:!1,loadingMore:!0}),this.fetchIssuesPage(t).then(e=>{this.mounted&&this.setState(t=>({loadingMore:!1,issues:[...t.issues,...e.issues],paging:e.paging}))},()=>{this.mounted&&this.setState({loadingMore:!1})})},this.fetchIssuesForComponent=(e,t,s)=>{const{issues:n,openIssue:a,paging:r}=this.state;if(!a||!r)return Promise.reject(void 0);const o=e=>e.component===a.component,i=(e,t)=>{const n=e[e.length-1];return t.total<=t.pageIndex*t.pageSize||(n.component!==a.component||void 0!==n.textRange&&n.textRange.endLine>s)};return i(n,r)?Promise.resolve(n.filter(o)):(this.setState({loading:!0}),this.fetchIssuesUntil(r.pageIndex+1,i).then(e=>{const t=[...n,...e.issues];return this.mounted&&this.setState({issues:t,loading:!1,paging:e.paging}),t.filter(o)},()=>(this.mounted&&this.setState({loading:!1}),[])))},this.fetchFacet=e=>{const t="projects"===e;return this.fetchIssues({ps:1,facets:Object(P.j)(e)},!1,t).then(t=>{let{facets:s}=t,n=ls(t,["facets"]);this.mounted&&this.setState(t=>({facets:ps({},t.facets,{},Object(P.k)(s)),loadingFacets:o()(t.loadingFacets,e),referencedComponentsById:ps({},t.referencedComponentsById,{},c()(n.components,"uuid")),referencedComponentsByKey:ps({},t.referencedComponentsByKey,{},c()(n.components,"key")),referencedLanguages:ps({},t.referencedLanguages,{},c()(n.languages,"key")),referencedRules:ps({},t.referencedRules,{},c()(n.rules,"key")),referencedUsers:ps({},t.referencedUsers,{},c()(n.users,"login"))}))},()=>{})},this.isFiltered=()=>{const e=Object(P.p)(this.state.query);return!Object(P.d)(e,ds)},this.getCheckedIssues=()=>{const e=this.state.checked.map(e=>this.state.issues.find(t=>t.key===e)).filter(e=>void 0!==e),t={pageIndex:1,pageSize:e.length,total:e.length};return Promise.resolve({issues:e,paging:t})},this.getButtonLabel=(e,t,s)=>{if(e.length>0){let n;return n=t&&s?s.total>500?500:s.total:Math.min(e.length,500),Object(E.translateWithParameters)("issues.bulk_change_X_issues",n)}return Object(E.translate)("bulk_change")},this.handleFilterChange=e=>{this.props.router.push({pathname:this.props.location.pathname,query:ps({},Object(P.p)(ps({},this.state.query,{},e)),{},Object(R.d)(this.props.branchLike),{id:this.props.component&&this.props.component.key,myIssues:this.state.myIssues?"true":void 0})}),this.setState(({openFacets:t})=>({openFacets:ps({},t,{sonarsourceSecurity:Object(P.q)(t,e),standards:Object(P.s)(t,e)})}))},this.handleMyIssuesChange=e=>{this.closeFacet("assignees"),this.props.component||Object(P.m)(e),this.props.router.push({pathname:this.props.location.pathname,query:ps({},Object(P.p)(ps({},this.state.query,{assigned:!0,assignees:[]})),{},Object(R.d)(this.props.branchLike),{id:this.props.component&&this.props.component.key,myIssues:e?"true":void 0})})},this.loadSearchResultCount=(e,t)=>{const{component:s}=this.props,{myIssues:n,query:a}=this.state,r=s&&s.organization||this.props.organization&&this.props.organization.key,o=ps({},Object(R.d)(this.props.branchLike),{componentKeys:s&&s.key,facets:Object(P.j)(e),s:"FILE_LINE"},Object(P.p)(ps({},a,{},t)),{ps:1,organization:r});return n&&Object.assign(o,{assignees:"__me__"}),this.props.fetchIssues(o,!1).then(({facets:t})=>Object(P.k)(t)[e])},this.closeFacet=e=>{this.setState(t=>({openFacets:ps({},t.openFacets,{[e]:!1})}))},this.handleFacetToggle=e=>{this.setState(t=>{const s=!t.openFacets[e],n={loadingFacets:t.loadingFacets,openFacets:ps({},t.openFacets,{[e]:s})};return s&&e===P.a&&(n.openFacets.sonarsourceSecurity=Object(P.q)(n.openFacets,t.query),e=n.openFacets.sonarsourceSecurity?"sonarsourceSecurity":e),e===P.a||t.facets[e]||(n.loadingFacets[e]=!0,this.fetchFacet(e)),n})},this.handleReset=()=>{this.props.router.push({pathname:this.props.location.pathname,query:ps({},ds,{},Object(R.d)(this.props.branchLike),{id:this.props.component&&this.props.component.key,myIssues:this.state.myIssues?"true":void 0})})},this.handlePopupToggle=(e,t,s)=>{this.setState(n=>{const{openPopup:a}=n,r=a&&a.name===t&&a.issue===e;return!1===s||r?!0!==s&&r?ps({},n,{openPopup:void 0}):n:ps({},n,{openPopup:{issue:e,name:t}})})},this.handleIssueCheck=e=>{this.setState(t=>({checkAll:!1,checked:t.checked.includes(e)?a()(t.checked,e):[...t.checked,e]}))},this.handleIssueChange=e=>{this.refreshBranchStatus(),this.setState(t=>({issues:t.issues.map(t=>t.key===e.key?e:t)}))},this.handleOpenBulkChange=()=>{p.setScope("issues-bulk-change"),this.setState({bulkChangeModal:!0})},this.handleCloseBulkChange=()=>{p.setScope("issues"),this.setState({bulkChangeModal:!1})},this.handleBulkChangeDone=()=>{this.setState({checkAll:!1}),this.refreshBranchStatus(),this.fetchFirstIssues(),this.handleCloseBulkChange()},this.handleReload=()=>{this.fetchFirstIssues(),this.refreshBranchStatus();const{branchLike:e,onBranchesChange:t}=this.props;t&&Object(R.h)(e)&&t()},this.handleReloadAndOpenFirst=()=>{this.fetchFirstIssues().then(e=>{e.length>0&&this.openIssue(e[0].key)},()=>{})},this.selectLocation=e=>{var t;this.setState((t=e,e=>{const{selectedLocationIndex:s,openIssue:n}=e;return n?s===t?{locationsNavigator:!1,selectedLocationIndex:void 0}:{locationsNavigator:!0,selectedLocationIndex:t}:null}))},this.selectNextLocation=()=>{this.setState(A)},this.selectPreviousLocation=()=>{this.setState(z)},this.handleCheckAll=e=>{e?this.setState(e=>({checkAll:!0,checked:e.issues.map(e=>e.key)})):this.setState({checkAll:!1,checked:[]})},this.selectFlow=e=>{var t;this.setState((t=e,()=>({locationsNavigator:!0,selectedFlowIndex:t,selectedLocationIndex:0})))},this.selectNextFlow=()=>{this.setState(B)},this.selectPreviousFlow=()=>{this.setState(D)},this.refreshBranchStatus=()=>{const{branchLike:e,component:t}=this.props;e&&t&&Object(R.h)(e)&&this.props.fetchBranchStatus(e,t.key)};const t=Object(P.l)(e.location.query);this.state={bulkChangeModal:!1,checked:[],facets:{},issues:[],loading:!0,loadingFacets:{},loadingMore:!1,locationsNavigator:!1,myIssues:e.myIssues||Object(P.c)(e.location.query),openFacets:{owaspTop10:Object(P.r)({},t,"owaspTop10"),sansTop25:Object(P.r)({},t,"sansTop25"),severities:!0,sonarsourceSecurity:Object(P.q)({},t),standards:Object(P.s)({},t),types:!0},query:t,referencedComponentsById:{},referencedComponentsByKey:{},referencedLanguages:{},referencedRules:{},referencedUsers:{},selected:Object(P.g)(e.location.query)},this.refreshBranchStatus=h()(this.refreshBranchStatus,1e3)}componentDidMount(){this.mounted=!0,!this.state.myIssues||this.props.currentUser.isLoggedIn?(Object(x.addWhitePageClass)(),Object(x.addSideBarClass)(),this.attachShortcuts(),this.fetchFirstIssues()):I()()}componentWillReceiveProps(e){const{issues:t,selected:s}=this.state,n=this.getOpenIssue(e,t);n&&n.key!==s&&this.setState({locationsNavigator:!1,selected:n.key,selectedFlowIndex:void 0,selectedLocationIndex:void 0}),n||this.setState({selectedFlowIndex:void 0,selectedLocationIndex:void 0}),this.setState({myIssues:e.myIssues||Object(P.c)(e.location.query),openIssue:n,query:Object(P.l)(e.location.query)})}componentDidUpdate(e,t){const{query:s}=this.props.location,{query:n}=e.location;e.component===this.props.component&&Object(R.i)(e.branchLike,this.props.branchLike)&&Object(P.d)(n,s)&&Object(P.c)(n)===Object(P.c)(s)?this.state.openIssue||t.selected===this.state.selected&&!t.openIssue||this.scrollToSelectedIssue():(this.fetchFirstIssues(),this.setState({checkAll:!1}))}componentWillUnmount(){this.detachShortcuts(),this.mounted=!1,Object(x.removeWhitePageClass)(),Object(x.removeSideBarClass)()}attachShortcuts(){p.setScope("issues"),p("up","issues",()=>(this.selectPreviousIssue(),!1)),p("down","issues",()=>(this.selectNextIssue(),!1)),p("right","issues",()=>(this.openSelectedIssue(),!1)),p("left","issues",()=>(1!==this.state.query.issues.length&&this.closeIssue(),!1)),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}detachShortcuts(){p.deleteScope("issues"),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}getSelectedIndex(){const{issues:e=[],selected:t}=this.state,s=e.findIndex(e=>e.key===t);return-1!==s?s:void 0}fetchFirstIssues(){const e=this.props.location.query,t=Object(P.g)(this.props.location.query);let s;return this.setState({checked:[],loading:!0}),s=void 0!==t?this.fetchIssuesUntil(1,(e,s)=>s.total<=s.pageIndex*s.pageSize||s.pageIndex*s.pageSize>=1e3||e.some(e=>e.key===t)):this.fetchIssues({},!0),s.then(s=>{let{effortTotal:n,facets:a,issues:r,paging:o}=s,i=ls(s,["effortTotal","facets","issues","paging"]);if(this.mounted&&Object(P.d)(e,this.props.location.query)){const e=this.getOpenIssue(this.props,r);let s=void 0;r.length>0&&(s=e?e.key:r[0].key),this.setState(l=>({cannotShowOpenIssue:Boolean(t&&!e),effortTotal:n,facets:ps({},l.facets,{},Object(P.k)(a)),loading:!1,issues:r,openIssue:e,paging:o,referencedComponentsById:c()(i.components,"uuid"),referencedComponentsByKey:c()(i.components,"key"),referencedLanguages:c()(i.languages,"key"),referencedRules:c()(i.rules,"key"),referencedUsers:c()(i.users,"login"),selected:s,selectedFlowIndex:void 0,selectedLocationIndex:void 0}))}return r},()=>(this.mounted&&Object(P.d)(e,this.props.location.query)&&this.setState({loading:!1}),[]))}renderBulkChange(e){const{component:t,currentUser:s}=this.props,{checkAll:n,bulkChangeModal:a,checked:r,issues:o,paging:i}=this.state,c=r.length>0&&o.length===r.length,l=r.length>0&&!c,h=c||l;return!s.isLoggedIn||e?null:u.createElement("div",{className:"pull-left"},u.createElement(b.a,{checked:h,className:"spacer-right text-middle",disabled:0===o.length,id:"issues-selection",onCheck:this.handleCheckAll,thirdState:l,title:Object(E.translate)("issues.select_all_issues")}),u.createElement(m.Button,{disabled:0===r.length,id:"issues-bulk-change",onClick:this.handleOpenBulkChange},this.getButtonLabel(r,n,i)),a&&u.createElement(Ht,{component:t,currentUser:s,fetchIssues:n?this.fetchIssues:this.getCheckedIssues,onClose:this.handleCloseBulkChange,onDone:this.handleBulkChangeDone,organization:this.props.organization}))}renderFacets(){const{component:e,currentUser:t,userOrganizations:s}=this.props,{query:n}=this.state,a=e&&e.organization||this.props.organization&&this.props.organization.key,r=!Object(N.isSonarCloud)()||s.find(e=>e.key===a),o=this.props.hideAuthorFacet||Object(N.isSonarCloud)()&&this.props.myIssues||!r;return u.createElement("div",{className:"layout-page-filters"},t.isLoggedIn&&!Object(N.isSonarCloud)()&&u.createElement(ns,{myIssues:this.state.myIssues,onMyIssuesChange:this.handleMyIssuesChange}),u.createElement(w.a,{displayReset:this.isFiltered(),onReset:this.handleReset}),u.createElement(xt,{component:e,facets:this.state.facets,hideAuthorFacet:o,loadSearchResultCount:this.loadSearchResultCount,loadingFacets:this.state.loadingFacets,myIssues:this.state.myIssues,onFacetToggle:this.handleFacetToggle,onFilterChange:this.handleFilterChange,openFacets:this.state.openFacets,organization:this.props.organization,query:n,referencedComponentsById:this.state.referencedComponentsById,referencedComponentsByKey:this.state.referencedComponentsByKey,referencedLanguages:this.state.referencedLanguages,referencedRules:this.state.referencedRules,referencedUsers:this.state.referencedUsers}))}renderConciseIssuesList(){const{issues:e,loadingMore:t,paging:s,query:n}=this.state;return u.createElement("div",{className:"layout-page-filters"},u.createElement(ge,{displayBackButton:1!==n.issues.length,loading:this.state.loading,onBackClick:this.closeIssue,onReload:this.handleReloadAndOpenFirst,paging:s,selectedIndex:this.getSelectedIndex()}),u.createElement(ie,{issues:e,onFlowSelect:this.selectFlow,onIssueSelect:this.openIssue,onLocationSelect:this.selectLocation,selected:this.state.selected,selectedFlowIndex:this.state.selectedFlowIndex,selectedLocationIndex:this.state.selectedLocationIndex}),s&&s.total>0&&u.createElement(S.a,{count:e.length,loadMore:this.fetchMoreIssues,loading:t,total:s.total}))}renderSide(e){return u.createElement(L.a,{className:"layout-page-side-outer"},({top:t})=>u.createElement("div",{className:"layout-page-side",style:{top:t}},u.createElement("div",{className:"layout-page-side-inner"},u.createElement(j.a,{anchor:"issues_sidebar",label:e?Object(E.translate)("issues.skip_to_list"):Object(E.translate)("issues.skip_to_filters"),weight:10}),e?this.renderConciseIssuesList():this.renderFacets())))}renderList(){const{branchLike:e,component:t,currentUser:s,organization:n}=this.props,{issues:a,loading:r,loadingMore:o,openIssue:i,paging:c}=this.state,l=this.getSelectedIndex(),h=void 0!==l?a[l]:void 0;if(!c||i)return null;let p=null;return 0!==c.total||r||(p=this.isFiltered()?u.createElement(T.a,null):this.state.myIssues?u.createElement(rs,null):u.createElement(as,null)),u.createElement("div",null,c.total>0&&u.createElement(Zt,{branchLike:e,checked:this.state.checked,component:t,issues:a,onFilterChange:this.handleFilterChange,onIssueChange:this.handleIssueChange,onIssueCheck:s.isLoggedIn?this.handleIssueCheck:void 0,onIssueClick:this.openIssue,onPopupToggle:this.handlePopupToggle,openPopup:this.state.openPopup,organization:n,selectedIssue:h}),c.total>0&&u.createElement(S.a,{count:a.length,loadMore:this.fetchMoreIssues,loading:o,total:c.total}),p)}renderHeader({openIssue:e,paging:t,selectedIndex:s}){return e?u.createElement(j.a,{anchor:"issues_main"}):u.createElement("div",{className:"layout-page-header-panel layout-page-main-header issues-main-header"},u.createElement("div",{className:"layout-page-header-panel-inner layout-page-main-header-inner"},u.createElement("div",{className:"layout-page-main-inner"},u.createElement(j.a,{anchor:"issues_main"}),this.renderBulkChange(e),u.createElement(cs,{canSetHome:Boolean(!this.props.organization&&!this.props.component&&(!Object(N.isSonarCloud)()||this.props.myIssues)),effortTotal:this.state.effortTotal,onReload:this.handleReload,paging:t,selectedIndex:s}))))}renderPage(){const{cannotShowOpenIssue:e,checkAll:t,issues:s,loading:n,openIssue:a,paging:r}=this.state;return u.createElement("div",{className:"layout-page-main-inner"},a?u.createElement(ss,{branchLike:Object(R.a)(a.branch,a.pullRequest),issues:s,loadIssues:this.fetchIssuesForComponent,locationsNavigator:this.state.locationsNavigator,onIssueChange:this.handleIssueChange,onIssueSelect:this.openIssue,onLocationSelect:this.selectLocation,openIssue:a,selectedFlowIndex:this.state.selectedFlowIndex,selectedLocationIndex:this.state.selectedLocationIndex}):u.createElement(k.a,{loading:n},t&&r&&r.total>500&&u.createElement(C.Alert,{className:"big-spacer-bottom",variant:"warning"},u.createElement(g.FormattedMessage,{defaultMessage:Object(E.translate)("issue_bulk_change.max_issues_reached"),id:"issue_bulk_change.max_issues_reached",values:{max:u.createElement("strong",null,500)}})),e&&u.createElement(C.Alert,{className:"big-spacer-bottom",variant:"warning"},Object(E.translateWithParameters)("issues.cannot_open_issue_max_initial_X_fetched",1e3)),this.renderList()))}render(){const{openIssue:e,paging:t}=this.state,s=this.getSelectedIndex();return u.createElement("div",{className:"layout-page issues",id:"issues-page"},u.createElement(F.a,{suggestions:"issues"}),u.createElement(d.a,{defer:!1,title:e?e.message:Object(E.translate)("issues.page")}),this.renderSide(e),u.createElement("div",{className:"layout-page-main"},this.renderHeader({openIssue:e,paging:t,selectedIndex:s}),this.renderPage()))}}},331:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(2),a=s(357);function r({suggestions:e}){return n.createElement(a.a.Consumer,null,({addSuggestions:t,removeSuggestions:s})=>n.createElement(o,{addSuggestions:t,removeSuggestions:s,suggestions:e}))}class o extends n.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},350:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(2),a=s(5),r=s(400);function o(e){return n.createElement(r.a.Consumer,null,({addA11ySkipLink:t,removeA11ySkipLink:s})=>n.createElement(i,Object.assign({addA11ySkipLink:t,removeA11ySkipLink:s},e)))}class i extends n.PureComponent{constructor(){super(...arguments),this.getLink=()=>{const{anchor:e,label:t=Object(a.translate)("skip_to_content"),weight:s}=this.props;return{key:e,label:t,weight:s}}}componentDidMount(){this.props.addA11ySkipLink(this.getLink())}componentWillUnmount(){this.props.removeA11ySkipLink(this.getLink())}render(){const{anchor:e}=this.props;return n.createElement("span",{id:"a11y_target__".concat(e)})}}},397:function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return i})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return p})),s.d(t,"h",(function(){return u}));var n=s(8),a=s(321);function r(e){return Object(n.getJSON)("/api/rules/app",e).catch(a.a)}function o(e){return Object(n.getJSON)("/api/rules/search",e).catch(a.a)}function i(e,t){const s=e.facets.find(e=>e.property===t);return s?s.values:[]}function c(e){return Object(n.getJSON)("/api/rules/show",e).catch(a.a)}function l(e){return Object(n.getJSON)("/api/rules/tags",e).then(e=>e.tags,a.a)}function h(e){return Object(n.postJSON)("/api/rules/create",e).then(e=>e.rule,e=>e&&409===e.status?Promise.reject(e):Object(a.a)(e))}function p(e){return Object(n.post)("/api/rules/delete",e).catch(a.a)}function u(e){return Object(n.postJSON)("/api/rules/update",e).then(e=>e.rule,a.a)}},994:function(e,t,s){"use strict";s.d(t,"a",(function(){return C}));var n=s(356),a=s.n(n),r=s(326),o=s.n(r),i=s(434),c=s.n(i),l=s(2),h=s(5),p=s(508),u=s(440),d=s(455),g=s(456),m=s(476),f=s(502),b=s(564),y=s(612),S=s(436);class C extends l.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.property=S.a,this.state={standards:{owaspTop10:{},sansTop25:{},cwe:{},sonarsourceSecurity:{}}},this.loadStandards=()=>{Object(y.a)().then(({owaspTop10:e,sansTop25:t,cwe:s,sonarsourceSecurity:n})=>{this.mounted&&this.setState({standards:{owaspTop10:e,sansTop25:t,cwe:s,sonarsourceSecurity:n}})},()=>{})},this.getValues=()=>[...this.props.sonarsourceSecurity.map(e=>Object(y.e)(this.state.standards,e,!0)),...this.props.owaspTop10.map(e=>Object(y.c)(this.state.standards,e,!0)),...this.props.sansTop25.map(e=>Object(y.d)(this.state.standards,e,!0)),...this.props.cwe.map(e=>Object(y.b)(this.state.standards,e))],this.handleHeaderClick=()=>{this.props.onToggle(this.property)},this.handleOwaspTop10HeaderClick=()=>{this.props.onToggle("owaspTop10")},this.handleSansTop25HeaderClick=()=>{this.props.onToggle("sansTop25")},this.handleSonarSourceSecurityHeaderClick=()=>{this.props.onToggle("sonarsourceSecurity")},this.handleClear=()=>{this.props.onChange({[this.property]:[],owaspTop10:[],sansTop25:[],cwe:[],sonarsourceSecurity:[]})},this.handleItemClick=(e,t,s)=>{const n=this.props[e];if(s){const s=o()(n.includes(t)?a()(n,t):[...n,t]);this.props.onChange({[e]:s})}else this.props.onChange({[e]:n.includes(t)&&n.length<2?[]:[t]})},this.handleOwaspTop10ItemClick=(e,t)=>{this.handleItemClick("owaspTop10",e,t)},this.handleSansTop25ItemClick=(e,t)=>{this.handleItemClick("sansTop25",e,t)},this.handleSonarSourceSecurityItemClick=(e,t)=>{this.handleItemClick("sonarsourceSecurity",e,t)},this.handleCWESearch=e=>Promise.resolve({results:Object.keys(this.state.standards.cwe).filter(t=>Object(y.b)(this.state.standards,t).toLowerCase().includes(e.toLowerCase()))}),this.loadCWESearchResultCount=e=>{const{loadSearchResultCount:t}=this.props;return t?t("cwe",{cwe:e}):Promise.resolve({})},this.renderList=(e,t,s,n)=>{const a=this.props[e],r=this.props[t];if(!a)return null;const i=o()(Object.keys(a),e=>-a[e]);return this.renderFacetItemsList(a,r,i,s,s,n)},this.renderFacetItemsList=(e,t,s,n,a,r)=>{if(!s.length)return l.createElement("div",{className:"search-navigator-facet-empty little-spacer-top"},Object(h.translate)("no_results"));const o=t=>e?e[t]:void 0;return l.createElement(m.a,null,s.map(e=>l.createElement(g.a,{active:t.includes(e),key:e,name:n(this.state.standards,e),onClick:r,stat:Object(S.e)(o(e)),tooltip:a(this.state.standards,e),value:e})))},this.renderHint=(e,t)=>{const s=this.props[e]||{},n=this.props[t];return l.createElement(b.a,{options:Object.keys(s).length,values:n.length})}}componentDidMount(){this.mounted=!0,(this.props.open||this.props.owaspTop10.length>0||this.props.cwe.length>0||this.props.sansTop25.length>0||this.props.sonarsourceSecurity.length>0)&&this.loadStandards()}componentDidUpdate(e){!e.open&&this.props.open&&this.loadStandards()}componentWillUnmount(){this.mounted=!1}renderOwaspTop10List(){return this.renderList("owaspTop10Stats","owaspTop10",y.c,this.handleOwaspTop10ItemClick)}renderOwaspTop10Hint(){return this.renderHint("owaspTop10Stats","owaspTop10")}renderSansTop25List(){return this.renderList("sansTop25Stats","sansTop25",y.d,this.handleSansTop25ItemClick)}renderSansTop25Hint(){return this.renderHint("sansTop25Stats","sansTop25")}renderSonarSourceSecurityList(){return this.renderList("sonarsourceSecurityStats","sonarsourceSecurity",y.e,this.handleSonarSourceSecurityItemClick)}renderSonarSourceSecurityHint(){return this.renderHint("sonarsourceSecurityStats","sonarsourceSecurity")}renderSubFacets(){return l.createElement(l.Fragment,null,l.createElement(u.a,{className:"is-inner",property:"sonarsourceSecurity"},l.createElement(d.a,{fetching:this.props.fetchingSonarSourceSecurity,name:Object(h.translate)("issues.facet.sonarsourceSecurity"),onClick:this.handleSonarSourceSecurityHeaderClick,open:this.props.sonarsourceSecurityOpen,values:this.props.sonarsourceSecurity.map(e=>Object(y.e)(this.state.standards,e))}),this.props.sonarsourceSecurityOpen&&l.createElement(l.Fragment,null,this.renderSonarSourceSecurityList(),this.renderSonarSourceSecurityHint())),l.createElement(u.a,{className:"is-inner",property:"owaspTop10"},l.createElement(d.a,{fetching:this.props.fetchingOwaspTop10,name:Object(h.translate)("issues.facet.owaspTop10"),onClick:this.handleOwaspTop10HeaderClick,open:this.props.owaspTop10Open,values:this.props.owaspTop10.map(e=>Object(y.c)(this.state.standards,e))}),this.props.owaspTop10Open&&l.createElement(l.Fragment,null,this.renderOwaspTop10List(),this.renderOwaspTop10Hint())),l.createElement(u.a,{className:"is-inner",property:"sansTop25"},l.createElement(d.a,{fetching:this.props.fetchingSansTop25,name:Object(h.translate)("issues.facet.sansTop25"),onClick:this.handleSansTop25HeaderClick,open:this.props.sansTop25Open,values:this.props.sansTop25.map(e=>Object(y.d)(this.state.standards,e))}),this.props.sansTop25Open&&l.createElement(l.Fragment,null,this.renderSansTop25List(),this.renderSansTop25Hint())),l.createElement(f.a,{className:"is-inner",facetHeader:Object(h.translate)("issues.facet.cwe"),fetching:this.props.fetchingCwe,getFacetItemText:e=>Object(y.b)(this.state.standards,e),getSearchResultKey:e=>e,getSearchResultText:e=>Object(y.b)(this.state.standards,e),loadSearchResultCount:this.loadCWESearchResultCount,onChange:this.props.onChange,onSearch:this.handleCWESearch,onToggle:this.props.onToggle,open:this.props.cweOpen,property:"cwe",query:c()(this.props.query,"cwe"),renderFacetItem:e=>Object(y.b)(this.state.standards,e),renderSearchResult:(e,t)=>Object(p.highlightTerm)(Object(y.b)(this.state.standards,e),t),searchPlaceholder:Object(h.translate)("search.search_for_cwe"),stats:this.props.cweStats,values:this.props.cwe}))}render(){return l.createElement(u.a,{property:this.property},l.createElement(d.a,{name:Object(h.translate)("issues.facet",this.property),onClear:this.handleClear,onClick:this.handleHeaderClick,open:this.props.open,values:this.getValues()}),this.props.open&&this.renderSubFacets())}}}}]);
//# sourceMappingURL=342.m.ab82bf16.chunk.js.map