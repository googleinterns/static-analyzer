(window.webpackJsonp=window.webpackJsonp||[]).push([[317],{1070:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(309),i=n(2),r=n(438),o=n.n(r),a=n(5);class l extends i.PureComponent{render(){return i.createElement("div",{className:s(this.props.className)},["public","private"].map(e=>i.createElement(o.a,{className:"huge-spacer-right visibility-".concat(e),key:e,value:e,checked:this.props.visibility===e,onCheck:this.props.onChange,disabled:"private"===e&&!this.props.canTurnToPrivate},i.createElement("div",null,Object(a.translate)("visibility",e),this.props.showDetails&&i.createElement("p",{className:"note"},Object(a.translate)("visibility",e,"description.long"))))))}}},1072:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n(2),i=n(310),r=n(340),o=n.n(r),a=n(334),l=n.n(a),c=n(325),p=n(316),u=n.n(p),m=n(5),d=n(482);class h extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={done:!1,loading:!0},this.fetchPermissionTemplates=()=>{Object(d.l)(this.props.organization).then(({permissionTemplates:e})=>{this.mounted&&this.setState({loading:!1,permissionTemplates:e})},()=>{this.mounted&&this.setState({loading:!1})})},this.handleSubmit=()=>this.state.permissionTemplate?Object(d.b)({organization:this.props.organization,projectKey:this.props.project.key,templateId:this.state.permissionTemplate}).then(()=>{this.mounted&&(this.props.onApply&&this.props.onApply(),this.setState({done:!0}))}):Promise.reject(void 0),this.handlePermissionTemplateChange=({value:e})=>{this.setState({permissionTemplate:e})}}componentDidMount(){this.mounted=!0,this.fetchPermissionTemplates()}componentWillUnmount(){this.mounted=!1}render(){const e=Object(m.translateWithParameters)("projects_role.apply_template_to_xxx",this.props.project.name);return s.createElement(l.a,{header:e,onClose:this.props.onClose,onSubmit:this.handleSubmit,size:"small"},({onCloseClick:t,onFormSubmit:n,submitting:r})=>s.createElement("form",{id:"project-permissions-apply-template-form",onSubmit:n},s.createElement("header",{className:"modal-head"},s.createElement("h2",null,e)),s.createElement("div",{className:"modal-body"},this.state.done?s.createElement(c.Alert,{variant:"success"},Object(m.translate)("projects_role.apply_template.success")):s.createElement(s.Fragment,null,this.state.loading?s.createElement("i",{className:"spinner"}):s.createElement("div",{className:"modal-field"},s.createElement("label",{htmlFor:"project-permissions-template"},Object(m.translate)("template"),s.createElement("em",{className:"mandatory"},"*")),this.state.permissionTemplates&&s.createElement(o.a,{clearable:!1,id:"project-permissions-template",onChange:this.handlePermissionTemplateChange,options:this.state.permissionTemplates.map(e=>({label:e.name,value:e.id})),value:this.state.permissionTemplate})))),s.createElement("footer",{className:"modal-foot"},s.createElement(u.a,{className:"spacer-right",loading:r}),!this.state.done&&s.createElement(i.SubmitButton,{disabled:r||!this.state.permissionTemplate},Object(m.translate)("apply")),s.createElement(i.ResetButtonLink,{onClick:t},Object(m.translate)(this.state.done?"close":"cancel")))))}}},1903:function(e,t,n){"use strict";n.r(t);var s=n(317),i=n(423),r=n(319),o=n(356),a=n.n(o),l=n(2),c=n(328),p=n(5),u=n(482),m=n(1070),d=n(688),h=(n(783),n(358)),g=n.n(h),b=n(797),f=n(785),y=n(408);class v extends l.PureComponent{constructor(){super(...arguments),this.handleToggleUser=(e,t)=>e.permissions.includes(t)?this.props.revokePermissionFromUser(e.login,t):this.props.grantPermissionToUser(e.login,t),this.handleToggleGroup=(e,t)=>e.permissions.includes(t)?this.props.revokePermissionFromGroup(e.name,t):this.props.grantPermissionToGroup(e.name,t),this.handleSelectPermission=e=>{this.props.onPermissionSelect(e)}}render(){const{filter:e,groups:t,groupsPaging:n,users:s,usersPaging:i}=this.props;let r=y.a[this.props.component.qualifier];"public"===this.props.visibility&&(r=a()(r,"user","codeviewer"));const o=Object(y.e)(r,"projects_role");let c=0,p=0;return"users"!==e&&(c+=t.length,p+=n?n.total:t.length),"groups"!==e&&(c+=s.length,p+=i?i.total:s.length),l.createElement(l.Fragment,null,l.createElement(b.a,{filter:this.props.filter,groups:this.props.groups,onSelectPermission:this.handleSelectPermission,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:o,query:this.props.query,selectedPermission:this.props.selectedPermission,users:this.props.users},l.createElement(f.a,{filter:this.props.filter,onFilter:this.props.onFilterChange,onSearch:this.props.onQueryChange,query:this.props.query})),l.createElement(g.a,{count:c,loadMore:this.props.onLoadMore,total:p}))}}var j=n(310),P=n(1072);class O extends l.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={applyTemplateModal:!1},this.handleApplyTemplate=()=>{this.setState({applyTemplateModal:!0})},this.handleApplyTemplateClose=()=>{this.mounted&&this.setState({applyTemplateModal:!1})}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{component:e}=this.props,{configuration:t}=e,n=null!=t&&t.canApplyPermissionTemplate,s=["VW","SVW","APP"].includes(e.qualifier)?Object(p.translate)("roles.page.description_portfolio"):Object(p.translate)("roles.page.description2"),i="TRK"===e.qualifier&&e.visibility?Object(p.translate)("visibility",e.visibility,"description",e.qualifier):void 0;return l.createElement("header",{className:"page-header"},l.createElement("h1",{className:"page-title"},Object(p.translate)("permissions.page")),this.props.loading&&l.createElement("i",{className:"spinner"}),n&&l.createElement("div",{className:"page-actions"},l.createElement(j.Button,{className:"js-apply-template",onClick:this.handleApplyTemplate},Object(p.translate)("projects_role.apply_template")),this.state.applyTemplateModal&&l.createElement(P.a,{onApply:this.props.loadHolders,onClose:this.handleApplyTemplateClose,organization:e.organization,project:e})),l.createElement("div",{className:"page-description"},l.createElement("p",null,s),i&&l.createElement("p",null,i)))}}var C=n(344),E=n.n(C),_=n(325);function k({component:e,onClose:t,onConfirm:n}){const{qualifier:s}=e;return l.createElement(E.a,{confirmButtonText:Object(p.translate)("projects_role.turn_project_to_public",s),header:Object(p.translateWithParameters)("projects_role.turn_x_to_public",e.name),onClose:t,onConfirm:n},l.createElement(_.Alert,{variant:"warning"},Object(p.translate)("projects_role.are_you_sure_to_turn_project_to_public.warning",s)),l.createElement("p",null,Object(p.translate)("projects_role.are_you_sure_to_turn_project_to_public",s)))}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T extends l.PureComponent{constructor(e){super(e),this.mounted=!1,this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.loadUsersAndGroups=(e,t)=>{const{component:n}=this.props,{filter:s,query:i,selectedPermission:r}=this.state,o="groups"!==s?u.n({projectKey:n.key,q:i||void 0,permission:r,organization:n.organization,p:e}):Promise.resolve({paging:void 0,users:[]}),a="users"!==s?u.m({projectKey:n.key,q:i||void 0,permission:r,organization:n.organization,p:t}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([o,a])},this.loadHolders=()=>(this.setState({loading:!0}),this.loadUsersAndGroups().then(([e,t])=>{this.mounted&&this.setState({groups:t.groups,groupsPaging:t.paging,loading:!1,users:e.users,usersPaging:e.paging})},this.stopLoading)),this.onLoadMore=()=>{const{usersPaging:e,groupsPaging:t}=this.state;return this.setState({loading:!0}),this.loadUsersAndGroups(e?e.pageIndex+1:1,t?t.pageIndex+1:1).then(([e,t])=>{this.mounted&&this.setState(({groups:n,users:s})=>({groups:[...n,...t.groups],groupsPaging:t.paging,loading:!1,users:[...s,...e.users],usersPaging:e.paging}))},this.stopLoading)},this.handleFilterChange=e=>{this.mounted&&this.setState({filter:e},this.loadHolders)},this.handleQueryChange=e=>{this.mounted&&this.setState({query:e},this.loadHolders)},this.handlePermissionSelect=e=>{this.mounted&&this.setState(t=>({selectedPermission:t.selectedPermission===e?void 0:e}),this.loadHolders)},this.addPermissionToGroup=(e,t)=>this.state.groups.map(n=>n.name===e?N({},n,{permissions:[...n.permissions,t]}):n),this.addPermissionToUser=(e,t)=>this.state.users.map(n=>n.login===e?N({},n,{permissions:[...n.permissions,t]}):n),this.removePermissionFromGroup=(e,t)=>this.state.groups.map(n=>n.name===e?N({},n,{permissions:a()(n.permissions,t)}):n),this.removePermissionFromUser=(e,t)=>this.state.users.map(n=>n.login===e?N({},n,{permissions:a()(n.permissions,t)}):n),this.grantPermissionToGroup=(e,t)=>this.mounted?(this.setState({loading:!0,groups:this.addPermissionToGroup(e,t)}),u.o({projectKey:this.props.component.key,groupName:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,groups:this.removePermissionFromGroup(e,t)})})):Promise.resolve(),this.grantPermissionToUser=(e,t)=>this.mounted?(this.setState({loading:!0,users:this.addPermissionToUser(e,t)}),u.p({projectKey:this.props.component.key,login:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,users:this.removePermissionFromUser(e,t)})})):Promise.resolve(),this.revokePermissionFromGroup=(e,t)=>this.mounted?(this.setState({loading:!0,groups:this.removePermissionFromGroup(e,t)}),u.t({projectKey:this.props.component.key,groupName:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,groups:this.addPermissionToGroup(e,t)})})):Promise.resolve(),this.revokePermissionFromUser=(e,t)=>this.mounted?(this.setState({loading:!0,users:this.removePermissionFromUser(e,t)}),u.u({projectKey:this.props.component.key,login:e,permission:t,organization:this.props.component.organization}).then(this.stopLoading,()=>{this.mounted&&this.setState({loading:!1,users:this.addPermissionToUser(e,t)})})):Promise.resolve(),this.handleOrganizationUpgrade=()=>{const{component:e,organization:t}=this.props;t&&(this.props.onComponentChange({configuration:N({},e.configuration,{canUpdateProjectVisibilityToPrivate:!0})}),this.props.fetchOrganization(t.key))},this.handleVisibilityChange=e=>{"public"===e?this.openDisclaimer():this.turnProjectToPrivate()},this.turnProjectToPublic=()=>{this.props.onComponentChange({visibility:"public"}),u.e(this.props.component.key,"public").then(()=>{this.loadHolders()},()=>{this.props.onComponentChange({visibility:"private"})})},this.turnProjectToPrivate=()=>{this.props.onComponentChange({visibility:"private"}),u.e(this.props.component.key,"private").then(()=>{this.loadHolders()},()=>{this.props.onComponentChange({visibility:"public"})})},this.openDisclaimer=()=>{this.mounted&&this.setState({disclaimer:!0})},this.closeDisclaimer=()=>{this.mounted&&this.setState({disclaimer:!1})},this.state={disclaimer:!1,filter:"all",groups:[],loading:!0,query:"",users:[]}}componentDidMount(){this.mounted=!0,this.loadHolders()}componentWillUnmount(){this.mounted=!1}render(){const{component:e,organization:t}=this.props,n=e.configuration&&e.configuration.canUpdateProjectVisibilityToPrivate;let s;if(t&&!n){s=t.actions&&t.actions.admin&&"TRK"===this.props.component.qualifier&&!t.canUpdateProjectsVisibilityToPrivate}return l.createElement("div",{className:"page page-limited",id:"project-permissions-page"},l.createElement(c.a,{defer:!1,title:Object(p.translate)("permissions.page")}),l.createElement(O,{component:e,loadHolders:this.loadHolders,loading:this.state.loading}),l.createElement("div",null,l.createElement(m.a,{canTurnToPrivate:n,className:"big-spacer-top big-spacer-bottom",onChange:this.handleVisibilityChange,visibility:e.visibility}),s&&t&&l.createElement(d.a,{className:"big-spacer-bottom",onOrganizationUpgrade:this.handleOrganizationUpgrade,organization:t}),this.state.disclaimer&&l.createElement(k,{component:e,onClose:this.closeDisclaimer,onConfirm:this.turnProjectToPublic})),l.createElement(v,{component:e,filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,onFilterChange:this.handleFilterChange,onLoadMore:this.onLoadMore,onPermissionSelect:this.handlePermissionSelect,onQueryChange:this.handleQueryChange,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,selectedPermission:this.state.selectedPermission,users:this.state.users,usersPaging:this.state.usersPaging,visibility:e.visibility}))}}const w={fetchOrganization:i.f};t.default=Object(s.connect)((e,{component:t})=>({currentUser:Object(r.getCurrentUser)(e),organization:Object(r.getOrganizationByKey)(e,t.organization)}),w)(T)},337:function(e,t,n){"use strict";function s(e,t){const n=e.displayName||e.name||"Component";return"".concat(t,"(").concat(n,")")}n.d(t,"a",(function(){return s}))},344:function(e,t,n){"use strict";var s,i=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(5),l=n(316),c=n(310),p=n(425),u=n(334),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.handleSubmit=function(){var e=t.props.onConfirm(t.props.confirmData);return e?e.then(t.props.onClose,(function(){})):void t.props.onClose()},t.renderModalContent=function(e){var n=e.onCloseClick,s=e.onFormSubmit,i=e.submitting,r=t.props,u=r.children,m=r.confirmButtonText,d=r.confirmDisable,h=r.header,g=r.headerDescription,b=r.isDestructive,f=r.cancelButtonText,y=void 0===f?a.translate("cancel"):f;return o.createElement(p.default,null,o.createElement("form",{onSubmit:s},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,h),g),o.createElement("div",{className:"modal-body"},u),o.createElement("footer",{className:"modal-foot"},o.createElement(l.default,{className:"spacer-right",loading:i}),o.createElement(c.SubmitButton,{autoFocus:!0,className:b?"button-red":void 0,disabled:i||d},m),o.createElement(c.ResetButtonLink,{disabled:i,onClick:n},y))))},t}return i(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t={header:e.header,onClose:e.onClose,noBackdrop:e.noBackdrop,size:e.size};return o.createElement(u.default,r({onSubmit:this.handleSubmit},t),this.renderModalContent)},t}(o.PureComponent);t.default=m},378:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(2),i=n(317),r=n(319),o=n(337);function a(e){class t extends s.Component{render(){return s.createElement(e,Object.assign({},this.props))}}return t.displayName=Object(o.a)(e,"withCurrentUser"),Object(i.connect)((function(e){return{currentUser:Object(r.getCurrentUser)(e)}}))(t)}},398:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var s=n(336),i=n(14);let r=!1;function o(e,t="body"){return new Promise(n=>{const i=document.createElement("script");i.src="".concat(Object(s.getBaseUrl)()).concat(e),i.onload=n,document.getElementsByTagName(t)[0].appendChild(i)})}async function a(e){const t=Object(i.a)(e);if(t)return Promise.resolve(t);if(!r){(0,(await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(298)]).then(n.bind(null,537))).default)(),r=!0}await o("/static/".concat(e,".js"));const s=Object(i.a)(e);return s||Promise.reject()}},408:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return m}));var s=n(5),i=n(22);const r=["user","codeviewer","issueadmin","securityhotspotadmin","admin","scan"],o=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning"]}],a=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning","applicationcreator","portfoliocreator"]}],l=["user","admin"],c={TRK:r,VW:l,SVW:l,APP:l,DEV:["user","admin"]};function p(e,t){const n=e=>{const t="".concat(e,".sonarcloud");return Object(i.isSonarCloud)()&&Object(s.hasMessage)(t)?Object(s.translate)(t):Object(s.translate)(e)};return{key:e,name:n("".concat(t,".").concat(e)),description:n("".concat(t,".").concat(e,".desc"))}}function u(e,t){return e.map(e=>"object"==typeof e?{category:e.category,permissions:e.permissions.map(e=>p(e,t))}:p(e,t))}function m(e){return Boolean(e&&e.category)}},416:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return p}));var s=n(333);function i(e,t){return t.endsWith("/")||(t+="/"),l(e)?t.replace("github.com/","github.com/orgs/")+"people":t+"profile/members"}function r(e){return Object(s.b)(e)&&e.externalProvider?p(e.externalProvider):void 0}function o(e){return Object(s.b)(e)&&(a(e.externalProvider)||l(e.externalProvider))}function a(e){return!!e&&e.startsWith("bitbucket")}function l(e){return"github"===e}function c(e){return"microsoft"===e}function p(e){return a(e)?"bitbucket":e}},446:function(e,t,n){var s=n(393)((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));e.exports=s},448:function(e,t,n){"use strict";var s,i=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(309),o=n(2);n(492);var a=n(315),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderOption=function(e){var n=e.value===t.props.value,s=t.props.name+"__"+e.value;return o.createElement("li",{key:e.value.toString()},o.createElement("input",{checked:n,disabled:e.disabled,id:s,name:t.props.name,onChange:function(){return t.props.onCheck(e.value)},type:"radio"}),o.createElement(a.default,{overlay:e.tooltip||void 0},o.createElement("label",{htmlFor:s},e.label)))},t}return i(t,e),t.prototype.render=function(){return o.createElement("ul",{className:r("radio-toggle",this.props.className)},this.props.options.map(this.renderOption))},t.defaultProps={disabled:!1,value:null},t}(o.PureComponent);t.default=l},482:function(e,t,n){"use strict";n.d(t,"p",(function(){return r})),n.d(t,"u",(function(){return o})),n.d(t,"o",(function(){return a})),n.d(t,"t",(function(){return l})),n.d(t,"l",(function(){return c})),n.d(t,"f",(function(){return p})),n.d(t,"y",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"x",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"r",(function(){return b})),n.d(t,"w",(function(){return f})),n.d(t,"q",(function(){return y})),n.d(t,"v",(function(){return v})),n.d(t,"a",(function(){return j})),n.d(t,"s",(function(){return P})),n.d(t,"n",(function(){return O})),n.d(t,"m",(function(){return C})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return _})),n.d(t,"k",(function(){return k})),n.d(t,"j",(function(){return S})),n.d(t,"e",(function(){return N})),n.d(t,"d",(function(){return x}));var s=n(8),i=n(321);function r(e){return Object(s.post)("/api/permissions/add_user",e).catch(i.a)}function o(e){return Object(s.post)("/api/permissions/remove_user",e).catch(i.a)}function a(e){return Object(s.post)("/api/permissions/add_group",e).catch(i.a)}function l(e){return Object(s.post)("/api/permissions/remove_group",e).catch(i.a)}function c(e){const t="/api/permissions/search_templates";return e?Object(s.getJSON)(t,{organization:e}):Object(s.getJSON)(t)}function p(e){return Object(s.postJSON)("/api/permissions/create_template",e)}function u(e){return Object(s.post)("/api/permissions/update_template",e)}function m(e){return Object(s.post)("/api/permissions/delete_template",e).catch(i.a)}function d(e,t){return Object(s.post)("/api/permissions/set_default_template",{templateId:e,qualifier:t})}function h(e){return Object(s.post)("/api/permissions/apply_template",e).catch(i.a)}function g(e){return Object(s.post)("/api/permissions/bulk_apply_template",e)}function b(e){return Object(s.post)("/api/permissions/add_user_to_template",e)}function f(e){return Object(s.post)("/api/permissions/remove_user_from_template",e)}function y(e){return Object(s.post)("/api/permissions/add_group_to_template",e)}function v(e){return Object(s.post)("/api/permissions/remove_group_from_template",e)}function j(e,t){return Object(s.post)("/api/permissions/add_project_creator_to_template",{templateId:e,permission:t})}function P(e,t){return Object(s.post)("/api/permissions/remove_project_creator_from_template",{templateId:e,permission:t})}function O(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/users",e).catch(i.a)}function C(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/groups",e).catch(i.a)}function E(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/users",e)}function _(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/groups",e)}function k(e,t,n,i){const r={templateId:e,ps:100};return t&&(r.q=t),n&&(r.permission=n),i&&Object.assign(r,{organization:i}),Object(s.getJSON)("/api/permissions/template_users",r).then(e=>e.users)}function S(e,t,n,i){const r={templateId:e,ps:100};return t&&(r.q=t),n&&(r.permission=n),i&&Object.assign(r,{organization:i}),Object(s.getJSON)("/api/permissions/template_groups",r).then(e=>e.groups)}function N(e,t){return Object(s.post)("/api/projects/update_visibility",{project:e,visibility:t}).catch(i.a)}function x(e,t){return Object(s.post)("/api/projects/update_default_visibility",{organization:e,projectVisibility:t}).catch(i.a)}},492:function(e,t,n){var s=n(311),i=n(493);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},o=(s(i,r),i.locals?i.locals:{});e.exports=o},493:function(e,t,n){(t=n(312)(!1)).push([e.i,".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}",""]),e.exports=t},577:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return h}));var s=n(503),i=n.n(s),r=n(5),o=n(318),a=n(432),l=n(590);n(416);const c="sonarcloud.import_org.binding_in_progress",p="sonarcloud.import_org.redirect_to_projects",u="sonarcloud.bind_org.key",m="sonarcloud.bind_org.redirect_to_org";var d;function h(e,t){const n=Object(o.formatMeasure)(e,"FLOAT").replace(/[.|,]0$/,"").replace(/([.|,]\d)$/,"$10");return t?n:Object(r.translateWithParameters)("billing.price_format",n)}!function(e){e[e.OrganizationDetails=0]="OrganizationDetails",e[e.Plan=1]="Plan"}(d||(d={}));i()((e={})=>{let t=void 0,n=void 0;if(e.installation_id)n="github",t=Object(a.parseAsOptionalString)(e.installation_id);else if(e.clientKey)n="bitbucket",t=Object(a.parseAsOptionalString)(e.clientKey);else if(e.jwt){const s=Object(l.decodeJwt)(e.jwt);s&&s.iss&&(n="bitbucket",t=s.iss)}return{almInstallId:t,almKey:n}})},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),i=n(313);t.default=function(e){var t=e.className,n=e.fill,r=e.size,o=void 0===r?36:r;return s.createElement(i.ThemedIcon,{className:t,size:o,viewBox:"0 0 36 36"},(function(e){var t=e.theme;return s.createElement("g",{transform:"matrix(0.0625,0,0,0.0625,3,4)"},s.createElement("path",{d:"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z",style:{fill:n||t.colors.gray67}}))}))}},688:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var s=n(2),i=n(304),r=n(314),o=n(310),a=n(500),l=n.n(a),c=n(5),p=n(8),u=n(321);var m=n(577),d=n(462),h=n.n(d),g=n(332);function b(){return s.createElement("ul",{className:"note"},s.createElement(f,null,Object(c.translate)("billing.upgrade_box.unlimited_private_projects")),s.createElement(f,null,Object(c.translate)("billing.upgrade_box.strict_control_private_data")),s.createElement(f,null,Object(c.translate)("billing.upgrade_box.cancel_anytime")),s.createElement(f,null,s.createElement("strong",null,Object(c.translateWithParameters)("billing.upgrade_box.free_trial_x",14))))}function f({children:e}){return s.createElement("li",{className:"display-flex-center little-spacer-bottom"},s.createElement(h.a,{className:"spacer-right",fill:g.colors.lightGreen}),e)}var y=n(327),v=n.n(y),j=n(316),P=n.n(j),O=n(378),C=n(398);class E extends s.Component{render(){const{BillingForm:e}=window.SonarBilling;return s.createElement(e,Object.assign({},this.props))}}const _=Object(O.a)(E);class k extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={ready:!1}}componentDidMount(){this.mounted=!0,Object(C.a)("billing/billing").then(()=>{this.mounted&&this.setState({ready:!0})},()=>{})}componentWillUnmount(){this.mounted=!1}render(){const e=Object(c.translate)("billing.upgrade_box.upgrade_to_paid_plan");return this.state.ready?s.createElement(v.a,{contentLabel:e,noBackdrop:this.props.insideModal,onRequestClose:this.props.onClose,shouldCloseOnOverlayClick:!1,size:"medium"},s.createElement("div",{className:"modal-head"},s.createElement("h2",null,e)),s.createElement(_,{onCommit:this.props.onUpgradeDone,organizationKey:this.props.organization.key,subscriptionPlans:this.props.subscriptionPlans},({onSubmit:e,processingUpgrade:t,renderFormFields:n,renderNextCharge:r,renderRecap:a,renderSubmitButton:l})=>s.createElement("form",{id:"organization-paid-plan-form",onSubmit:e},s.createElement("div",{className:"modal-body modal-container"},s.createElement("div",{className:"huge-spacer-bottom"},s.createElement("p",{className:"spacer-bottom"},s.createElement(i.FormattedMessage,{defaultMessage:Object(c.translate)("billing.upgrade.org_x_advantages"),id:"billing.coupon.description",values:{org:s.createElement("strong",null,this.props.organization.name)}})),s.createElement(b,null)),n(),s.createElement("div",{className:"big-spacer-top"},a())),s.createElement("footer",{className:"modal-foot display-flex-center display-flex-space-between"},r()||s.createElement("span",null),s.createElement("div",null,s.createElement(P.a,{loading:t}),l(),s.createElement(o.ResetButtonLink,{onClick:this.props.onClose},Object(c.translate)("cancel"))))))):null}}class S extends s.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={subscriptionPlans:[],upgradeOrganizationModal:!1},this.fetchSubscriptionPlans=()=>Object(p.getJSON)("/api/billing/show_subscription_plans").then(({subscriptionPlans:e})=>e,u.a).then(e=>{this.mounted&&this.setState({subscriptionPlans:e})}),this.handleUpgradeClick=()=>{this.setState({upgradeOrganizationModal:!0})},this.handleUpgradeOrganizationModalClose=()=>{this.mounted&&this.setState({upgradeOrganizationModal:!1})},this.handleOrganizationUpgrade=()=>{this.props.onOrganizationUpgrade(),this.handleUpgradeOrganizationModalClose()}}componentDidMount(){this.mounted=!0,this.fetchSubscriptionPlans()}componentWillUnmount(){this.mounted=!1}render(){if(!Object(c.hasMessage)("billing.upgrade_box.header"))return null;const{subscriptionPlans:e,upgradeOrganizationModal:t}=this.state,n=e[0]&&e[0].price;return s.createElement(s.Fragment,null,s.createElement(l.a,{className:this.props.className,title:Object(c.translate)("billing.upgrade_box.header"),titleInfo:void 0!==n&&s.createElement(i.FormattedMessage,{defaultMessage:Object(c.translate)("billing.price_from_x"),id:"billing.price_from_x",values:{price:s.createElement("span",{className:"big"},Object(m.e)(n))}})},s.createElement(s.Fragment,null,s.createElement(b,null),s.createElement("div",{className:"big-spacer-left"},s.createElement(o.Button,{className:"js-upgrade-organization",onClick:this.handleUpgradeClick},Object(c.translate)("billing.paid_plan.upgrade")),s.createElement(r.Link,{className:"spacer-left",target:"_blank",to:"/about/pricing"},Object(c.translate)("billing.pricing.learn_more"))))),t&&s.createElement(k,{insideModal:this.props.insideModal,onClose:this.handleUpgradeOrganizationModalClose,onUpgradeDone:this.handleOrganizationUpgrade,organization:this.props.organization,subscriptionPlans:e}))}}},783:function(e,t,n){var s=n(311),i=n(784);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},o=(s(i,r),i.locals?i.locals:{});e.exports=o},784:function(e,t,n){(t=n(312)(!1)).push([e.i,'.permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{width:100px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:"";background:#e6e6e6;height:1px;width:100%}',""]),e.exports=t},785:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(2),i=n(448),r=n.n(i),o=n(353),a=n.n(o),l=n(5);function c(e){const t=[{value:"all",label:Object(l.translate)("all")},{value:"users",label:Object(l.translate)("users.page")},{value:"groups",label:Object(l.translate)("user_groups.page")}];return s.createElement("div",{className:"display-flex-row"},s.createElement(r.a,{name:"users-or-groups",onCheck:e.onFilter,options:t,value:e.filter}),s.createElement("div",{className:"flex-1 spacer-left"},s.createElement(a.a,{minLength:3,onChange:e.onSearch,placeholder:Object(l.translate)("search.search_for_users_or_groups"),value:e.query})))}},797:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var s=n(326),i=n.n(s),r=n(446),o=n.n(r),a=n(2),l=n(5),c=n(408),p=n(356),u=n.n(p),m=n(598),d=n.n(m),h=n(309),g=n(342),b=n.n(g);class f extends a.PureComponent{render(){const{loading:e,onCheck:t,permission:n,permissionItem:s,selectedPermission:i}=this.props;return Object(c.f)(n)?a.createElement("td",{className:"text-middle"},n.permissions.map(n=>a.createElement("div",{key:n.key},a.createElement(b.a,{checked:s.permissions.includes(n.key),disabled:e.includes(n.key),id:n.key,onCheck:t},a.createElement("span",{className:"little-spacer-left"},n.name))))):a.createElement("td",{className:h("permission-column text-center text-middle",{selected:n.key===i})},a.createElement(b.a,{checked:s.permissions.includes(n.key),disabled:e.includes(n.key),id:n.key,onCheck:t}))}}class y extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.group,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{group:e}=this.props;return a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle big-spacer-right"},a.createElement(d.a,null)),a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},e.description))),this.props.permissions.map(t=>a.createElement(f,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission})))}}var v=n(322),j=n.n(v),P=n(315),O=n.n(P),C=n(325),E=n(411);class _ extends a.PureComponent{constructor(){super(...arguments),this.handlePermissionClick=e=>{e.preventDefault(),e.currentTarget.blur();const{permission:t}=this.props;this.props.onSelectPermission&&!Object(c.f)(t)&&this.props.onSelectPermission(t.key)},this.getTooltipOverlay=()=>{const{permission:e}=this.props;return Object(c.f)(e)?e.permissions.map(e=>a.createElement(a.Fragment,{key:e.key},a.createElement("b",{className:"little-spacer-right"},e.name,":"),a.createElement(E.a,{key:e.key,message:e.description}),a.createElement("br",null))):this.props.showPublicProjectsWarning&&["user","codeviewer"].includes(e.key)?a.createElement("div",null,a.createElement(E.a,{message:e.description}),a.createElement(C.Alert,{className:"spacer-top",variant:"warning"},Object(l.translate)("projects_role.public_projects_warning"))):a.createElement(E.a,{message:e.description})}}render(){const{onSelectPermission:e,permission:t}=this.props;let n;return n=Object(c.f)(t)?Object(l.translate)("global_permissions",t.category):e?a.createElement(O.a,{overlay:Object(l.translateWithParameters)("global_permissions.filter_by_x_permission",t.name)},a.createElement("a",{href:"#",onClick:this.handlePermissionClick},t.name)):t.name,a.createElement("th",{className:h("permission-column text-center text-middle",{selected:!Object(c.f)(t)&&t.key===this.props.selectedPermission})},a.createElement("div",{className:"permission-column-inner"},n,a.createElement(j.a,{className:"spacer-left",overlay:this.getTooltipOverlay()})))}}var k=n(366),S=n(22);class N extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.user,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{user:e}=this.props,t=this.props.permissions.map(t=>a.createElement(f,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission}));return"<creator>"===e.login?a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-inline-block text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},Object(l.translate)(Object(S.isSonarCloud)()?"permission_templates.project_creators.explanation.sonarcloud":"permission_templates.project_creators.explanation")))),t):a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement(k.a,{className:"text-middle big-spacer-right",hash:e.avatar,name:e.name,size:36}),a.createElement("div",{className:"display-inline-block text-middle"},Object(S.isSonarCloud)()?a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"note little-spacer-top"},e.login)):a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("strong",null,e.name),a.createElement("span",{className:"note spacer-left"},e.login)),a.createElement("div",{className:"little-spacer-top"},e.email)))),t)}}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z extends a.PureComponent{constructor(){super(...arguments),this.state={initialPermissionsCount:{}},this.handleGroupToggle=(e,t)=>{const n=e.id||e.name;return void 0===this.state.initialPermissionsCount[n]&&this.setState(t=>({initialPermissionsCount:T({},t.initialPermissionsCount,{[n]:e.permissions.length})})),this.props.onToggleGroup(e,t)},this.handleUserToggle=(e,t)=>(void 0===this.state.initialPermissionsCount[e.login]&&this.setState(t=>({initialPermissionsCount:T({},t.initialPermissionsCount,{[e.login]:e.permissions.length})})),this.props.onToggleUser(e,t)),this.getItemInitialPermissionsCount=e=>{const t=this.isPermissionUser(e)?e.login:e.id||e.name;return void 0!==this.state.initialPermissionsCount[t]?this.state.initialPermissionsCount[t]:e.permissions.length}}componentDidUpdate(e){this.props.filter===e.filter&&this.props.query===e.query||this.setState({initialPermissionsCount:{}})}isPermissionUser(e){return void 0!==e.login}renderEmpty(){const e=this.props.permissions.length+1;return a.createElement("tr",null,a.createElement("td",{colSpan:e},Object(l.translate)("no_results_search")))}renderItem(e,t){return this.isPermissionUser(e)?a.createElement(N,{key:"user-".concat(e.login),onToggle:this.handleUserToggle,permissions:t,selectedPermission:this.props.selectedPermission,user:e}):a.createElement(y,{group:e,key:"group-".concat(e.id||e.name),onToggle:this.handleGroupToggle,permissions:t,selectedPermission:this.props.selectedPermission})}render(){const{permissions:e}=this.props,t=i()([...this.props.users,...this.props.groups],e=>this.isPermissionUser(e)&&"<creator>"===e.login?0:e.name),[n,s]=o()(t,e=>this.getItemInitialPermissionsCount(e));return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{className:"data zebra permissions-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",{className:"nowrap bordered-bottom"},this.props.children),e.map(e=>a.createElement(_,{key:Object(c.f)(e)?e.category:e.key,onSelectPermission:this.props.onSelectPermission,permission:e,selectedPermission:this.props.selectedPermission,showPublicProjectsWarning:this.props.showPublicProjectsWarning})))),a.createElement("tbody",null,0===t.length&&!this.props.loading&&this.renderEmpty(),n.map(t=>this.renderItem(t,e)),n.length>0&&s.length>0&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",{className:"divider",colSpan:20})),a.createElement("tr",null)),s.map(t=>this.renderItem(t,e)))))}}}}]);
//# sourceMappingURL=317.m.b26e21a9.chunk.js.map