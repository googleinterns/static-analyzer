(window.webpackJsonp=window.webpackJsonp||[]).push([[333],{1001:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var a="almintegration",r="exclusions",i="languages",o="new_code_period",s="pull_request_decoration_binding"},1138:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var a=n(51),r=n(670);function i(e){return Object(a.getJSON)("/api/new_code_periods/show",e).catch(r.a)}function o(e){return Object(a.post)("/api/new_code_periods/set",e).catch(r.a)}function s(e){return Object(a.post)("/api/new_code_periods/unset",e).catch(r.a)}function l(e){return Object(a.getJSON)("/api/new_code_periods/list",e).catch(r.a)}},1139:function(e,t,n){"use strict";function a(e){var t=parseInt(e,10);return!(e.length<1||isNaN(t)||t<1||String(t)!==e)}function r(e){var t=e.analysis,n=e.days;switch(e.type){case"NUMBER_OF_DAYS":return n;case"SPECIFIC_ANALYSIS":return t;default:return}}function i(e){var t=e.analysis,n=void 0===t?"":t,r=e.currentSetting,i=e.currentSettingValue,o=e.days,s=e.selected,l=e.overrideGeneralSetting;return{isChanged:r||void 0===l?!1===l||s!==r||"NUMBER_OF_DAYS"===s&&o!==i||"SPECIFIC_ANALYSIS"===s&&n!==i:l,isValid:!1===l||"PREVIOUS_VERSION"===s||"SPECIFIC_ANALYSIS"===s&&n.length>0||"NUMBER_OF_DAYS"===s&&a(o)}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i}))},1187:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(13),r=n(846),i=n.n(r),o=n(1036),s=n.n(o),l=n(37);function c(e){var t=e.className,n=e.days,r=e.disabled,o=e.isChanged,c=e.isValid,u=e.onChangeDays,p=e.onSelect,m=e.selected;return a.createElement(i.a,{className:t,disabled:r,onClick:function(){return p("NUMBER_OF_DAYS")},selected:m,title:Object(l.translate)("baseline.number_days")},a.createElement(a.Fragment,null,a.createElement("p",{className:"big-spacer-bottom"},Object(l.translate)("baseline.number_days.description")),m&&a.createElement(s.a,{error:void 0,id:"baseline_number_of_days",isInvalid:o&&!c,isValid:o&&c,label:Object(l.translate)("baseline.specify_days"),required:!0},a.createElement("input",{onChange:function(e){return u(e.currentTarget.value)},type:"text",value:n}))))}},1188:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=n(846),i=n.n(r),o=n(37);function s(e){var t=e.disabled,n=e.isDefault,r=e.onSelect,s=e.selected;return a.createElement(i.a,{disabled:t,onClick:function(){return r("PREVIOUS_VERSION")},selected:s,title:Object(o.translate)("baseline.previous_version")+(n?" ("+Object(o.translate)("default")+")":"")},a.createElement("p",null,Object(o.translate)("baseline.previous_version.description")))}},2161:function(e,t,n){var a=n(660),r=n(2162);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},o=(a(r,i),r.locals?r.locals:{});e.exports=o},2162:function(e,t,n){(t=n(661)(!1)).push([e.i,".side-tabs-layout{display:flex;justify-content:space-between;align-items:stretch}.modal .side-tabs-layout{padding-left:10px;background-color:#f3f3f3}.side-tabs-main{position:relative;z-index:2;flex-grow:1;padding:15px 20px;border:1px solid #e6e6e6;box-sizing:border-box;background-color:#fff;overflow:auto;height:100vh}.modal .side-tabs-main{border-top:none;border-bottom:none;border-right:none}.side-tabs-side{position:relative;z-index:3;width:160px;flex-shrink:0;padding:10px 0;box-sizing:border-box;transform:translateX(1px)}.side-tabs-menu>li{margin-bottom:4px}.side-tabs-menu>li>a{display:block;padding:10px;line-height:1.5;border-top-left-radius:3px;border-bottom-left-radius:3px;border:1px solid #e6e6e6;border-right:none;overflow:hidden;text-overflow:ellipsis;transition:color .3s ease,background-color .3s ease}.side-tabs-menu>li>a.active,.side-tabs-menu>li>a:focus,.side-tabs-menu>li>a:hover{background-color:#fff}.side-tabs-menu>li>a.active{color:#444;cursor:default}",""]),e.exports=t},2163:function(e,t,n){var a=n(660),r=n(2164);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1},o=(a(r,i),r.locals?r.locals:{});e.exports=o},2164:function(e,t,n){(t=n(661)(!1)).push([e.i,".settings-layout{margin-bottom:60px}.settings-definitions-list>li+li{margin-top:30px}.settings-definition{margin:0 -20px;padding:10px 20px;border-top:1px solid transparent;border-bottom:1px solid transparent;display:flex;align-items:stretch}.settings-definition-changed{border-top:1px solid #faebcc;border-bottom:1px solid #faebcc;background-color:#fcf8e3}.settings-definition-left{width:330px;padding-right:30px;box-sizing:border-box}.settings-definition-right{position:relative;width:calc(100% - 330px);box-sizing:border-box}.settings-definition-name{text-overflow:ellipsis}.settings-definition-key{line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.settings-definition-key:hover{overflow:visible}.settings-definition-state{min-height:32px;padding-bottom:4px}.settings-definition-state>span{display:flex}.settings-definition-changes{margin-top:20px;padding-top:20px;border-top:1px dotted #e6e6e6}.settings-sub-categories-list>li+li,.settings-sub-category{margin:30px -20px 0;padding:30px 20px;border-top:1px solid #e6e6e6}.settings-sub-category-name{margin-bottom:20px;font-size:16px}.settings-sub-category-description{margin-top:-15px;margin-bottom:20px;color:#777}.settings-large-input{width:100%!important;max-width:400px;min-width:200px}",""]),e.exports=t},2224:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return fn}));var a=n(844),r=n.n(a),i=n(13),o=n(677),s=n(666),l=n(37),c=n(680),u=n(668),p=(n(2161),n(51)),m=n(954),d=n(735),f=n(849),g=n(1484),h=n(1206),b=n(1151);function y(e,t){return function(n){return t(Object(h.j)(e)),Object(p.parseError)(n).then((function(n){return t(Object(h.d)(e,n)),Promise.reject()}))}}n(2163);var v=n(1001),E=n(949),O=n(774),_=n(895),j=n(964),C=n.n(j),S=n(685),k=n(653),N=n(663),w=n(665),D=n.n(w),x=n(780),F=n.n(x),P=n(927),A=n.n(P),V=n(659),B=n(683),L=n.n(B),I=n(674);function R(e){var t=e.action,n=e.children,a=e.help,r=Object(l.translate)("settings.almintegration.form.header",t);return i.createElement(L.a,{header:r,onClose:e.onCancel,onSubmit:e.onSubmit,size:"medium"},(function(t){var o=t.onCloseClick,s=t.onFormSubmit,c=t.submitting;return i.createElement("form",{className:"views-form",onSubmit:s},i.createElement("div",{className:"modal-head"},i.createElement("h2",null,r)),i.createElement("div",{className:"modal-body modal-container"},i.createElement("div",{className:"display-flex-start"},i.createElement("div",{className:"flex-1"},n),a&&i.createElement(I.Alert,{className:"huge-spacer-left flex-1",variant:"info"},a))),i.createElement("div",{className:"modal-foot"},i.createElement(D.a,{className:"spacer-right",loading:c}),i.createElement(V.SubmitButton,{disabled:c||!e.canSubmit()},Object(l.translate)("settings.almintegration.form.save")),i.createElement(V.ResetButtonLink,{onClick:o},Object(l.translate)("cancel"))))}))}var U=n(792),K=n.n(U);function T(e){var t=e.children,n=e.help,a=e.loading,r=e.success;return i.createElement("form",{className:"views-form","data-test":"settings__alm-form",onSubmit:function(t){t.preventDefault(),e.onSubmit()}},i.createElement("div",{className:"display-flex-start"},i.createElement("div",{className:"flex-1"},t,i.createElement("div",{className:"display-flex-center"},void 0===e.onEdit?i.createElement(V.SubmitButton,{disabled:a||!e.canSubmit()},Object(l.translate)("settings.almintegration.form.save")):i.createElement(V.Button,{disabled:a,onClick:e.onEdit},Object(l.translate)("edit")),e.onDelete&&i.createElement(V.Button,{className:"button-red spacer-left",disabled:a,onClick:e.onDelete},Object(l.translate)("delete")),e.onCancel&&i.createElement(V.ResetButtonLink,{className:"spacer-left",onClick:e.onCancel},Object(l.translate)("cancel")),a&&i.createElement(D.a,{className:"spacer-left"}),!a&&r&&i.createElement("span",{className:"text-success spacer-left"},i.createElement(K.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved")))),n&&i.createElement(I.Alert,{className:"huge-spacer-left flex-1",variant:"info"},n)))}var M,G=(M=function(e,t){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),z=function(){return(z=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},q=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCancel=function(){n.setState({formData:n.props.bindingDefinition,touched:!1}),n.props.onCancel&&n.props.onCancel()},n.handleDelete=function(){n.props.onDelete&&n.props.onDelete(n.props.bindingDefinition.key)},n.handleEdit=function(){n.props.onEdit&&n.props.onEdit(n.props.bindingDefinition.key)},n.handleFieldChange=function(e,t){n.setState((function(n){var a,r=n.formData;return{formData:z(z({},r),(a={},a[e]=t,a)),touched:!0}}))},n.handleFormSubmit=function(){n.props.onSubmit(n.state.formData,n.props.bindingDefinition.key)},n.canSubmit=function(){var e,t=n.props,a=t.hideKeyField,r=t.optionalFields,i=n.state,o=i.formData,s=i.touched;return e=a?F()(o,"key"):z({},o),r&&r.length>0&&(e=F()(e,r)),s&&!Object.values(e).some((function(e){return!e}))},n.state={formData:t.bindingDefinition,touched:!1},n}return G(t,e),t.prototype.componentDidUpdate=function(e){A()(e.bindingDefinition,this.props.bindingDefinition)||this.setState({formData:this.props.bindingDefinition,touched:!1})},t.prototype.render=function(){var e=this.props,t=e.bindingDefinition,n=e.children,a=e.help,r=e.hideKeyField,o=e.showInModal,s=e.loading,l=void 0!==s&&s,c=e.readOnly,u=void 0!==c&&c,p=e.success,m=void 0!==p&&p,d=this.state,f=d.formData,g=d.touched,h=void 0!==this.props.onEdit,b=g||!h,y=h&&void 0!==this.props.onDelete;return o?i.createElement(R,{action:t.key?"edit":"create",canSubmit:this.canSubmit,help:a,onCancel:this.handleCancel,onSubmit:this.handleFormSubmit},n({formData:f,onFieldChange:this.handleFieldChange})):i.createElement(T,{canSubmit:this.canSubmit,help:a,loading:l,onCancel:b?this.handleCancel:void 0,onDelete:y?this.handleDelete:void 0,onEdit:h?this.handleEdit:void 0,onSubmit:this.handleFormSubmit,success:m},n({formData:f,hideKeyField:r,onFieldChange:this.handleFieldChange,readOnly:u}))},t}(i.PureComponent),H=n(1503),W=n.n(H);function Y(e){var t=e.additionalColumnsHeaders,n=e.additionalTableInfo,a=e.alm,r=e.definitions;return i.createElement(i.Fragment,null,i.createElement("div",{className:"spacer-top big-spacer-bottom display-flex-space-between"},i.createElement("h2",{className:"settings-sub-category-name"},Object(l.translate)("settings.almintegration.table.title")),i.createElement(V.Button,{"data-test":"settings__alm-create",onClick:e.onCreate},Object(l.translate)("settings.almintegration.table.create"))),n,i.createElement("table",{className:"data zebra fixed spacer-bottom"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,Object(l.translate)("settings.almintegration.table.column.name")),t.map((function(e){return i.createElement("th",{key:e},e)})),i.createElement("th",{className:"action-small text-center"},Object(l.translate)("settings.almintegration.table.column.edit")),i.createElement("th",{className:"action text-center"},Object(l.translate)("settings.almintegration.table.column.delete")))),i.createElement("tbody",null,0===r.length?i.createElement("tr",{"data-test":"settings__alm-empty-table"},i.createElement("td",{colSpan:3+t.length},Object(l.translate)("settings.almintegration.table.empty",a))):r.map((function(t){var n=t.key,a=t.additionalColumns;return i.createElement("tr",{"data-test":"settings__alm-table-row",key:n},i.createElement("td",{className:"nowrap hide-overflow",title:n},n),a.map((function(e){return i.createElement("td",{className:"nowrap hide-overflow",key:e,title:e},e)})),i.createElement("td",{className:"text-center","data-test":"settings__alm-table-row-edit"},i.createElement(V.ButtonIcon,{onClick:function(){return e.onEdit(n)}},i.createElement(W.a,null))),i.createElement("td",{className:"text-center","data-test":"settings__alm-table-row-delete"},i.createElement(V.DeleteButton,{onClick:function(){return e.onDelete(n)}})))})))))}var J=n(658),X=n.n(J),Q=n(808),Z=n.n(Q),$=n(1013),ee=n.n($),te=n(681);function ne(e){var t=e.active,n=e.description,a=e.inactiveReason,r=e.name;return i.createElement("div",{className:J("boxed-group-inner display-flex-start width-30 spacer-right spacer-bottom bordered",{"bg-muted":!t})},t?i.createElement(Z.a,{className:"little-spacer-top spacer-right",fill:te.colors.green}):i.createElement(ee.a,{className:"little-spacer-top spacer-right",fill:te.colors.gray60}),i.createElement("div",{className:"display-flex-column abs-height-100"},i.createElement("h4",null,r),i.createElement("div",{className:"spacer-top flex-1"},n),i.createElement("div",{className:"spacer-top"},t?i.createElement("em",{className:"text-success"},Object(l.translate)("settings.almintegration.feature.enabled")):i.createElement("em",{className:"text-muted"},a||Object(l.translate)("settings.almintegration.feature.disabled")))))}var ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},re=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function ie(e){var t,n,a=e.additionalColumnsHeaders,r=e.additionalColumnsKeys,o=e.additionalTableInfo,s=e.alm,c=e.defaultBinding,u=e.definitions,p=e.editedDefinition,m=e.features,d=void 0===m?[]:m,f=e.form,g=e.loading,h=e.multipleAlmEnabled,b=e.optionalFields,y=e.success,v=e.help,E=void 0===v?i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.almintegration."+s+".info"),id:"settings.almintegration."+s+".info",values:{link:i.createElement(N.Link,{target:"_blank",to:"/documentation/analysis/pr-decoration/"},Object(l.translate)("learn_more"))}}):v,O=[];return h?O=u.map((function(e){var t=e.key,n=re(e,["key"]);return{key:t,additionalColumns:r.map((function(e){return n[e]}))}})):(void 0===(t=p)&&u.length>0&&(t=u[0]),n=t&&void 0===p),i.createElement("div",{className:"big-padded"},h?i.createElement(D.a,{loading:g},i.createElement(Y,{additionalColumnsHeaders:a,additionalTableInfo:o,alm:s,definitions:O,onCreate:e.onCreate,onDelete:e.onDelete,onEdit:e.onEdit}),p&&i.createElement(q,{bindingDefinition:p,help:E,onCancel:e.onCancel,onSubmit:e.onSubmit,optionalFields:b,showInModal:!0},f)):i.createElement(q,{bindingDefinition:t||c,help:E,hideKeyField:!0,loading:g,onCancel:e.onCancel,onDelete:t?e.onDelete:void 0,onEdit:n?e.onEdit:void 0,onSubmit:e.onSubmit,optionalFields:b,readOnly:n,success:y},f),d.length>0&&i.createElement("div",{className:"big-spacer-top big-padded-top bordered-top"},i.createElement("h3",{className:"big-spacer-bottom"},Object(l.translate)("settings.almintegration.features")),i.createElement("div",{className:"display-flex-wrap"},d.map((function(e,t){return i.createElement(ne,ae({key:t},e))})))))}var oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),se=function(){return(se=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={submitting:!1,success:!1},t.handleCancel=function(){t.setState({editedDefinition:void 0,success:!1})},t.handleCreate=function(){t.setState({editedDefinition:t.props.defaultBinding,success:!1})},t.handleEdit=function(e){var n=t.props.definitions.find((function(t){return t.key===e}));t.setState({editedDefinition:n,success:!1})},t.handleSubmit=function(e,n){var a=n?t.props.updateConfiguration(se(se({newKey:e.key},e),{key:n})):t.props.createConfiguration(e.key?e:se(se({},e),{key:t.props.alm}));return t.setState({submitting:!0}),a.then((function(){t.mounted&&t.setState({editedDefinition:void 0,submitting:!1,success:!0})})).then(t.props.onUpdateDefinitions).catch((function(){t.mounted&&t.setState({submitting:!1,success:!1})}))},t}return oe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.additionalColumnsHeaders,n=void 0===t?[]:t,a=e.additionalColumnsKeys,r=void 0===a?[]:a,o=e.additionalTableInfo,s=e.alm,l=e.defaultBinding,c=e.definitions,u=e.features,p=e.form,m=e.help,d=e.loading,f=e.multipleAlmEnabled,g=e.optionalFields,h=this.state,b=h.editedDefinition,y=h.submitting,v=h.success;return i.createElement(ie,{additionalColumnsHeaders:n,additionalColumnsKeys:r,additionalTableInfo:o,alm:s,defaultBinding:l,definitions:c,editedDefinition:b,features:u,form:p,help:m,loading:d||y,multipleAlmEnabled:f,onCancel:this.handleCancel,onCreate:this.handleCreate,onDelete:this.props.onDelete,onEdit:this.handleEdit,onSubmit:this.handleSubmit,optionalFields:g,success:v})},t}(i.PureComponent),ce=n(671),ue=n.n(ce);function pe(e){var t=e.autoFocus,n=e.help,a=e.id,r=e.isTextArea,o=e.maxLength,s=e.onFieldChange,c=e.optional,u=e.propKey,p=e.readOnly,m=void 0!==p&&p,d=e.value;return i.createElement("div",{className:"modal-field"},i.createElement("label",{className:"display-flex-center",htmlFor:a},Object(l.translate)("settings.almintegration.form",a),!c&&i.createElement("em",{className:"mandatory"},"*"),n&&i.createElement(ue.a,{className:"spacer-left",overlay:n,placement:"right"})),r?i.createElement("textarea",{className:"settings-large-input",disabled:m,id:a,maxLength:o||2e3,onChange:function(e){return s(u,e.currentTarget.value)},required:!c,rows:5,value:d}):i.createElement("input",{autoFocus:t,className:"input-super-large",disabled:m,id:a,maxLength:o||100,name:a,onChange:function(e){return s(u,e.currentTarget.value)},size:50,type:"text",value:d}))}function me(e){var t=e.formData,n=e.hideKeyField,a=e.onFieldChange,r=e.readOnly;return i.createElement(i.Fragment,null,!n&&i.createElement(pe,{autoFocus:!0,help:Object(l.translate)("settings.almintegration.form.name.azure.help"),id:"name.azure",onFieldChange:a,propKey:"key",readOnly:r,value:t.key}),i.createElement(pe,{help:Object(l.translate)("settings.almintegration.form.personal_access_token.azure.help"),id:"personal_access_token",isTextArea:!0,onFieldChange:a,propKey:"personalAccessToken",readOnly:r,value:t.personalAccessToken}))}var de=function(){return(de=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function fe(e){var t=e.multipleAlmEnabled,n=e.definitions,a=e.loading;return i.createElement("div",{className:"bordered"},i.createElement(le,{alm:_.a.Azure,createConfiguration:E.b,defaultBinding:{key:"",personalAccessToken:""},definitions:n,features:[{name:Object(l.translate)("settings.almintegration.feature.pr_decoration.title"),active:n.length>0,description:Object(l.translate)("settings.almintegration.feature.pr_decoration.description"),inactiveReason:Object(l.translate)("settings.almintegration.feature.need_at_least_1_binding")}],form:function(e){return i.createElement(me,de({},e))},loading:a,multipleAlmEnabled:t,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions,updateConfiguration:E.o}))}function ge(e){var t=e.formData,n=e.hideKeyField,a=e.onFieldChange,r=e.readOnly;return i.createElement(i.Fragment,null,!n&&i.createElement(pe,{autoFocus:!0,help:Object(l.translate)("settings.almintegration.form.name.bitbucket.help"),id:"name.bitbucket",maxLength:100,onFieldChange:a,propKey:"key",readOnly:r,value:t.key}),i.createElement(pe,{help:i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.almintegration.form.url.bitbucket.help"),id:"settings.almintegration.form.url.bitbucket.help",values:{example:"https://bitbucket-server.your-company.com"}}),id:"url.bitbucket",maxLength:2e3,onFieldChange:a,propKey:"url",readOnly:r,value:t.url}),i.createElement(pe,{id:"personal_access_token",isTextArea:!0,onFieldChange:a,propKey:"personalAccessToken",readOnly:r,value:t.personalAccessToken}))}var he=function(){return(he=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function be(e){var t=e.multipleAlmEnabled,n=e.definitions,a=e.loading;return i.createElement("div",{className:"bordered"},i.createElement(le,{additionalColumnsHeaders:[Object(l.translate)("settings.almintegration.table.column.bitbucket.url")],additionalColumnsKeys:["url"],additionalTableInfo:i.createElement(I.Alert,{className:"big-spacer-bottom width-50",variant:"info"},i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.almintegration.feature.alm_repo_import.disabled_if_multiple_bbs_instances"),id:"settings.almintegration.feature.alm_repo_import.disabled_if_multiple_bbs_instances",values:{feature:i.createElement("em",null,Object(l.translate)("settings.almintegration.feature.alm_repo_import.title"))}})),alm:_.a.Bitbucket,createConfiguration:E.c,defaultBinding:{key:"",url:"",personalAccessToken:""},definitions:n,features:[{name:Object(l.translate)("settings.almintegration.feature.pr_decoration.title"),active:n.length>0,description:Object(l.translate)("settings.almintegration.feature.pr_decoration.description"),inactiveReason:Object(l.translate)("settings.almintegration.feature.need_at_least_1_binding")},{name:Object(l.translate)("settings.almintegration.feature.alm_repo_import.title"),active:1===n.length,description:Object(l.translate)("settings.almintegration.feature.alm_repo_import.description"),inactiveReason:Object(l.translateWithParameters)("onboarding.create_project.too_many_bbs_instances_X",n.length)}],form:function(e){return i.createElement(ge,he({},e))},help:i.createElement(i.Fragment,null,i.createElement("h3",null,Object(l.translate)("onboarding.create_project.pat_help.title")),i.createElement("p",{className:"big-spacer-top"},Object(l.translate)("settings.almintegration.bitbucket.help_1")),i.createElement("ul",{className:"big-spacer-top list-styled"},i.createElement("li",null,Object(l.translate)("settings.almintegration.bitbucket.help_2")),i.createElement("li",null,Object(l.translate)("settings.almintegration.bitbucket.help_3"))),i.createElement("p",{className:"big-spacer-top big-spacer-bottom"},i.createElement(N.Link,{target:"_blank",to:"/documentation/analysis/pr-decoration/"},Object(l.translate)("learn_more")))),loading:a,multipleAlmEnabled:t,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions,updateConfiguration:E.p}))}var ye=n(693),ve=n.n(ye);function Ee(e){var t=e.id,n=e.onDelete,a=e.onCancel,r=e.projectCount;return i.createElement(ve.a,{confirmButtonText:Object(l.translate)("delete"),confirmData:t,header:Object(l.translate)("settings.almintegration.delete.header"),isDestructive:!0,onClose:a,onConfirm:n},i.createElement(i.Fragment,null,i.createElement("p",{className:"spacer-bottom"},i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.almintegration.delete.message"),id:"settings.almintegration.delete.message",values:{id:i.createElement("b",null,t)}})),function(e){return void 0===e?i.createElement("p",null,Object(l.translate)("settings.almintegration.delete.no_info")):e?i.createElement("p",null,Object(l.translateWithParameters)("settings.almintegration.delete.info",e)," "):null}(r)))}var Oe=n(675),_e=n.n(Oe),je=n(732),Ce=n.n(je),Se=n(862),ke=n.n(Se),Ne=n(676),we=n.n(Ne),De=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={reseting:!1},t.handleClose=function(){t.setState({reseting:!1})},t.handleReset=function(){t.setState({reseting:!0})},t.handleSubmit=function(){t.props.onReset(),t.handleClose()},t}return De(t,e),t.prototype.renderModal=function(){var e=Object(l.translate)("settings.reset_confirm.title");return i.createElement(we.a,{contentLabel:e,onRequestClose:this.handleClose},i.createElement("header",{className:"modal-head"},i.createElement("h2",null,e)),i.createElement("form",{onSubmit:this.handleSubmit},i.createElement("div",{className:"modal-body"},i.createElement("p",null,Object(l.translate)("settings.reset_confirm.description"))),i.createElement("footer",{className:"modal-foot"},i.createElement(V.SubmitButton,{className:"button-red"},Object(l.translate)("reset_verb")),i.createElement(V.ResetButtonLink,{onClick:this.handleClose},Object(l.translate)("cancel")))))},t.prototype.render=function(){var e=this.props,t=e.setting,n=e.isDefault,a=e.changedValue,r=e.hasValueChanged,o=!Object(f.m)(t.definition,Object(f.g)(t)),s=null!=a&&Object(f.m)(t.definition,a),c=o&&(s||!n&&!r);return i.createElement(i.Fragment,null,n&&!r&&i.createElement("div",{className:"spacer-top note",style:{lineHeight:"24px"}},Object(l.translate)("settings._default")),i.createElement("div",{className:"settings-definition-changes nowrap"},r&&i.createElement(V.Button,{className:"spacer-right button-success",disabled:this.props.hasError,onClick:this.props.onSave},Object(l.translate)("save")),c&&i.createElement(V.Button,{className:"spacer-right",onClick:this.handleReset},Object(l.translate)("reset_verb")),r&&i.createElement(V.ResetButtonLink,{className:"spacer-right",onClick:this.props.onCancel},Object(l.translate)("cancel")),c&&i.createElement("span",{className:"note"},Object(l.translate)("default"),": ",Object(f.c)(t)),this.state.reseting&&this.renderModal()))},t}(i.PureComponent),Fe=n(1431),Pe=n.n(Fe);function Ae(e){var t=e.onChange,n=e.name,a=e.value,r=null!=a&&a;return i.createElement("div",{className:"display-inline-block text-top"},i.createElement(Pe.a,{name:n,onChange:t,value:r}),null==a&&i.createElement("span",{className:"spacer-left note"},Object(l.translate)("settings.not_set")))}var Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){t.props.onChange(e.currentTarget.value)},t.handleKeyDown=function(e){13===e.keyCode&&t.props.onSave?t.props.onSave():27===e.keyCode&&t.props.onCancel&&t.props.onCancel()},t}return Ve(t,e),t.prototype.render=function(){return i.createElement("input",{className:J("text-top",this.props.className),name:this.props.name,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown,type:this.props.type,value:this.props.value||""})},t}(i.PureComponent),Le=function(){return(Le=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Ie(e){return i.createElement(Be,Le({},e,{className:"input-small",type:"text"}))}var Re=n(1140),Ue=n.n(Re),Ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={changing:!t.props.value},t.handleInputChange=function(e){t.props.onChange(e.target.value)},t.handleChangeClick=function(){t.setState({changing:!0})},t}return Ke(t,e),t.prototype.componentWillReceiveProps=function(e){!this.props.hasValueChanged&&this.props.value===e.value||e.hasValueChanged||this.setState({changing:!e.value})},t.prototype.renderInput=function(){return i.createElement("form",null,i.createElement("input",{className:"hidden",type:"password"}),i.createElement("input",{autoComplete:"off",autoFocus:this.state.changing&&this.props.value,className:"js-password-input settings-large-input text-top",name:this.props.name,onChange:this.handleInputChange,type:"password",value:this.props.value}))},t.prototype.render=function(){return this.state.changing?this.renderInput():i.createElement(i.Fragment,null,i.createElement(Ue.a,{className:"text-middle big-spacer-right",fill:te.colors.gray60}),i.createElement(V.Button,{className:"text-middle",onClick:this.handleChangeClick},Object(l.translate)("change_verb")))},t}(i.PureComponent),Me=n(688),Ge=n.n(Me),ze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){var n=e.value;t.props.onChange(n)},t}return ze(t,e),t.prototype.render=function(){var e=this.props.options.map((function(e){return{label:e,value:e}}));return i.createElement(Ge.a,{className:"settings-large-input",clearable:!1,name:this.props.name,onChange:this.handleInputChange,options:e,value:this.props.value})},t}(i.PureComponent),He=function(){return(He=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function We(e){return i.createElement(Be,He({},e,{className:"settings-large-input",type:"text"}))}var Ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputChange=function(e){t.props.onChange(e.target.value)},t}return Ye(t,e),t.prototype.render=function(){return i.createElement("textarea",{className:"settings-large-input text-top",name:this.props.name,onChange:this.handleInputChange,rows:5,value:this.props.value||""})},t}(i.PureComponent),Xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Qe=function(){return(Qe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ze=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},$e={STRING:We,TEXT:Je,PASSWORD:Te,BOOLEAN:Ae,INTEGER:Ie,LONG:Ie,FLOAT:Ie},et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),t.prototype.render=function(){var e=this.props,t=e.setting,n=Ze(e,["setting"]),a=t.definition,r=this.props.name||Object(f.j)(a);if("SINGLE_SELECT_LIST"===a.type)return i.createElement(qe,Qe({isDefault:Object(f.l)(t),name:r,options:a.options},n));var o=a.type&&$e[a.type]||We;return i.createElement(o,Qe({isDefault:Object(f.l)(t),name:r},n))},t}(i.PureComponent),tt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),nt=function(){return(nt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},at=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)a[r]=i[o];return a},rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ensureValue=function(){return t.props.value||[]},t.handleSingleInputChange=function(e,n){var a=at(t.ensureValue());a.splice(e,1,n),t.props.onChange(a)},t.handleDeleteValue=function(e){var n=at(t.ensureValue());n.splice(e,1),t.props.onChange(n)},t}return tt(t,e),t.prototype.renderInput=function(e,t,n){var a=this,r=this.props.setting;return i.createElement("li",{className:"spacer-bottom",key:t},i.createElement(et,{hasValueChanged:this.props.hasValueChanged,onChange:function(e){return a.handleSingleInputChange(t,e)},setting:nt(nt({},r),{definition:nt(nt({},r.definition),{multiValues:!1}),values:void 0}),value:e}),!n&&i.createElement("div",{className:"display-inline-block spacer-left"},i.createElement(V.DeleteButton,{className:"js-remove-value",onClick:function(){return a.handleDeleteValue(t)}})))},t.prototype.render=function(){var e=this,t=at(this.ensureValue(),Object(f.d)(this.props.setting.definition));return i.createElement("div",null,i.createElement("ul",null,t.map((function(n,a){return e.renderInput(n,a,a===t.length-1)}))))},t}(i.PureComponent),it=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ot=function(){return(ot=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},st=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)a[r]=i[o];return a},lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteValue=function(e){var n=st(t.ensureValue());n.splice(e,1),t.props.onChange(n)},t.handleInputChange=function(e,n,a){var r,i=Object(f.d)(t.props.setting.definition)[0],o=st(t.ensureValue()),s=ot(ot(ot({},i),o[e]),((r={})[n]=a,r));return o.splice(e,1,s),t.props.onChange(o)},t}return it(t,e),t.prototype.ensureValue=function(){return this.props.value||[]},t.prototype.renderFields=function(e,t,n){var a=this,r=this.props.setting,o=r.definition;return i.createElement("tr",{key:t},Object(f.k)(o)&&o.fields.map((function(n){return i.createElement("td",{key:n.key},i.createElement(et,{hasValueChanged:a.props.hasValueChanged,name:Object(f.j)(o,n.key),onChange:function(e){return a.handleInputChange(t,n.key,e)},setting:ot(ot({},r),{definition:n,value:e[n.key]}),value:e[n.key]}))})),i.createElement("td",{className:"thin nowrap text-middle"},!n&&i.createElement(V.DeleteButton,{className:"js-remove-value",onClick:function(){return a.handleDeleteValue(t)}})))},t.prototype.render=function(){var e=this,t=this.props.setting.definition,n=st(this.ensureValue(),Object(f.d)(t));return i.createElement("div",null,i.createElement("table",{className:"data zebra-hover no-outer-padding",style:{width:"auto",minWidth:480,marginTop:-12}},i.createElement("thead",null,i.createElement("tr",null,Object(f.k)(t)&&t.fields.map((function(e){return i.createElement("th",{key:e.key},e.name,null!=e.description&&i.createElement("span",{className:"spacer-top small"},e.description))})),i.createElement("th",null," "))),i.createElement("tbody",null,n.map((function(t,a){return e.renderFields(t,a,a===n.length-1)})))))},t}(i.PureComponent),ct=function(){return(ct=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function ut(e){var t=e.setting.definition;return Object(f.k)(t)&&t.multiValues?i.createElement(rt,ct({},e)):"PROPERTY_SET"===t.type?i.createElement(lt,ct({},e)):i.createElement(et,ct({},e))}var pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={success:!1},t.handleChange=function(e){clearTimeout(t.timeout),t.props.changeValue(t.props.setting.definition.key,e),t.handleCheck()},t.handleReset=function(){var e=t.props,n=e.component,a=e.setting.definition,r=n&&n.key;return t.props.resetValue(a.key,r).then((function(){t.props.cancelChange(a.key),t.safeSetState({success:!0}),t.timeout=window.setTimeout((function(){return t.safeSetState({success:!1})}),3e3)}))},t.handleCancel=function(){var e=t.props.setting;t.props.cancelChange(e.definition.key),t.props.passValidation(e.definition.key)},t.handleCheck=function(){var e=t.props.setting;t.props.checkValue(e.definition.key)},t.handleSave=function(){if(null!=t.props.changedValue){t.safeSetState({success:!1});var e=t.props,n=e.component,a=e.setting;t.props.saveValue(a.definition.key,n&&n.key).then((function(){t.safeSetState({success:!0}),t.timeout=window.setTimeout((function(){return t.safeSetState({success:!1})}),3e3)}),(function(){}))}},t}return pt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.safeSetState=function(e){this.mounted&&this.setState(e)},t.prototype.render=function(){var e=this.props,t=e.changedValue,n=e.loading,a=e.setting,r=e.validationMessage,o=a.definition,s=Object(f.f)(o),c=null!=r,u=null!=t,p=u?t:Object(f.g)(a),m=Object(f.l)(a),d=Object(f.e)(o);return i.createElement("div",{className:X()("settings-definition",{"settings-definition-changed":u}),"data-key":o.key},i.createElement("div",{className:"settings-definition-left"},i.createElement("h3",{className:"settings-definition-name",title:s},s),d&&i.createElement("div",{className:"markdown small spacer-top",dangerouslySetInnerHTML:{__html:Object(f.n)(d)}}),i.createElement("div",{className:"settings-definition-key note little-spacer-top"},Object(l.translateWithParameters)("settings.key_x",o.key))),i.createElement("div",{className:"settings-definition-right"},i.createElement("div",{className:"settings-definition-state"},n&&i.createElement("span",{className:"text-info"},i.createElement("i",{className:"spinner spacer-right"}),Object(l.translate)("settings.state.saving")),!n&&r&&i.createElement("span",{className:"text-danger"},i.createElement(ke.a,{className:"spacer-right"}),i.createElement("span",null,Object(l.translateWithParameters)("settings.state.validation_failed",r))),!n&&!c&&this.state.success&&i.createElement("span",{className:"text-success"},i.createElement(K.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved"))),i.createElement(ut,{hasValueChanged:u,onCancel:this.handleCancel,onChange:this.handleChange,onSave:this.handleSave,setting:a,value:p}),i.createElement(xe,{changedValue:t,hasError:c,hasValueChanged:u,isDefault:m,onCancel:this.handleCancel,onReset:this.handleReset,onSave:this.handleSave,setting:a})))},t}(i.PureComponent),dt={cancelChange:h.a,changeValue:h.b,checkValue:function(e){return function(t,n){var a=n(),r=Object(u.getSettingsAppDefinition)(a,e),i=Object(u.getSettingsAppChangedValue)(a,e);return Object(f.m)(r,i)?(void 0===r.defaultValue?t(Object(h.d)(e,Object(l.translate)("settings.state.value_cant_be_empty_no_default"))):t(Object(h.d)(e,Object(l.translate)("settings.state.value_cant_be_empty"))),!1):(t(Object(h.h)(e)),!0)}},passValidation:h.h,resetValue:function(e,t){return function(n){return n(Object(h.i)(e)),Object(m.f)({keys:e,component:t}).then((function(){return Object(m.e)({keys:e,component:t})})).then((function(a){a.length>0?n(Object(b.c)(a,t)):n(Object(b.c)([{key:e}],t)),n(Object(h.h)(e)),n(Object(h.j)(e))})).catch(y(e,n))}},saveValue:function(e,t){return function(n,a){n(Object(h.i)(e));var r=a(),i=Object(u.getSettingsAppDefinition)(r,e),o=Object(u.getSettingsAppChangedValue)(r,e);return Object(f.m)(i,o)?(n(Object(h.d)(e,Object(l.translate)("settings.state.value_cant_be_empty"))),n(Object(h.j)(e)),Promise.reject()):Object(m.h)(i,o,t).then((function(){return Object(m.e)({keys:e,component:t})})).then((function(a){n(Object(b.c)(a,t)),n(Object(h.a)(e)),n(Object(h.h)(e)),n(Object(h.j)(e))})).catch(y(e,n))}}},ft=Object(s.connect)((function(e,t){return{changedValue:Object(u.getSettingsAppChangedValue)(e,t.setting.definition.key),loading:Object(u.isSettingsAppLoading)(e,t.setting.definition.key),validationMessage:Object(u.getSettingsAppValidationMessage)(e,t.setting.definition.key)}}),dt)(mt);function gt(e){var t=e.component,n=e.settings;return i.createElement("ul",{className:"settings-definitions-list"},n.map((function(e){return i.createElement("li",{key:e.definition.key},i.createElement(ft,{component:t,setting:e}))})))}var ht=n(727),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),yt=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleError=function(e){return Object(p.parseError)(e).then((function(e){n.mounted&&n.setState({error:e,loading:!1})}))},n.handleFormSubmit=function(e){e.preventDefault(),n.setState({success:!1,error:void 0,loading:!0});var t=n.state,a=t.recipient,r=t.subject,i=t.message;Object(m.g)(a,r,i).then((function(){n.mounted&&n.setState({success:!0,loading:!1})}),n.handleError)},n.onRecipientChange=function(e){n.setState({recipient:e.target.value})},n.onSubjectChange=function(e){n.setState({subject:e.target.value})},n.onMessageChange=function(e){n.setState({message:e.target.value})},n.state={recipient:n.props.currentUser.email||"",subject:Object(l.translate)("email_configuration.test.subject"),message:Object(l.translate)("email_configuration.test.message_text"),loading:!1,success:!1},n}return bt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){return i.createElement("div",{className:"settings-definition"},i.createElement("div",{className:"settings-definition-left"},i.createElement("h3",{className:"settings-definition-name"},Object(l.translate)("email_configuration.test.title"))),i.createElement("form",{className:"settings-definition-right",onSubmit:this.handleFormSubmit},this.state.success&&i.createElement("div",{className:"form-field"},i.createElement(I.Alert,{variant:"success"},Object(l.translateWithParameters)("email_configuration.test.email_was_sent_to_x",this.state.recipient))),null!=this.state.error&&i.createElement("div",{className:"form-field"},i.createElement(I.Alert,{variant:"error"},this.state.error)),i.createElement("div",{className:"form-field"},i.createElement("label",{htmlFor:"test-email-to"},Object(l.translate)("email_configuration.test.to_address"),i.createElement("em",{className:"mandatory"},"*")),i.createElement("input",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-to",onChange:this.onRecipientChange,required:!0,type:"email",value:this.state.recipient})),i.createElement("div",{className:"form-field"},i.createElement("label",{htmlFor:"test-email-subject"},Object(l.translate)("email_configuration.test.subject")),i.createElement("input",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-subject",onChange:this.onSubjectChange,type:"text",value:this.state.subject})),i.createElement("div",{className:"form-field"},i.createElement("label",{htmlFor:"test-email-message"},Object(l.translate)("email_configuration.test.message"),i.createElement("em",{className:"mandatory"},"*")),i.createElement("textarea",{className:"settings-large-input",disabled:this.state.loading,id:"test-email-message",onChange:this.onMessageChange,required:!0,rows:5,value:this.state.message})),i.createElement(V.SubmitButton,{disabled:this.state.loading},Object(l.translate)("email_configuration.test.send")),this.state.loading&&i.createElement(D.a,{className:"spacer-left"})))},t}(i.PureComponent),vt=Object(ht.a)(yt),Et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderEmailForm=function(e){return"general"===t.props.category&&"email"===e?i.createElement(vt,null):null},t}return Et(t,e),t.prototype.componentDidMount=function(){this.fetchValues()},t.prototype.componentDidUpdate=function(e){var t=e.settings.map((function(e){return e.definition.key})),n=this.props.settings.map((function(e){return e.definition.key}));e.component===this.props.component&&A()(t,n)||this.fetchValues()},t.prototype.fetchValues=function(){var e=this.props.settings.map((function(e){return e.definition.key})).join();this.props.fetchValues(e,this.props.component&&this.props.component.key)},t.prototype.render=function(){var e=this,t=Ce()(this.props.settings,(function(e){return e.definition.subCategory})),n=Object.keys(t).map((function(e){return{key:e,name:Object(f.i)(t[e][0].definition.category,e),description:Object(f.h)(t[e][0].definition.category,e)}})),a=_e()(n,(function(e){return e.name.toLowerCase()})),r=this.props.subCategory?a.filter((function(t){return t.key===e.props.subCategory})):a;return i.createElement("ul",{className:"settings-sub-categories-list"},r.map((function(n){return i.createElement("li",{key:n.key},i.createElement("h2",{className:"settings-sub-category-name"},n.name),null!=n.description&&i.createElement("div",{className:"settings-sub-category-description markdown",dangerouslySetInnerHTML:{__html:Object(f.n)(n.description)}}),i.createElement(gt,{component:e.props.component,settings:t[n.key]}),e.renderEmailForm(n.key))})))},t}(i.PureComponent),_t={fetchValues:function(e,t){return function(n){return Object(m.e)({keys:e,component:t}).then((function(e){n(Object(b.c)(e,t)),n(Object(d.c)())}))}}},jt=Object(s.connect)((function(e,t){return{settings:Object(u.getSettingsAppSettingsForCategory)(e,t.category,t.component&&t.component.key)}}),_t)(Ot);function Ct(e){var t=e.formData,n=e.hideKeyField,a=e.onFieldChange,r=e.readOnly;return i.createElement(i.Fragment,null,!n&&i.createElement(pe,{autoFocus:!0,help:Object(l.translate)("settings.almintegration.form.name.github.help"),id:"name.github",onFieldChange:a,propKey:"key",readOnly:r,value:t.key}),i.createElement(pe,{help:i.createElement(i.Fragment,null,Object(l.translate)("settings.almintegration.form.url.github.help1"),i.createElement("br",null),i.createElement("em",null,"https://github.company.com/api/v3"),i.createElement("br",null),i.createElement("br",null),Object(l.translate)("settings.almintegration.form.url.github.help2"),i.createElement("br",null),i.createElement("em",null,"https://api.github.com/")),id:"url.github",maxLength:2e3,onFieldChange:a,propKey:"url",readOnly:r,value:t.url}),i.createElement(pe,{id:"app_id",maxLength:80,onFieldChange:a,propKey:"appId",readOnly:r,value:t.appId}),i.createElement(pe,{id:"private_key",isTextArea:!0,onFieldChange:a,propKey:"privateKey",readOnly:r,value:t.privateKey}))}var St=function(){return(St=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function kt(e){var t=e.branchesEnabled,n=e.component,a=e.multipleAlmEnabled,r=e.definitions,o=e.loading;return i.createElement("div",{className:"bordered"},t&&i.createElement(i.Fragment,null,i.createElement(le,{additionalColumnsHeaders:[Object(l.translate)("settings.almintegration.table.column.github.url"),Object(l.translate)("settings.almintegration.table.column.app_id")],additionalColumnsKeys:["url","appId"],alm:_.a.GitHub,createConfiguration:E.d,defaultBinding:{key:"",appId:"",url:"",privateKey:""},definitions:r,features:[{name:Object(l.translate)("settings.almintegration.feature.pr_decoration.title"),active:r.length>0,description:Object(l.translate)("settings.almintegration.feature.pr_decoration.description"),inactiveReason:Object(l.translate)("settings.almintegration.feature.need_at_least_1_binding")}],form:function(e){return i.createElement(Ct,St({},e))},loading:o,multipleAlmEnabled:a,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions,updateConfiguration:E.q}),i.createElement("div",{className:"huge-spacer-top huge-spacer-bottom bordered-top"})),i.createElement("div",{className:"big-padded"},i.createElement(jt,{category:v.a,component:n,subCategory:_.a.GitHub})))}function Nt(e){var t=e.formData,n=e.hideKeyField,a=e.onFieldChange,r=e.readOnly;return i.createElement(i.Fragment,null,!n&&i.createElement(pe,{autoFocus:!0,help:Object(l.translate)("settings.almintegration.form.name.gitlab.help"),id:"name.gitlab",onFieldChange:a,propKey:"key",readOnly:r,value:t.key}),i.createElement(pe,{help:i.createElement(i.Fragment,null,Object(l.translate)("settings.almintegration.form.url.gitlab.help1"),i.createElement("br",null),i.createElement("br",null),Object(l.translate)("settings.almintegration.form.url.gitlab.help2"),i.createElement("br",null),i.createElement("em",null,"https://gitlab.com/api/v4")),id:"url.gitlab",maxLength:2e3,onFieldChange:a,optional:!0,propKey:"url",readOnly:r,value:t.url||""}),i.createElement(pe,{help:Object(l.translate)("settings.almintegration.form.personal_access_token.gitlab.help"),id:"personal_access_token",isTextArea:!0,onFieldChange:a,propKey:"personalAccessToken",readOnly:r,value:t.personalAccessToken}))}var wt=function(){return(wt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Dt(e){var t=e.branchesEnabled,n=e.component,a=e.multipleAlmEnabled,r=e.definitions,o=e.loading;return i.createElement("div",{className:"bordered"},t&&i.createElement(i.Fragment,null,i.createElement(le,{additionalColumnsHeaders:[Object(l.translate)("settings.almintegration.table.column.gitlab.url")],additionalColumnsKeys:["url"],alm:_.a.GitLab,createConfiguration:E.e,defaultBinding:{key:"",personalAccessToken:"",url:""},definitions:r,features:[{name:Object(l.translate)("settings.almintegration.feature.mr_decoration.title"),active:r.length>0,description:Object(l.translate)("settings.almintegration.feature.mr_decoration.description"),inactiveReason:Object(l.translate)("settings.almintegration.feature.need_at_least_1_binding")}],form:function(e){return i.createElement(Nt,wt({},e))},loading:o,multipleAlmEnabled:a,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions,optionalFields:["url"],updateConfiguration:E.r}),i.createElement("div",{className:"huge-spacer-top huge-spacer-bottom bordered-top"})),i.createElement("div",{className:"big-padded"},i.createElement(jt,{category:v.a,component:n,subCategory:_.a.GitLab})))}var xt=[{key:_.a.GitHub,label:i.createElement(i.Fragment,null,i.createElement("img",{alt:"github",className:"spacer-right",height:16,src:Object(S.getBaseUrl)()+"/images/alm/github.svg"}),"GitHub")},{key:_.a.Bitbucket,label:i.createElement(i.Fragment,null,i.createElement("img",{alt:"bitbucket",className:"spacer-right",height:16,src:Object(S.getBaseUrl)()+"/images/alm/bitbucket.svg"}),"Bitbucket Server"),requiresBranchesEnabled:!0},{key:_.a.Azure,label:i.createElement(i.Fragment,null,i.createElement("img",{alt:"azure",className:"spacer-right",height:16,src:Object(S.getBaseUrl)()+"/images/alm/azure.svg"}),"Azure DevOps Server"),requiresBranchesEnabled:!0},{key:_.a.GitLab,label:i.createElement(i.Fragment,null,i.createElement("img",{alt:"gitlab",className:"spacer-right",height:16,src:Object(S.getBaseUrl)()+"/images/alm/gitlab.svg"}),"GitLab")}];function Ft(e){var t=e.component,n=e.definitionKeyForDeletion,a=e.definitions,r=e.currentAlm,o=e.loading,s=e.branchesEnabled,c=e.multipleAlmEnabled,u=e.projectCount;return i.createElement(i.Fragment,null,i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},Object(l.translate)("settings.almintegration.title"))),i.createElement("div",{className:"markdown small spacer-top big-spacer-bottom"},Object(l.translate)("settings.almintegration.description")),i.createElement(C.a,{onSelect:e.onSelectAlm,selected:r,tabs:xt.filter((function(e){return!(e.requiresBranchesEnabled&&!s)}))}),r===_.a.Azure&&i.createElement(fe,{definitions:a.azure,loading:o,multipleAlmEnabled:c,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),r===_.a.Bitbucket&&i.createElement(be,{definitions:a.bitbucket,loading:o,multipleAlmEnabled:c,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),r===_.a.GitHub&&i.createElement(kt,{branchesEnabled:s,component:t,definitions:a.github,loading:o,multipleAlmEnabled:c,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),r===_.a.GitLab&&i.createElement(Dt,{branchesEnabled:s,definitions:a.gitlab,loading:o,multipleAlmEnabled:c,onDelete:e.onDelete,onUpdateDefinitions:e.onUpdateDefinitions}),n&&i.createElement(Ee,{id:n,onCancel:e.onCancel,onDelete:e.onConfirmDelete,projectCount:u}))}var Pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),At=function(){return(At=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Vt=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.mounted=!1,n.state={currentAlm:_.a.GitHub,definitions:(t={},t[_.a.Azure]=[],t[_.a.Bitbucket]=[],t[_.a.GitHub]=[],t[_.a.GitLab]=[],t),loading:!0},n.deleteConfiguration=function(e){return Object(E.f)(e).then((function(){n.mounted&&n.setState({definitionKeyForDeletion:void 0,projectCount:void 0})})).then(n.fetchPullRequestDecorationSetting)},n.fetchPullRequestDecorationSetting=function(){return n.props.appState.branchesEnabled?(n.setState({loading:!0}),Object(E.h)().then((function(e){n.mounted&&n.setState({definitions:e,loading:!1})})).catch((function(){n.mounted&&n.setState({loading:!1})}))):Promise.resolve()},n.handleSelectAlm=function(e){n.setState({currentAlm:e})},n.handleCancel=function(){n.setState({definitionKeyForDeletion:void 0,projectCount:void 0})},n.handleDelete=function(e){return n.setState({loading:!0}),Object(E.a)(e).then((function(t){n.mounted&&n.setState({definitionKeyForDeletion:e,loading:!1,projectCount:t})})).catch((function(){n.mounted&&n.setState({loading:!1})}))},n}return Pt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchPullRequestDecorationSetting()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.appState,n=t.branchesEnabled,a=t.multipleAlmEnabled,r=e.component;return i.createElement(Ft,At({branchesEnabled:Boolean(n),component:r,multipleAlmEnabled:Boolean(a),onCancel:this.handleCancel,onConfirmDelete:this.deleteConfiguration,onDelete:this.handleDelete,onSelectAlm:this.handleSelectAlm,onUpdateDefinitions:this.fetchPullRequestDecorationSetting},this.state))},t}(i.PureComponent),Bt=Object(O.a)(Vt);function Lt(e){var t=e.component,n=e.selectedCategory;return i.createElement(i.Fragment,null,i.createElement("p",{className:"spacer-bottom"},Object(l.translate)("settings.analysis_scope.wildcards.introduction"),i.createElement(N.Link,{className:"spacer-left",to:"/documentation/project-administration/narrowing-the-focus/"},Object(l.translate)("learn_more"))),i.createElement("table",{className:"data spacer-bottom"},i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",null,"*"),i.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.zero_more_char"))),i.createElement("tr",null,i.createElement("td",null,"**"),i.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.zero_more_dir"))),i.createElement("tr",null,i.createElement("td",null,"?"),i.createElement("td",null,Object(l.translate)("settings.analysis_scope.wildcards.single_char"))))),i.createElement("div",{className:"settings-sub-category"},i.createElement(jt,{category:n,component:t})))}var It=n(710),Rt={abap:v.c,apex:v.c,"c / c++ / objective-c":v.c,"c#":v.c,cobol:v.c,css:v.c,flex:v.c,go:v.c,html:v.c,java:v.c,javascript:v.c,kotlin:v.c,php:v.c,"pl/i":v.c,"pl/sql":v.c,python:v.c,rpg:v.c,ruby:v.c,scala:v.c,swift:v.c,"t-sql":v.c,typescript:v.c,"vb.net":v.c,"visual basic":v.c,xml:v.c},Ut=function(){return(Ut=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Kt=Object(It.a)(Object(s.connect)((function(e){return{categories:Object(u.getSettingsAppAllCategories)(e)}}))((function(e){var t=e.categories,n=e.component,a=e.location,r=e.router,o=function(e,t){var n=v.c.toLowerCase(),a=t.toLowerCase(),r=e.filter((function(e){return Rt[e.toLowerCase()]===n})).map((function(e){return{label:Object(f.b)(e),value:e.toLowerCase(),originalValue:e}})),i=void 0;a!==n&&r.find((function(e){return e.value===a}))&&(i=a);return{availableLanguages:r,selectedLanguage:i}}(t,e.selectedCategory),s=o.availableLanguages,c=o.selectedLanguage;return i.createElement(i.Fragment,null,i.createElement("h2",{className:"settings-sub-category-name"},Object(l.translate)("property.category.languages")),i.createElement("div",{"data-test":"language-select"},i.createElement(Ge.a,{className:"input-large",onChange:function(e){r.push(Ut(Ut({},a),{query:Ut(Ut({},a.query),{category:e.originalValue})}))},options:s,placeholder:Object(l.translate)("settings.languages.select_a_language_placeholder"),value:c})),c&&i.createElement("div",{className:"settings-sub-category"},i.createElement(jt,{category:c,component:n})))}))),Tt=n(1138),Mt=n(1187),Gt=n(1188),zt=n(1139),qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0,days:"30",saving:!1,success:!1},t.onSelectDays=function(e){t.setState({days:e,success:!1})},t.onSelectSetting=function(e){t.setState({selected:e,success:!1})},t.onCancel=function(){t.setState((function(e){var t=e.currentSetting,n=e.currentSettingValue,a=e.days;return{selected:t,days:"NUMBER_OF_DAYS"===t?String(n):a}}))},t.onSubmit=function(e){e.preventDefault();var n=t.state,a=n.days,r=n.selected,i="NUMBER_OF_DAYS"===r?a:void 0;r&&(t.setState({saving:!0,success:!1}),Object(Tt.d)({type:r,value:i}).then((function(){t.setState({saving:!1,currentSetting:r,currentSettingValue:i||void 0,success:!0})}),(function(){t.setState({saving:!1})})))},t}return qt(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchNewCodePeriodSetting()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchNewCodePeriodSetting=function(){var e=this;Object(Tt.a)().then((function(t){var n=t.type,a=t.value,r=n||"PREVIOUS_VERSION";e.setState((function(e){var t=e.days;return{currentSetting:r,days:"NUMBER_OF_DAYS"===r?String(a):t,loading:!1,currentSettingValue:a,selected:r}}))})).catch((function(){e.setState({loading:!1})}))},t.prototype.render=function(){var e=this.state,t=e.currentSetting,n=e.days,a=e.loading,r=e.currentSettingValue,o=e.saving,s=e.selected,c=e.success,u=s!==t||"NUMBER_OF_DAYS"===s&&String(n)!==r,p="NUMBER_OF_DAYS"!==s||Object(zt.b)(n);return i.createElement("ul",{className:"settings-sub-categories-list"},i.createElement("li",null,i.createElement("ul",{className:"settings-definitions-list"},i.createElement("li",null,i.createElement("div",{className:"settings-definition"},i.createElement("div",{className:"settings-definition-left"},i.createElement("h3",{className:"settings-definition-name",title:Object(l.translate)("settings.new_code_period.title")},Object(l.translate)("settings.new_code_period.title")),i.createElement("div",{className:"small big-spacer-top"},i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.new_code_period.description"),id:"settings.new_code_period.description",values:{link:i.createElement(N.Link,{to:"/documentation/project-administration/new-code-period/"},Object(l.translate)("learn_more"))}}),i.createElement("p",{className:"spacer-top"},Object(l.translate)("settings.new_code_period.description2")))),i.createElement("div",{className:"settings-definition-right"},a?i.createElement(D.a,null):i.createElement("form",{onSubmit:this.onSubmit},i.createElement(Gt.a,{isDefault:!0,onSelect:this.onSelectSetting,selected:"PREVIOUS_VERSION"===s}),i.createElement(Mt.a,{className:"spacer-top",days:n,isChanged:u,isValid:p,onChangeDays:this.onSelectDays,onSelect:this.onSelectSetting,selected:"NUMBER_OF_DAYS"===s}),u&&i.createElement("div",{className:"big-spacer-top"},i.createElement("p",{className:"spacer-bottom"},Object(l.translate)("baseline.next_analysis_notice")),i.createElement(D.a,{className:"spacer-right",loading:o}),i.createElement(V.SubmitButton,{disabled:o||!p},Object(l.translate)("save")),i.createElement(V.ResetButtonLink,{className:"spacer-left",onClick:this.onCancel},Object(l.translate)("cancel"))),!o&&!a&&c&&i.createElement("div",{className:"big-spacer-top"},i.createElement("span",{className:"text-success"},i.createElement(K.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved"))))))))))},t}(i.PureComponent),Wt=n(670),Yt=function(){return(Yt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Jt(e){return e.url?i.createElement(i.Fragment,null,i.createElement("span",null,e.key," — "),i.createElement("span",{className:"text-muted"},e.url)):i.createElement("span",null,e.key)}function Xt(e){var t=e.help,n=e.helpParams,a=e.optional,r=e.id;return i.createElement("label",{className:"display-flex-center",htmlFor:r},Object(l.translate)("settings.pr_decoration.binding.form",r),!a&&i.createElement("em",{className:"mandatory"},"*"),t&&i.createElement(ue.a,{className:"spacer-left",overlay:i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.binding.form",r,"help"),id:"settings.pr_decoration.binding.form."+r+".help",values:n}),placement:"right"}))}function Qt(e){var t=e.id,n=e.propKey,a=e.value,r=e.onFieldChange;return i.createElement("div",{className:"form-field"},Xt(e),i.createElement("input",{className:"input-super-large",id:t,maxLength:256,name:t,onChange:function(e){return r(n,e.currentTarget.value)},type:"text",value:a}))}function Zt(e){var t=e.formData,n=t.key,a=t.repository,r=t.slug,o=t.summaryCommentEnabled,s=e.instances,c=e.isChanged,u=e.isConfigured,p=e.isValid,m=e.loading,d=e.saving,f=e.success;if(m)return i.createElement(D.a,null);if(s.length<1)return i.createElement("div",null,i.createElement(I.Alert,{className:"spacer-top huge-spacer-bottom",variant:"info"},i.createElement(k.FormattedMessage,{defaultMessage:Object(l.translate)("settings.pr_decoration.binding.no_bindings"),id:"settings.pr_decoration.binding.no_bindings",values:{link:i.createElement(N.Link,{to:"/documentation/analysis/pull-request/#pr-decoration"},Object(l.translate)("learn_more"))}})));var g=n&&s.find((function(e){return e.key===n})),h=g&&g.alm;return i.createElement("div",null,i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},Object(l.translate)("settings.pr_decoration.binding.title"))),i.createElement("div",{className:"markdown small spacer-top big-spacer-bottom"},Object(l.translate)("settings.pr_decoration.binding.description")),i.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit()}},i.createElement("div",{className:"form-field"},i.createElement("label",{htmlFor:"name"},Object(l.translate)("settings.pr_decoration.binding.form.name"),i.createElement("em",{className:"mandatory spacer-right"},"*")),i.createElement(Ge.a,{autosize:!0,className:"abs-width-400",clearable:!1,id:"name",menuContainerStyle:{maxWidth:"210%",width:"auto"},onChange:function(t){return e.onFieldChange("key",t.key)},optionRenderer:Jt,options:s,searchable:!1,value:n,valueKey:"key",valueRenderer:Jt})),h===_.a.Bitbucket&&i.createElement(i.Fragment,null,Qt({help:!0,helpParams:{example:i.createElement(i.Fragment,null,".../projects/",i.createElement("strong",null,"{KEY}"),"/repos/{SLUG}/browse")},id:"bitbucket.repository",onFieldChange:e.onFieldChange,propKey:"repository",value:a||""}),Qt({help:!0,helpParams:{example:i.createElement(i.Fragment,null,".../projects/{KEY}/repos/",i.createElement("strong",null,"{SLUG}"),"/browse")},id:"bitbucket.slug",onFieldChange:e.onFieldChange,propKey:"slug",value:r||""})),h===_.a.GitHub&&i.createElement(i.Fragment,null,Qt({help:!0,helpParams:{example:"SonarSource/sonarqube"},id:"github.repository",onFieldChange:e.onFieldChange,propKey:"repository",value:a||""}),function(e){var t=e.id,n=e.value,a=e.onFieldChange,r=e.propKey;return i.createElement("div",{className:"form-field"},Xt(Yt(Yt({},e),{optional:!0})),i.createElement(Ae,{isDefault:!0,name:t,onChange:function(e){return a(r,e)},value:n}))}({help:!0,id:"github.summary_comment_setting",onFieldChange:e.onFieldChange,propKey:"summaryCommentEnabled",value:void 0===o||o})),h===_.a.GitLab&&Qt({help:!0,id:"gitlab.repository",onFieldChange:e.onFieldChange,optional:!0,propKey:"repository",value:a||""}),i.createElement("div",{className:"display-flex-center"},i.createElement(D.a,{className:"spacer-right",loading:d}),c&&i.createElement(V.SubmitButton,{className:"spacer-right button-success",disabled:d||!p},i.createElement("span",{"data-test":"project-settings__alm-save"},Object(l.translate)("save"))),u&&i.createElement(V.Button,{className:"spacer-right",onClick:e.onReset},i.createElement("span",{"data-test":"project-settings__alm-reset"},Object(l.translate)("reset_verb"))),!d&&f&&i.createElement("span",{className:"text-success"},i.createElement(K.a,{className:"spacer-right"}),Object(l.translate)("settings.state.saved")))))}var $t,en=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),tn=function(){return(tn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},nn=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},an=(($t={})[_.a.Azure]=[],$t[_.a.Bitbucket]=["repository","slug"],$t[_.a.GitHub]=["repository"],$t[_.a.GitLab]=[],$t),rn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={formData:{key:""},instances:[],isChanged:!1,isConfigured:!1,isValid:!1,loading:!0,saving:!1,success:!1},t.fetchDefinitions=function(){var e=t.props.component.key;return Promise.all([Object(E.i)(e),t.getProjectBinding(e)]).then((function(e){var n=e[0],a=e[1];t.mounted&&t.setState((function(e){var r=e.formData,i=a||r;return{formData:i,instances:n||[],isChanged:!1,isConfigured:!!a,isValid:t.validateForm(i),loading:!1,orignalData:i}}))})).catch((function(){t.mounted&&t.setState({loading:!1})}))},t.catchError=function(){t.mounted&&t.setState({saving:!1})},t.handleReset=function(){var e=t.props.component;t.setState({saving:!0}),Object(E.g)(e.key).then((function(){t.mounted&&t.setState({formData:{key:"",repository:"",slug:""},isChanged:!1,isConfigured:!1,saving:!1,success:!0})})).catch(t.catchError)},t.handleSubmit=function(){t.setState({saving:!0});var e=t.state,n=e.formData,a=n.key,r=nn(n,["key"]),i=e.instances.find((function(e){return e.key===a}));a&&i&&t.submitProjectAlmBinding(i.alm,a,r).then((function(){t.mounted&&t.setState({saving:!1,success:!0})})).then(t.fetchDefinitions).catch(t.catchError)},t.handleFieldChange=function(e,n){t.setState((function(a){var r,i=a.formData,o=a.orignalData,s=tn(tn({},i),((r={})[e]=n,r));return{formData:s,isValid:t.validateForm(s),isChanged:!t.isDataSame(s,o||{key:""}),success:!1}}))},t.validateForm=function(e){var n=e.key,a=nn(e,["key"]),r=t.state.instances.find((function(e){return e.key===n}));return!(!n||!r)&&an[r.alm].reduce((function(e,t){return e&&Boolean(a[t])}),!0)},t}return en(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchDefinitions()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getProjectBinding=function(e){return Object(E.j)(e).catch((function(e){if(!e||404!==e.status)return Object(Wt.a)(e)}))},t.prototype.submitProjectAlmBinding=function(e,t,n){var a=t,r=this.props.component.key;switch(e){case _.a.Azure:return Object(E.k)({almSetting:a,project:r});case _.a.Bitbucket:if(!n)return Promise.reject();var i=n.repository,o=void 0===i?"":i,s=n.slug,l=void 0===s?"":s;return Object(E.l)({almSetting:a,project:r,repository:o,slug:l});case _.a.GitHub:o=null==n?void 0:n.repository;var c=void 0===(null==n?void 0:n.summaryCommentEnabled)||(null==n?void 0:n.summaryCommentEnabled);return o?Object(E.m)({almSetting:a,project:r,repository:o,summaryCommentEnabled:c}):Promise.reject();case _.a.GitLab:o=n&&n.repository;return Object(E.n)({almSetting:a,project:r,repository:o});default:return Promise.reject()}},t.prototype.isDataSame=function(e,t){var n=e.key,a=e.repository,r=void 0===a?"":a,i=e.slug,o=void 0===i?"":i,s=e.summaryCommentEnabled,l=void 0!==s&&s,c=t.key,u=void 0===c?"":c,p=t.repository,m=void 0===p?"":p,d=t.slug,f=void 0===d?"":d,g=t.summaryCommentEnabled;return n===u&&r===m&&o===f&&l===(void 0!==g&&g)},t.prototype.render=function(){return i.createElement(Zt,tn({onFieldChange:this.handleFieldChange,onReset:this.handleReset,onSubmit:this.handleSubmit},this.state))},t}(i.PureComponent),on=function(){return(on=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},sn=[{key:v.c,name:Object(l.translate)("property.category.languages"),renderComponent:function(e){return i.createElement(Kt,on({},e))},availableGlobally:!0,availableForProject:!0,displayTab:!0},{key:v.d,name:Object(l.translate)("settings.new_code_period.category"),renderComponent:function(){return i.createElement(Ht,null)},availableGlobally:!0,availableForProject:!1,displayTab:!0},{key:v.b,name:Object(l.translate)("property.category.exclusions"),renderComponent:function(e){return i.createElement(Lt,on({},e))},availableGlobally:!0,availableForProject:!0,displayTab:!1},{key:v.a,name:Object(l.translate)("property.category.almintegration"),renderComponent:function(e){return i.createElement(Bt,on({},e))},availableGlobally:!0,availableForProject:!1,displayTab:!1},{key:v.e,name:Object(l.translate)("settings.pr_decoration.binding.category"),renderComponent:function(e){return e.component&&i.createElement(rn,{component:e.component})},availableGlobally:!1,availableForProject:!0,displayTab:!0,requiresBranchesEnabled:!0}];var ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ln(t,e),t.prototype.renderLink=function(e){var t=this.props,n=t.component,a=t.defaultCategory,r=t.selectedCategory,o=this.props.component?"/project/settings":"/settings",s={category:e.key!==a?e.key.toLowerCase():void 0,id:n&&n.key};return i.createElement(N.IndexLink,{className:J({active:e.key.toLowerCase()===r.toLowerCase()}),title:e.name,to:{pathname:o,query:s}},e.name)},t.prototype.render=function(){var e=this,t=this.props.branchesEnabled,n=this.props.categories.filter((function(e){return!Rt[e.toLowerCase()]})).map((function(e){return{key:e,name:Object(f.b)(e)}})).concat(sn.filter((function(e){return e.displayTab})).filter((function(t){return e.props.component?t.availableForProject:t.availableGlobally})).filter((function(e){return t||!e.requiresBranchesEnabled}))),a=_e()(n,(function(e){return e.name.toLowerCase()}));return i.createElement("ul",{className:"side-tabs-menu"},a.map((function(t){return i.createElement("li",{key:t.key},e.renderLink(t))})))},t}(i.PureComponent),un=Object(s.connect)((function(e){return{categories:Object(u.getSettingsAppAllCategories)(e),branchesEnabled:Object(u.getAppState)(e).branchesEnabled}}))(cn),pn=n(771);function mn(e){var t=e.component,n=t?Object(l.translate)("project_settings.page"):Object(l.translate)("settings.page"),a=t?Object(l.translate)("project_settings.page.description"):i.createElement(pn.a,{message:Object(l.translate)("settings.page.description")});return i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},n),i.createElement("div",{className:"page-description"},a))}var dn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),fn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t.fetchSettings=function(){var e=t.props.component;t.props.fetchSettings(e&&e.key).then(t.stopLoading,t.stopLoading)},t.stopLoading=function(){t.mounted&&t.setState({loading:!1})},t}return dn(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchSettings()},t.prototype.componentDidUpdate=function(e){e.component!==this.props.component&&this.fetchSettings()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){if(this.state.loading)return null;var e=this.props.location.query.category||this.props.defaultCategory,t=Rt[e.toLowerCase()]||e,n=r()(sn,(function(e){return e.key===t})),a=this.props.component,s=n&&(a&&n.availableForProject||!a&&n.availableGlobally);return i.createElement("div",{className:"page page-limited",id:"settings-page"},i.createElement(c.a,{suggestions:"settings"}),i.createElement(o.a,{defer:!1,title:Object(l.translate)("settings.page")}),i.createElement(mn,{component:this.props.component}),i.createElement("div",{className:"side-tabs-layout settings-layout"},i.createElement("div",{className:"side-tabs-side"},i.createElement(un,{component:this.props.component,defaultCategory:this.props.defaultCategory,selectedCategory:t})),i.createElement("div",{className:"side-tabs-main"},n&&s?n.renderComponent({component:this.props.component,selectedCategory:e}):i.createElement(jt,{category:t,component:this.props.component}))))},t}(i.PureComponent),gn={fetchSettings:function(e){return function(t){return Object(m.d)(e).then((function(e){var n=e.filter((function(e){return"LICENSE"!==e.type}));t(Object(g.f)(n))}))}}};t.default=Object(s.connect)((function(e){return{defaultCategory:Object(u.getSettingsAppDefaultCategory)(e)}}),gn)(fn)},680:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a,r=n(13),i=n(705),o=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function s(e){var t=e.suggestions;return r.createElement(i.a.Consumer,null,(function(e){var n=e.addSuggestions,a=e.removeSuggestions;return r.createElement(l,{addSuggestions:n,removeSuggestions:a,suggestions:t})}))}var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},t.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))},t.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},t.prototype.render=function(){return null},t}(r.PureComponent)},689:function(e,t,n){"use strict";function a(e,t){return t+"("+(e.displayName||e.name||"Component")+")"}n.d(t,"a",(function(){return a}))},727:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r=n(13),i=n(666),o=n(668),s=n(689),l=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function u(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.prototype.render=function(){return r.createElement(e,c({},this.props))},n.displayName=Object(s.a)(e,"withCurrentUser"),n}(r.Component);return Object(i.connect)((function(e){return{currentUser:Object(o.getCurrentUser)(e)}}))(t)}},774:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a,r=n(13),i=n(666),o=n(668),s=n(689),l=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function u(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return l(n,t),n.prototype.render=function(){return r.createElement(e,c({},this.props))},n.displayName=Object(s.a)(e,"withAppState"),n}(r.Component);return Object(i.connect)((function(e){return{appState:Object(o.getAppState)(e)}}))(t)}},895:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Azure="azure",e.Bitbucket="bitbucket",e.GitHub="github",e.GitLab="gitlab"}(a||(a={}))},949:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"q",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"o",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"p",(function(){return m})),n.d(t,"e",(function(){return d})),n.d(t,"r",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"j",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return O})),n.d(t,"n",(function(){return _}));var a=n(51),r=n(670);function i(){return Object(a.getJSON)("/api/alm_settings/list_definitions").catch(r.a)}function o(e){return Object(a.getJSON)("/api/alm_settings/list",{project:e}).then((function(e){return e.almSettings})).catch(r.a)}function s(e){return Object(a.post)("/api/alm_settings/create_github",e).catch(r.a)}function l(e){return Object(a.post)("/api/alm_settings/update_github",e).catch(r.a)}function c(e){return Object(a.post)("/api/alm_settings/create_azure",e).catch(r.a)}function u(e){return Object(a.post)("/api/alm_settings/update_azure",e).catch(r.a)}function p(e){return Object(a.post)("/api/alm_settings/create_bitbucket",e).catch(r.a)}function m(e){return Object(a.post)("/api/alm_settings/update_bitbucket",e).catch(r.a)}function d(e){return Object(a.post)("/api/alm_settings/create_gitlab",e).catch(r.a)}function f(e){return Object(a.post)("/api/alm_settings/update_gitlab",e).catch(r.a)}function g(e){return Object(a.post)("/api/alm_settings/delete",{key:e}).catch(r.a)}function h(e){return Object(a.getJSON)("/api/alm_settings/count_binding",{almSetting:e}).then((function(e){return e.projects})).catch(r.a)}function b(e){return Object(a.getJSON)("/api/alm_settings/get_binding",{project:e})}function y(e){return Object(a.post)("/api/alm_settings/delete_binding",{project:e}).catch(r.a)}function v(e){return Object(a.post)("/api/alm_settings/set_azure_binding",e).catch(r.a)}function E(e){return Object(a.post)("/api/alm_settings/set_bitbucket_binding",e).catch(r.a)}function O(e){return Object(a.post)("/api/alm_settings/set_github_binding",e).catch(r.a)}function _(e){return Object(a.post)("/api/alm_settings/set_gitlab_binding",e).catch(r.a)}}}]);
//# sourceMappingURL=333.1588858339197.chunk.js.map