{"version":3,"sources":["webpack:///./src/main/js/apps/issues/components/AppContainer.tsx","webpack:///./src/main/js/apps/settings/store/definitions.ts","webpack:///./src/main/js/store/branches.ts","webpack:///./src/main/js/store/metrics.ts","webpack:///./src/main/js/helpers/qualityGates.ts","webpack:///./src/main/js/types/editions.ts","webpack:///./src/main/js/api/news.ts","webpack:///./src/main/js/app/components/search/utils.ts","webpack:///./src/main/js/api/marketplace.ts","webpack:///./src/main/js/components/workspace/WorkspacePortal.tsx","webpack:///./src/main/js/components/workspace/Workspace.tsx","webpack:///./src/main/js/app/components/a11y/A11yProvider.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsProvider.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/EmbedDocsPopupHelper.tsx","webpack:///./src/main/js/app/components/search/Search.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavBranding.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavExplore.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavMenu.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavUser.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavUserContainer.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNav.tsx","webpack:///./src/main/js/app/components/StartupModal.tsx","webpack:///./src/main/js/app/components/GlobalContainer.tsx","webpack:///./src/main/js/components/workspace/styles.css?fbff","webpack:///./src/main/js/components/workspace/styles.css","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css?0925","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css","webpack:///./src/main/js/app/components/search/Search.css?68ff","webpack:///./src/main/js/app/components/search/Search.css","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css?9f79","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css","webpack:///./src/main/js/components/common/OrganizationAvatar.css?7318","webpack:///./src/main/js/components/common/OrganizationAvatar.css","webpack:///./src/main/js/apps/about/routes.ts","webpack:///./src/main/js/apps/account/routes.ts","webpack:///./src/main/js/apps/background-tasks/routes.ts","webpack:///./src/main/js/apps/code/routes.ts","webpack:///./src/main/js/apps/coding-rules/routes.ts","webpack:///./src/main/js/apps/component-measures/routes.ts","webpack:///./src/main/js/apps/custom-measures/routes.ts","webpack:///./src/main/js/apps/custom-metrics/routes.ts","webpack:///./src/main/js/apps/documentation/routes.ts","webpack:///./src/main/js/apps/explore/Explore.tsx","webpack:///./src/main/js/apps/explore/ExploreIssues.tsx","webpack:///./src/main/js/apps/explore/ExploreProjects.tsx","webpack:///./src/main/js/apps/groups/routes.ts","webpack:///./src/main/js/apps/maintenance/routes.tsx","webpack:///./src/main/js/apps/marketplace/routes.ts","webpack:///./src/main/js/apps/quality-gates/routes.ts","webpack:///./src/main/js/apps/quality-profiles/routes.ts","webpack:///./src/main/js/apps/webhooks/routes.ts","webpack:///./src/main/js/apps/organizations/routes.ts","webpack:///./src/main/js/apps/overview/routes.ts","webpack:///./src/main/js/apps/permission-templates/routes.ts","webpack:///./src/main/js/apps/permissions/routes.ts","webpack:///./src/main/js/apps/portfolio/routes.ts","webpack:///./src/main/js/apps/projectActivity/routes.ts","webpack:///./src/main/js/apps/projectBaseline/routes.ts","webpack:///./src/main/js/apps/projectBranches/routes.ts","webpack:///./src/main/js/apps/projectQualityGate/routes.ts","webpack:///./src/main/js/apps/projectQualityProfiles/routes.ts","webpack:///./src/main/js/apps/projects/components/DefaultPageSelector.tsx","webpack:///./src/main/js/apps/projects/routes.ts","webpack:///./src/main/js/apps/projects/components/DefaultPageSelectorContainer.tsx","webpack:///./src/main/js/apps/projects/components/FavoriteProjectsContainer.tsx","webpack:///./src/main/js/apps/projectsManagement/routes.ts","webpack:///./src/main/js/apps/sessions/routes.ts","webpack:///./src/main/js/apps/settings/routes.ts","webpack:///./src/main/js/apps/system/routes.ts","webpack:///./src/main/js/apps/tutorials/routes.ts","webpack:///./src/main/js/apps/users/routes.ts","webpack:///./src/main/js/apps/web-api/routes.ts","webpack:///./src/main/js/app/components/App.tsx","webpack:///./src/main/js/app/components/MigrationContainer.tsx","webpack:///./src/main/js/app/utils/startReactApp.tsx","webpack:///./src/main/js/apps/settings/store/rootReducer.ts","webpack:///./src/main/js/store/rootReducer.ts","webpack:///./src/main/js/helpers/urls.ts","webpack:///./src/main/js/app/utils/throwGlobalError.ts","webpack:///./src/main/js/helpers/branch-like.ts","webpack:///./src/main/js/app/theme.js","webpack:///./src/main/js/helpers/users.ts","webpack:///./src/main/js/helpers/measures.ts","webpack:///./src/main/js/api/issues.ts","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsContext.ts","webpack:///./src/main/js/api/components.ts","webpack:///./src/main/js/components/hoc/withRouter.tsx","webpack:///./src/main/js/components/ui/Avatar.tsx","webpack:///./src/main/js/store/utils/configureStore.ts","webpack:///./src/main/js/app/utils/getStore.ts","webpack:///./src/main/js/store/globalMessages.ts","webpack:///./src/main/js/types/metrics.ts","webpack:///./src/main/js/app/components/a11y/A11yContext.tsx","webpack:///./src/main/js/components/common/InstanceMessage.tsx","webpack:///./src/main/js/api/auth.ts","webpack:///./src/main/js/store/rootActions.ts","webpack:///./src/main/js/api/languages.ts","webpack:///./src/main/js/api/users.ts","webpack:///./src/main/js/apps/issues/utils.ts","webpack:///./src/main/js/helpers/constants.ts","webpack:///./src/main/js/apps/quality-profiles/utils.ts","webpack:///./src/main/js/api/organizations.ts","webpack:///./src/main/js/api/quality-gates.ts","webpack:///./src/main/js/app/components/GlobalFooterBranding.tsx","webpack:///./src/main/js/app/components/GlobalFooterSonarCloud.tsx","webpack:///./src/main/js/app/components/GlobalFooterContainer.tsx","webpack:///./src/main/js/app/components/GlobalFooter.tsx","webpack:///./src/main/js/apps/settings/utils.ts","webpack:///./src/main/js/store/users.ts","webpack:///./src/main/js/store/appState.ts","webpack:///./src/main/js/api/measures.ts","webpack:///./src/main/js/apps/projects/utils.ts","webpack:///./src/main/js/helpers/issues.ts","webpack:///./src/main/js/api/settings.ts","webpack:///./src/main/js/components/workspace/context.ts","webpack:///./src/main/js/store/organizations.ts","webpack:///./src/main/js/api/metrics.ts","webpack:///./src/main/js/components/common/OrganizationAvatar.tsx","webpack:///./src/main/js/components/ui/OrganizationLink.tsx","webpack:///./src/main/js/apps/settings/store/values.ts","webpack:///./src/main/js/apps/projects/components/AllProjectsContainer.tsx","webpack:///./src/main/js/apps/account/organizations/actions.ts","webpack:///./src/main/js/helpers/editions.ts","webpack:///./src/main/js/app/components/RecentHistory.ts","webpack:///./src/main/js/apps/coding-rules/query.ts","webpack:///./src/main/js/apps/settings/store/settingsPage.ts","webpack:///./src/main/js/store/languages.ts","webpack:///./src/main/js/components/SourceViewer/helpers/getCoverageStatus.ts","webpack:///./src/main/js/apps/projects/query.ts","webpack:///./src/main/js/app/components/GlobalMessagesContainer.tsx","webpack:///./src/main/js/app/components/OnboardingContext.tsx","webpack:///./src/main/js/components/ui/OrganizationListItem.tsx"],"names":["IssuesAppContainer","mapDispatchToProps","fetchBranchStatus","fetchIssues","query","requestOrganizations","dispatch","getState","organizationsEnabled","additionalFields","then","response","parsedIssues","issues","map","issue","components","users","rules","organizationKeys","organization","component","length","organizations","join","Promise","resolve","fetchIssueOrganizations","catch","state","currentUser","userOrganizations","Actions","receiveDefinitions","definitions","type","ReceiveDefinitions","action","getDefinition","key","getAllDefinitions","Object","keys","getDefinitionsForCategory","category","filter","definition","toLowerCase","getAllCategories","getDefaultCategory","categories","includes","registerBranchStatusAction","branchLike","status","conditions","ignoredConditions","RegisterBranchStatus","getBranchStatusByBranchLike","branchLikeKey","byComponent","receiveMetrics","metrics","getMetrics","byKey","getMetricsKey","getMetricByKey","f","extractStatusConditionsFromProjectStatus","projectStatus","c","actual","actualValue","error","errorThreshold","level","metric","metricKey","op","comparator","period","periodIndex","extractStatusConditionsFromApplicationStatusChildProject","value","EditionKey","PRISMIC_API_URL","fetchPrismicRefs","master","refs","find","ref","id","reject","fetchPrismicNews","data","q","tag","push","access_token","accessToken","orderings","pageSize","ps","results","fetchPrismicFeatureNews","fetchLinks","page","p","results_per_page","total_results_size","news","result","notification","publicationDate","publication_date","features","body","feature","items","item","Boolean","description","primary","readMore","read_more_link","url","paging","pageIndex","total","ORDER","sortQualifiers","qualifiers","qualifier","indexOf","isValidLicense","showLicense","props","super","this","el","document","createElement","classList","add","appendChild","removeChild","children","WorkspaceNav","lazyLoadComponent","WorkspaceRuleViewer","WorkspaceComponentViewer","mounted","loadWorkspace","JSON","parse","x","saveWorkspace","stringify","openComponent","setState","open","reopenComponent","componentKey","openRule","rule","reopenRule","ruleKey","closeComponent","undefined","closeRule","handleComponentLoad","details","name","handleRuleLoad","collapse","maximize","maximized","minimize","resize","deltaY","minHeight","window","innerHeight","maxHeight","height","Math","min","max","_","prevState","Provider","onComponentClose","onComponentOpen","onRuleClose","onRuleOpen","onClose","onCollapse","onLoad","onMaximize","onMinimize","onResize","links","addA11ySkipLink","link","weight","removeA11ySkipLink","l","A11yContext","Consumer","className","href","label","suggestions","fetchSuggestions","jsonList","forEach","suggestion","scope","addSuggestions","newKey","removeSuggestions","oldKey","SuggestionsContext","EmbedDocsPopup","helpOpen","onKeyPress","event","tagName","target","code","keyCode","which","toggleHelp","setHelpDisplay","handleClick","closeHelp","addEventListener","removeEventListener","onRequestClose","overlay","onClick","title","SearchResults","SearchResult","focusInput","input","focus","handleClickOutside","closeSearch","handleFocus","documentElement","click","openSearch","search","clear","blur","more","projects","selected","shortQuery","getPlainComponentsList","reduce","next","findFile","findInResults","r","file","test","stopLoading","loading","recentlyBrowsed","RecentHistory","get","group","list","warning","searchMore","loadingMore","moreResults","handleQueryChange","selectPrevious","index","selectNext","openSelected","startsWith","substr","router","project","scrollToSelected","node","nodes","topOffset","bottomOffset","parent","handleKeyDown","preventDefault","handleSelect","innerRef","searchInputRef","renderResult","appState","onSelect","renderNoResults","_prevProps","autoFocus","minLength","onChange","onFocus","onKeyDown","placeholder","Dropdown","noPadding","allowMore","onMoreClick","size","defaultMessage","values","shortcut","onClickOutside","GlobalNavBranding","customLogoUrl","customLogoWidth","width","to","alt","src","SonarCloudNavBranding","GlobalNavExplore","location","active","pathname","sort","renderGlobalPageLink","activeClassName","resolved","isLoggedIn","myIssues","canAdmin","globalPages","withoutPortfolios","onToggleClick","governanceInstalled","renderProjects","renderPortfolios","renderIssuesLink","renderRulesLink","renderProfilesLink","renderQualityGatesLink","renderAdministrationLink","renderMore","handleLogin","returnTo","encodeURIComponent","hash","handleLogout","hasOrganizations","email","role","org","OrganizationListItem","Avatar","avatar","globalNavContentHeightRaw","renderAuthenticated","renderAnonymous","withRouter","GlobalNavPlus","NotificationsSidebar","NavLatestNotification","loadingNews","loadingMoreNews","notificationSidebar","fetchFeatureNews","newsRef","newsPaging","fetchMoreFeatureNews","handleOpenNotificationSidebar","handleCloseNotificationSidebar","lastNews","readDate","getTime","Date","now","setCurrentUserSetting","toString","globalNavHeightRaw","notificationsLastReadDate","notificationsOptOut","OnboardingContext","openProjectOnboarding","GlobalNavUserContainer","Number","OnboardingModal","LicensePromptModal","ModalKey","closeOnboarding","modal","license","skipOnboarding","closeLicense","openOnboarding","onboarding","tab","alm","tryAutoOpenLicense","currentEdition","hasLicenseManager","lastPrompt","login","isValidEdition","tryAutoOpenOnboarding","showOnboardingTutorial","some","path","onOpenProjectOnboarding","edition","GlobalContainer","footer","GlobalFooterContainer","GlobalMessagesContainer","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","indexRoute","childRoutes","onEnter","nextState","replace","split","part","tokens","decodeURIComponent","parseHash","normalizedQuery","params","domainName","view","graph","custom_metrics","Explore","contextNavHeightRaw","ExploreIssues","AppContainer","hideAuthorFacet","multiOrganizations","ExploreProjects","AllProjectsContainer","isFavorite","storageOptionsSuffix","maintenanceRoutes","setupRoutes","OrganizationContainer","organizationKey","globalPermissionsRoutes","projectPermissionsRoutes","isFavoriteSet","isAllSet","defineIfShouldBeRedirected","prevProps","shouldBeRedirected","shouldForceSorting","PageTracker","setScrollbarWidth","outer","style","visibility","msOverflowStyle","widthNoScroll","offsetWidth","overflow","inner","widthWithScroll","parentNode","setProperty","renderPreconnectLink","parser","gravatarServerUrl","hostname","origin","rel","fetchLanguages","fetchMyOrganizations","enableGravatar","return_to","handleUpdate","scrollTo","RouteWithChildRoutes","startReactApp","lang","getElementById","history","store","getStore","defaultLocale","locale","theme","onUpdate","from","types","assignedToMe","settingsPage","globalMessages","getValue","getSettingsForCategory","branches","languages","settingsApp","getAppState","getLanguages","getCurrentUserSetting","getCurrentUser","getOrganizationByKey","getMyOrganizations","areThereCustomOrganizations","getGlobalSettingValue","getSettingsAppDefinition","getSettingsAppAllCategories","getSettingsAppDefaultCategory","getSettingsAppSettingsForCategory","getSettingsAppChangedValue","isSettingsAppLoading","getSettingsAppValidationMessage","getProjectUrl","branch","getPortfolioUrl","getPortfolioAdminUrl","getComponentBackgroundTaskUrl","getBranchLikeUrl","getPullRequestUrl","getBranchUrl","pullRequest","getIssuesUrl","getComponentIssuesUrl","getComponentSecurityHotspotsUrl","sinceLeakPeriod","hotspots","getComponentDrilldownUrl","selectionKey","treemapView","listView","getComponentDrilldownUrlWithSelection","getMeasureTreemapUrl","getActivityUrl","getMeasureHistoryUrl","getComponentPermissionsUrl","getQualityProfileUrl","language","getQualityGateUrl","getQualityGatesUrl","getRulesUrl","getDeprecatedActiveRulesUrl","activation","statuses","getRuleUrl","rule_key","getMarkdownHelpUrl","getCodeUrl","line","getOrganizationUrl","getHomePageUrl","homepage","throwGlobalError","param","Response","console","warn","message","isBranch","isMain","isMainBranch","sortBranches","b","isPullRequest","sortPullRequests","pullRequests","pr","getPullRequestDisplayName","getBranchLikeDisplayName","getBranchLikeKey","isSameBranchLike","a","getBrancheLikesAsTree","branchLikes","mainBranch","parentlessPullRequests","isOrphan","base","orphanPullRequests","tree","branchTree","getPullRequests","mainBranchTree","getBranchLikeQuery","fillBranchLike","colors","blue","veryLightBlue","lightBlue","darkBlue","veryDarkBlue","green","lightGreen","veryLightGreen","yellow","orange","red","purple","gray94","gray80","gray71","gray67","gray60","gray40","transparentWhite","transparentGray","disableGrayText","disableGrayBorder","disableGrayBg","barBackgroundColor","barBackgroundColorHighlight","barBorderColor","globalNavBarBg","rowHoverHighlight","baseFontColor","secondFontColor","mandatoryFieldColor","leakPrimaryColor","leakSecondaryColor","snippetFontColor","issueBgColor","hotspotBgColor","issueLocationSelected","issueLocationHighlighted","conciseIssueRed","conciseIssueRedSelected","lineCoverageRed","lineCoverageGreen","warningIconColor","alertBorderError","alertBackgroundError","alertTextError","alertIconError","alertBorderWarning","alertBackgroundWarning","alertTextWarning","alertIconWarning","alertBorderSuccess","alertBackgroundSuccess","alertTextSuccess","alertIconSuccess","alertBorderInfo","alertBackgroundInfo","alertTextInfo","alertIconInfo","badgeBlueBackground","badgeBlueColor","azure","bitbucket","github","codeBackground","sonarcloudOrange500","sonarcloudOrange600","sonarcloudOrange700","sonarcloudBlack100","sonarcloudBlack200","sonarcloudBlack250","sonarcloudBlack300","sonarcloudBlack500","sonarcloudBlack700","sonarcloudBlack800","sonarcloudBlack900","sonarcloudBlue500","sonarcloudBlue600","sonarcloudBlue900","sonarcloudBorderGray","sizes","gridSize","baseFontSize","verySmallFontSize","smallFontSize","mediumFontSize","bigFontSize","hugeFontSize","giganticFontSize","hugeControlHeight","largeControlHeight","controlHeight","smallControlHeight","tinyControlHeight","globalNavHeight","globalNavContentHeight","maxPageWidth","minPageWidth","pagePadding","rawSizes","grid","fonts","baseFontFamily","systemFontFamily","sonarcloudFontFamily","zIndexes","aboveNormalZIndex","normalZIndex","belowNormalZIndex","pageMainZIndex","pageSideZIndex","tooltipZIndex","dropdownMenuZIndex","processContainerZIndex","modalZIndex","modalOverlayZIndex","popupZIndex","others","defaultShadow","hasGlobalPermission","user","permission","permissions","global","isUserActive","localizeMetric","getShortType","enhanceMeasuresWithMetrics","measures","measure","enhanceConditionWithMeasure","condition","m","periods","getPeriodValue","isPeriodBestValue","bestValue","isDiffMetric","maintainabilityRatingGrid","getMaintainabilityRatingGrid","numbers","settingValue","getRatingGrid","s","parseFloat","n","isNaN","getRatingTooltip","ratingLetter","finalMetricKey","rating","maintainabilityGrid","maintainabilityRatingThreshold","floor","getMaintainabilityRatingTooltip","getDisplayMetrics","hidden","findMeasure","searchIssues","getFacets","facets","getFacet","facet","searchIssueTags","tags","getIssueChangelog","addIssueComment","deleteIssueComment","editIssueComment","setIssueAssignee","setIssueSeverity","setIssueTags","setIssueTransition","setIssueType","bulkChangeIssues","issueKeys","searchIssueAuthors","authors","getIssueFlowSnippets","issueKey","k","sources","lineMap","coverageStatus","getComponents","parameters","bulkDeleteProjects","deleteProject","deletePortfolio","portfolio","createProject","searchProjectTags","setApplicationTags","setProjectTags","getComponentTree","strategy","additional","metricKeys","getChildren","getComponentLeaves","getComponent","getTree","getFiles","getDirectories","getComponentData","doesComponentExists","getComponentShow","getParents","ancestors","getBreadcrumbs","reverse","getMyProjects","searchProjects","changeKey","getSuggestions","getComponentForSourceViewer","getSources","getDuplications","WrappedComponent","String","middlewares","finalCreateStore","createStore","rootReducer","initialState","configureStore","MessageLevel","closeGlobalMessage","closeAllGlobalMessages","addGlobalMessage","addGlobalMessageActionCreator","setTimeout","addGlobalErrorMessage","Error","addGlobalSuccessMessage","Success","getGlobalMessages","MetricKey","isMetricKey","InstanceMessage","transformedMessage","basicCheckStatus","fetchMetrics","fetchOrganizations","fetchOrganization","all","navigation","organizationWithPermissions","projectKey","doLogin","password","request","setMethod","setData","submit","doLogout","requireAuthorization","registerBranchStatus","changePassword","getUserGroups","getIdentityProviders","searchUsers","createUser","updateUser","scmAccount","deactivateUser","setHomePage","setUserSetting","setting","STANDARDS","STANDARD_TYPES","parseQuery","assigned","assignees","createdAfter","createdAt","createdBefore","createdInLast","cwe","directories","files","fileUuids","modules","moduleUuids","owaspTop10","resolutions","sansTop25","severities","sonarsourceSecurity","getOpen","areMyIssuesSelected","serializeQuery","areQueriesEqual","mapFacet","parseFacets","propertyMapping","val","count","finalProperty","property","formatFacetStat","stat","searchAssignees","isMySet","saveMyIssues","getLocations","flows","secondaryLocations","selectedFlowIndex","getSelectedLocation","selectedLocationIndex","locations","allLocationsEmpty","every","msg","scrollToIssue","smooth","element","querySelector","shouldOpenStandardsFacet","openFacets","isFilteredBySecurityIssueTypes","isOneStandardChildFacetOpen","shouldOpenStandardsChildFacet","standardType","shouldOpenSonarSourceSecurityFacet","SEVERITIES","ISSUE_TYPES","RULE_TYPES","RULE_STATUSES","RATING_COLORS","sortProfiles","profiles","sorted","putProfile","profile","depth","parentKey","childrenCount","child","isStagnant","rulesUpdatedAt","updateDate","getProfilesPath","getProfilesForLanguagePath","getProfilePath","getProfileComparePath","withKey","assign","getProfileChangelogPath","since","getOrganizations","getOrganization","o","getOrganizationNavigation","updateOrganization","changes","deleteOrganization","searchMembers","addMember","removeMember","getOrganizationBilling","setOrganizationMemberSync","syncMembers","fetchQualityGates","fetchQualityGate","createQualityGate","deleteQualityGate","renameQualityGate","copyQualityGate","setQualityGateAsDefault","createCondition","updateCondition","deleteCondition","getGateForProject","qualityGate","isDefault","associateGateWithProject","dissociateGateWithProject","getApplicationQualityGate","getQualityGateProjectStatus","GlobalFooterBranding","official","GlobalFooterSonarCloud","productionDatabase","sonarqubeEdition","sonarqubeVersion","version","hideLoggedInInfo","Alert","display","variant","DEFAULT_CATEGORY","sanitizeTranslation","html","ALLOWED_TAGS","getPropertyName","getPropertyDescription","getCategoryName","getSubCategoryName","subCategory","getSubCategoryDescription","getUniqueName","indexSuffix","getSettingValue","fieldValues","isCategoryDefinition","multiValues","isEmptyValue","fields","getEmptyValue","field","isDefaultOrInherited","inherited","getDefaultValue","parentFieldValues","parentValue","parentValues","defaultValue","receiveCurrentUser","ReceiveCurrentUser","skipOnboardingAction","SkipOnboardingAction","setCurrentUserSettingAction","SetCurrentUserSetting","SetHomePageAction","setHomePageAction","oldSetting","settings","usersByLogin","userLogins","findIndex","setAppState","SetAppState","setAdminPages","adminPages","SetAdminPages","RequireAuthorization","authenticationError","authorizationError","defaultOrganization","getMeasures","getMeasuresWithMetrics","branchParameters","getMeasuresWithPeriod","getMeasuresWithPeriodAndMetrics","getMeasuresForProjects","projectKeys","getCustomMeasures","customMeasures","createCustomMeasure","updateCustomMeasure","deleteCustomMeasure","PROJECTS_DEFAULT_FILTER","PROJECTS_FAVORITE","PROJECTS_ALL","SORTING_METRICS","SORTING_LEAK_METRICS","class","SORTING_SWITCH","analysis_date","reliability","security","maintainability","coverage","duplications","new_reliability","new_security","new_maintainability","new_coverage","new_duplications","new_lines","VIEWS","VISUALIZATIONS","METRICS","alert_status","bugs","reliability_rating","vulnerabilities","security_rating","security_hotspots_reviewed","security_review_rating","code_smells","sqale_rating","duplicated_lines_density","ncloc","ncloc_language_distribution","LEAK_METRICS","new_bugs","new_reliability_rating","new_vulnerabilities","new_security_rating","new_security_hotspots_reviewed","new_security_review_rating","new_code_smells","new_maintainability_rating","new_duplicated_lines_density","METRICS_BY_VISUALIZATION","risk","sqale_index","reliability_remediation_effort","security_remediation_effort","complexity","uncovered_lines","duplicated_blocks","FACETS","LEAK_FACETS","REVERSED_FACETS","localizeSorting","parseSorting","desc","sortValue","sortDesc","fetchProjects","defaultData","propertyToMetricMap","asc","convertToSorting","convertToQueryData","defineFacets","fetchProjectMeasures","fetchProjectOrganizations","getFacetsMap","componentMeasures","visualization","defineMetrics","gate","metricToPropertyMap","mapFacetValues","formatDuration","ms","years","months","days","hours","lastId","format","sortByType","injectRelational","source","baseField","lookupField","newFields","baseValue","lookupValue","candidate","charAt","toUpperCase","slice","reverseLocations","parseIssueFromResponse","parsedFlows","flow","textRange","componentName","startLine","startOffset","splitFlows","comments","comment","commentWithAuthor","author","injectCommentsRelational","prepareClosed","endLine","endOffset","ensureTextRange","getDefinitions","getValues","setSettingValue","resetSettingValue","sendTestEmail","subject","checkSecretKey","generateSecretKey","encryptValue","WorkspaceContext","receiveOrganizations","receiveMyOrganizations","my","onReceiveOrganizations","actions","admin","getAllMetrics","prev","concat","getMetricDomains","domains","getMetricTypes","createMetric","updateMetric","deleteMetric","OrganizationAvatar","imgLoadError","handleImgError","small","onError","OrganizationLink","other","receiveValues","settingsByKey","member","fetchIfAnyoneCanCreateOrganizations","EDITIONS","community","homeUrl","downloadProperty","developer","enterprise","datacenter","getEdition","editionKey","getAllEditionsAbove","editions","currentEditionIdx","getEditionUrl","getEditionDownloadUrl","lastUpgrade","downloadUrl","getEditionDownloadFilename","newHistory","icon","sonarHistory","newEntry","entry","unshift","set","activationSeverities","active_severities","availableSince","available_since","compareToProfile","inheritance","parseAsInheritance","qprofile","repositories","searchQuery","template","is_template","shouldRequestFacet","getServerFacet","getAppFacet","serverFacet","hasRuleKey","cancelChange","CancelChange","changeValue","ChangeValue","failValidation","FailValidation","passValidation","PassValidation","startLoading","StartLoading","StopLoading","getChangedValue","changedValues","getValidationMessage","validationMessages","isLoading","receiveLanguages","getLanguageByKey","getCoverageStatus","lineHits","coveredConditions","parseUrlQuery","urlQuery","getAsLevel","getAsNumericRating","getAsStringArray","getAsString","getView","getVisualization","convertToFilter","mapPropertyToMetric","pushMetricToArray","convertCoverage","convertDuplications","convertSize","convertIssuesRating","convertArrayMetric","visualizationParams","hasFilterParams","hasVisualizationParams","num","conditionsArray","convertFunction","Array","isArray","messages"],"mappings":"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ASnf,IACpDuvB,WAAW,IAAM5zB,EAASwzB,EAAmBnuB,IAAM,MAIhD,SAASwuB,EAAsBrQ,GACpC,OAAOkQ,EAAiBlQ,EAAS+P,EAAaO,OAGzC,SAASC,EAAwBvQ,GACtC,OAAOkQ,EAAiBlQ,EAAS+P,EAAaS,SAgCzC,SAASC,EAAkB1yB,GAChC,OAAOA,GA3ET,SAAKgyB,GACH,gBACA,oBAFF,CAAKA,MAAY,KA+CF,aAAShyB,EAAe,GAAIQ,GACzC,OAAQA,EAAOF,MACb,IAAK,qBACH,MAAO,CAAC,CAAEwD,GAAItD,EAAOsD,GAAIme,QAASzhB,EAAOyhB,QAASnf,MAAOtC,EAAOsC,QAElE,IAAK,wBAEH,MAAO,CACL,CACEgB,GAAI,IAAS,mBACbme,QACE,gGAEFnf,MAAOkvB,EAAaO,QAI1B,IAAK,uBACH,OAAOvyB,EAAMgB,OAAOihB,GAAWA,EAAQne,KAAOtD,EAAOsD,IAEvD,IAAK,4BACH,MAAO,GACT,QACE,OAAO9D,K,iCC3Eb,IAAY2yB,EAiIL,SAASC,EAAYlyB,GAC1B,OAAQE,OAAOmR,OAAO4gB,GAAwBrxB,SAASZ,GArJzD,oEAmBA,SAAYiyB,GACV,8BACA,0CACA,oCACA,cACA,gCACA,kCACA,sCACA,oBACA,4BACA,8CACA,gCACA,0CACA,gDACA,0BACA,gDACA,oDACA,4CACA,sCACA,sBACA,4CACA,sCACA,4BACA,wCACA,sCACA,sCACA,sDACA,wCACA,sFACA,gDACA,gDACA,oCACA,8DACA,gCACA,8CACA,gBACA,4CACA,sEACA,wBACA,oCACA,oCACA,oCACA,gFACA,4EACA,wEACA,kEACA,gFACA,sCACA,gCACA,gCACA,gBACA,kCACA,gEACA,sCACA,sCACA,gBACA,0BACA,4DACA,kDACA,4CACA,sBACA,oCACA,oDACA,8BACA,oDACA,8CACA,gDACA,8CACA,8DACA,4CACA,wCACA,wBACA,0CACA,0DACA,8CACA,8CACA,kDACA,0EACA,gDACA,kEACA,4CACA,oEACA,0DACA,8CACA,0CACA,sDACA,4CACA,kCACA,4CACA,4BACA,sBACA,0BACA,gEACA,oDACA,8CACA,sCACA,8CACA,8CACA,0CACA,wDACA,kEACA,oCACA,wCACA,0DACA,oCACA,kDACA,4DACA,kDACA,gEACA,gCACA,0CACA,sCACA,4BACA,8BACA,0BACA,4CACA,wBACA,4BACA,4CACA,gCACA,8CACA,gBACA,8CACA,oCACA,0BACA,oCACA,oCA9HF,CAAYA,MAAS,M,iCCnBrB,6CA2BO,MAAMznB,EAAc,wBAAgC,CACzDL,gBAAiB,OACjBG,mBAAoB,OACpBJ,MAAO,M,iCCVT,8CAOe,SAASioB,GAAgB,SAAExrB,EAAF,QAAY4a,IAClD,MAAM6Q,EAAqB7Q,EAAQ3I,QAAQ,kBAAmB,yBAE9D,OAAIjS,EACKA,EAASyrB,GAGXA,I,8VCET,SAASC,EAAiBj0B,GACxB,OAAIA,EAAS2C,QAAU,KAAO3C,EAAS2C,OAAS,IACvC7B,QAAQC,QAAQf,GAEhBc,QAAQmE,OAAOjF,G,8yBCJnB,SAAS6d,IACd,OAAQle,ICdD,kBAAQ,uBAAuBI,KAAK+P,GAAKA,EAAEwP,UAAWwD,EAAA,GDe5C/iB,KACbuf,GAAa3f,EAAS,YAAiB2f,IACvC,SAKC,SAAS4U,IACd,OAAQv0B,IACN,cAAgBI,KACdoD,GAAWxD,EAAS,YAAewD,IACnC,SAKC,SAASgxB,EAAmBvzB,GACjC,OAAQjB,IACN,YAAiB,CAAEiB,cAAeA,GAAiBA,EAAcC,SAAUd,KACzE+P,GAAKnQ,EAAS,YAAqBmQ,EAAElP,gBACrC,SAKC,MAAMwzB,EAAqBxyB,GAAiBjC,GAC1CmB,QAAQuzB,IAAI,CAAC,YAAgBzyB,GAAM,YAA0BA,KAAO7B,KACzE,EAAEU,EAAc6zB,MACd,GAAI7zB,EAAc,CAChB,MAAM8zB,EAA2B,KAAQ9zB,EAAR,GAAyB6zB,GAC1D30B,EAAS,YAAqB,CAAC40B,QAMhC,SAASh1B,EAAkBmD,EAAwB8xB,GACxD,OAAQ70B,IACN,YAA4B,EAAD,CAAG60B,cAAe,YAAmB9xB,KAAe3C,KAC7E2D,IACE,MAAM,kBAAEb,EAAF,OAAqBF,GAAWe,EAChCd,EAAa,YAAyCc,GAC5D/D,EACE,YAA2B+C,EAAY8xB,EAAY7xB,EAAQC,EAAYC,KAG3E,KACElD,EAAS,YAAsB,2CAMhC,SAAS80B,EAAQ5b,EAAe6b,GACrC,OAAQ/0B,GDvEH,SAAekZ,EAAe6b,GACnC,OAAO,OAAAC,EAAA,SAAQ,6BACZC,UAAU,QACVC,QAAQ,CAAEhc,QAAO6b,aACjBI,SACA/0B,KAAKk0B,GCmEN,CAAWpb,EAAO6b,GAAU30B,KAC1B,OAGA,KACEJ,EAAS,YAAsB,0BACxBmB,QAAQmE,WAKhB,SAAS8vB,IACd,OAAQp1B,GD3ED,OAAAg1B,EAAA,SAAQ,8BACZC,UAAU,QACVE,SACA/0B,KAAKk0B,GCyEQl0B,KACZ,OAGA,KACEJ,EAAS,YAAsB,kBACxBmB,QAAQmE,WAKhB,SAAS+vB,EAAqB7jB,GACnC,MAAMiE,EAAW1K,OAAOmJ,SAASE,SAAWrJ,OAAOmJ,SAAS3E,OAASxE,OAAOmJ,SAASyB,KAErF,OADAnE,EAAOqJ,QAAQ,CAAEzG,SAAU,gBAAiBtU,MAAO,CAAEue,UAAW5I,KACzD,cAGF,SAAS6f,EAAqBvyB,EAAwBhC,EAAmBiC,GAC9E,OAAQhD,IACNA,EAAS,YAA2B+C,EAAYhC,EAAWiC,O,+tBEnGxD,SAASuyB,EAAe/vB,GAK7B,OAAO,eAAK,6BAA8BA,GAAMlE,MAAM,KAWjD,SAASk0B,EAAchwB,GAQ5B,OAAO,kBAAQ,oBAAqBA,GAG/B,SAASiwB,IACd,OAAO,kBAAQ,iCAAiCn0B,MAAM,KAGjD,SAASo0B,EAAYlwB,GAM1B,OADAA,EAAKC,EAAID,EAAKC,QAAKyE,EACZ,kBAAQ,oBAAqB1E,GAAMlE,MAAM,KAG3C,SAASq0B,EAAWnwB,GAQzB,OAAO,eAAK,oBAAqBA,GAG5B,SAASowB,EAAWpwB,GAMzB,OAAO,mBAAS,oB,+VAAD,IACVA,EADU,CAEbqwB,WAAYrwB,EAAKqwB,WAAW70B,OAAS,EAAIwE,EAAKqwB,WAAa,MAIxD,SAASC,EAAetwB,GAC7B,OAAO,mBAAS,wBAAyBA,GAAMlE,MAAM,KAGhD,SAASkX,IACd,OAAO,eAAK,uCAAuClX,MAAM,KAGpD,SAASy0B,EAAY7S,GAC1B,OAAO,eAAK,0BAA2BA,GAAU5hB,MAAM,KAGlD,SAAS00B,EAAeC,GAC7B,OAAO,eAAK,yBAA0BA,GAAS30B,MAAM,O,iCCtGvD,+rBAiEO,MAAM40B,EAAY,YACZC,EAAmC,CAC9C,aACA,YACA,MACA,uBAOK,SAASC,EAAWt2B,GACzB,MAAO,CACLu2B,SAAU,yBAAev2B,EAAMu2B,UAC/BC,UAAW,uBAAax2B,EAAMw2B,UAAW,iBACzChG,QAAS,uBAAaxwB,EAAMwwB,QAAS,iBACrCiG,aAAc,sBAAYz2B,EAAMy2B,cAChCC,UAAW,wBAAc12B,EAAM02B,WAC/BC,cAAe,sBAAY32B,EAAM22B,eACjCC,cAAe,wBAAc52B,EAAM42B,eACnCC,IAAK,uBAAa72B,EAAM62B,IAAK,iBAC7BC,YAAa,uBAAa92B,EAAM82B,YAAa,iBAC7CC,MAAO,uBAAa/2B,EAAMg3B,UAAW,iBACrCv2B,OAAQ,uBAAaT,EAAMS,OAAQ,iBACnCof,UAAW,uBAAa7f,EAAM6f,UAAW,iBACzCoX,QAAS,uBAAaj3B,EAAMk3B,YAAa,iBACzCC,WAAY,uBAAan3B,EAAMm3B,WAAY,iBAC3CtnB,SAAU,uBAAa7P,EAAM6P,SAAU,iBACvCunB,YAAa,uBAAap3B,EAAMo3B,YAAa,iBAC7C1iB,SAAU,yBAAe1U,EAAM0U,UAC/B5T,MAAO,uBAAad,EAAMc,MAAO,iBACjCu2B,UAAW,uBAAar3B,EAAMq3B,UAAW,iBACzCC,WAAY,uBAAat3B,EAAMs3B,WAAY,iBAC3C5V,gBAAiB,yBAAe1hB,EAAM0hB,iBAAiB,GACvD6V,oBAAqB,uBAAav3B,EAAMu3B,oBAAqB,iBAC7DhjB,MA3BiBA,EA2BCvU,EAAMsuB,EA3BoB,kBAAT/Z,EAA2B,gBAAkB,IA4BhFqO,SAAU,uBAAa5iB,EAAM4iB,SAAU,iBACvC+M,KAAM,uBAAa3vB,EAAM2vB,KAAM,iBAC/BrQ,MAAO,uBAAatf,EAAMsf,MAAO,kBA9BhB/K,MAkCd,SAASijB,EAAQx3B,GACtB,OAAOA,EAAM4J,KAGR,MAAM6tB,EAAuBz3B,GAAyC,SAAnBA,EAAM4U,SAEzD,SAAS8iB,EAAe13B,GAC7B,MAAMyC,EAAS,CACb8zB,SAAUv2B,EAAMu2B,cAAWnsB,EAAY,QACvCosB,UAAW,+BAAqBx2B,EAAMw2B,WACtChG,QAAS,+BAAqBxwB,EAAMwwB,SACpCiG,aAAc,6BAAmBz2B,EAAMy2B,cACvCC,UAAW,0BAAgB12B,EAAM02B,WACjCC,cAAe,6BAAmB32B,EAAM22B,eACxCC,cAAe,0BAAgB52B,EAAM42B,eACrCC,IAAK,+BAAqB72B,EAAM62B,KAChCC,YAAa,+BAAqB92B,EAAM82B,aACxCE,UAAW,+BAAqBh3B,EAAM+2B,OACtCt2B,OAAQ,+BAAqBT,EAAMS,QACnCof,UAAW,+BAAqB7f,EAAM6f,WACtCqX,YAAa,+BAAqBl3B,EAAMi3B,SACxCE,WAAY,+BAAqBn3B,EAAMm3B,YACvCtnB,SAAU,+BAAqB7P,EAAM6P,UACrCunB,YAAa,+BAAqBp3B,EAAMo3B,aACxC1iB,SAAU1U,EAAM0U,cAAWtK,EAAY,QACvCtJ,MAAO,+BAAqBd,EAAMc,OAClCwtB,EAAG,0BAAgBtuB,EAAMuU,MACzB8iB,UAAW,+BAAqBr3B,EAAMq3B,WACtCC,WAAY,+BAAqBt3B,EAAMs3B,YACvC5V,gBAAiB1hB,EAAM0hB,gBAAkB,YAAStX,EAClDmtB,oBAAqB,+BAAqBv3B,EAAMu3B,qBAChD3U,SAAU,+BAAqB5iB,EAAM4iB,UACrC+M,KAAM,+BAAqB3vB,EAAM2vB,MACjCrQ,MAAO,+BAAqBtf,EAAMsf,QAEpC,OAAO,qBAAW7c,GAGb,MAAMk1B,EAAkB,CAACnT,EAAeT,IAC7C,uBAAauS,EAAW9R,GAAI8R,EAAWvS,IAWlC,SAAS6T,EAASnI,GAKvB,MAJwC,CACtCsH,MAAO,YACPE,QAAS,eAEYxH,IAAUA,EAG5B,SAASoI,EAAYtI,GAC1B,IAAKA,EACH,MAAO,GAIT,MAAMuI,EAAkC,CACtCd,UAAW,QACXE,YAAa,WAGTvwB,EAAwB,GAS9B,OARA4oB,EAAOpiB,QAAQsiB,IACb,MAAMjc,EAAgB,GACtBic,EAAMjc,OAAOrG,QAAQpI,IACnByO,EAAOzO,EAAMgzB,KAAOhzB,EAAMizB,QAE5B,MAAMC,EAAgBH,EAAgBrI,EAAMyI,WAAazI,EAAMyI,SAC/DvxB,EAAOsxB,GAAiBzkB,IAEnB7M,EAGF,SAASwxB,EAAgBC,GAC9B,OAAOA,GAAQ,wBAAcA,EAAM,aAoB9B,MAAMC,EAAkB,CAC7Br4B,EACAgB,EACAsF,EAAO,IAEAtF,EACH,YAAc,CAAEA,eAAcuF,EAAGD,EAAMJ,GAAI,GAAIP,EAAG3F,IAASM,KAAK,EAAGoH,SAAQ7G,YAAX,CAC9D6G,SACAvB,QAAStF,KAEX,YAAY,CAAE0F,EAAGD,EAAMX,EAAG3F,IAASM,KAAK,EAAGoH,SAAQ7G,YAAX,CAA0B6G,SAAQvB,QAAStF,KAM5Ey3B,EAAU,IAHC,OAIf,cAxJc,4BA2JVC,EAAgB3jB,GAC3B,eA5JqB,2BA4JAA,EARC,KACC,OASlB,SAAS4jB,GACd,MAAEC,EAAF,mBAASC,GACTC,GAEA,YAA0BvuB,IAAtBuuB,EACKF,EAAME,IAAsB,GAE5BF,EAAMv3B,OAAS,EAAIu3B,EAAM,GAAKC,EAIlC,SAASE,EACdj4B,EACAg4B,EACAE,GAEA,MAAMC,EAAYN,EAAa73B,EAAOg4B,GACtC,YAC4BvuB,IAA1ByuB,GACAA,GAAyB,GACzBC,EAAU53B,QAAU23B,EAEbC,EAAUD,QAEjB,EAIG,SAASE,EACdp4B,EACAg4B,GAEA,OAAOH,EAAa73B,EAAOg4B,GAAmBK,MAAM5kB,IAAaA,EAAS6kB,KAGrE,SAASC,EAAcv4B,EAAew4B,GAAS,GACpD,MAAMC,EAAU5wB,SAAS6wB,cAAT,uBAAuC14B,EAAvC,OACZy4B,GACF,0BAAgBA,EAAS,CAAErnB,UAAW,IAAKC,aAAc,IAAKmnB,WAI3D,SAASG,EACdC,EACAv5B,GAEA,OACEu5B,EAAWnD,IA8Bf,SAAwCp2B,GACtC,YAAuBoK,IAAhBpK,EAAMsf,OAAuBtf,EAAMsf,MAAMvc,SAAS,iBA9BvDy2B,CAA+Bx5B,IAC/By5B,EAA4BF,EAAYv5B,GAIrC,SAAS05B,EACdH,EACAv5B,EACA25B,GAEA,MAAMl3B,EAASzC,EAAM25B,GACrB,OAC4B,IAA1BJ,EAAWnD,KACVmD,EAAWI,IACQ,QAAjBA,QAAqCvvB,IAAX3H,GAAwBA,EAAOvB,OAAS,GAIlE,SAAS04B,EACdL,EACAv5B,GAGA,OACE05B,EAA8BH,EAAYv5B,EAAO,wBAChDs5B,EAAyBC,EAAYv5B,KAAWy5B,EAA4BF,EAAYv5B,GAQ7F,SAASy5B,EAA4BF,EAA6Bv5B,GAChE,OAAOq2B,EAAe7c,KAAKmgB,GACzBD,EAA8BH,EAAYv5B,EAAO25B,M,iCC5TrD,uLAqBO,MAAME,EAAa,CAAC,UAAW,WAAY,QAAS,QAAS,QAEvDC,EAA6B,CACxC,MACA,gBACA,aACA,oBAEWC,EAA2B,CAAC,MAAO,gBAAiB,aAAc,oBAClEC,EAAgB,CAAC,QAAS,OAAQ,cAkBlCC,GAfX,SAAOrU,MACP,SAAOC,WACP,SAAOE,OACP,SAAOC,OACP,SAAOC,IAIP,SAAOA,IACP,SAAOD,OACP,SAAOD,OACP,SAAOF,WACP,SAAOD,MAGoB,CAC3B,SAAOA,MACP,SAAOC,WACP,SAAOE,OACP,SAAOC,OACP,SAAOC,O,4oBC5BF,SAASiU,EAAaC,GAC3B,MAAMxzB,EAAoB,GACpByzB,EAAS,IAAOD,EAAU,QAQhC,SAASE,EAAWC,EAA8B,KAAMC,EAAgB,GACtE,MAAMzxB,GAPkBmJ,EAOUqoB,EAN3BF,EAAO33B,OACZ8D,GAAgB,MAAV0L,GAAiC,MAAf1L,EAAEi0B,WAAiC,MAAVvoB,GAAkB1L,EAAEi0B,YAAcvoB,EAAO9P,MAF9F,IAA0B8P,EAST,MAAXqoB,GACF3zB,EAAOd,K,+VAAP,IAAiBy0B,EAAjB,CAA0BG,cAAe3xB,EAAS5H,OAAQq5B,WAG5DzxB,EAASqE,QAAQutB,GAASL,EAAWK,EAAOH,EAAQ,IAStD,OANAH,EACG33B,OACC63B,GAAgC,MAArBA,EAAQE,WAAsE,MAAjDJ,EAAO/0B,KAAKkB,GAAKA,EAAEpE,MAAQm4B,EAAQE,YAE5ErtB,QAAQmtB,GAAWD,EAAWC,IAE1B3zB,EAGF,SAASg0B,EAAWL,GACzB,GAAIA,EAAQM,eAAgB,CAC1B,MAAMC,EAAa,oBAAUP,EAAQM,gBACrC,GAAI,sBAAYC,GACd,OAAO,EAAkB,IAAIpjB,KAAQojB,IAAe,EAGxD,OAAO,EAGF,MAAMC,EAAmB95B,GAC9BA,EAAY,yBAAqBA,EAArB,qBAAuD,YAExD+5B,EAA6B,CACxCzY,EACAthB,KAFwC,CAIxCsT,SAAUwmB,EAAgB95B,GAC1BhB,MAAO,CAAEsiB,cAGE0Y,EAAiB,CAC5BxwB,EACA8X,EACAthB,KAH4B,CAK5BsT,SAAUwmB,EAAgB95B,GAAgB,QAC1ChB,MAAO,CAAEwK,OAAM8X,cAGJ2Y,EAAwB,CACnCzwB,EACA8X,EACAthB,EACAk6B,KAEA,MAAMl7B,EAAQ,CAAEsiB,WAAU9X,QAI1B,OAHI0wB,GACF74B,OAAO84B,OAAOn7B,EAAO,CAAEk7B,YAElB,CACL5mB,SAAUwmB,EAAgB95B,GAAgB,WAC1ChB,UAISo7B,EAA0B,CACrC5wB,EACA8X,EACAthB,EACAyB,KAEA,MAAMzC,EAAQ,CAAEsiB,WAAU9X,QAS1B,OARI/H,IACEA,EAAO44B,OACTh5B,OAAO84B,OAAOn7B,EAAO,CAAEq7B,MAAO54B,EAAO44B,QAEnC54B,EAAOsR,IACT1R,OAAO84B,OAAOn7B,EAAO,CAAE+T,GAAItR,EAAOsR,MAG/B,CACLO,SAAUwmB,EAAgB95B,GAAgB,aAC1ChB,W,iwBC/FG,SAASs7B,EAAiB51B,GAO/B,OAAO,kBAAQ,4BAA6BA,GAAMlE,MAAM,KAGnD,SAAS+5B,EAAgBp5B,GAC9B,OAAO,kBAAQ,4BAA6B,CAAEhB,cAAegB,IAAO7B,KAClE+P,GAAKA,EAAElP,cAAckE,KAAMm2B,GAAsBA,EAAEr5B,MAAQA,GAC3D,KAYG,SAASs5B,EAA0Bt5B,GACxC,OAAO,kBAAQ,+BAAgC,CAAEnB,aAAcmB,IAAO7B,KACpE+P,GAAKA,EAAErP,aACP,KAgBG,SAAS06B,EAAmBv5B,EAAaw5B,GAC9C,OAAO,eAAK,4B,+VAAD,EAAgCx5B,OAAQw5B,IAAWn6B,MAAM,KAG/D,SAASo6B,EAAmBz5B,GACjC,OAAO,eAAK,4BAA6B,CAAEA,QAAOX,MAAM,KAGnD,SAASq6B,EAAcn2B,GAO5B,OAAO,kBAAQ,oCAAqCA,GAAMlE,MAAM,KAG3D,SAASs6B,EAAUp2B,GAIxB,OAAO,mBAAS,gCAAiCA,GAAMpF,KAAK+P,GAAKA,EAAE0c,KAAM,KAGpE,SAASgP,EAAar2B,GAC3B,OAAO,eAAK,mCAAoCA,GAAMlE,MAAM,KAgBvD,SAASw6B,EAAuBh7B,GACrC,OAAO,kBAAQ,oBAAqB,CAAEA,eAAcuF,EAAG,EAAGL,GAAI,IAGzD,SAAS+1B,EAA0Bv2B,GACxC,OAAO,eAAK,sCAAuCA,GAAMlE,MAAM,KAG1D,SAAS06B,EAAYl7B,GAC1B,OAAO,eAAK,kCAAmC,CAAEA,iBAAgBQ,MAAM,O,26BC7FlE,SAAS26B,EAAkBz2B,GAMhC,OAAO,kBAAQ,yBAA0BA,GAAMlE,MAAM,KAGhD,SAAS46B,EAAiB12B,GAI/B,OAAO,kBAAQ,yBAA0BA,GAAMlE,MAAM,KAGhD,SAAS66B,EAAkB32B,GAIhC,OAAO,mBAAS,2BAA4BA,GAAMlE,MAAM,KAGnD,SAAS86B,EAAkB52B,GAIhC,OAAO,eAAK,4BAA6BA,GAAMlE,MAAM,KAGhD,SAAS+6B,EAAkB72B,GAKhC,OAAO,eAAK,2BAA4BA,GAAMlE,MAAM,KAG/C,SAASg7B,EAAgB92B,GAK9B,OAAO,mBAAS,yBAA0BA,GAAMlE,MAAM,KAGjD,SAASi7B,EAAwB/2B,GAItC,OAAO,eAAK,mCAAoCA,GAAMlE,MAAM,KAGvD,SAASk7B,EACdh3B,GAKA,OAAO,mBAAS,qCAAsCA,GAAMlE,MAAM,KAG7D,SAASm7B,EACdj3B,GAEA,OAAO,mBAAS,qCAAsCA,GAAMlE,MAAM,KAG7D,SAASo7B,EAAgBl3B,GAC9B,OAAO,eAAK,qCAAsCA,GAG7C,SAASm3B,EAAkBn3B,GAIhC,OAAO,kBAAQ,mCAAoCA,GAAMpF,KACvD,EAAGw8B,iBACDA,G,+VAAW,IACNA,EADM,CAETC,UAAWD,EAAY3iB,UAE3B,KAIG,SAASwY,EAAejtB,GAW7B,OAAO,kBAAQ,2BAA4BA,GAAMlE,MAAM,KAGlD,SAASw7B,EAAyBt3B,GAKvC,OAAO,eAAK,2BAA4BA,GAAMlE,MAAM,KAG/C,SAASy7B,EAA0Bv3B,GAKxC,OAAO,eAAK,6BAA8BA,GAAMlE,MAAM,KAGjD,SAAS07B,EAA0Bx3B,GAKxC,OAAO,kBAAQ,uCAAwCA,GAAMlE,MAAM,KAG9D,SAAS27B,EACdz3B,GAKA,OAAO,kBAAQ,mCAAoCA,GAChDpF,KAAK+P,GAAKA,EAAEpM,eACZzC,MAAM,O,iHCvII,SAAS47B,IACtB,MAAM,SAAEC,GAAapyB,OACrB,OAAOoyB,EACL,2B,sCAC4C,IAC1C,qBAAGvwB,KAAK,6BAA6BqR,IAAI,sBAAsBnQ,OAAO,UAAQ,mBAKhF,2B,+BAC+B,IAC7B,qBACElB,KAAK,4BACLqR,IAAI,sBACJnQ,OAAO,SACPa,MAAM,cAAY,cAEf,I,UACE,qC,mCAAqD,IAC5D,qBACE/B,KAAK,6BACLqR,IAAI,sBACJnQ,OAAO,SACPa,MAAM,kBAAgB,kBAIpB,K,aCzBK,SAASyuB,IACtB,OACE,uBAAKzwB,UAAU,6BAA6BtH,GAAG,UAC7C,4CACa,EAAQ,IAAIkS,MADzB,oBAEE,qBACE3K,KAAK,6BACLqR,IAAI,sBACJnQ,OAAO,SACPa,MAAM,kBAAgB,kBAIpB,0BAEN,sBAAIhC,UAAU,oBACZ,sBAAIA,UAAU,yBACZ,qBACEC,KAAK,kDACLqR,IAAI,sBACJnQ,OAAO,UACN,oBAAU,iBAGf,sBAAInB,UAAU,yBACZ,qBAAGC,KAAK,iCAAiCqR,IAAI,sBAAsBnQ,OAAO,UACvE,oBAAU,oBAGf,sBAAInB,UAAU,yBACZ,gBAAC,OAAI,CAACsR,IAAI,sBAAsBnQ,OAAO,SAAS+F,GAAG,cAChD,oBAAU,kBAGf,sBAAIlH,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,mBAAmB,oBAAU,oBAExC,sBAAIlH,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,2BAA2B,oBAAU,oBAEhD,sBAAIlH,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,4BAA4B,oBAAU,qBAEjD,sBAAIlH,UAAU,yBACZ,qBACEC,KAAK,8CACLqR,IAAI,sBACJnQ,OAAO,UACN,oBAAU,iBAGf,sBAAInB,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,kBAAkB,oBAAU,uBAEvC,sBAAIlH,UAAU,yBACZ,qBAAGC,KAAK,oCAAoCqR,IAAI,sBAAsBnQ,OAAO,UAC1E,oBAAU,mBAGf,sBAAInB,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,UAAU,oBAAU,oBChDxB,sBANUtS,IAAD,CACtB87B,mBAAoB,sBAAY97B,GAAO87B,mBACvCC,iBAAkB,sBAAY/7B,GAAOkY,QACrC8jB,iBAAkB,sBAAYh8B,GAAOi8B,UAGxB,ECCA,UAAsB,iBACnCC,EADmC,mBAEnCJ,EAFmC,iBAGnCC,EAHmC,iBAInCC,IAEA,GAAI,yBACF,OAAO,gBAACH,EAAsB,MAGhC,MAAMrkB,EAAiBukB,GAAoB,YAAWA,GAEtD,OACE,uBAAK3wB,UAAU,6BAA6BtH,GAAG,WACrB,IAAvBg4B,GACC,gBAACK,EAAA,MAAK,CAACC,QAAQ,SAASt4B,GAAG,qBAAqBu4B,QAAQ,WACtD,qBAAGjxB,UAAU,OAAO,oBAAU,uCAC9B,yBACE,gBAACynB,EAAA,EAAe,CAAC5Q,QAAS,oBAAU,8CAK1C,gBAAC0Z,EAAoB,MAErB,sBAAIvwB,UAAU,qBACV8wB,GAAoB1kB,GACpB,sBAAIpM,UAAU,yBAAyBoM,EAAezO,OAEtDmzB,GAAoBF,GACpB,sBAAI5wB,UAAU,yBACX,kCAAwB,mBAAoB4wB,IAGjD,sBAAI5wB,UAAU,yBACZ,qBAAGC,KAAK,4CAA4C,oBAAU,oBAEhE,sBAAID,UAAU,yBACZ,qBAAGC,KAAK,4BAA4B,oBAAU,sBAEhD,sBAAID,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,kBAAkB,oBAAU,0BAEvC,sBAAIlH,UAAU,yBACZ,qBAAGC,KAAK,uDACL,oBAAU,oBAGf,sBAAID,UAAU,yBACZ,qBAAGC,KAAK,4DACL,oBAAU,qBAGb6wB,GACA,sBAAI9wB,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,YAAY,oBAAU,qBAGjC4pB,GACA,sBAAI9wB,UAAU,yBACZ,gBAAC,OAAI,CAACkH,GAAG,UAAU,oBAAU,wB,wsCC3ElC,MAAMgqB,EAAmB,UAgBzB,SAASC,EAAoBC,GAClC,OAAO,mBAASA,EAAM,CACpBC,aAAc,CAAC,IAAK,KAAM,OAAQ,IAAK,KAAM,IAAK,SAAU,QAIzD,SAASC,EAAgBz7B,GAC9B,MAAMP,EAAG,mBAAeO,EAAWP,IAA1B,SACT,OAAO,qBAAWA,GAAO,oBAAUA,GAAOO,EAAW8H,KAGhD,SAAS4zB,EAAuB17B,GACrC,MAAMP,EAAG,mBAAeO,EAAWP,IAA1B,gBACT,OAAO,qBAAWA,GAAO,oBAAUA,GAAOO,EAAW2E,YAGhD,SAASg3B,EAAgB77B,GAC9B,MAAML,EAAG,4BAAwBK,GACjC,OAAO,qBAAWL,GAAO,oBAAUA,GAAOK,EAGrC,SAAS87B,EAAmB97B,EAAkB+7B,GACnD,MAAMp8B,EAAG,4BAAwBK,EAAxB,YAAoC+7B,GAC7C,OAAO,qBAAWp8B,GAAO,oBAAUA,GAAOk8B,EAAgBE,GAGrD,SAASC,EAA0Bh8B,EAAkB+7B,GAC1D,MAAMp8B,EAAG,4BAAwBK,EAAxB,YAAoC+7B,EAApC,gBACT,OAAO,qBAAWp8B,GAAO,oBAAUA,GAAO,KAGrC,SAASs8B,EAAc/7B,EAAiC2O,GAC7D,MAAMqtB,EAAcrtB,EAAK,WAAOA,EAAP,KAAkB,GAC3C,MAAM,YAAN,OAAmB3O,EAAWP,IAA9B,YAAqCu8B,GAGhC,SAASC,GAAgB,WAAEj8B,EAAF,YAAck8B,EAAd,MAA2B75B,EAA3B,OAAkCyO,IAChE,OAAIqrB,EAAqBn8B,IAAeA,EAAWo8B,YAC1CtrB,EACsB,iBAApB9Q,EAAWX,KACb68B,EAEA75B,EAIJ,SAASg6B,EAAar8B,EAAiCqC,GAC5D,OAAa,MAATA,GAE2B,YAApBrC,EAAWX,MAGI,IAAjBgD,EAAM7D,OAIV,SAAS29B,EACd13B,GAEA,OAAOC,QAASD,EAAa63B,QAGxB,SAASC,EAAc93B,GAC5B,GAAI03B,EAAqB13B,GAAO,CAC9B,GAAIA,EAAK23B,YACP,MAAO,CAACG,EAAc,EAAD,GAAM93B,EAAN,CAAY23B,aAAa,MAGhD,GAAkB,iBAAd33B,EAAKpF,KAAyB,CAChC,MAAMgD,EAAwB,GAE9B,OADAoC,EAAK63B,OAAO7xB,QAAQ+xB,GAAUn6B,EAAMm6B,EAAM/8B,KAAO88B,EAAcC,IACxD,CAACn6B,IAIZ,MAAkB,YAAdoC,EAAKpF,MAAoC,uBAAdoF,EAAKpF,KAC3B,KAEF,GAGF,SAASo9B,EAAqBhJ,GACnC,OAAO/uB,QAAQ+uB,EAAQiJ,WAGlB,SAASC,EAAgBlJ,GAC9B,MAAM,WAAEzzB,EAAF,kBAAc48B,EAAd,YAAiCC,EAAjC,aAA8CC,GAAiBrJ,EAErE,GAAwB,aAApBzzB,EAAWX,KACb,OAAO,oBAAU,6BAGnB,GAAwB,YAApBW,EAAWX,MAAsBw9B,EAAa,CAEhD,MAD+B,SAAhBA,EACC,oBAAU,yBAA2B,oBAAU,0BAGjE,OACEV,EAAqBn8B,IACrBA,EAAWo8B,aACXU,GACAA,EAAat+B,OAAS,EAEfs+B,EAAap+B,KAAK,MAGH,iBAApBsB,EAAWX,MAA2Bu9B,GAAqBA,EAAkBp+B,OAAS,EACjF,oBAAU,kCAGA,MAAfq+B,EACKV,EAAqBn8B,IAAeA,EAAW+8B,aAClD/8B,EAAW+8B,aACX,oBAAU,6BAGTF,I,iPCjIE39B,E,ouBAmBJ,SAAS89B,EAAmB3S,GACjC,MAAO,CAAEhrB,KAAMH,EAAQ+9B,mBAAoB5S,QAGtC,SAAS6S,IACd,MAAO,CAAE79B,KAAMH,EAAQi+B,sBAGlB,SAASnnB,IACd,OAAQxY,GACN,MAAqBI,KACnB,IAAMJ,EAAS0/B,KACf,IAAM1/B,EAAS0/B,MAQd,SAASE,EAA4B3J,GAC1C,MAAO,CAAEp0B,KAAMH,EAAQm+B,sBAAuB5J,WAGzC,SAASF,EAAY7S,GAC1B,OAAQljB,IACN,IAAgBkjB,GAAU9iB,KACxB,KACEJ,EAZD,SAA2BkjB,GAChC,MAAO,CAAErhB,KAAMH,EAAQo+B,kBAAmB5c,YAW3B6c,CAAkB7c,KAE7B,SAKC,SAASzL,EAAsBwe,GACpC,MAAO,CAACj2B,EAAoBC,KAC1B,MAAM+/B,EAAajgB,EAAsB9f,IAAWU,MAAOs1B,EAAQh0B,KACnEjC,EAAS4/B,EAA4B3J,IACrC,IAAmBA,GAAS71B,KAC1B,OACA,KACEJ,EAAS4/B,EAA4B,EAAD,GAAM3J,EAAN,CAAepxB,MAAOm7B,GAAc,UAuDzE,SAAShgB,EAAeze,GAC7B,OAAOA,EAAMC,YAGR,SAASue,EAAsBxe,EAAcU,GAClD,IAAIg0B,EAIJ,OAHI,YAAW10B,EAAMC,cAAgBD,EAAMC,YAAYy+B,WACrDhK,EAAU10B,EAAMC,YAAYy+B,SAAS96B,KAAK8wB,GAAWA,EAAQh0B,MAAQA,IAEhEg0B,GAAWA,EAAQpxB,OA7H5B,SAAWnD,GACT,4CACA,mDACA,yCACA,mCAJF,CAAWA,MAAO,KAkHH,gBAAgB,CAAEw+B,aA/CjC,SAAsB3+B,EAA+B,GAAIQ,GACvD,OAAIA,EAAOF,OAASH,EAAQ+9B,oBAAsB,YAAW19B,EAAO8qB,MAC3D,EAAP,GAAYtrB,EAAZ,CAAmB,CAACQ,EAAO8qB,KAAK3T,OAAQnX,EAAO8qB,OAExCtrB,GA2CoC4+B,WAvC/C,SAAoB5+B,EAA6B,GAAIQ,GACnD,OAAIA,EAAOF,OAASH,EAAQ+9B,oBAAsB,YAAW19B,EAAO8qB,MAC3D,IAAK,IAAItrB,EAAOQ,EAAO8qB,KAAK3T,QAE5B3X,GAmCgDC,YA/B3D,SACED,EAA8B,CAAEkT,YAAY,GAC5C1S,GAEA,GAAIA,EAAOF,OAASH,EAAQ+9B,mBAC1B,OAAO19B,EAAO8qB,KAEhB,GAAI9qB,EAAOF,OAASH,EAAQi+B,sBAAwB,YAAWp+B,GAC7D,OAAO,EAAP,GAAYA,EAAZ,CAAmB8X,wBAAwB,IAE7C,GAAItX,EAAOF,OAASH,EAAQo+B,mBAAqB,YAAWv+B,GAC1D,OAAO,EAAP,GAAYA,EAAZ,CAAmB2hB,SAAUnhB,EAAOmhB,WAEtC,GAAInhB,EAAOF,OAASH,EAAQm+B,uBAAyB,YAAWt+B,GAAQ,CACtE,IAAI0+B,EACJ,GAAI1+B,EAAM0+B,SAAU,CAClBA,EAAW,IAAI1+B,EAAM0+B,UACrB,MAAM9uB,EAAQ8uB,EAASG,UAAUnK,GAAWA,EAAQh0B,MAAQF,EAAOk0B,QAAQh0B,MAC5D,IAAXkP,EACF8uB,EAASt6B,KAAK5D,EAAOk0B,SAErBgK,EAAS9uB,GAASpP,EAAOk0B,aAG3BgK,EAAW,CAACl+B,EAAOk0B,SAErB,OAAO,EAAP,GAAY10B,EAAZ,CAAmB0+B,aAErB,OAAO1+B,M,wtBCnHT,IAAkBG,EAWX,SAAS2+B,EAAY/tB,GAC1B,MAAO,CAAEzQ,KAAMH,EAAQ4+B,YAAahuB,YAG/B,SAASiuB,EAAcC,GAC5B,MAAO,CAAE3+B,KAAMH,EAAQ++B,cAAeD,cAGjC,SAASnL,IACd,MAAO,CAAExzB,KAAMH,EAAQg/B,sB,wIApBzB,SAAkBh/B,GAChB,8BACA,kCACA,+CAHF,CAAkBA,MAAO,KAuBzB,MAAM69B,EAA2B,CAC/BoB,qBAAqB,EACrBC,oBAAoB,EACpBC,oBAAqB,GACrBpnB,aAASvP,EACThK,sBAAsB,EACtBm9B,oBAAoB,EACpBx1B,WAAY,GACZo4B,SAAU,GACVzC,QAAS,IAGI,aAASj8B,EAAoBg+B,EAAcx9B,GACxD,OAAIA,EAAOF,OAASH,EAAQ4+B,YACnB,EAAP,GAAY/+B,EAAZ,GAAsBQ,EAAOuQ,UAE3BvQ,EAAOF,OAASH,EAAQ++B,cACnB,EAAP,GAAYl/B,EAAZ,CAAmBi/B,WAAYz+B,EAAOy+B,aAEpCz+B,EAAOF,OAASH,EAAQg/B,qBACnB,EAAP,GAAYn/B,EAAZ,CAAmBq/B,oBAAoB,IAElCr/B,I,8hCC3CF,SAASu/B,EACdt7B,GAEA,OAAO,kBAAQ,0BAA2BA,GAAMpF,KAAK+P,GAAKA,EAAEpP,UAAUssB,SAAU,KAQ3E,SAAS0T,EACdhgC,EACAyC,EACAw9B,GAEA,OAAO,kBAAQ,0BAAD,GACZ7gC,iBAAkB,UAClBY,YACA2wB,WAAYluB,EAAQtC,KAAK,MACtB8/B,IACF1/B,MAAM,KAQJ,SAAS2/B,EACdlgC,EACAyC,EACAw9B,GAEA,OAAO,kBAAQ,0BAAD,GACZ7gC,iBAAkB,SAClBY,YACA2wB,WAAYluB,EAAQtC,KAAK,MACtB8/B,IACF1/B,MAAM,KAGJ,SAAS4/B,EACdngC,EACAyC,EACAw9B,GAEA,OAAO,kBAAQ,0BAAD,GACZ7gC,iBAAkB,iBAClBY,YACA2wB,WAAYluB,EAAQtC,KAAK,MACtB8/B,IACF1/B,MAAM,KAUJ,SAAS6/B,EACdC,EACA1P,GAEA,OAAO,kBAAQ,uBAAwB,CACrC0P,YAAaA,EAAYlgC,OACzBwwB,WAAYA,EAAWxwB,SACtBd,KAAK+P,GAAKA,EAAEkd,UAGV,SAASgU,EAAkB77B,GAMhC,OAAO,kBAAQ,8BAA+BA,GAAMpF,KAClD+P,IAAC,CAEGmxB,eAAgBnxB,EAAEmxB,eAClB95B,OAAQ,CAAEC,UAAW0I,EAAE9J,EAAGN,SAAUoK,EAAEnK,GAAI0B,MAAOyI,EAAEzI,SAEvD,KAIG,SAAS65B,EAAoB/7B,GAMlC,OAAO,mBAAS,8BAA+BA,GAAMlE,MAAM,KAGtD,SAASkgC,EAAoBh8B,GAClC,OAAO,eAAK,8BAA+BA,GAAMlE,MAAM,KAGlD,SAASmgC,EAAoBj8B,GAClC,OAAO,eAAK,8BAA+BA,GAAMlE,MAAM,O,stCC3FlD,MAAMogC,EAA0B,6BAC1BC,EAAoB,WACpBC,EAAe,MAEfC,EAAmC,CAC9C,CAAEh9B,MAAO,QACT,CAAEA,MAAO,iBACT,CAAEA,MAAO,eACT,CAAEA,MAAO,YACT,CAAEA,MAAO,mBACT,CAAEA,MAAO,YACT,CAAEA,MAAO,gBACT,CAAEA,MAAO,SAGEi9B,EAAwC,CACnD,CAAEj9B,MAAO,QACT,CAAEA,MAAO,iBACT,CAAEA,MAAO,kBAAmBk9B,MAAO,gCACnC,CAAEl9B,MAAO,eAAgBk9B,MAAO,gCAChC,CAAEl9B,MAAO,sBAAuBk9B,MAAO,gCACvC,CAAEl9B,MAAO,eAAgBk9B,MAAO,gCAChC,CAAEl9B,MAAO,mBAAoBk9B,MAAO,gCACpC,CAAEl9B,MAAO,YAAak9B,MAAO,iCAGlBC,EAAiC,CAC5CC,cAAe,gBACf33B,KAAM,OACN43B,YAAa,kBACbC,SAAU,eACVC,gBAAiB,sBACjBC,SAAU,eACVC,aAAc,mBACdlvB,KAAM,YACNmvB,gBAAiB,cACjBC,aAAc,WACdC,oBAAqB,kBACrBC,aAAc,WACdC,iBAAkB,eAClBC,UAAW,QAGAC,EAAQ,CACnB,CAAEh+B,MAAO,UAAWgI,MAAO,WAC3B,CAAEhI,MAAO,OAAQgI,MAAO,aAGbi2B,EAAiB,CAC5B,OACA,cACA,WACA,kBACA,WACA,gBAMIC,EAAU,CACd,IAAUC,aACV,IAAUC,KACV,IAAUC,mBACV,IAAUC,gBACV,IAAUC,gBACV,IAAUC,2BACV,IAAUC,uBACV,IAAUC,YACV,IAAUC,aACV,IAAUC,yBACV,IAAUpB,SACV,IAAUqB,MACV,IAAUC,4BACV,IAAUh0B,UAGNi0B,EAAe,CACnB,IAAUZ,aACV,IAAUa,SACV,IAAUC,uBACV,IAAUC,oBACV,IAAUC,oBACV,IAAUC,+BACV,IAAUC,2BACV,IAAUC,gBACV,IAAUC,2BACV,IAAU1B,aACV,IAAU2B,6BACV,IAAUzB,UACV,IAAUjzB,UAGN20B,EAA6C,CACjDC,KAAM,CACJ,IAAUrB,mBACV,IAAUE,gBACV,IAAUf,SACV,IAAUqB,MACV,IAAUc,aAGZtC,YAAa,CACX,IAAUwB,MACV,IAAUe,+BACV,IAAUxB,KACV,IAAUC,oBAEZf,SAAU,CACR,IAAUuB,MACV,IAAUgB,4BACV,IAAUvB,gBACV,IAAUC,iBAEZhB,gBAAiB,CACf,IAAUsB,MACV,IAAUc,YACV,IAAUjB,YACV,IAAUC,cAEZnB,SAAU,CAAC,IAAUsC,WAAY,IAAUtC,SAAU,IAAUuC,iBAC/DtC,aAAc,CAAC,IAAUoB,MAAO,IAAUD,yBAA0B,IAAUoB,oBAGnEC,EAAS,CACpB,qBACA,kBACA,yBACA,eACA,WACA,2BACA,QACA,eACA,YACA,OACA,aAGWC,EAAc,CACzB,yBACA,sBACA,6BACA,6BACA,eACA,+BACA,YACA,eACA,YACA,OACA,aAGIC,EAAkB,CAAC,WAAY,gBAE9B,SAASC,EAAgB5wB,GAC9B,OAAO,oBAAU,gBAAiBA,GAAQ,QAGrC,SAAS6wB,EAAa7wB,GAC3B,MAAM8wB,EAAmB,MAAZ9wB,EAAK,GAClB,MAAO,CAAE+wB,UAAWD,EAAO9wB,EAAK9C,OAAO,GAAK8C,EAAMgxB,SAAUF,GAGvD,SAASG,EACdxlC,EACAmc,EACAnb,EACA2G,EAAY,GAEZ,MAAMzB,EAAoB,mBAAflG,EAAMwb,KA/Gc,GADf,GAiHV9V,EA2DR,SACE1F,EACAmc,EACAnb,EACAykC,EAAc,IAEd,MAAM//B,EAAI,KAAqB+/B,EAArB,CAAkCzkC,iBACtCyB,EAAS,YAAgBzC,EAAOmc,GAChC5H,EAqFR,UAA0B,KAAEA,IAC1B,GAAIA,GAAoB,MAAZA,EAAK,GACf,MAAO,CAAE+Z,EAAGoX,EAAoBnxB,EAAK9C,OAAO,IAAKk0B,KAAK,GAExD,MAAO,CAAErX,EAAGoX,EAAoBnxB,GAAQ,KAzF3BqxB,CAAiB5lC,GAE1ByC,IACFiD,EAAKjD,OAASA,GAEZ8R,EAAK+Z,IACP5oB,EAAK4oB,EAAI/Z,EAAK+Z,QAEClkB,IAAbmK,EAAKoxB,MACPjgC,EAAKigC,IAAMpxB,EAAKoxB,KAElB,OAAOjgC,EA9EMmgC,CAAmB7lC,EAAOmc,EAAYnb,GAAgBA,EAAamB,IAAK,CACnFoE,EAAGoB,EAAY,EAAIA,OAAYyC,EAC/BlE,KACAqpB,OAAQuW,EAAa9lC,GAAOoB,OAC5B2C,EAAG,gCAEL,OAAO,YAAe2B,GACnBpF,KAAKC,GACJc,QAAQuzB,IAAI,CACVmR,EAAqBxlC,EAASK,WAAYZ,GAC1CgmC,EAA0BzlC,EAASK,WAAYI,GAC/CK,QAAQC,QAAQf,MAGnBD,KAAK,EAAEitB,EAAUpsB,GAAiBP,aAAY2uB,SAAQ7nB,cAC9C,CACL6nB,OAAQ0W,EAAa1W,GACrB1f,SAAUjP,EACPF,IAAIO,IACH,MAAMilC,EAAoC,GAW1C,OAVA3Y,EACG9qB,OAAO+qB,GAAWA,EAAQvsB,YAAcA,EAAUkB,KAClDgL,QAAQqgB,IACP,MAAMzoB,EAAQ,uBAAayoB,EAAQhpB,QAC/B,yBAAegpB,EAAS,GACxBA,EAAQzoB,WACEqF,IAAVrF,IACFmhC,EAAkB1Y,EAAQhpB,QAAUO,KAGnC,EAAP,GAAY9D,EAAZ,CAAuBssB,SAAU2Y,MAElCxlC,IAAIO,IACH,MAAMD,EAAeG,EAAckE,KAAKm2B,GAAKA,EAAEr5B,MAAQlB,EAAUD,cACjE,OAAO,EAAP,GAAYC,EAAZ,CAAuBD,mBAE3B4G,MAAOF,EAAOE,SAgBtB,SAASk+B,EAAa9lC,GACpB,MAAmB,SAAfA,EAAMwb,KACDypB,EAEFD,EAyBF,SAASe,EAAqBl2B,EAAkC7P,GACrE,IAAK6P,EAAS3O,OACZ,OAAOG,QAAQC,QAAQ,IAGzB,MAAMggC,EAAczxB,EAASnP,IAAIiR,GAAWA,EAAQxP,KAC9CuB,EA9CR,SAAuB1D,GACrB,OAAQA,EAAMwb,MACZ,IAAK,iBACH,OAAOgpB,EAAyBxkC,EAAMmmC,eAAiB,QACzD,IAAK,OACH,OAAOrC,EACT,QACE,OAAOb,GAuCKmD,CAAcpmC,GAC9B,OAAO,YAAuBshC,EAAa59B,GAGtC,SAASsiC,EACdn2B,EACA7O,GAEA,GAAIA,EACF,OAAOK,QAAQC,QAAQ,CAACN,IAE1B,IAAK6O,EAAS3O,OACZ,OAAOG,QAAQC,QAAQ,IAGzB,MAAMH,EAAgB,IAAK0O,EAASnP,IAAIiR,GAAWA,EAAQ3Q,eAC3D,OAAO,YAAiB,CAAEG,cAAeA,EAAcC,SAAUd,KAAK+P,GAAKA,EAAElP,eAW/E,MAAMukC,EAAkD,CACtDvD,cAAe,eACfC,YAAa,qBACbK,gBAAiB,yBACjBJ,SAAU,kBACVK,aAAc,sBACdc,uBAAwB,yBACxBY,2BAA4B,6BAC5B9B,gBAAiB,eACjBK,oBAAqB,6BACrBJ,SAAU,WACVK,aAAc,eACdJ,aAAc,2BACdK,iBAAkB,+BAClBvvB,KAAM,QACNwvB,UAAW,YACXuD,KAAM,eACNxmB,UAAW,YACX8P,KAAM,OACNlgB,OAAQ,QACRzH,UAAW,aAGPs+B,EAAsB,IAAOZ,GAEnC,SAASO,EAAa1W,GACpB,MAAM7uB,EAA8B,GASpC,OARA6uB,EAAOpiB,QAAQsiB,IACb,MAAMyI,EAAWoO,EAAoB7W,EAAMyI,WACrC,OAAE1kB,GAAWic,EACfyV,EAAgBniC,SAASm1B,IAC3B1kB,EAAOif,UAET/xB,EAAIw3B,GAzCR,SAAwB1kB,GACtB,MAAM9S,EAAsB,GAI5B,OAHA8S,EAAOrG,QAAQpI,IACbrE,EAAIqE,EAAMgzB,KAAOhzB,EAAMizB,QAElBt3B,EAoCW6lC,CAAe/yB,KAE1B9S,EAgCF,SAAS8lC,EAAeC,GAC7B,GAAIA,EAvBa,IAwBf,OAAO,oBAAU,oBAEnB,MAAMC,EAAQr7B,KAAK2jB,MAAMyX,EAtBV,SAuBfA,GAvBe,QAuBTC,EACN,MAAMC,EAASt7B,KAAK2jB,MAAMyX,EAzBV,QA0BhBA,GA1BgB,OA0BVE,EACN,MAAMC,EAAOv7B,KAAK2jB,MAAMyX,EA5BV,OA6BdA,GA7Bc,MA6BRG,EACN,MAAMC,EAAQx7B,KAAK2jB,MAAMyX,EA/BV,MAkCf,OAFAA,GAhCe,KAgCTI,EA3BR,SAAgBjZ,GACd,IAAIjnB,EAAS,GACTqxB,EAAQ,EACR8O,GAAU,EACd,IAAK,IAAIzsB,EAAI,EAAGA,EAAIuT,EAAQ1sB,QAAU82B,EAAQ,EAAG3d,IAC3CuT,EAAQvT,GAAGtV,MAAQ,IACrBizB,KACI8O,EAAS,GAAKA,EAAS,IAAMzsB,KAC/BysB,EAASzsB,EACT1T,GAAU,kCAAwBinB,EAAQvT,GAAGtN,MAAO6gB,EAAQvT,GAAGtV,OAAS,MAI9E,OAAO4B,EAgBAogC,CAAO,CACZ,CAAEhiC,MAAO2hC,EAAO35B,MAAO,kBACvB,CAAEhI,MAAO4hC,EAAQ55B,MAAO,mBACxB,CAAEhI,MAAO6hC,EAAM75B,MAAO,iBACtB,CAAEhI,MAAO8hC,EAAO95B,MAAO,kBACvB,CAAEhI,MANYsG,KAAK2jB,MAAMyX,EAlCV,KAwCG15B,MAAO,wB,60BC1VtB,SAASi6B,EAA4CvmC,GAC1D,OAAO,IAAOA,EAAQE,GAAS,IAAYsH,QAAQtH,EAAMoB,OAG3D,SAASklC,EACPtmC,EACAumC,EACAC,EACAC,GAEA,MAAMC,EAAyB,GACzBC,EAAY3mC,EAAMwmC,GACxB,QAAkB/8B,IAAdk9B,QAAsCl9B,IAAX88B,EAAsB,CACnD,MAAMK,EAAcL,EAAO7hC,KAAKmiC,GAAaA,EAAUJ,KAAiBE,GACrD,MAAfC,GACFllC,OAAOC,KAAKilC,GAAap6B,QAAQhL,IAC/B,MAAMoL,EAAS45B,EAAYhlC,EAAIslC,OAAO,GAAGC,cAAgBvlC,EAAIwlC,MAAM,GACnEN,EAAU95B,GAAUg6B,EAAYplC,KAItC,OAAOklC,EAwCT,SAASO,EAAiB9O,GACxB,MAAMvvB,EAAI,IAAIuvB,GAEd,OADAvvB,EAAEkpB,UACKlpB,EAgCF,SAASs+B,EACdlnC,EACAC,EACAC,EACAC,GAEA,MAAM,mBAAE43B,EAAF,MAAsBD,GAnC9B,SACE93B,EACAC,EAA0B,IAE1B,MAAMknC,GAAmCnnC,EAAM83B,OAAS,IACrDh2B,OAAOslC,QAA2B39B,IAAnB29B,EAAKjP,WACpBp4B,IAAIqnC,GAAQA,EAAKjP,UAAWr2B,OAAO2R,GAAkC,MAAtBA,EAAS4zB,YACxDtnC,IAAIqnC,GACHA,EAAKrnC,IAAI0T,IACP,MAAMnT,EAAYL,EAAWyE,KAAKpE,GAAaA,EAAUkB,MAAQiS,EAASnT,WAC1E,OAAO,EAAP,GAAYmT,EAAZ,CAAsB6zB,cAAehnC,GAAaA,EAAUuJ,UAMlE,OAF+Bs9B,EAAY9O,MAAM+O,GAAwB,IAAhBA,EAAK7mC,QAG1D,CAAEw3B,oBAIgBI,EAJmB,IAAQgP,GAK1C,IACLhP,EACA1kB,GAAYA,EAAS4zB,WAAa5zB,EAAS4zB,UAAUE,UACrD9zB,GAAYA,EAAS4zB,WAAa5zB,EAAS4zB,UAAUG,cARS1P,MAAO,IACnE,CAAEC,mBAAoB,GAAID,MAAOqP,EAAYpnC,IAAIknC,IAGvD,IAAwB9O,EAcgBsP,CAAWznC,EAAOC,GACxD,OAAO,EAAP,GACKD,EADL,GAEKsmC,EAAiBtmC,EAAOC,EAAY,YAAa,OAFtD,GAGKqmC,EAAiBtmC,EAAOC,EAAY,UAAW,OAHpD,GAIKqmC,EAAiBtmC,EAAOC,EAAY,aAAc,OAJvD,GAKKqmC,EAAiBtmC,EAAOG,EAAO,OAAQ,OAL5C,GAMKmmC,EAAiBtmC,EAAOE,EAAO,WAAY,SANhD,GA/EF,SAAkCF,EAAiBE,GACjD,OAAKF,EAAM0nC,SAUJ,CAAEA,SAPQ1nC,EAAM0nC,SAAS3nC,IAAI4nC,IAClC,MAAMC,EAAiB,KAAQD,EAAR,CAAiBE,OAAQF,EAAQlvB,MAAOA,WAAOhP,IACtE,OAAO,EAAP,GACKm+B,EADL,GAEKtB,EAAiBsB,EAAmB1nC,EAAO,SAAU,aANnD,GAoFJ4nC,CAAyB9nC,EAAOE,GAPrC,GAjEF,SACEF,EACA+3B,EACAD,GAEA,MAAwB,WAAjB93B,EAAMuC,OACT,CAAEu1B,MAAO,GAAIxV,UAAM7Y,EAAW49B,eAAW59B,EAAWsuB,mBAAoB,IACxE,CAAED,QAAOC,sBAkERgQ,CAAc/nC,EAAO+3B,EAAoBD,GAR9C,GAvDF,SAAyB93B,GACvB,OAAOA,EAAMsiB,OAAStiB,EAAMqnC,UACxB,CACEA,UAAW,CACTE,UAAWvnC,EAAMsiB,KACjB0lB,QAAShoC,EAAMsiB,KACfklB,YAAa,EACbS,UAAW,SAGf,GAsDCC,CAAgBloC,M,gWChJhB,SAASmoC,EAAe7nC,GAC7B,OAAO,kBAAQ,iCAAkC,CAAEA,cAAaX,KAC9D+P,GAAKA,EAAEvO,YACP,KAIG,SAASinC,EACdrjC,GAEA,OAAO,kBAAQ,uBAAwBA,GAAMpF,KAAK+P,GAAKA,EAAE8vB,UAGpD,SAAS6I,EACdtmC,EACAqC,EACA9D,GAEA,MAAM,IAAEkB,GAAQO,EACVgD,EAAoB,CAAEvD,MAAKlB,aAYjC,OAVI,YAAqByB,IAAeA,EAAWo8B,YACjDp5B,EAAK8N,OAASzO,EACe,iBAApBrC,EAAWX,KACpB2D,EAAKk5B,YAAc75B,EAChBrE,IAAKs+B,GAAgB,IAAOA,EAAQj6B,GAAkB,MAATA,IAC7CrE,IAAI2I,KAAKI,WAEZ/D,EAAKX,MAAQA,EAGR,eAAK,oBAAqBW,GAS5B,SAASujC,EACdvjC,GAEA,OAAO,eAAK,sBAAuBA,GAG9B,SAASwjC,EAAcn1B,EAAYo1B,EAAiBzlB,GACzD,OAAO,eAAK,mBAAoB,CAAE3P,KAAIo1B,UAASzlB,YAG1C,SAAS0lB,IACd,OAAO,kBAAQ,kCAAkC5nC,MAAM,KAGlD,SAAS6nC,IACd,OAAO,mBAAS,qCAAqC7nC,MAAM,KAGtD,SAAS8nC,EAAavkC,GAC3B,OAAO,mBAAS,wBAAyB,CAAEA,UAASvD,MAAM,O,iCCpF5D,6CAyCO,MAAM+nC,EAAmB,wBAAqC,CACnE7/B,cAAe,OACfK,SAAU,U,u+BCLL,SAASy/B,EAAqBroC,GACnC,MAAO,CAAEY,KAAM,wBAAyBZ,iBAGnC,SAASsoC,EAAuBtoC,GACrC,MAAO,CAAEY,KAAM,2BAA4BZ,iBAOtC,SAASu6B,EAAmBv5B,EAAaw5B,GAC9C,MAAO,CAAE55B,KAAM,sBAAuBI,MAAKw5B,WAGtC,SAASC,EAAmBz5B,GACjC,MAAO,CAAEJ,KAAM,sBAAuBI,OAuDjC,SAASge,EAAqB1e,EAAcU,GACjD,OAAOV,EAAMmC,MAAMzB,GAGd,SAASie,EAAmB3e,GACjC,OAAOA,EAAMioC,GAAGhpC,IAAIyB,GAAOge,EAAqB1e,EAAOU,IAP1C,gBAAgB,CAAEyB,MA1CjC,SAAenC,EAAwB,GAAIQ,GACzC,OAAQA,EAAOF,MACb,IAAK,wBACL,IAAK,2BACH,OAZN,SAAgCN,EAAuBQ,GACrD,MAAM6Y,EAAS,KAAQrZ,GAIvB,OAHAQ,EAAOd,cAAcgM,QAAQnM,IAC3B8Z,EAAU9Z,EAAamB,KAAvB,KAAmCV,EAAMT,EAAamB,KAAtD,GAA+DnB,KAE1D8Z,EAOI6uB,CAAuBloC,EAAOQ,GACvC,IAAK,sBACH,OAAO,EAAP,GACKR,EADL,CAEE,CAACQ,EAAOjB,aAAamB,KAArB,KACKF,EAAOjB,aADZ,CAEE4oC,QAAQ,EAAD,GAAQ3nC,EAAOjB,aAAa4oC,SAAW,GAAvC,CAA4CC,OAAO,QAGhE,IAAK,sBACH,OAAO,EAAP,GACKpoC,EADL,CAEE,CAACQ,EAAOE,KAAR,KACKV,EAAMQ,EAAOE,KADlB,CAEEA,IAAKF,EAAOE,KACTF,EAAO05B,WAGhB,IAAK,sBACH,OAAO,IAAKl6B,EAAOQ,EAAOE,KAC5B,QACE,OAAOV,IAiB2BioC,GAbxC,SAAYjoC,EAAqB,GAAIQ,GACnC,OAAQA,EAAOF,MACb,IAAK,2BACH,OAAO,IAAK,IAAIN,KAAUQ,EAAOd,cAAcT,IAAI86B,GAAKA,EAAEr5B,OAC5D,IAAK,sBACH,OAAO,IAAK,IAAIV,EAAOQ,EAAOjB,aAAamB,MAC7C,IAAK,sBACH,OAAO,IAAQV,EAAOQ,EAAOE,KAC/B,QACE,OAAOV,O,09BC3EN,SAASkC,EAAW+B,GAKzB,OAAO,kBAAQ,sBAAuBA,GAAMlE,MAAM,KAG7C,SAASsoC,EAAcpkC,GAK5B,OAEA,SAASgY,EACPhY,EAAoC,CAAEQ,GAAI,KAC1C6jC,GAEA,OAAOpmC,EAAW+B,GAAMpF,KAAK+P,IAC3B,MAAM1J,EAASojC,EAAOA,EAAKrmC,QAAQsmC,OAAO35B,EAAE3M,SAAW2M,EAAE3M,QACzD,OAAI2M,EAAE9J,EAAI8J,EAAEnK,IAAMmK,EAAEzI,MACXjB,EAEF+W,EAAM,EAAD,GAAMhY,EAAN,CAAYa,EAAG8J,EAAE9J,EAAI,IAArB,KAA+B8J,EAA/B,CAAkC3M,QAASiD,OAXpD+W,CAAMhY,GAgBR,SAASukC,IACd,OAAO,kBAAQ,wBAAwB3pC,KAAK+P,GAAKA,EAAE65B,QAAS,KAGvD,SAASC,IACd,OAAO,kBAAQ,sBAAsB7pC,KAAK+P,GAAKA,EAAEiP,MAAO,KAGnD,SAAS8qB,EAAa1kC,GAO3B,OAAO,mBAAS,sBAAuBA,GAAMlE,MAAM,KAG9C,SAAS6oC,EAAa3kC,GAQ3B,OAAO,eAAK,sBAAuBA,GAAMlE,MAAM,KAG1C,SAAS8oC,EAAa5kC,GAC3B,OAAO,eAAK,sBAAuBA,GAAMlE,MAAM,O,iCCxFjD,iFAkCe,MAAM+oC,UAA2B,gBAAhD,c,oBACE,KAAA9oC,MAAQ,CAAE+oC,cAAc,GAExB,KAAAC,eAAiB,KACfniC,KAAKqB,SAAS,CAAE6gC,cAAc,KAGhC,SACE,MAAM,UAAE39B,EAAF,aAAa7L,EAAb,MAA2B0pC,GAAUpiC,KAAKF,OAC1C,aAAEoiC,GAAiBliC,KAAK7G,MAC9B,OACE,uBACEoL,UAAW,EACT,wBACA,UACA,CAAE,aAAc7L,EAAaqV,OAAQ,WAAYq0B,GACjD79B,IAED7L,EAAaqV,SAAWm0B,EACvB,uBACEx2B,IAAKhT,EAAawJ,KAClBqC,UAAU,UACV89B,QAASriC,KAAKmiC,eACdx2B,IAAKjT,EAAaqV,SAGpB,gBAAC,IAAa,CAAC7L,KAAMxJ,EAAawJ,KAAM8I,KAAMo3B,EAAQ,GAAK,S,2cChCtD,SAASE,EAAiBxiC,GACvC,MAAM,SAAEU,EAAF,aAAY9H,GAA2BoH,EAAVyiC,EAAnC,EAA6CziC,EAA7C,6BAEA,OACE,gBAAC,OAAI,eAAC2L,GAAE,yBAAoB/S,EAAamB,MAAW0oC,GACjD/hC,K,yGCTFlH,E,2tBAaE,SAASkpC,EACd3K,EACAl/B,GAEA,MAAO,CAAEc,KAAMH,EAAQkpC,cAAe3K,WAAUl/B,aAmC3C,SAASye,EACdje,EACAU,EACAlB,GAEA,OAAIA,EACKQ,EAAMb,WAAWK,IAAcQ,EAAMb,WAAWK,GAAWkB,GAE7DV,EAAMyrB,OAAO/qB,IA5DtB,SAAKP,GACH,iCADF,CAAKA,MAAO,KAkDG,gBAAgB,CAAEhB,WA9BjC,SAAoBa,EAA6B,GAAIQ,GACnD,MAAQhB,UAAWkB,GAAQF,EAC3B,IAAKE,EACH,OAAOV,EAET,GAAIQ,EAAOF,OAASH,EAAQkpC,cAAe,CACzC,MAAMC,EAAgB,IAAM9oC,EAAOk+B,SAAU,OAC7C,OAAO,EAAP,GAAY1+B,EAAZ,CAAmB,CAACU,GAAD,KAAaV,EAAMU,IAAQ,GAA3B,GAAmC4oC,KAExD,OAAOtpC,GAqBoCyrB,OAlB7C,SAAgBzrB,EAA6B,GAAIQ,GAC/C,GAAIA,EAAOF,OAASH,EAAQkpC,cAAe,CACzC,GAAI7oC,EAAOhB,UACT,OAAOQ,EAGT,OAAO,EAAP,GAAYA,EAAZ,GADsB,IAAMQ,EAAOk+B,SAAU,QAG/C,GAAIl+B,EAAOF,OAAS,IAAgBy+B,YAAa,CAC/C,MAAMuK,EAA+B,GAIrC,OAHA1oC,OAAOC,KAAKL,EAAOuQ,SAAS2tB,UAAUhzB,QACpChL,GAAQ4oC,EAAc5oC,GAAO,CAAEA,MAAK4C,MAAO9C,EAAOuQ,SAAS2tB,SAASh+B,KAE/D,EAAP,GAAYV,EAAZ,GAAsBspC,GAExB,OAAOtpC,M,iCCvET,+BA6Be,sBALOA,IAAD,CACnBC,YAAa,yBAAeD,GAC5BsG,WAAY,sBAAYtG,GAAOsG,aAGlB,CAAsB,4BAAkB,IAAM,yF,iCCT7D,4GAKO,MAAMsW,EAAuB,IAAOne,GAClC,YAAiB,CAAE8qC,QAAQ,IAAQ1qC,KAAK,EAAGa,mBACzCjB,EAAS,YAAuBiB,KAI9B8pC,EAAsC,IAAO/qC,GACjD,YAAU,CAAEoC,KAAM,wCAAyChC,KAAKkT,IACrEtT,EAAS,YAAcsT,O,iCCjC3B,uMAwBA,MAAM03B,EAA2C,CAC/CC,UAAW,CACThpC,IAAK,IAAWgpC,UAChB3gC,KAAM,oBACN4gC,QAAS,2DACTC,iBAAkB,eAEpBC,UAAW,CACTnpC,IAAK,IAAWmpC,UAChB9gC,KAAM,oBACN4gC,QAAS,2DACTC,iBAAkB,wBAEpBE,WAAY,CACVppC,IAAK,IAAWopC,WAChB/gC,KAAM,qBACN4gC,QAAS,4DACTC,iBAAkB,yBAEpBG,WAAY,CACVrpC,IAAK,IAAWqpC,WAChBhhC,KAAM,sBACN4gC,QAAS,4DACTC,iBAAkB,0BAIf,SAASI,EAAWC,GACzB,OAAOR,EAASQ,GAGX,SAASC,EAAoB1yB,GAClC,MAAM2yB,EAAWvpC,OAAOmR,OAAO03B,GACzBW,EAAoBD,EAAStL,UAAU3mB,GAAWA,EAAQxX,MAAQ8W,GACxE,OAAO2yB,EAASjE,MAAMkE,EAAoB,GAGrC,SAASC,EACdnyB,EACAjU,GAEA,IAAI+B,EAAMkS,EAAQyxB,QAClB,MAAMprC,EAAQ,oBAAU,kBAAQ0F,IAIhC,OAHI1F,IACFyH,GAAO,IAAMzH,GAERyH,EAGF,SAASskC,EAAsBpyB,EAAkBqyB,GACtD,OAAOA,EAAYryB,EAAQ0xB,mBAAqBW,EAAYC,YAGvD,SAASC,EAA2BzkC,GACzC,OAAOA,EAAIsT,QAAQ,kCAAmC,Q,iCC9ExD,8CA+Be,MAAMpK,EACnB,aACE,MAAMmO,EAAU,cAZG,wBAanB,GAAe,MAAXA,EACF,MAAO,GAEP,IACE,OAAOzV,KAAKC,MAAMwV,GAClB,SAEA,OADA,iBAnBe,wBAoBR,IAKb,WAAWqtB,GACT,eA1BmB,uBA0BE9iC,KAAKI,UAAU0iC,IAGtC,eACE,iBA9BmB,wBAiCrB,WACEriC,EACAm+B,EACAmE,EACAprC,GAEA,MAAMqrC,EAAe17B,EAAcC,MAC7B07B,EAAW,CAAEnqC,IAAK2H,EAAcU,KAAMy9B,EAAemE,OAAMprC,gBACjE,IAAImrC,EAAaE,EAAa5pC,OAAO8pC,GAASA,EAAMpqC,MAAQmqC,EAASnqC,KACrEgqC,EAAWK,QAAQF,GACnBH,EAAaA,EAAWxE,MAAM,EA1CZ,IA2ClBh3B,EAAc87B,IAAIN,GAGpB,cAAcriC,GACZ,MACMqiC,EADUx7B,EAAcC,MACHnO,OAAO8pC,GAASA,EAAMpqC,MAAQ2H,GACzD6G,EAAc87B,IAAIN,M,iCCvEtB,6RA4EO,SAAS7V,EAAWt2B,GACzB,MAAO,CACL2iB,WAAY,iCAAuB3iB,EAAM2iB,YACzC+pB,qBAAsB,uBAAa1sC,EAAM2sC,kBAAmB,iBAC5DC,eAAgB,sBAAY5sC,EAAM6sC,iBAClCC,iBAAkB,gCAAsB9sC,EAAM8sC,kBAC9CjW,IAAK,uBAAa72B,EAAM62B,IAAK,iBAC7BkW,YAAaC,EAAmBhtC,EAAM+sC,aACtCltB,UAAW,uBAAa7f,EAAM6f,UAAW,iBACzCsX,WAAY,uBAAan3B,EAAMm3B,WAAY,iBAC3CmD,QAAS,gCAAsBt6B,EAAMitC,UACrCC,aAAc,uBAAaltC,EAAMktC,aAAc,iBAC/ChjC,QAAS,gCAAsBlK,EAAM8iB,UACrCuU,UAAW,uBAAar3B,EAAMq3B,UAAW,iBACzC8V,YAAa,gCAAsBntC,EAAM2F,GACzC2xB,WAAY,uBAAat3B,EAAMs3B,WAAY,iBAC3CC,oBAAqB,uBAAav3B,EAAMu3B,oBAAqB,iBAC7D3U,SAAU,uBAAa5iB,EAAM4iB,SAAU,iBACvC+M,KAAM,uBAAa3vB,EAAM2vB,KAAM,iBAC/Byd,SAAU,iCAAuBptC,EAAMqtC,aACvC/tB,MAAO,uBAAatf,EAAMsf,MAAO,kBAI9B,SAASoY,EAAe13B,GAC7B,OAAO,qBAAW,CAChB2iB,WAAY,mCAAyB3iB,EAAM2iB,YAC3CgqB,kBAAmB,+BAAqB3sC,EAAM0sC,sBAC9CG,gBAAiB,6BAAmB7sC,EAAM4sC,gBAC1CE,iBAAkB,0BAAgB9sC,EAAM8sC,kBACxCjW,IAAK,+BAAqB72B,EAAM62B,KAChCkW,YAAkC/sC,EAAM+sC,YACxCM,YAAa,mCAAyBrtC,EAAMotC,UAC5CvtB,UAAW,+BAAqB7f,EAAM6f,WACtCsX,WAAY,+BAAqBn3B,EAAMm3B,YACvCxxB,EAAG,0BAAgB3F,EAAMmtC,aACzBF,SAAU,0BAAgBjtC,EAAMs6B,SAChC4S,aAAc,+BAAqBltC,EAAMktC,cACzCpqB,SAAU,0BAAgB9iB,EAAMkK,SAChCmtB,UAAW,+BAAqBr3B,EAAMq3B,WACtCC,WAAY,+BAAqBt3B,EAAMs3B,YACvCC,oBAAqB,+BAAqBv3B,EAAMu3B,qBAChD3U,SAAU,+BAAqB5iB,EAAM4iB,UACrC+M,KAAM,+BAAqB3vB,EAAM2vB,MACjCrQ,MAAO,+BAAqBtf,EAAMsf,SAI/B,SAASqY,EAAgBnT,EAAeT,GAC7C,OAAO,uBAAauS,EAAW9R,GAAI8R,EAAWvS,IAGzC,SAASupB,EAAmB7d,GAejC,MAdwB,CACtB,uBACA,MACA,YACA,aACA,eACA,YACA,aACA,sBACA,WACA,WACA,OACA,SAEqB1sB,SAAS0sB,GAG3B,SAAS8d,EAAe9d,GAC7B,MAAiB,yBAAVA,EAAmC,oBAAsBA,EAG3D,SAAS+d,EAAYC,GAC1B,MAAuB,sBAAhBA,EAAsC,uBAA0BA,EAGlE,SAASjW,EAAQx3B,GACtB,OAAOA,EAAM4J,KAGR,SAAS8jC,EAAW1tC,GACzB,OAAOoH,QAAQpH,EAAM8iB,UAGvB,SAASkqB,EAAmBjoC,GAC1B,MAAc,cAAVA,GAAmC,SAAVA,GAA8B,cAAVA,EACxCA,OAEP,I,uVC/IOnD,E,ktBAuBJ,SAAS+rC,EAAaxrC,GAC3B,MAAO,CAAEJ,KAAMH,EAAQgsC,aAAczrC,OAGhC,SAAS0rC,EAAY1rC,EAAa4C,GACvC,MAAO,CAAEhD,KAAMH,EAAQksC,YAAa3rC,MAAK4C,SAapC,SAASgpC,EAAe5rC,EAAauhB,GAC1C,MAAO,CAAE3hB,KAAMH,EAAQosC,eAAgB7rC,MAAKuhB,WAGvC,SAASuqB,EAAe9rC,GAC7B,MAAO,CAAEJ,KAAMH,EAAQssC,eAAgB/rC,OAalC,SAASgsC,EAAahsC,GAC3B,MAAO,CAAEJ,KAAMH,EAAQwsC,aAAcjsC,OAGhC,SAASqO,EAAYrO,GAC1B,MAAO,CAAEJ,KAAMH,EAAQysC,YAAalsC,OAe/B,SAASmsC,EAAgB7sC,EAAcU,GAC5C,OAAOV,EAAM8sC,cAAcpsC,GAGtB,SAASqsC,EAAqB/sC,EAAcU,GACjD,OAAOV,EAAMgtC,mBAAmBtsC,GAG3B,SAASusC,EAAUjtC,EAAcU,GACtC,OAAOiF,QAAQ3F,EAAMgP,QAAQtO,KAxF/B,SAAWP,GACT,4CACA,0CACA,gDACA,gDACA,4CACA,0CANF,CAAWA,MAAO,KA6EH,gBAAgB,CAAE2sC,cA9CjC,SAAuB9sC,EAAgC,GAAIQ,GACzD,OAAIA,EAAOF,OAASH,EAAQksC,YACnB,EAAP,GAAYrsC,EAAZ,CAAmB,CAACQ,EAAOE,KAAMF,EAAO8C,QAEtC9C,EAAOF,OAASH,EAAQgsC,aACnB,IAAKnsC,EAAOQ,EAAOE,KAErBV,GAuCuCgP,QAVhD,SAAiBhP,EAA0B,GAAIQ,GAC7C,OAAIA,EAAOF,OAASH,EAAQwsC,aACnB,EAAP,GAAY3sC,EAAZ,CAAmB,CAACQ,EAAOE,MAAM,IAE/BF,EAAOF,OAASH,EAAQysC,YACnB,EAAP,GAAY5sC,EAAZ,CAAmB,CAACQ,EAAOE,MAAM,IAE5BV,GAGgDgtC,mBA5BzD,SAA4BhtC,EAAqC,GAAIQ,GACnE,OAAIA,EAAOF,OAASH,EAAQosC,eACnB,EAAP,GAAYvsC,EAAZ,CAAmB,CAACQ,EAAOE,KAAMF,EAAOyhB,UAEtCzhB,EAAOF,OAASH,EAAQssC,eACnB,IAAKzsC,EAAOQ,EAAOE,KAErBV,M,6JCzDF,SAASktC,EAAiB9uB,GAC/B,MAAO,CAAE9d,KAAM,oBAAqB8d,aAa/B,SAASG,EAAave,GAC3B,OAAOA,EAGF,SAASmtC,EAAiBntC,EAAoBU,GACnD,OAAOV,EAAMU,GAbA,aAASV,EAAqB,GAAIQ,GAC/C,MAAoB,sBAAhBA,EAAOF,KACF,IAAME,EAAO4d,UAAW,OAG1Bpe,I,iCCdM,SAASotC,EAAkBvgB,GACxC,IAAIprB,EAUJ,OATkB,MAAdorB,EAAEwgB,UAAoBxgB,EAAEwgB,SAAW,IACrC5rC,EAAS,qBAEO,MAAdorB,EAAEwgB,UAAoBxgB,EAAEwgB,SAAW,GAAKxgB,EAAEnrB,aAAemrB,EAAEygB,oBAC7D7rC,EAAS,WAEQ,IAAforB,EAAEwgB,UAA0C,IAAxBxgB,EAAEygB,oBACxB7rC,EAAS,aAEJA,EA9BT,mC,iCCoBA,qJA8BO,SAAS8rC,EAAcC,GAC5B,MAAO,CACL5I,KAAM6I,EAAWD,EAAQ,MACzB7M,YAAa+M,EAAmBF,EAAQ,aACxCxM,gBAAiB0M,EAAmBF,EAAQ,iBAC5C5M,SAAU8M,EAAmBF,EAAQ,UACrCvM,aAAcyM,EAAmBF,EAAQ,cACzCzL,uBAAwB2L,EAAmBF,EAAQ,iBACnD7K,2BAA4B+K,EAAmBF,EAAQ,qBACvD3M,gBAAiB6M,EAAmBF,EAAQ,iBAC5CtM,oBAAqBwM,EAAmBF,EAAQ,qBAChD1M,SAAU4M,EAAmBF,EAAQ,UACrCrM,aAAcuM,EAAmBF,EAAQ,cACzCzM,aAAc2M,EAAmBF,EAAQ,cACzCpM,iBAAkBsM,EAAmBF,EAAQ,kBAC7C37B,KAAM67B,EAAmBF,EAAQ,MACjCnM,UAAWqM,EAAmBF,EAAQ,WACtCpvB,UAAWuvB,EAAiBH,EAAQ,WACpCtf,KAAMyf,EAAiBH,EAAQ,MAC/BjnC,WAgGoBjD,EAhGMkqC,EAAQ,UAiG7BlqC,QAAwCqF,GAhG7CqF,OAAQ4/B,EAAYJ,EAAQ,QAC5B16B,KAAM86B,EAAYJ,EAAQ,MAC1BzzB,KAAM8zB,EAAQL,EAAQ,MACtB9I,cAAeoJ,EAAiBN,EAAQ,gBA4F5C,IAAwBlqC,EAxFjB,SAASyqC,EAAgBxvC,EAAcmc,GAC5C,MAAMhZ,EAAuB,GAyC7B,OAvCIgZ,GACFhZ,EAAW0C,KAAK,cAGG,MAAjB7F,EAAK,MACPmD,EAAW0C,KAAK4pC,EAAoB,QAAU,MAAQzvC,EAAK,MAG7D,CAAC,WAAY,gBAAgBmN,QAAQ+qB,GACnCwX,EAAkB1vC,EAAOk4B,EAAU/0B,EAAYwsC,IAGjD,CAAC,eAAgB,oBAAoBxiC,QAAQ+qB,GAC3CwX,EAAkB1vC,EAAOk4B,EAAU/0B,EAAYysC,IAGjD,CAAC,OAAQ,aAAaziC,QAAQ+qB,GAC5BwX,EAAkB1vC,EAAOk4B,EAAU/0B,EAAY0sC,IAGjD,CACE,cACA,WACA,yBACA,kBACA,kBACA,eACA,6BACA,uBACA1iC,QAAQ+qB,GAAYwX,EAAkB1vC,EAAOk4B,EAAU/0B,EAAY2sC,IAErE,CAAC,YAAa,OAAQ,aAAa3iC,QAAQ+qB,GACzCwX,EAAkB1vC,EAAOk4B,EAAU/0B,EAAY4sC,IAG1B,MAAnB/vC,EAAK,QACPmD,EAAW0C,KAAX,UAAmB4pC,EAAoB,UAAvC,eAAuDzvC,EAAK,OAA5D,MAGKmD,EAAW/B,KAAK,SAGzB,MAAM4uC,EAAsB,CAAC,OAAQ,OAAQ,iBAEtC,SAASC,EAAgBjwC,GAC9B,OAAOqC,OAAOC,KAAKtC,GAChByC,OAAON,IAAQ6tC,EAAoBjtC,SAASZ,IAC5CqX,KAAKrX,QAAsBiI,IAAfpK,EAAMmC,IAGhB,SAAS+tC,EAAuBlwC,GACrC,OAAOqC,OAAOC,KAAKtC,GAChByC,OAAON,GAAO6tC,EAAoBjtC,SAASZ,IAC3CqX,KAAKrX,QAAsBiI,IAAfpK,EAAMmC,IAGvB,SAASgtC,EAAmBpqC,GAC1B,GAAc,KAAVA,GAAyB,MAATA,GAAiB0pB,MAAM1pB,GACzC,OAEF,MAAMorC,EAAMh4B,OAAOpT,GACnB,OAAOorC,EAAM,GAAKA,EAAM,EAAIA,OAAM/lC,EAGpC,SAAS8kC,EAAWnqC,GAClB,GAAc,UAAVA,GAA+B,SAAVA,GAA8B,OAAVA,EAC3C,OAAOA,EAKX,SAASsqC,EAAYtqC,GACnB,GAAqB,iBAAVA,GAAuBA,EAGlC,OAAOA,EAGT,SAASqqC,EAAiBrqC,GACxB,GAAqB,iBAAVA,GAAuBA,EAGlC,OAAOA,EAAMiW,MAAM,KAOrB,SAASs0B,EAAQvqC,GACf,MAAwB,iBAAVA,GAAgC,YAAVA,OAAsBqF,EAAYrF,EAGxE,SAASwqC,EAAiBxqC,GACxB,OAAO,IAAehC,SAASgC,GAASA,OAAQqF,EAGlD,SAAS0lC,EAAoBtrC,EAAgBqqB,GAC3C,OAAIA,EAAS,GAAKA,EAAS,EACnB,GAAN,OAAUrqB,EAAV,eAAuBqqB,GAEjB,GAAN,OAAUrqB,EAAV,cAAsBqqB,GAI1B,SAAS8gB,EAAgBnrC,EAAgB+9B,GACvC,OAAQA,GACN,KAAK,EACH,OAAO/9B,EAAS,SAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,YAClB,QACE,MAAO,IAIb,SAASorC,EAAoBprC,EAAgBg+B,GAC3C,OAAQA,GACN,KAAK,EACH,OAAOh+B,EAAS,OAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,QAClB,KAAK,EACH,OAAOA,EAAS,SAClB,KAAK,EACH,OAAOA,EAAS,SAClB,KAAK,EACH,OAAOA,EAAS,YAClB,QACE,MAAO,IAIb,SAASqrC,EAAYrrC,EAAgB8O,GACnC,OAAQA,GACN,KAAK,EACH,OAAO9O,EAAS,UAClB,KAAK,EACH,OAAOA,EAAS,WAClB,KAAK,EACH,OAAOA,EAAS,YAClB,KAAK,EACH,OAAOA,EAAS,aAClB,KAAK,EACH,OAAOA,EAAS,aAClB,QACE,MAAO,IAIb,SAASirC,EAAoBvX,GAuB3B,OAAOA,GAtBqB,CAC1BiK,cAAe,eACfC,YAAa,qBACbK,gBAAiB,yBACjBJ,SAAU,kBACVK,aAAc,sBACdc,uBAAwB,yBACxBY,2BAA4B,6BAC5B9B,gBAAiB,eACjBK,oBAAqB,6BACrBJ,SAAU,WACVK,aAAc,eACdJ,aAAc,2BACdK,iBAAkB,+BAClBvvB,KAAM,QACNwvB,UAAW,YACXuD,KAAM,eACNxmB,UAAW,YACX8P,KAAM,OACNlgB,OAAQ,QACRzH,UAAW,aAEUkwB,GAGzB,SAASwX,EACP1vC,EACAk4B,EACAkY,EACAC,GAEA,MAAM7rC,EAASirC,EAAoBvX,GACZ,MAAnBl4B,EAAMk4B,IAAqB1zB,GAC7B4rC,EAAgBvqC,KAAKwqC,EAAgB7rC,EAAQxE,EAAMk4B,KAIvD,SAAS6X,EAAmBvrC,EAAgB0C,GAC1C,OAAKopC,MAAMC,QAAQrpC,IAAUA,EAAMhG,OAAS,EACnCsD,EAAS,MAAQ0C,EAEpB,GAAN,OAAU1C,EAAV,gBAAwB0C,EAAM9F,KAAK,MAAnC,O,iCC1RF,kDAwBA,MAIMvB,EAAqB,CAAE6zB,mBAAA,KAEd,sBANUjyB,IAAD,CACtB+uC,SAAU,4BAAkB/uC,KAKU5B,EAAzB,CAA6C,M,iCC9B5D,6CAuBO,MAAMmY,EAAoB,wBAAsC,S,iCCvBvE,sEA4Be,SAAS7B,GAAqB,aAAEnV,IAC7C,MAAM,QAAE4oC,EAAU,IAAO5oC,EACzB,OACE,0BACE,gBAAC,IAAgB,CAAC6L,UAAU,sBAAsB7L,aAAcA,GAC9D,2BACE,gBAAC,IAAkB,CAACA,aAAcA,EAAc0pC,OAAO,IACvD,wBAAM79B,UAAU,eAAe7L,EAAawJ,OAE7Co/B,EAAQC,OAAS,wBAAMh9B,UAAU,qBAAqB,oBAAU","file":"js/app-493df0b3.m.f7115952.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { searchIssues } from '../../../api/issues';\nimport { getOrganizations } from '../../../api/organizations';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { withRouter } from '../../../components/hoc/withRouter';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { receiveOrganizations } from '../../../store/organizations';\nimport { fetchBranchStatus } from '../../../store/rootActions';\nimport {\n  areThereCustomOrganizations,\n  getCurrentUser,\n  getMyOrganizations,\n  Store\n} from '../../../store/rootReducer';\n\nconst IssuesAppContainer = lazyLoadComponent(() => import('./App'), 'IssuesAppContainer');\n\ninterface StateProps {\n  currentUser: T.CurrentUser;\n  userOrganizations: T.Organization[];\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  currentUser: getCurrentUser(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nconst fetchIssueOrganizations = (organizationKeys: string[]) => (dispatch: Dispatch) => {\n  if (!organizationKeys.length) {\n    return Promise.resolve();\n  }\n\n  return getOrganizations({ organizations: organizationKeys.join() }).then(\n    response => dispatch(receiveOrganizations(response.organizations)),\n    throwGlobalError\n  );\n};\n\nconst fetchIssues = (query: T.RawQuery, requestOrganizations = true) => (\n  // use `Function` to be able to do `dispatch(...).then(...)`\n  dispatch: Function,\n  getState: () => Store\n) => {\n  const organizationsEnabled = areThereCustomOrganizations(getState());\n  return searchIssues({ ...query, additionalFields: '_all' })\n    .then(response => {\n      const parsedIssues = response.issues.map(issue =>\n        parseIssueFromResponse(issue, response.components, response.users, response.rules)\n      );\n      return { ...response, issues: parsedIssues };\n    })\n    .then(response => {\n      const organizationKeys = uniq([\n        ...response.issues.map(issue => issue.organization),\n        ...(response.components || []).map(component => component.organization)\n      ]);\n      return organizationsEnabled && requestOrganizations\n        ? dispatch(fetchIssueOrganizations(organizationKeys)).then(() => response)\n        : response;\n    })\n    .catch(throwGlobalError);\n};\n\n// have to type cast this, because of async action\nconst mapDispatchToProps = {\n  fetchBranchStatus: fetchBranchStatus as any,\n  fetchIssues: fetchIssues as any\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(IssuesAppContainer));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy, sortBy, uniqBy } from 'lodash';\nimport { ActionType } from '../../../store/utils/actions';\nimport { DEFAULT_CATEGORY, getCategoryName } from '../utils';\n\nconst enum Actions {\n  ReceiveDefinitions = 'RECEIVE_DEFINITIONS'\n}\n\ntype Action = ActionType<typeof receiveDefinitions, Actions.ReceiveDefinitions>;\n\nexport type State = T.Dict<T.SettingCategoryDefinition>;\n\nexport function receiveDefinitions(definitions: T.SettingCategoryDefinition[]) {\n  return { type: Actions.ReceiveDefinitions, definitions };\n}\n\nexport default function components(state: State = {}, action: Action) {\n  if (action.type === Actions.ReceiveDefinitions) {\n    return keyBy(action.definitions, 'key');\n  }\n  return state;\n}\n\nexport function getDefinition(state: State, key: string) {\n  return state[key];\n}\n\nexport function getAllDefinitions(state: State) {\n  return Object.keys(state).map(key => state[key]);\n}\n\nexport function getDefinitionsForCategory(state: State, category: string) {\n  return getAllDefinitions(state).filter(\n    definition => definition.category.toLowerCase() === category.toLowerCase()\n  );\n}\n\nexport function getAllCategories(state: State) {\n  return uniqBy(\n    getAllDefinitions(state).map(definition => definition.category),\n    category => category.toLowerCase()\n  );\n}\n\nexport function getDefaultCategory(state: State) {\n  const categories = getAllCategories(state);\n  if (categories.includes(DEFAULT_CATEGORY)) {\n    return DEFAULT_CATEGORY;\n  } else {\n    const sortedCategories = sortBy(categories, category =>\n      getCategoryName(category).toLowerCase()\n    );\n    return sortedCategories[0];\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBranchLikeKey } from '../helpers/branch-like';\nimport { BranchLike } from '../types/branch-like';\nimport { QualityGateStatusCondition } from '../types/quality-gates';\nimport { ActionType } from './utils/actions';\n\nexport interface BranchStatusData {\n  conditions?: QualityGateStatusCondition[];\n  ignoredConditions?: boolean;\n  status?: T.Status;\n}\n\nexport interface State {\n  byComponent: T.Dict<T.Dict<BranchStatusData>>;\n}\n\nconst enum Actions {\n  RegisterBranchStatus = 'REGISTER_BRANCH_STATUS'\n}\n\ntype Action = ActionType<typeof registerBranchStatusAction, Actions.RegisterBranchStatus>;\n\nexport function registerBranchStatusAction(\n  branchLike: BranchLike,\n  component: string,\n  status: T.Status,\n  conditions?: QualityGateStatusCondition[],\n  ignoredConditions?: boolean\n) {\n  return {\n    type: Actions.RegisterBranchStatus,\n    branchLike,\n    component,\n    conditions,\n    ignoredConditions,\n    status\n  };\n}\n\nexport default function(state: State = { byComponent: {} }, action: Action): State {\n  if (action.type === Actions.RegisterBranchStatus) {\n    const { component, conditions, branchLike, ignoredConditions, status } = action;\n    const branchLikeKey = getBranchLikeKey(branchLike);\n    return {\n      byComponent: {\n        ...state.byComponent,\n        [component]: {\n          ...(state.byComponent[component] || {}),\n          [branchLikeKey]: {\n            conditions,\n            ignoredConditions,\n            status\n          }\n        }\n      }\n    };\n  }\n\n  return state;\n}\n\nexport function getBranchStatusByBranchLike(\n  state: State,\n  component: string,\n  branchLike: BranchLike\n): BranchStatusData {\n  const branchLikeKey = getBranchLikeKey(branchLike);\n  return state.byComponent[component] && state.byComponent[component][branchLikeKey];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from './utils/actions';\n\nexport function receiveMetrics(metrics: T.Metric[]) {\n  return { type: 'RECEIVE_METRICS', metrics };\n}\n\ntype Action = ActionType<typeof receiveMetrics, 'RECEIVE_METRICS'>;\n\nexport type State = { byKey: T.Dict<T.Metric>; keys: string[] };\n\nconst byKey = (state: State['byKey'] = {}, action: Action) => {\n  if (action.type === 'RECEIVE_METRICS') {\n    return keyBy(action.metrics, 'key');\n  }\n  return state;\n};\n\nconst keys = (state: State['keys'] = [], action: Action) => {\n  if (action.type === 'RECEIVE_METRICS') {\n    return action.metrics.map(f => f.key);\n  }\n\n  return state;\n};\n\nexport default combineReducers({ byKey, keys });\n\nexport function getMetrics(state: State) {\n  return state.byKey;\n}\n\nexport function getMetricsKey(state: State) {\n  return state.keys;\n}\n\nexport function getMetricByKey(state: State, key: string) {\n  return state.byKey[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  QualityGateApplicationStatusChildProject,\n  QualityGateProjectStatus,\n  QualityGateStatusCondition\n} from '../types/quality-gates';\n\nexport function extractStatusConditionsFromProjectStatus(\n  projectStatus: QualityGateProjectStatus\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.actualValue,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metricKey,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n\nexport function extractStatusConditionsFromApplicationStatusChildProject(\n  projectStatus: QualityGateApplicationStatusChildProject\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.value,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metric,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { SystemUpgradeDownloadUrls } from './system';\n\nexport enum EditionKey {\n  community = 'community',\n  developer = 'developer',\n  enterprise = 'enterprise',\n  datacenter = 'datacenter'\n}\n\nexport interface Edition {\n  downloadProperty: keyof SystemUpgradeDownloadUrls;\n  homeUrl: string;\n  key: EditionKey;\n  name: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getCorsJSON } from 'sonar-ui-common/helpers/request';\n\ninterface PrismicRef {\n  id: string;\n  ref: string;\n}\n\nexport interface PrismicNews {\n  data: { title: string };\n  last_publication_date: string;\n  uid: string;\n}\n\ninterface PrismicResponse {\n  page: number;\n  results: PrismicResult[];\n  results_per_page: number;\n  total_results_size: number;\n}\n\ninterface PrismicResult {\n  data: {\n    notification: string;\n    publication_date: string;\n    body: PrismicResultFeature[];\n  };\n}\n\ninterface PrismicResultFeature {\n  items: Array<{\n    category: {\n      data: {\n        color: string;\n        name: string;\n      };\n    };\n  }>;\n  primary: {\n    description: string;\n    read_more_link: {\n      url?: string;\n    };\n  };\n}\n\nexport interface PrismicFeatureNews {\n  notification: string;\n  publicationDate: string;\n  features: Array<{\n    categories: Array<{\n      color: string;\n      name: string;\n    }>;\n    description: string;\n    readMore?: string;\n  }>;\n}\n\nconst PRISMIC_API_URL = 'https://sonarsource.cdn.prismic.io/api/v2';\n\nexport function fetchPrismicRefs() {\n  return getCorsJSON(PRISMIC_API_URL).then((response: { refs: PrismicRef[] }) => {\n    const master = response && response.refs.find(ref => ref.id === 'master');\n    if (!master) {\n      return Promise.reject('No master ref found');\n    }\n    return master;\n  });\n}\n\nexport function fetchPrismicNews(data: {\n  accessToken: string;\n  ps?: number;\n  ref: string;\n  tag?: string;\n}) {\n  const q = ['[[at(document.type, \"blog_sonarsource_post\")]]'];\n  if (data.tag) {\n    q.push(`[[at(document.tags,[\"${data.tag}\"])]]`);\n  }\n  return getCorsJSON(PRISMIC_API_URL + '/documents/search', {\n    access_token: data.accessToken,\n    orderings: '[document.first_publication_date desc]',\n    pageSize: data.ps || 1,\n    q,\n    ref: data.ref\n  }).then(({ results }: { results: PrismicNews[] }) => results);\n}\n\nexport function fetchPrismicFeatureNews(data: {\n  accessToken: string;\n  p?: number;\n  ps?: number;\n  ref: string;\n}): Promise<{ news: PrismicFeatureNews[]; paging: T.Paging }> {\n  return getCorsJSON(PRISMIC_API_URL + '/documents/search', {\n    access_token: data.accessToken,\n    fetchLinks: 'sc_category.color,sc_category.name',\n    orderings: '[my.sc_product_news.publication_date desc]',\n    page: data.p || 1,\n    pageSize: data.ps || 1,\n    q: ['[[at(document.type, \"sc_product_news\")]]'],\n    ref: data.ref\n  }).then(({ page, results, results_per_page, total_results_size }: PrismicResponse) => ({\n    news: results.map(result => ({\n      notification: result.data.notification,\n      publicationDate: result.data.publication_date,\n      features: result.data.body.map(feature => ({\n        categories: feature.items.map(item => item.category.data).filter(Boolean),\n        description: feature.primary.description,\n        readMore: feature.primary.read_more_link.url\n      }))\n    })),\n    paging: {\n      pageIndex: page,\n      pageSize: results_per_page,\n      total: total_results_size\n    }\n  }));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\n\nconst ORDER = ['DEV', 'VW', 'SVW', 'APP', 'TRK', 'BRC', 'FIL', 'UTS'];\n\nexport function sortQualifiers(qualifiers: string[]) {\n  return sortBy(qualifiers, qualifier => ORDER.indexOf(qualifier));\n}\n\nexport interface ComponentResult {\n  isFavorite?: boolean;\n  isRecentlyBrowsed?: boolean;\n  key: string;\n  match?: string;\n  name: string;\n  organization?: string;\n  project?: string;\n  qualifier: string;\n}\n\nexport interface Results {\n  [qualifier: string]: ComponentResult[];\n}\n\nexport interface More {\n  [qualifier: string]: number;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface License {\n  contactEmail: string;\n  edition: string;\n  expiresAt: string;\n  isExpired: boolean;\n  isOfficialDistribution: boolean;\n  isSupported: boolean;\n  isValidEdition: boolean;\n  isValidServerId: boolean;\n  loc: number;\n  maxLoc: number;\n  plugins: string[];\n  remainingLocThreshold: number;\n  serverId: string;\n  type: string;\n}\n\nexport function isValidLicense(): Promise<{ isValidLicense: boolean }> {\n  return getJSON('/api/editions/is_valid_license');\n}\n\nexport function showLicense(): Promise<License> {\n  return getJSON('/api/editions/show_license').catch((response: Response) => {\n    if (response && response.status === 404) {\n      return undefined;\n    }\n    return throwGlobalError(response);\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\n\nexport default class WorkspacePortal extends React.PureComponent {\n  el: HTMLElement;\n\n  constructor(props: {}) {\n    super(props);\n    this.el = document.createElement('div');\n    this.el.classList.add('workspace');\n  }\n\n  componentDidMount() {\n    document.body.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.el);\n  }\n\n  render() {\n    return createPortal(this.props.children, this.el);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { ComponentDescriptor, RuleDescriptor, WorkspaceContext } from './context';\nimport './styles.css';\nimport WorkspacePortal from './WorkspacePortal';\n\nconst WORKSPACE = 'sonarqube-workspace';\nconst WorkspaceNav = lazyLoadComponent(() => import('./WorkspaceNav'), 'WorkspaceNav');\nconst WorkspaceRuleViewer = lazyLoadComponent(\n  () => import('./WorkspaceRuleViewer'),\n  'WorkspaceRuleViewer'\n);\nconst WorkspaceComponentViewer = lazyLoadComponent(\n  () => import('./WorkspaceComponentViewer'),\n  'WorkspaceComponentViewer'\n);\n\ninterface State {\n  components: ComponentDescriptor[];\n  height: number;\n  maximized?: boolean;\n  open: { component?: string; rule?: string };\n  rules: RuleDescriptor[];\n}\n\nconst MIN_HEIGHT = 0.05;\nconst MAX_HEIGHT = 0.85;\nconst INITIAL_HEIGHT = 300;\n\nconst TYPE_KEY = '__type__';\n\nexport default class Workspace extends React.PureComponent<{}, State> {\n  mounted = false;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = { height: INITIAL_HEIGHT, open: {}, ...this.loadWorkspace() };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_: {}, prevState: State) {\n    if (prevState.components !== this.state.components || prevState.rules !== this.state.rules) {\n      this.saveWorkspace();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadWorkspace = () => {\n    try {\n      const data: any[] = JSON.parse(get(WORKSPACE) || '');\n      const components: ComponentDescriptor[] = data.filter(x => x[TYPE_KEY] === 'component');\n      const rules: RuleDescriptor[] = data.filter(x => x[TYPE_KEY] === 'rule');\n      return { components, rules };\n    } catch {\n      // fail silently\n      return { components: [], rules: [] };\n    }\n  };\n\n  saveWorkspace = () => {\n    const data = [\n      // do not save line number, next time the file is open, it should be open on the first line\n      ...this.state.components.map(x => omit({ ...x, [TYPE_KEY]: 'component' }, 'line')),\n      ...this.state.rules.map(x => ({ ...x, [TYPE_KEY]: 'rule' }))\n    ];\n    save(WORKSPACE, JSON.stringify(data));\n  };\n\n  openComponent = (component: ComponentDescriptor) => {\n    this.setState((state: State) => ({\n      components: uniqBy([...state.components, component], component => component.key),\n      open: { component: component.key }\n    }));\n  };\n\n  reopenComponent = (componentKey: string) => {\n    this.setState({ open: { component: componentKey } });\n  };\n\n  openRule = (rule: RuleDescriptor) => {\n    this.setState((state: State) => ({\n      open: { rule: rule.key },\n      rules: uniqBy([...state.rules, rule], rule => rule.key)\n    }));\n  };\n\n  reopenRule = (ruleKey: string) => {\n    this.setState({ open: { rule: ruleKey } });\n  };\n\n  closeComponent = (componentKey: string) => {\n    this.setState((state: State) => ({\n      components: state.components.filter(x => x.key !== componentKey),\n      open: {\n        ...state.open,\n        component: state.open.component === componentKey ? undefined : state.open.component\n      }\n    }));\n  };\n\n  closeRule = (ruleKey: string) => {\n    this.setState((state: State) => ({\n      rules: state.rules.filter(x => x.key !== ruleKey),\n      open: {\n        ...state.open,\n        rule: state.open.rule === ruleKey ? undefined : state.open.rule\n      }\n    }));\n  };\n\n  handleComponentLoad = (details: { key: string; name: string; qualifier: string }) => {\n    if (this.mounted) {\n      const { key, name, qualifier } = details;\n      this.setState((state: State) => ({\n        components: state.components.map(component =>\n          component.key === key ? { ...component, name, qualifier } : component\n        )\n      }));\n    }\n  };\n\n  handleRuleLoad = (details: { key: string; name: string }) => {\n    if (this.mounted) {\n      const { key, name } = details;\n      this.setState((state: State) => ({\n        rules: state.rules.map(rule => (rule.key === key ? { ...rule, name } : rule))\n      }));\n    }\n  };\n\n  collapse = () => {\n    this.setState({ open: {} });\n  };\n\n  maximize = () => {\n    this.setState({ maximized: true });\n  };\n\n  minimize = () => {\n    this.setState({ maximized: false });\n  };\n\n  resize = (deltaY: number) => {\n    const minHeight = window.innerHeight * MIN_HEIGHT;\n    const maxHeight = window.innerHeight * MAX_HEIGHT;\n    this.setState((state: State) => ({\n      height: Math.min(maxHeight, Math.max(minHeight, state.height - deltaY))\n    }));\n  };\n\n  render() {\n    const { components, open, rules } = this.state;\n\n    const openComponent = open.component && components.find(x => x.key === open.component);\n    const openRule = open.rule && rules.find(x => x.key === open.rule);\n\n    const height = this.state.maximized ? window.innerHeight * MAX_HEIGHT : this.state.height;\n\n    return (\n      <WorkspaceContext.Provider\n        value={{ openComponent: this.openComponent, openRule: this.openRule }}>\n        {this.props.children}\n        <WorkspacePortal>\n          {(components.length > 0 || rules.length > 0) && (\n            <WorkspaceNav\n              components={components}\n              onComponentClose={this.closeComponent}\n              onComponentOpen={this.reopenComponent}\n              onRuleClose={this.closeRule}\n              onRuleOpen={this.reopenRule}\n              open={this.state.open}\n              rules={rules}\n            />\n          )}\n          {openComponent && (\n            <WorkspaceComponentViewer\n              component={openComponent}\n              height={height}\n              maximized={this.state.maximized}\n              onClose={this.closeComponent}\n              onCollapse={this.collapse}\n              onLoad={this.handleComponentLoad}\n              onMaximize={this.maximize}\n              onMinimize={this.minimize}\n              onResize={this.resize}\n            />\n          )}\n          {openRule && (\n            <WorkspaceRuleViewer\n              height={height}\n              maximized={this.state.maximized}\n              onClose={this.closeRule}\n              onCollapse={this.collapse}\n              onLoad={this.handleRuleLoad}\n              onMaximize={this.maximize}\n              onMinimize={this.minimize}\n              onResize={this.resize}\n              rule={openRule}\n            />\n          )}\n        </WorkspacePortal>\n      </WorkspaceContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\n\ninterface State {\n  links: T.A11ySkipLink[];\n}\n\nexport default class A11yProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { links: [] };\n\n  addA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = [...prevState.links];\n      links.push({ ...link, weight: link.weight || 0 });\n      return { links };\n    });\n  };\n\n  removeA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = prevState.links.filter(l => l.key !== link.key);\n      return { links };\n    });\n  };\n\n  render() {\n    const links = sortBy(this.state.links, 'weight');\n    return (\n      <A11yContext.Provider\n        value={{\n          addA11ySkipLink: this.addA11ySkipLink,\n          links,\n          removeA11ySkipLink: this.removeA11ySkipLink\n        }}>\n        {this.props.children}\n      </A11yContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\nimport './A11ySkipLinks.css';\n\nexport default function A11ySkipLinks() {\n  return (\n    <A11yContext.Consumer>\n      {({ links }) =>\n        links.map(link => (\n          <a className=\"a11y-skip-link\" href={`#a11y_target__${link.key}`} key={link.key}>\n            {link.label}\n          </a>\n        ))\n      }\n    </A11yContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport suggestionsJson from 'Docs/EmbedDocsSuggestions.json';\nimport * as React from 'react';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ntype SuggestionsJson = T.Dict<T.SuggestionLink[]>;\n\ninterface State {\n  suggestions: T.SuggestionLink[];\n}\n\nexport default class SuggestionsProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { suggestions: [] };\n\n  fetchSuggestions = () => {\n    const jsonList = suggestionsJson as SuggestionsJson;\n    let suggestions: T.SuggestionLink[] = [];\n    this.keys.forEach(key => {\n      if (jsonList[key]) {\n        suggestions = [...jsonList[key], ...suggestions];\n      }\n    });\n    if (!isSonarCloud()) {\n      suggestions = suggestions.filter(suggestion => suggestion.scope !== 'sonarcloud');\n    }\n    this.setState({ suggestions });\n  };\n\n  addSuggestions = (newKey: string) => {\n    this.keys = [...this.keys, newKey];\n    this.fetchSuggestions();\n  };\n\n  removeSuggestions = (oldKey: string) => {\n    this.keys = this.keys.filter(key => key !== oldKey);\n    this.fetchSuggestions();\n  };\n\n  render() {\n    return (\n      <SuggestionsContext.Provider\n        value={{\n          addSuggestions: this.addSuggestions,\n          removeSuggestions: this.removeSuggestions,\n          suggestions: this.state.suggestions\n        }}>\n        {this.props.children}\n      </SuggestionsContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport HelpIcon from 'sonar-ui-common/components/icons/HelpIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nconst EmbedDocsPopup = lazyLoadComponent(() => import('./EmbedDocsPopup'));\n\ninterface State {\n  helpOpen: boolean;\n}\n\nexport default class EmbedDocsPopupHelper extends React.PureComponent<{}, State> {\n  mounted = false;\n  state: State = { helpOpen: false };\n\n  componentDidMount() {\n    window.addEventListener('keypress', this.onKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keypress', this.onKeyPress);\n  }\n\n  onKeyPress = (event: KeyboardEvent) => {\n    const { tagName } = event.target as HTMLElement;\n    const code = event.keyCode || event.which;\n    const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n    const isTriggerKey = code === 63;\n    if (!isInput && isTriggerKey) {\n      this.toggleHelp();\n    }\n  };\n\n  setHelpDisplay = (helpOpen: boolean) => {\n    this.setState({ helpOpen });\n  };\n\n  handleClick = () => {\n    this.toggleHelp();\n  };\n\n  toggleHelp = () => {\n    this.setState(state => {\n      return { helpOpen: !state.helpOpen };\n    });\n  };\n\n  closeHelp = () => {\n    this.setState({ helpOpen: false });\n  };\n\n  render() {\n    return (\n      <li className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.closeHelp}\n          open={this.state.helpOpen}\n          overlay={<EmbedDocsPopup onClose={this.closeHelp} />}>\n          <ButtonLink\n            aria-expanded={this.state.helpOpen}\n            aria-haspopup={true}\n            className=\"navbar-help navbar-icon\"\n            onClick={this.handleClick}\n            title={translate('help')}>\n            <HelpIcon />\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { debounce, keyBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport ClockIcon from 'sonar-ui-common/components/icons/ClockIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSuggestions } from '../../../api/components';\nimport { getCodeUrl, getProjectUrl } from '../../../helpers/urls';\nimport RecentHistory from '../RecentHistory';\nimport './Search.css';\nimport { ComponentResult, More, Results, sortQualifiers } from './utils';\n\nconst SearchResults = lazyLoadComponent(() => import('./SearchResults'));\nconst SearchResult = lazyLoadComponent(() => import('./SearchResult'));\n\ninterface OwnProps {\n  appState: Pick<T.AppState, 'organizationsEnabled'>;\n  currentUser: T.CurrentUser;\n}\n\ntype Props = OwnProps & WithRouterProps;\n\ninterface State {\n  loading: boolean;\n  loadingMore?: string;\n  more: More;\n  open: boolean;\n  organizations: T.Dict<{ name: string }>;\n  projects: T.Dict<{ name: string }>;\n  query: string;\n  results: Results;\n  selected?: string;\n  shortQuery: boolean;\n}\n\nexport class Search extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n  node?: HTMLElement | null;\n  nodes: T.Dict<HTMLElement>;\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.nodes = {};\n    this.search = debounce(this.search, 250);\n    this.state = {\n      loading: false,\n      more: {},\n      open: false,\n      organizations: {},\n      projects: {},\n      query: '',\n      results: {},\n      shortQuery: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    key('s', () => {\n      this.focusInput();\n      this.openSearch();\n      return false;\n    });\n  }\n\n  componentWillUpdate() {\n    this.nodes = {};\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.selected !== this.state.selected) {\n      this.scrollToSelected();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    key.unbind('s');\n  }\n\n  focusInput = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n  };\n\n  handleClickOutside = () => {\n    this.closeSearch(false);\n  };\n\n  handleFocus = () => {\n    if (!this.state.open) {\n      // simulate click to close any other dropdowns\n      const body = document.documentElement;\n      if (body) {\n        body.click();\n      }\n    }\n    this.openSearch();\n  };\n\n  openSearch = () => {\n    if (!this.state.open && !this.state.query) {\n      this.search('');\n    }\n    this.setState({ open: true });\n  };\n\n  closeSearch = (clear = true) => {\n    if (this.input) {\n      this.input.blur();\n    }\n    if (clear) {\n      this.setState({\n        more: {},\n        open: false,\n        organizations: {},\n        projects: {},\n        query: '',\n        results: {},\n        selected: undefined,\n        shortQuery: false\n      });\n    } else {\n      this.setState({ open: false });\n    }\n  };\n\n  getPlainComponentsList = (results: Results, more: More) =>\n    sortQualifiers(Object.keys(results)).reduce((components, qualifier) => {\n      const next = [...components, ...results[qualifier].map(component => component.key)];\n      if (more[qualifier]) {\n        next.push('qualifier###' + qualifier);\n      }\n      return next;\n    }, []);\n\n  findFile = (key: string) => {\n    const findInResults = (results: ComponentResult[] | undefined) =>\n      results && results.find(r => r.key === key);\n\n    const file = findInResults(this.state.results['FIL']);\n    if (file) {\n      return file;\n    }\n\n    const test = findInResults(this.state.results['UTS']);\n    if (test) {\n      return test;\n    }\n\n    return undefined;\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length === 0 || query.length >= 2) {\n      this.setState({ loading: true });\n      const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n      getSuggestions(query, recentlyBrowsed).then(response => {\n        // compare `this.state.query` and `query` to handle two request done almost at the same time\n        // in this case only the request that matches the current query should be taken\n        if (this.mounted && this.state.query === query) {\n          const results: Results = {};\n          const more: More = {};\n          response.results.forEach(group => {\n            results[group.q] = group.items.map(item => ({ ...item, qualifier: group.q }));\n            more[group.q] = group.more;\n          });\n          const list = this.getPlainComponentsList(results, more);\n          this.setState(state => ({\n            loading: false,\n            more,\n            organizations: { ...state.organizations, ...keyBy(response.organizations, 'key') },\n            projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n            results,\n            selected: list.length > 0 ? list[0] : undefined,\n            shortQuery: query.length > 2 && response.warning === 'short_input'\n          }));\n        }\n      }, this.stopLoading);\n    } else {\n      this.setState({ loading: false });\n    }\n  };\n\n  searchMore = (qualifier: string) => {\n    const { query } = this.state;\n    if (query.length === 1) {\n      return;\n    }\n\n    this.setState({ loading: true, loadingMore: qualifier });\n    const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n    getSuggestions(query, recentlyBrowsed, qualifier).then(response => {\n      if (this.mounted) {\n        const group = response.results.find(group => group.q === qualifier);\n        const moreResults = (group ? group.items : []).map(item => ({ ...item, qualifier }));\n        this.setState(state => ({\n          loading: false,\n          loadingMore: undefined,\n          more: { ...state.more, [qualifier]: 0 },\n          organizations: { ...state.organizations, ...keyBy(response.organizations, 'key') },\n          projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n          results: {\n            ...state.results,\n            [qualifier]: uniqBy([...state.results[qualifier], ...moreResults], 'key')\n          },\n          selected: moreResults.length > 0 ? moreResults[0].key : state.selected\n        }));\n        this.focusInput();\n      }\n    }, this.stopLoading);\n  };\n\n  handleQueryChange = (query: string) => {\n    this.setState({ query, shortQuery: query.length === 1 });\n    this.search(query);\n  };\n\n  selectPrevious = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index > 0 ? { selected: list[index - 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  selectNext = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index >= 0 && index < list.length - 1 ? { selected: list[index + 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  openSelected = () => {\n    const { selected } = this.state;\n\n    if (selected) {\n      if (selected.startsWith('qualifier###')) {\n        this.searchMore(selected.substr(12));\n      } else {\n        const file = this.findFile(selected);\n        if (file) {\n          this.props.router.push(getCodeUrl(file.project!, undefined, file.key));\n        } else {\n          this.props.router.push(getProjectUrl(selected));\n        }\n        this.closeSearch();\n      }\n    }\n  };\n\n  scrollToSelected = () => {\n    if (this.state.selected) {\n      const node = this.nodes[this.state.selected];\n      if (node && this.node) {\n        scrollToElement(node, { topOffset: 30, bottomOffset: 30, parent: this.node });\n      }\n    }\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case 13:\n        event.preventDefault();\n        this.openSelected();\n        return;\n      case 38:\n        event.preventDefault();\n        this.selectPrevious();\n        return;\n      case 40:\n        event.preventDefault();\n        this.selectNext();\n        // keep this return to prevent fall-through in case more cases will be adder later\n        // eslint-disable-next-line no-useless-return\n        return;\n    }\n  };\n\n  handleSelect = (selected: string) => {\n    this.setState({ selected });\n  };\n\n  innerRef = (component: string, node: HTMLElement | null) => {\n    if (node) {\n      this.nodes[component] = node;\n    }\n  };\n\n  searchInputRef = (node: HTMLInputElement | null) => {\n    this.input = node;\n  };\n\n  renderResult = (component: ComponentResult) => (\n    <SearchResult\n      appState={this.props.appState}\n      component={component}\n      innerRef={this.innerRef}\n      key={component.key}\n      onClose={this.closeSearch}\n      onSelect={this.handleSelect}\n      organizations={this.state.organizations}\n      projects={this.state.projects}\n      selected={this.state.selected === component.key}\n    />\n  );\n\n  renderNoResults = () => (\n    <div className=\"navbar-search-no-results\">\n      {translateWithParameters('no_results_for_x', this.state.query)}\n    </div>\n  );\n\n  render() {\n    const search = (\n      <li className=\"navbar-search dropdown\">\n        <DeferredSpinner className=\"navbar-search-icon\" loading={this.state.loading} />\n\n        <SearchBox\n          autoFocus={this.state.open}\n          innerRef={this.searchInputRef}\n          minLength={2}\n          onChange={this.handleQueryChange}\n          onFocus={this.handleFocus}\n          onKeyDown={this.handleKeyDown}\n          placeholder={translate('search.placeholder')}\n          value={this.state.query}\n        />\n\n        {this.state.shortQuery && (\n          <span className=\"navbar-search-input-hint\">\n            {translateWithParameters('select2.tooShort', 2)}\n          </span>\n        )}\n\n        {this.state.open && Object.keys(this.state.results).length > 0 && (\n          <DropdownOverlay noPadding={true}>\n            <div className=\"global-navbar-search-dropdown\" ref={node => (this.node = node)}>\n              <SearchResults\n                allowMore={this.state.query.length !== 1}\n                loadingMore={this.state.loadingMore}\n                more={this.state.more}\n                onMoreClick={this.searchMore}\n                onSelect={this.handleSelect}\n                renderNoResults={this.renderNoResults}\n                renderResult={this.renderResult}\n                results={this.state.results}\n                selected={this.state.selected}\n              />\n              <div className=\"dropdown-bottom-hint\">\n                <div className=\"pull-right\">\n                  <ClockIcon className=\"little-spacer-right\" size={12} />\n                  {translate('recently_browsed')}\n                </div>\n                <FormattedMessage\n                  defaultMessage={translate('search.shortcut_hint')}\n                  id=\"search.shortcut_hint\"\n                  values={{\n                    shortcut: <span className=\"shortcut-button shortcut-button-small\">s</span>\n                  }}\n                />\n              </div>\n            </div>\n          </DropdownOverlay>\n        )}\n      </li>\n    );\n\n    return this.state.open ? (\n      <OutsideClickHandler onClickOutside={this.handleClickOutside}>{search}</OutsideClickHandler>\n    ) : (\n      search\n    );\n  }\n}\n\nexport default withRouter<OwnProps>(Search);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getGlobalSettingValue, Store } from '../../../../store/rootReducer';\n\ninterface StateProps {\n  customLogoUrl?: string;\n  customLogoWidth?: string | number;\n}\n\nexport function GlobalNavBranding({ customLogoUrl, customLogoWidth }: StateProps) {\n  const title = translate('layout.sonar.slogan');\n  const url = customLogoUrl || `${getBaseUrl()}/images/logo.svg?v=6.6`;\n  const width = customLogoUrl ? customLogoWidth || 100 : 83;\n\n  return (\n    <Link className=\"navbar-brand\" to=\"/\">\n      <img alt={title} height={30} src={url} title={title} width={width} />\n    </Link>\n  );\n}\n\nexport function SonarCloudNavBranding() {\n  return (\n    <GlobalNavBranding\n      customLogoUrl={`${getBaseUrl()}/images/sonarcloud-logo.svg`}\n      customLogoWidth={105}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const customLogoUrl = getGlobalSettingValue(state, 'sonar.lf.logoUrl');\n  const customLogoWidth = getGlobalSettingValue(state, 'sonar.lf.logoWidthPx');\n  return {\n    customLogoUrl: customLogoUrl && customLogoUrl.value,\n    customLogoWidth: customLogoWidth && customLogoWidth.value\n  };\n};\n\nexport default connect(mapStateToProps)(GlobalNavBranding);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  location: { pathname: string };\n}\n\nexport default function GlobalNavExplore({ location }: Props) {\n  const active = location.pathname.startsWith('/explore');\n  return (\n    <li>\n      <Link\n        className={active ? 'active' : undefined}\n        to={{ pathname: '/explore/projects', query: { sort: '-analysis_date' } }}>\n        {translate('explore')}\n      </Link>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isMySet } from '../../../../apps/issues/utils';\nimport { isSonarCloud } from '../../../../helpers/system';\nimport { getQualityGatesUrl } from '../../../../helpers/urls';\nimport { isLoggedIn } from '../../../../helpers/users';\n\ninterface Props {\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'organizationsEnabled' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n}\n\nexport default class GlobalNavMenu extends React.PureComponent<Props> {\n  renderProjects() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      return null;\n    }\n\n    const active =\n      this.props.location.pathname.startsWith('/projects') &&\n      this.props.location.pathname !== '/projects/create';\n\n    return (\n      <li>\n        <Link className={classNames({ active })} to=\"/projects\">\n          {isSonarCloud() ? translate('my_projects') : translate('projects.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderPortfolios() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/portfolios\">\n          {translate('portfolios.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderIssuesLink() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      return null;\n    }\n\n    const active = this.props.location.pathname.startsWith('/issues');\n\n    if (isSonarCloud()) {\n      return (\n        <li>\n          <Link\n            className={classNames({ active })}\n            to={{ pathname: '/issues', query: { resolved: 'false' } }}>\n            {translate('my_issues')}\n          </Link>\n        </li>\n      );\n    }\n\n    const query =\n      this.props.currentUser.isLoggedIn && isMySet()\n        ? { resolved: 'false', myIssues: 'true' }\n        : { resolved: 'false' };\n    return (\n      <li>\n        <Link className={classNames({ active })} to={{ pathname: '/issues', query }}>\n          {translate('issues.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderRulesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/coding_rules\">\n          {translate('coding_rules.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderProfilesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/profiles\">\n          {translate('quality_profiles.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderQualityGatesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to={getQualityGatesUrl()}>\n          {translate('quality_gates.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderAdministrationLink() {\n    if (!this.props.appState.canAdmin) {\n      return null;\n    }\n\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/admin\">\n          {translate('layout.settings')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderGlobalPageLink = ({ key, name }: T.Extension) => {\n    return (\n      <li key={key}>\n        <Link to={`/extension/${key}`}>{name}</Link>\n      </li>\n    );\n  };\n\n  renderMore() {\n    const { globalPages = [] } = this.props.appState;\n    const withoutPortfolios = globalPages.filter(page => page.key !== 'governance/portfolios');\n    if (withoutPortfolios.length === 0) {\n      return null;\n    }\n    return (\n      <Dropdown\n        overlay={<ul className=\"menu\">{withoutPortfolios.map(this.renderGlobalPageLink)}</ul>}\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open })}\n            href=\"#\"\n            id=\"global-navigation-more\"\n            onClick={onToggleClick}>\n            {translate('more')}\n            <DropdownIcon className=\"little-spacer-left text-middle\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  render() {\n    const governanceInstalled = this.props.appState.qualifiers.includes('VW');\n    const { organizationsEnabled } = this.props.appState;\n\n    return (\n      <ul className=\"global-navbar-menu\">\n        {this.renderProjects()}\n        {governanceInstalled && this.renderPortfolios()}\n        {this.renderIssuesLink()}\n        {!organizationsEnabled && this.renderRulesLink()}\n        {!organizationsEnabled && this.renderProfilesLink()}\n        {!organizationsEnabled && this.renderQualityGatesLink()}\n        {this.renderAdministrationLink()}\n        {this.renderMore()}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { Router, withRouter } from '../../../../components/hoc/withRouter';\nimport Avatar from '../../../../components/ui/Avatar';\nimport OrganizationListItem from '../../../../components/ui/OrganizationListItem';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { rawSizes } from '../../../theme';\n\ninterface Props {\n  appState: { organizationsEnabled?: boolean };\n  currentUser: T.CurrentUser;\n  organizations: T.Organization[];\n  router: Pick<Router, 'push'>;\n}\n\nexport class GlobalNavUser extends React.PureComponent<Props> {\n  handleLogin = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const shouldReturnToCurrentPage = window.location.pathname !== `${getBaseUrl()}/about`;\n    if (shouldReturnToCurrentPage) {\n      const returnTo = encodeURIComponent(window.location.pathname + window.location.search);\n      window.location.href =\n        getBaseUrl() + `/sessions/new?return_to=${returnTo}${window.location.hash}`;\n    } else {\n      window.location.href = `${getBaseUrl()}/sessions/new`;\n    }\n  };\n\n  handleLogout = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.props.router.push('/sessions/logout');\n  };\n\n  renderAuthenticated() {\n    const { organizations } = this.props;\n    const currentUser = this.props.currentUser as T.LoggedInUser;\n    const hasOrganizations = this.props.appState.organizationsEnabled && organizations.length > 0;\n    return (\n      <Dropdown\n        className=\"js-user-authenticated\"\n        overlay={\n          <ul className=\"menu\">\n            <li className=\"menu-item\">\n              <div className=\"text-ellipsis text-muted\" title={currentUser.name}>\n                <strong>{currentUser.name}</strong>\n              </div>\n              {currentUser.email != null && (\n                <div\n                  className=\"little-spacer-top text-ellipsis text-muted\"\n                  title={currentUser.email}>\n                  {currentUser.email}\n                </div>\n              )}\n            </li>\n            <li className=\"divider\" />\n            <li>\n              <Link to=\"/account\">{translate('my_account.page')}</Link>\n            </li>\n            {hasOrganizations && <li className=\"divider\" role=\"separator\" />}\n            {hasOrganizations && (\n              <li>\n                <Link to=\"/account/organizations\">{translate('my_organizations')}</Link>\n              </li>\n            )}\n            {hasOrganizations &&\n              sortBy(organizations, org => org.name.toLowerCase()).map(organization => (\n                <OrganizationListItem key={organization.key} organization={organization} />\n              ))}\n            {hasOrganizations && <li className=\"divider\" role=\"separator\" />}\n            <li>\n              <a href=\"#\" onClick={this.handleLogout}>\n                {translate('layout.logout')}\n              </a>\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        <a className=\"dropdown-toggle navbar-avatar\" href=\"#\" title={currentUser.name}>\n          <Avatar\n            hash={currentUser.avatar}\n            name={currentUser.name}\n            size={rawSizes.globalNavContentHeightRaw}\n          />\n        </a>\n      </Dropdown>\n    );\n  }\n\n  renderAnonymous() {\n    return (\n      <li>\n        <a className=\"navbar-login\" href=\"/sessions/new\" onClick={this.handleLogin}>\n          {translate('layout.login')}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return isLoggedIn(this.props.currentUser) ? this.renderAuthenticated() : this.renderAnonymous();\n  }\n}\n\nexport default withRouter(GlobalNavUser);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getMyOrganizations, Store } from '../../../../store/rootReducer';\nimport GlobalNavUser from './GlobalNavUser';\n\ninterface StateProps {\n  organizations: T.Organization[];\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  organizations: getMyOrganizations(state)\n});\n\nexport default connect(mapStateToProps)(GlobalNavUser);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport NavBar from 'sonar-ui-common/components/ui/NavBar';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport {\n  fetchPrismicFeatureNews,\n  fetchPrismicRefs,\n  PrismicFeatureNews\n} from '../../../../api/news';\nimport { isSonarCloud } from '../../../../helpers/system';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport {\n  getAppState,\n  getCurrentUser,\n  getCurrentUserSetting,\n  getGlobalSettingValue,\n  Store\n} from '../../../../store/rootReducer';\nimport { setCurrentUserSetting } from '../../../../store/users';\nimport { rawSizes } from '../../../theme';\nimport EmbedDocsPopupHelper from '../../embed-docs-modal/EmbedDocsPopupHelper';\nimport { OnboardingContext } from '../../OnboardingContext';\nimport Search from '../../search/Search';\nimport './GlobalNav.css';\nimport GlobalNavBranding, { SonarCloudNavBranding } from './GlobalNavBranding';\nimport GlobalNavExplore from './GlobalNavExplore';\nimport GlobalNavMenu from './GlobalNavMenu';\nimport GlobalNavUserContainer from './GlobalNavUserContainer';\n\nconst GlobalNavPlus = lazyLoadComponent(() => import('./GlobalNavPlus'), 'GlobalNavPlus');\nconst NotificationsSidebar = lazyLoadComponent(\n  () => import('../../notifications/NotificationsSidebar'),\n  'NotificationsSidebar'\n);\nconst NavLatestNotification = lazyLoadComponent(\n  () => import('../../notifications/NavLatestNotification'),\n  'NavLatestNotification'\n);\n\ninterface Props {\n  accessToken?: string;\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'organizationsEnabled' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n  notificationsLastReadDate?: Date;\n  notificationsOptOut?: boolean;\n  setCurrentUserSetting: (setting: T.CurrentUserSetting) => void;\n}\n\ninterface State {\n  notificationSidebar?: boolean;\n  loadingNews: boolean;\n  loadingMoreNews: boolean;\n  news: PrismicFeatureNews[];\n  newsPaging?: T.Paging;\n  newsRef?: string;\n}\n\nconst PAGE_SIZE = 5;\n\nexport class GlobalNav extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loadingNews: false,\n    loadingMoreNews: false,\n    news: [],\n    notificationSidebar: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (isSonarCloud()) {\n      this.fetchFeatureNews();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchFeatureNews = () => {\n    const { accessToken } = this.props;\n    if (accessToken) {\n      this.setState({ loadingNews: true });\n      fetchPrismicRefs()\n        .then(({ ref }) => {\n          if (this.mounted) {\n            this.setState({ newsRef: ref });\n          }\n          return ref;\n        })\n        .then(ref => fetchPrismicFeatureNews({ accessToken, ref, ps: PAGE_SIZE }))\n        .then(\n          ({ news, paging }) => {\n            if (this.mounted) {\n              this.setState({\n                loadingNews: false,\n                news,\n                newsPaging: paging\n              });\n            }\n          },\n          () => {\n            if (this.mounted) {\n              this.setState({ loadingNews: false });\n            }\n          }\n        );\n    }\n  };\n\n  fetchMoreFeatureNews = () => {\n    const { accessToken } = this.props;\n    const { newsPaging, newsRef } = this.state;\n    if (accessToken && newsPaging && newsRef) {\n      this.setState({ loadingMoreNews: true });\n      fetchPrismicFeatureNews({\n        accessToken,\n        ref: newsRef,\n        p: newsPaging.pageIndex + 1,\n        ps: PAGE_SIZE\n      }).then(\n        ({ news, paging }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              loadingMoreNews: false,\n              news: [...state.news, ...news],\n              newsPaging: paging\n            }));\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ loadingMoreNews: false });\n          }\n        }\n      );\n    }\n  };\n\n  handleOpenNotificationSidebar = () => {\n    this.setState({ notificationSidebar: true });\n    this.fetchFeatureNews();\n  };\n\n  handleCloseNotificationSidebar = () => {\n    this.setState({ notificationSidebar: false });\n    const lastNews = this.state.news[0];\n    const readDate = lastNews ? parseDate(lastNews.publicationDate).getTime() : Date.now();\n    this.props.setCurrentUserSetting({ key: 'notifications.readDate', value: readDate.toString() });\n  };\n\n  render() {\n    const { appState, currentUser } = this.props;\n    const { news } = this.state;\n    return (\n      <NavBar className=\"navbar-global\" height={rawSizes.globalNavHeightRaw} id=\"global-navigation\">\n        {isSonarCloud() ? <SonarCloudNavBranding /> : <GlobalNavBranding />}\n\n        <GlobalNavMenu {...this.props} />\n\n        <ul className=\"global-navbar-menu global-navbar-menu-right\">\n          {isSonarCloud() && isLoggedIn(currentUser) && news.length > 0 && (\n            <NavLatestNotification\n              lastNews={news[0]}\n              notificationsLastReadDate={this.props.notificationsLastReadDate}\n              notificationsOptOut={this.props.notificationsOptOut}\n              onClick={this.handleOpenNotificationSidebar}\n              setCurrentUserSetting={this.props.setCurrentUserSetting}\n            />\n          )}\n          {isSonarCloud() && <GlobalNavExplore location={this.props.location} />}\n          <EmbedDocsPopupHelper />\n          <Search appState={appState} currentUser={currentUser} />\n          {isLoggedIn(currentUser) && (\n            <OnboardingContext.Consumer data-test=\"global-nav-plus\">\n              {openProjectOnboarding => (\n                <GlobalNavPlus\n                  appState={appState}\n                  currentUser={currentUser}\n                  openProjectOnboarding={openProjectOnboarding}\n                />\n              )}\n            </OnboardingContext.Consumer>\n          )}\n          <GlobalNavUserContainer appState={appState} currentUser={currentUser} />\n        </ul>\n        {isSonarCloud() && isLoggedIn(currentUser) && this.state.notificationSidebar && (\n          <NotificationsSidebar\n            fetchMoreFeatureNews={this.fetchMoreFeatureNews}\n            loading={this.state.loadingNews}\n            loadingMore={this.state.loadingMoreNews}\n            news={news}\n            notificationsLastReadDate={this.props.notificationsLastReadDate}\n            onClose={this.handleCloseNotificationSidebar}\n            paging={this.state.newsPaging}\n          />\n        )}\n      </NavBar>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => {\n  const accessToken = getGlobalSettingValue(state, 'sonar.prismic.accessToken');\n  const notificationsLastReadDate = getCurrentUserSetting(state, 'notifications.readDate');\n  const notificationsOptOut = getCurrentUserSetting(state, 'notifications.optOut') === 'true';\n\n  return {\n    currentUser: getCurrentUser(state),\n    appState: getAppState(state),\n    accessToken: accessToken && accessToken.value,\n    notificationsLastReadDate: notificationsLastReadDate\n      ? parseDate(Number(notificationsLastReadDate))\n      : undefined,\n    notificationsOptOut\n  };\n};\n\nconst mapDispatchToProps = {\n  setCurrentUserSetting\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalNav);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInDays from 'date-fns/difference_in_days';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseDate, toShortNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { hasMessage } from 'sonar-ui-common/helpers/l10n';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { showLicense } from '../../api/marketplace';\nimport { Location, Router, withRouter } from '../../components/hoc/withRouter';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getAppState, getCurrentUser, Store } from '../../store/rootReducer';\nimport { skipOnboarding } from '../../store/users';\nimport { EditionKey } from '../../types/editions';\nimport { OnboardingContext } from './OnboardingContext';\n\nconst OnboardingModal = lazyLoadComponent(() =>\n  import('../../apps/tutorials/onboarding/OnboardingModal')\n);\nconst LicensePromptModal = lazyLoadComponent(\n  () => import('../../apps/marketplace/components/LicensePromptModal'),\n  'LicensePromptModal'\n);\n\ninterface StateProps {\n  canAdmin?: boolean;\n  currentEdition?: EditionKey;\n  currentUser: T.CurrentUser;\n}\n\ninterface DispatchProps {\n  skipOnboarding: () => void;\n}\n\ninterface OwnProps {\n  children?: React.ReactNode;\n}\n\ninterface WithRouterProps {\n  location: Pick<Location, 'pathname'>;\n  router: Pick<Router, 'push'>;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps & WithRouterProps;\n\nexport enum ModalKey {\n  license,\n  onboarding\n}\n\ninterface State {\n  modal?: ModalKey;\n}\n\nconst LICENSE_PROMPT = 'sonarqube.license.prompt';\n\nexport class StartupModal extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    this.tryAutoOpenLicense().catch(this.tryAutoOpenOnboarding);\n  }\n\n  closeOnboarding = () => {\n    this.setState(state => {\n      if (state.modal !== ModalKey.license) {\n        this.props.skipOnboarding();\n        return { modal: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLicense = () => {\n    this.setState(state => {\n      if (state.modal === ModalKey.license) {\n        return { modal: undefined };\n      }\n      return null;\n    });\n  };\n\n  openOnboarding = () => {\n    this.setState({ modal: ModalKey.onboarding });\n  };\n\n  openProjectOnboarding = (organization?: T.Organization) => {\n    this.setState({ modal: undefined });\n    const state: { organization?: string; tab?: string } = {};\n    if (organization) {\n      state.organization = organization.key;\n      state.tab = organization.alm ? 'auto' : 'manual';\n    }\n    this.props.router.push({ pathname: `/projects/create`, state });\n  };\n\n  tryAutoOpenLicense = () => {\n    const { canAdmin, currentEdition, currentUser } = this.props;\n    const hasLicenseManager = hasMessage('license.prompt.title');\n    const hasLicensedEdition = currentEdition && currentEdition !== 'community';\n\n    if (canAdmin && hasLicensedEdition && isLoggedIn(currentUser) && hasLicenseManager) {\n      const lastPrompt = get(LICENSE_PROMPT, currentUser.login);\n\n      if (!lastPrompt || differenceInDays(new Date(), parseDate(lastPrompt)) >= 1) {\n        return showLicense().then(license => {\n          if (!license || !license.isValidEdition) {\n            save(LICENSE_PROMPT, toShortNotSoISOString(new Date()), currentUser.login);\n            this.setState({ modal: ModalKey.license });\n          }\n          return Promise.reject();\n        });\n      }\n    }\n    return Promise.reject();\n  };\n\n  tryAutoOpenOnboarding = () => {\n    if (\n      isSonarCloud() &&\n      this.props.currentUser.showOnboardingTutorial &&\n      ![\n        '/about',\n        '/documentation',\n        '/onboarding',\n        '/projects/create',\n        '/create-organization'\n      ].some(path => this.props.location.pathname.startsWith(path))\n    ) {\n      this.openOnboarding();\n    }\n  };\n\n  render() {\n    const { modal } = this.state;\n    return (\n      <OnboardingContext.Provider value={this.openProjectOnboarding}>\n        {this.props.children}\n        {modal === ModalKey.license && <LicensePromptModal onClose={this.closeLicense} />}\n        {modal === ModalKey.onboarding && (\n          <OnboardingModal\n            onClose={this.closeOnboarding}\n            onOpenProjectOnboarding={this.openProjectOnboarding}\n          />\n        )}\n      </OnboardingContext.Provider>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  canAdmin: getAppState(state).canAdmin,\n  currentEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps: DispatchProps = { skipOnboarding };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(StartupModal));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Workspace from '../../components/workspace/Workspace';\nimport A11yProvider from './a11y/A11yProvider';\nimport A11ySkipLinks from './a11y/A11ySkipLinks';\nimport SuggestionsProvider from './embed-docs-modal/SuggestionsProvider';\nimport GlobalFooterContainer from './GlobalFooterContainer';\nimport GlobalMessagesContainer from './GlobalMessagesContainer';\nimport GlobalNav from './nav/global/GlobalNav';\nimport StartupModal from './StartupModal';\n\nexport interface Props {\n  children: React.ReactNode;\n  footer?: React.ReactNode;\n  location: { pathname: string };\n}\n\nexport default function GlobalContainer(props: Props) {\n  // it is important to pass `location` down to `GlobalNav` to trigger render on url change\n  const { footer = <GlobalFooterContainer /> } = props;\n  return (\n    <SuggestionsProvider>\n      <A11yProvider>\n        <StartupModal>\n          <A11ySkipLinks />\n\n          <div className=\"global-container\">\n            <div className=\"page-wrapper\" id=\"container\">\n              <div className=\"page-container\">\n                <Workspace>\n                  <GlobalNav location={props.location} />\n                  <GlobalMessagesContainer />\n                  {props.children}\n                </Workspace>\n              </div>\n            </div>\n            {footer}\n          </div>\n        </StartupModal>\n      </A11yProvider>\n    </SuggestionsProvider>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".workspace-nav{position:fixed;z-index:451;bottom:0;right:0;height:28px}.workspace-nav-list{float:right}.workspace-nav-item{position:relative;display:inline-flex;align-items:center;margin-right:8px}.workspace-nav-item-link{display:inline-flex;align-items:center;height:28px;padding:0 28px 0 8px;border:none;background-color:#404040;color:#fff;font-size:12px}.workspace-nav-item-link:focus,.workspace-nav-item-link:hover{color:#fff;opacity:.9}.workspace-nav-item-close{position:absolute;right:4px;top:4px}.workspace-viewer{position:fixed;z-index:450;bottom:0;left:0;right:0;box-sizing:border-box;background-color:#fff;box-shadow:0 -6px 12px rgba(0,0,0,.175)}.workspace-viewer-header{position:relative;height:30px;padding:3px 10px;box-sizing:border-box;background-color:#404040;color:#fff;font-weight:300}.workspace-viewer-name{float:left;line-height:24px;color:#fff;font-weight:400}.workspace-viewer-name i{margin-top:3px}.workspace-viewer-resize{position:absolute;top:3px;left:50%;width:30px;height:5px;margin-left:-15px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNDE0Ij48cGF0aCBmaWxsPSIjNzc3IiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMCAwaDJ2Mkgwek00IDBoMnYySDR6TTggMGgydjJIOHpNMTIgMGgydjJoLTJ6TTE2IDBoMnYyaC0yek0yMCAwaDJ2MmgtMnpNMjQgMGgydjJoLTJ6TTI4IDBoMnYyaC0yek0wIDNoMnYySDB6TTQgM2gydjJINHpNOCAzaDJ2Mkg4ek0xMiAzaDJ2MmgtMnpNMTYgM2gydjJoLTJ6TTIwIDNoMnYyaC0yek0yNCAzaDJ2MmgtMnpNMjggM2gydjJoLTJ6Ii8+PHBhdGggZmlsbD0iIzc3NyIgZmlsbC1vcGFjaXR5PSIuNSIgZD0iTTAgMGgydjJIMHpNNCAwaDJ2Mkg0ek04IDBoMnYySDh6TTEyIDBoMnYyaC0yek0xNiAwaDJ2MmgtMnpNMjAgMGgydjJoLTJ6TTI0IDBoMnYyaC0yek0yOCAwaDJ2MmgtMnoiLz48L3N2Zz4=);cursor:ns-resize}.workspace-viewer-actions{float:right}.workspace-viewer-actions a{color:inherit}.workspace-header-icon:focus path,.workspace-header-icon:hover path{color:#404040}.workspace-viewer-container{height:calc(40vh - 30px);min-height:100px;max-height:calc(95vh - 30px);padding:5px 10px;overflow-y:scroll;overflow-x:auto;box-sizing:border-box}.with-workspace .source-viewer{padding-bottom:40vh}.with-workspace .workspace-viewer .source-viewer{padding-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./A11ySkipLinks.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".a11y-skip-link{width:0;height:0;padding:8px;position:absolute;left:-9999px;top:-9999px;border:0;font-size:1rem;text-align:center;z-index:999}.a11y-skip-link:focus{width:auto;height:auto;left:6px;top:6px;color:#fff;background-color:#262626;text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Search.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-search{position:relative;padding:8px 0}.navbar-search .search-box,.navbar-search .search-box-input{width:26vw;max-width:310px;min-width:260px;height:32px}.navbar-search .search-box-input{border-color:#fff}.navbar-search .search-box-note{line-height:30px}.navbar-search .search-box-clear,.navbar-search .search-box-magnifier{top:8px}.navbar-search-input{vertical-align:middle;width:310px;margin-top:3px;margin-bottom:3px;padding-left:26px!important}.navbar-search-input-hint{position:absolute;top:1px;right:27px;line-height:24px;font-size:12px;color:#777}.navbar-search-icon{position:relative;z-index:3;vertical-align:middle;width:16px;margin-left:4px;margin-right:-20px;background-color:#fff;color:#777}.navbar-search-icon:before{font-size:14px}.navbar-search-item-link{display:flex!important}.navbar-search-item-match{flex-grow:5;overflow:hidden;text-overflow:ellipsis}.navbar-search-item-right{flex-grow:1;padding-left:10px;text-align:right}.navbar-search-item-icons{position:relative;flex-shrink:0;width:16px;height:16px}.navbar-search-item-icons>*{position:absolute;z-index:5;top:0;left:0}.navbar-search-item-icons>.icon-clock,.navbar-search-item-icons>.icon-outline{z-index:6;top:-4px;left:-5px}.navbar-search-no-results{margin-top:4px;padding:5px 10px}.global-navbar-search-dropdown{top:100%!important;max-height:80vh;width:440px;padding:0!important;overflow-y:auto;overflow-x:hidden}.global-navbar-search-dropdown .dropdown-bottom-hint{margin-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./GlobalNav.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-global,.navbar-global .navbar-inner{background-color:#262626;z-index:421}.navbar-global .navbar-limited{display:flex}.navbar-brand{display:flex;justify-content:center;align-items:center;height:48px;margin-left:-8px;padding-top:4px;padding-left:8px;padding-right:8px;border-bottom:4px solid transparent}.navbar-login{margin-right:-10px;white-space:nowrap}.navbar-avatar{margin-right:-8px;padding:8px!important;border:none!important}.navbar-icon{display:inline-block;height:48px;padding:16px 12px!important;border-bottom:none!important;color:#fff!important}.navbar-plus{margin-right:-8px}.global-navbar-menu{display:flex;align-items:center;height:48px}.global-navbar-menu>li>a{display:block;height:48px;padding:8px 10px;line-height:32px;border-bottom:4px solid transparent;box-sizing:border-box;color:#ccc;font-size:13px;letter-spacing:.05em;white-space:nowrap}.global-navbar-menu>.dropdown.open>a,.global-navbar-menu>li>a.active,.global-navbar-menu>li>a:focus,.global-navbar-menu>li>a:hover,.navbar-brand:focus,.navbar-brand:hover{background-color:#020202}.global-navbar-menu>li>a.active{border-bottom-color:#646464}.global-navbar-menu-right{flex:1;justify-content:flex-end;margin-left:40px}.global-navbar-menu-right .navbar-search{flex:0 1 240px;min-width:0}.global-navbar-menu-right .navbar-search .search-box,.global-navbar-menu-right .navbar-search .search-box-input{min-width:0;width:100%}@media print{.navbar-global{display:none!important}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./OrganizationAvatar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-context-avatar{display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:32px;height:32px;border:1px solid #e6e6e6}.navbar-context-avatar.no-border{border:none}.navbar-context-avatar.is-small{width:16px;height:16px}.navbar-context-avatar img{vertical-align:top;max-width:100%;max-height:100%}.navbar-context-avatar img,.navbar-context-avatar svg{transform:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  { indexRoute: { component: lazyLoadComponent(() => import('./components/AboutApp')) } }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/Account')),\n    childRoutes: [\n      {\n        indexRoute: { component: lazyLoadComponent(() => import('./profile/Profile')) }\n      },\n      {\n        path: 'security',\n        component: lazyLoadComponent(() => import('./components/Security'))\n      },\n      {\n        path: 'projects',\n        component: lazyLoadComponent(() => import('./projects/ProjectsContainer'))\n      },\n      {\n        path: 'notifications',\n        component: lazyLoadComponent(() => import('./notifications/Notifications'))\n      },\n      {\n        path: 'organizations',\n        component: lazyLoadComponent(() => import('./organizations/UserOrganizations'))\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/BackgroundTasksApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseQuery, serializeQuery } from './query';\n\nfunction parseHash(hash: string): T.RawQuery {\n  const query: T.RawQuery = {};\n  const parts = hash.split('|');\n  parts.forEach(part => {\n    const tokens = part.split('=');\n    if (tokens.length === 2) {\n      query[decodeURIComponent(tokens[0])] = decodeURIComponent(tokens[1]);\n    }\n  });\n  return query;\n}\n\nconst routes = [\n  {\n    indexRoute: {\n      onEnter: (nextState: RouterState, replace: RedirectFunction) => {\n        const { hash } = window.location;\n        if (hash.length > 1) {\n          const query = parseHash(hash.substr(1));\n          const normalizedQuery = {\n            ...serializeQuery(parseQuery(query)),\n            open: query.open\n          };\n          replace({ pathname: nextState.location.pathname, query: normalizedQuery });\n        }\n      },\n      component: lazyLoadComponent(() => import('./components/App'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  },\n  {\n    path: 'domain/:domainName',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      replace({\n        pathname: '/component_measures',\n        query: {\n          ...nextState.location.query,\n          metric: nextState.params.domainName\n        }\n      });\n    }\n  },\n  {\n    path: 'metric/:metricKey(/:view)',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      if (nextState.params.view === 'history') {\n        replace({\n          pathname: '/project/activity',\n          query: {\n            id: nextState.location.query.id,\n            graph: 'custom',\n            custom_metrics: nextState.params.metricKey\n          }\n        });\n      } else {\n        replace({\n          pathname: '/component_measures',\n          query: {\n            ...nextState.location.query,\n            metric: nextState.params.metricKey,\n            view: nextState.params.view\n          }\n        });\n      }\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import(/* webpackChunkName: \"docs\" */ './components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: '**', indexRoute: { component: App } }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport ContextNavBar from 'sonar-ui-common/components/ui/ContextNavBar';\nimport NavBarTabs from 'sonar-ui-common/components/ui/NavBarTabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { rawSizes } from '../../app/theme';\n\ninterface Props {\n  children: JSX.Element;\n}\n\nexport default function Explore(props: Props) {\n  return (\n    <div id=\"explore\">\n      <ContextNavBar height={rawSizes.contextNavHeightRaw} id=\"explore-navigation\">\n        <header className=\"navbar-context-header\">\n          <h1>{translate('explore')}</h1>\n        </header>\n\n        <NavBarTabs>\n          <li>\n            <Link activeClassName=\"active\" to=\"/explore/projects\">\n              {translate('projects.page')}\n            </Link>\n          </li>\n          <li>\n            <Link\n              activeClassName=\"active\"\n              to={{ pathname: '/explore/issues', query: { resolved: 'false' } }}>\n              {translate('issues.page')}\n            </Link>\n          </li>\n        </NavBarTabs>\n      </ContextNavBar>\n\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AppContainer from '../issues/components/AppContainer';\n\ninterface Props {\n  location: { pathname: string; query: T.RawQuery };\n}\n\nexport default function ExploreIssues(props: Props) {\n  return (\n    <AppContainer hideAuthorFacet={true} multiOrganizations={true} myIssues={false} {...props} />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AllProjectsContainer from '../projects/components/AllProjectsContainer';\n\ninterface Props {\n  location: { pathname: string; query: T.RawQuery };\n}\n\nexport default function ExploreProjects(props: Props) {\n  return (\n    <AllProjectsContainer\n      isFavorite={false}\n      organization={undefined}\n      storageOptionsSuffix=\"explore\"\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexRoute } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const maintenanceRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/MaintenanceAppContainer'))} />\n);\n\nexport const setupRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/SetupAppContainer'))} />\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import('./components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: 'show/:id', component: App }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/AppContainer')),\n    indexRoute: { component: lazyLoadComponent(() => import('./home/HomeContainer')) },\n    childRoutes: [\n      {\n        component: lazyLoadComponent(() => import('./components/ProfileContainer')),\n        childRoutes: [\n          {\n            path: 'show',\n            component: lazyLoadComponent(() => import('./details/ProfileDetails'))\n          },\n          {\n            path: 'changelog',\n            component: lazyLoadComponent(() => import('./changelog/ChangelogContainer'))\n          },\n          {\n            path: 'compare',\n            component: lazyLoadComponent(() => import('./compare/ComparisonContainer'))\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport codingRulesRoutes from '../coding-rules/routes';\nimport qualityGatesRoutes from '../quality-gates/routes';\nimport qualityProfilesRoutes from '../quality-profiles/routes';\nimport webhooksRoutes from '../webhooks/routes';\n\nconst OrganizationContainer = lazyLoadComponent(() => import('./components/OrganizationContainer'));\n\nconst routes = [\n  {\n    path: ':organizationKey',\n    component: lazyLoadComponent(() => import('./components/OrganizationPage')),\n    childRoutes: [\n      {\n        indexRoute: {\n          onEnter(nextState: RouterState, replace: RedirectFunction) {\n            const { params } = nextState;\n            replace(`/organizations/${params.organizationKey}/projects`);\n          }\n        }\n      },\n      {\n        path: 'projects',\n        component: OrganizationContainer,\n        childRoutes: [\n          {\n            indexRoute: {\n              component: lazyLoadComponent(() => import('./components/OrganizationProjects'))\n            }\n          }\n        ]\n      },\n      {\n        path: 'issues',\n        component: OrganizationContainer,\n        childRoutes: [\n          {\n            indexRoute: {\n              component: lazyLoadComponent(() => import('../issues/components/AppContainer'))\n            }\n          }\n        ]\n      },\n      {\n        path: 'rules',\n        component: OrganizationContainer,\n        childRoutes: codingRulesRoutes\n      },\n      {\n        path: 'members',\n        component: lazyLoadComponent(() =>\n          import('../organizationMembers/OrganizationMembersContainer')\n        )\n      },\n      {\n        path: 'quality_profiles',\n        childRoutes: qualityProfilesRoutes\n      },\n      {\n        path: 'quality_gates',\n        component: OrganizationContainer,\n        childRoutes: qualityGatesRoutes\n      },\n      {\n        component: lazyLoadComponent(() => import('./components/OrganizationAccessContainer')),\n        childRoutes: [\n          {\n            path: 'edit',\n            component: lazyLoadComponent(() => import('./components/OrganizationEdit'))\n          },\n          {\n            path: 'groups',\n            component: lazyLoadComponent(() => import('../groups/components/App'))\n          },\n          {\n            path: 'permissions',\n            component: lazyLoadComponent(() => import('../permissions/global/components/App'))\n          },\n          {\n            path: 'permission_templates',\n            component: lazyLoadComponent(() => import('../permission-templates/components/App'))\n          },\n          {\n            path: 'projects_management',\n            component: lazyLoadComponent(() => import('../projectsManagement/AppContainer'))\n          },\n          { path: 'webhooks', childRoutes: webhooksRoutes },\n          {\n            path: 'extension/:pluginKey/:extensionKey',\n            component: lazyLoadComponent(() =>\n              import('../../app/components/extensions/OrganizationPageExtension')\n            )\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const globalPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./global/components/App')) }\n  }\n];\n\nexport const projectPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./project/components/AppContainer')) }\n  }\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./components/ProjectActivityAppContainer'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { get } from 'sonar-ui-common/helpers/storage';\nimport { searchProjects } from '../../../api/components';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER, PROJECTS_FAVORITE } from '../utils';\nimport AllProjectsContainer from './AllProjectsContainer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  location: Pick<Location, 'pathname' | 'query'>;\n  router: Pick<Router, 'replace'>;\n}\n\ninterface State {\n  shouldBeRedirected?: boolean;\n  shouldForceSorting?: string;\n}\n\nexport class DefaultPageSelector extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      this.props.router.replace('/explore/projects');\n    }\n\n    if (!isSonarCloud()) {\n      this.defineIfShouldBeRedirected();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!isSonarCloud()) {\n      if (prevProps.location !== this.props.location) {\n        this.defineIfShouldBeRedirected();\n      } else if (this.state.shouldBeRedirected === true) {\n        this.props.router.replace({ ...this.props.location, pathname: '/projects/favorite' });\n      } else if (this.state.shouldForceSorting != null) {\n        this.props.router.replace({\n          ...this.props.location,\n          query: {\n            ...this.props.location.query,\n            sort: this.state.shouldForceSorting\n          }\n        });\n      }\n    }\n  }\n\n  isFavoriteSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_FAVORITE;\n  };\n\n  isAllSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_ALL;\n  };\n\n  defineIfShouldBeRedirected() {\n    if (Object.keys(this.props.location.query).length > 0) {\n      // show ALL projects when there are some filters\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else if (!isLoggedIn(this.props.currentUser)) {\n      // show ALL projects if user is anonymous\n      if (!this.props.location.query || !this.props.location.query.sort) {\n        // force default sorting to last analysis date\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: '-analysis_date' });\n      } else {\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n      }\n    } else if (this.isFavoriteSet()) {\n      // show FAVORITE projects if \"favorite\" setting is explicitly set\n      this.setState({ shouldBeRedirected: true, shouldForceSorting: undefined });\n    } else if (this.isAllSet()) {\n      // show ALL projects if \"all\" setting is explicitly set\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else {\n      // otherwise, request favorites\n      this.setState({ shouldBeRedirected: undefined, shouldForceSorting: undefined });\n      searchProjects({ filter: 'isFavorite', ps: 1 }).then(r => {\n        // show FAVORITE projects if there are any\n        this.setState({ shouldBeRedirected: r.paging.total > 0, shouldForceSorting: undefined });\n      });\n    }\n  }\n\n  render() {\n    if (isSonarCloud() && isLoggedIn(this.props.currentUser)) {\n      return <AllProjectsContainer isFavorite={true} organization={undefined} />;\n    }\n\n    const { shouldBeRedirected, shouldForceSorting } = this.state;\n\n    if (\n      shouldBeRedirected !== undefined &&\n      shouldBeRedirected !== true &&\n      shouldForceSorting === undefined\n    ) {\n      return <AllProjectsContainer isFavorite={false} organization={undefined} />;\n    }\n\n    return null;\n  }\n}\n\nexport default withRouter(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { save } from 'sonar-ui-common/helpers/storage';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport DefaultPageSelectorContainer from './components/DefaultPageSelectorContainer';\nimport FavoriteProjectsContainer from './components/FavoriteProjectsContainer';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER } from './utils';\n\nconst routes = [\n  { indexRoute: { component: DefaultPageSelectorContainer } },\n  {\n    path: 'all',\n    onEnter(_: RouterState, replace: RedirectFunction) {\n      save(PROJECTS_DEFAULT_FILTER, PROJECTS_ALL);\n      replace('/projects');\n    }\n  },\n  { path: 'favorite', component: FavoriteProjectsContainer },\n  {\n    path: 'create',\n    component: lazyLoadComponent(() => import('../create/project/CreateProjectPage'))\n  }\n].filter(isDefined);\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport DefaultPageSelector from './DefaultPageSelector';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(stateToProps)(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AllProjectsContainer from './AllProjectsContainer';\n\nexport default function FavoriteProjectsContainer(props: any) {\n  return <AllProjectsContainer isFavorite={true} {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    path: 'new',\n    component: lazyLoadComponent(() => import('./components/LoginContainer'))\n  },\n  {\n    path: 'logout',\n    component: lazyLoadComponent(() => import('./components/Logout'))\n  },\n  {\n    path: 'unauthorized',\n    component: lazyLoadComponent(() => import('./components/Unauthorized'))\n  },\n  {\n    path: 'email_already_exists',\n    component: lazyLoadComponent(() => import('./components/EmailAlreadyExists'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  },\n  {\n    path: 'encryption',\n    component: lazyLoadComponent(() => import('./encryption/EncryptionApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./ProjectOnboardingPage'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./UsersAppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/WebApiApp')) }\n  },\n  {\n    path: '**',\n    component: lazyLoadComponent(() => import('./components/WebApiApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { fetchMyOrganizations } from '../../apps/account/organizations/actions';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isLoggedIn } from '../../helpers/users';\nimport { fetchLanguages } from '../../store/rootActions';\nimport { getAppState, getCurrentUser, getGlobalSettingValue, Store } from '../../store/rootReducer';\n\nconst PageTracker = lazyLoadComponent(() => import('./PageTracker'));\n\ninterface StateProps {\n  appState: T.AppState | undefined;\n  currentUser: T.CurrentUser | undefined;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n}\n\ninterface DispatchProps {\n  fetchLanguages: () => Promise<void>;\n  fetchMyOrganizations: () => Promise<void>;\n}\n\ninterface OwnProps {\n  children: JSX.Element;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps;\n\nclass App extends React.PureComponent<Props> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchLanguages();\n    this.setScrollbarWidth();\n    const { appState, currentUser } = this.props;\n    if (appState && isSonarCloud() && currentUser && isLoggedIn(currentUser)) {\n      this.props.fetchMyOrganizations();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  setScrollbarWidth = () => {\n    // See https://stackoverflow.com/questions/13382516/getting-scroll-bar-width-using-javascript\n    const outer = document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.msOverflowStyle = 'scrollbar';\n\n    document.body.appendChild(outer);\n\n    const widthNoScroll = outer.offsetWidth;\n    outer.style.overflow = 'scroll';\n\n    const inner = document.createElement('div');\n    inner.style.width = '100%';\n    outer.appendChild(inner);\n\n    const widthWithScroll = inner.offsetWidth;\n\n    if (outer.parentNode) {\n      outer.parentNode.removeChild(outer);\n    }\n\n    document.body.style.setProperty('--sbw', `${widthNoScroll - widthWithScroll}px`);\n  };\n\n  renderPreconnectLink = () => {\n    const parser = document.createElement('a');\n    parser.href = this.props.gravatarServerUrl;\n    if (parser.hostname !== window.location.hostname) {\n      return <link href={parser.origin} rel=\"preconnect\" />;\n    } else {\n      return null;\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <PageTracker>{this.props.enableGravatar && this.renderPreconnectLink()}</PageTracker>\n        {this.props.children}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    appState: getAppState(state),\n    currentUser: getCurrentUser(state),\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nconst mapDispatchToProps = ({\n  fetchLanguages,\n  fetchMyOrganizations\n} as any) as DispatchProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport { getSystemStatus } from '../../helpers/system';\n\nexport default class MigrationContainer extends React.PureComponent<WithRouterProps> {\n  componentDidMount() {\n    if (getSystemStatus() !== 'UP') {\n      this.props.router.push({\n        pathname: '/maintenance',\n        query: {\n          return_to: window.location.pathname + window.location.search + window.location.hash\n        }\n      });\n    }\n  }\n\n  render() {\n    if (getSystemStatus() !== 'UP') {\n      return null;\n    }\n    return this.props.children;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/* eslint-disable react/jsx-sort-props */\nimport { Location } from 'history';\nimport { pick } from 'lodash';\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport { HelmetProvider } from 'react-helmet-async';\nimport { IntlProvider } from 'react-intl';\nimport { Provider } from 'react-redux';\nimport { IndexRoute, Redirect, Route, RouteConfig, RouteProps, Router } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { ThemeProvider } from 'sonar-ui-common/components/theme';\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport aboutRoutes from '../../apps/about/routes';\nimport accountRoutes from '../../apps/account/routes';\nimport backgroundTasksRoutes from '../../apps/background-tasks/routes';\nimport codeRoutes from '../../apps/code/routes';\nimport codingRulesRoutes from '../../apps/coding-rules/routes';\nimport componentMeasuresRoutes from '../../apps/component-measures/routes';\nimport customMeasuresRoutes from '../../apps/custom-measures/routes';\nimport customMetricsRoutes from '../../apps/custom-metrics/routes';\nimport documentationRoutes from '../../apps/documentation/routes';\nimport Explore from '../../apps/explore/Explore';\nimport ExploreIssues from '../../apps/explore/ExploreIssues';\nimport ExploreProjects from '../../apps/explore/ExploreProjects';\nimport groupsRoutes from '../../apps/groups/routes';\nimport Issues from '../../apps/issues/components/AppContainer';\nimport { maintenanceRoutes, setupRoutes } from '../../apps/maintenance/routes';\nimport marketplaceRoutes from '../../apps/marketplace/routes';\nimport organizationsRoutes from '../../apps/organizations/routes';\nimport overviewRoutes from '../../apps/overview/routes';\nimport permissionTemplatesRoutes from '../../apps/permission-templates/routes';\nimport { globalPermissionsRoutes, projectPermissionsRoutes } from '../../apps/permissions/routes';\nimport portfolioRoutes from '../../apps/portfolio/routes';\nimport projectActivityRoutes from '../../apps/projectActivity/routes';\nimport projectBaselineRoutes from '../../apps/projectBaseline/routes';\nimport projectBranchesRoutes from '../../apps/projectBranches/routes';\nimport projectQualityGateRoutes from '../../apps/projectQualityGate/routes';\nimport projectQualityProfilesRoutes from '../../apps/projectQualityProfiles/routes';\nimport projectsRoutes from '../../apps/projects/routes';\nimport projectsManagementRoutes from '../../apps/projectsManagement/routes';\nimport qualityGatesRoutes from '../../apps/quality-gates/routes';\nimport qualityProfilesRoutes from '../../apps/quality-profiles/routes';\nimport sessionsRoutes from '../../apps/sessions/routes';\nimport settingsRoutes from '../../apps/settings/routes';\nimport systemRoutes from '../../apps/system/routes';\nimport onboardingRoutes from '../../apps/tutorials/routes';\nimport usersRoutes from '../../apps/users/routes';\nimport webAPIRoutes from '../../apps/web-api/routes';\nimport webhooksRoutes from '../../apps/webhooks/routes';\nimport App from '../components/App';\nimport GlobalContainer from '../components/GlobalContainer';\nimport MigrationContainer from '../components/MigrationContainer';\nimport * as theme from '../theme';\nimport getStore from './getStore';\n\nfunction handleUpdate(this: { state: { location: Location } }) {\n  const { action } = this.state.location;\n\n  if (action === 'PUSH') {\n    window.scrollTo(0, 0);\n  }\n}\n\n// this is not an official api\nconst RouteWithChildRoutes = Route as React.ComponentClass<\n  RouteProps & { childRoutes: RouteConfig }\n>;\n\nfunction renderRedirects() {\n  return (\n    <>\n      <Route\n        path=\"/account/issues\"\n        onEnter={(_, replace) => {\n          replace({ pathname: '/issues', query: { myIssues: 'true', resolved: 'false' } });\n        }}\n      />\n\n      <Route\n        path=\"/codingrules\"\n        onEnter={(_, replace) => {\n          replace(`/coding_rules${window.location.hash}`);\n        }}\n      />\n\n      <Route\n        path=\"/dashboard/index/:key\"\n        onEnter={(nextState, replace) => {\n          replace({ pathname: '/dashboard', query: { id: nextState.params.key } });\n        }}\n      />\n\n      <Route\n        path=\"/issues/search\"\n        onEnter={(_, replace) => {\n          replace(`/issues${window.location.hash}`);\n        }}\n      />\n\n      <Redirect from=\"/admin\" to=\"/admin/settings\" />\n      <Redirect from=\"/background_tasks\" to=\"/admin/background_tasks\" />\n      <Redirect from=\"/component/index\" to=\"/component\" />\n      <Redirect from=\"/component_issues\" to=\"/project/issues\" />\n      <Redirect from=\"/dashboard/index\" to=\"/dashboard\" />\n      <Redirect\n        from=\"/documentation/analysis/languages/vb\"\n        to=\"/documentation/analysis/languages/vbnet/\"\n      />\n      <Redirect from=\"/governance\" to=\"/portfolio\" />\n      <Redirect from=\"/groups\" to=\"/admin/groups\" />\n      <Redirect from=\"/extension/governance/portfolios\" to=\"/portfolios\" />\n      <Redirect from=\"/metrics\" to=\"/admin/custom_metrics\" />\n      <Redirect from=\"/permission_templates\" to=\"/admin/permission_templates\" />\n      <Redirect from=\"/profiles/index\" to=\"/profiles\" />\n      <Redirect from=\"/projects_admin\" to=\"/admin/projects_management\" />\n      <Redirect from=\"/quality_gates/index\" to=\"/quality_gates\" />\n      <Redirect from=\"/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/admin/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/settings\" to=\"/admin/settings\" />\n      <Redirect from=\"/settings/encryption\" to=\"/admin/settings/encryption\" />\n      <Redirect from=\"/settings/index\" to=\"/admin/settings\" />\n      <Redirect from=\"/sessions/login\" to=\"/sessions/new\" />\n      <Redirect from=\"/system\" to=\"/admin/system\" />\n      <Redirect from=\"/system/index\" to=\"/admin/system\" />\n      <Redirect from=\"/view\" to=\"/portfolio\" />\n      <Redirect from=\"/users\" to=\"/admin/users\" />\n    </>\n  );\n}\n\nfunction renderComponentRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/ComponentContainer'))}>\n      <RouteWithChildRoutes path=\"code\" childRoutes={codeRoutes} />\n      <RouteWithChildRoutes path=\"component_measures\" childRoutes={componentMeasuresRoutes} />\n      <RouteWithChildRoutes path=\"dashboard\" childRoutes={overviewRoutes} />\n      <RouteWithChildRoutes path=\"portfolio\" childRoutes={portfolioRoutes} />\n      <RouteWithChildRoutes path=\"project/activity\" childRoutes={projectActivityRoutes} />\n      <Route\n        path=\"project/extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() => import('../components/extensions/ProjectPageExtension'))}\n      />\n      <Route\n        path=\"project/issues\"\n        component={Issues}\n        onEnter={({ location: { query } }, replace) => {\n          if (query.types) {\n            if (query.types === 'SECURITY_HOTSPOT') {\n              replace({\n                pathname: '/security_hotspots',\n                query: { ...pick(query, ['id', 'branch', 'pullRequest']), assignedToMe: false }\n              });\n            } else {\n              query.types = query.types\n                .split(',')\n                .filter((type: string) => type !== 'SECURITY_HOTSPOT')\n                .join(',');\n            }\n          }\n        }}\n      />\n      <Route\n        path=\"security_hotspots\"\n        component={lazyLoadComponent(() =>\n          import('../../apps/security-hotspots/SecurityHotspotsApp')\n        )}\n      />\n      <RouteWithChildRoutes path=\"project/quality_gate\" childRoutes={projectQualityGateRoutes} />\n      <RouteWithChildRoutes\n        path=\"project/quality_profiles\"\n        childRoutes={projectQualityProfilesRoutes}\n      />\n      <Route component={lazyLoadComponent(() => import('../components/ProjectAdminContainer'))}>\n        <RouteWithChildRoutes path=\"custom_measures\" childRoutes={customMeasuresRoutes} />\n        <Route\n          path=\"project/admin/extension/:pluginKey/:extensionKey\"\n          component={lazyLoadComponent(() =>\n            import('../components/extensions/ProjectAdminPageExtension')\n          )}\n        />\n        <RouteWithChildRoutes path=\"project/background_tasks\" childRoutes={backgroundTasksRoutes} />\n        <RouteWithChildRoutes path=\"project/baseline\" childRoutes={projectBaselineRoutes} />\n        <RouteWithChildRoutes path=\"project/branches\" childRoutes={projectBranchesRoutes} />\n        <RouteWithChildRoutes path=\"project/settings\" childRoutes={settingsRoutes} />\n        <RouteWithChildRoutes path=\"project_roles\" childRoutes={projectPermissionsRoutes} />\n        <RouteWithChildRoutes path=\"project/webhooks\" childRoutes={webhooksRoutes} />\n        <Route\n          path=\"project/deletion\"\n          component={lazyLoadComponent(() => import('../../apps/projectDeletion/App'))}\n        />\n        <Route\n          path=\"project/links\"\n          component={lazyLoadComponent(() => import('../../apps/projectLinks/App'))}\n        />\n        <Route\n          path=\"project/key\"\n          component={lazyLoadComponent(() => import('../../apps/projectKey/Key'))}\n        />\n      </Route>\n    </Route>\n  );\n}\n\nfunction renderAdminRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/AdminContainer'))} path=\"admin\">\n      <Route\n        path=\"extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() =>\n          import('../components/extensions/GlobalAdminPageExtension')\n        )}\n      />\n      <RouteWithChildRoutes path=\"background_tasks\" childRoutes={backgroundTasksRoutes} />\n      <RouteWithChildRoutes path=\"custom_metrics\" childRoutes={customMetricsRoutes} />\n      <RouteWithChildRoutes path=\"groups\" childRoutes={groupsRoutes} />\n      <RouteWithChildRoutes path=\"permission_templates\" childRoutes={permissionTemplatesRoutes} />\n      <RouteWithChildRoutes path=\"permissions\" childRoutes={globalPermissionsRoutes} />\n      <RouteWithChildRoutes path=\"projects_management\" childRoutes={projectsManagementRoutes} />\n      <RouteWithChildRoutes path=\"settings\" childRoutes={settingsRoutes} />\n      <RouteWithChildRoutes path=\"system\" childRoutes={systemRoutes} />\n      <RouteWithChildRoutes path=\"marketplace\" childRoutes={marketplaceRoutes} />\n      <RouteWithChildRoutes path=\"users\" childRoutes={usersRoutes} />\n      <RouteWithChildRoutes path=\"webhooks\" childRoutes={webhooksRoutes} />\n    </Route>\n  );\n}\n\nexport default function startReactApp(\n  lang: string,\n  currentUser?: T.CurrentUser,\n  appState?: T.AppState\n) {\n  const el = document.getElementById('content');\n\n  const history = getHistory();\n  const store = getStore(currentUser, appState);\n\n  render(\n    <HelmetProvider>\n      <Provider store={store}>\n        <IntlProvider defaultLocale={lang} locale={lang}>\n          <ThemeProvider theme={theme}>\n            <Router history={history} onUpdate={handleUpdate}>\n              {renderRedirects()}\n\n              <Route\n                path=\"markdown/help\"\n                component={lazyLoadComponent(() => import('../components/MarkdownHelp'))}\n              />\n\n              <Route component={lazyLoadComponent(() => import('../components/SimpleContainer'))}>\n                <Route path=\"maintenance\">{maintenanceRoutes}</Route>\n                <Route path=\"setup\">{setupRoutes}</Route>\n              </Route>\n\n              <Route component={MigrationContainer}>\n                <Route\n                  component={lazyLoadComponent(() =>\n                    import('../components/SimpleSessionsContainer')\n                  )}>\n                  <RouteWithChildRoutes path=\"/sessions\" childRoutes={sessionsRoutes} />\n                </Route>\n\n                <Route path=\"/\" component={App}>\n                  <IndexRoute\n                    component={lazyLoadComponent(() => import('../components/Landing'))}\n                  />\n                  <RouteWithChildRoutes path=\"about\" childRoutes={aboutRoutes} />\n\n                  <Route component={GlobalContainer}>\n                    <RouteWithChildRoutes path=\"account\" childRoutes={accountRoutes} />\n                    <RouteWithChildRoutes path=\"coding_rules\" childRoutes={codingRulesRoutes} />\n                    <RouteWithChildRoutes path=\"documentation\" childRoutes={documentationRoutes} />\n                    <Route path=\"explore\" component={Explore}>\n                      <Route path=\"issues\" component={ExploreIssues} />\n                      <Route path=\"projects\" component={ExploreProjects} />\n                    </Route>\n                    <Route\n                      path=\"extension/:pluginKey/:extensionKey\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/GlobalPageExtension')\n                      )}\n                    />\n                    <Route path=\"issues\" component={Issues} />\n                    <RouteWithChildRoutes path=\"onboarding\" childRoutes={onboardingRoutes} />\n                    <RouteWithChildRoutes path=\"organizations\" childRoutes={organizationsRoutes} />\n                    <RouteWithChildRoutes path=\"projects\" childRoutes={projectsRoutes} />\n                    <RouteWithChildRoutes path=\"quality_gates\" childRoutes={qualityGatesRoutes} />\n                    <Route\n                      path=\"portfolios\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/PortfoliosPage')\n                      )}\n                    />\n                    <RouteWithChildRoutes path=\"profiles\" childRoutes={qualityProfilesRoutes} />\n                    <RouteWithChildRoutes path=\"web_api\" childRoutes={webAPIRoutes} />\n\n                    {renderComponentRoutes()}\n\n                    {renderAdminRoutes()}\n                  </Route>\n                  <Route\n                    path=\"not_found\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                  <Route\n                    path=\"*\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                </Route>\n              </Route>\n            </Router>\n          </ThemeProvider>\n        </IntlProvider>\n      </Provider>\n    </HelmetProvider>,\n    el\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { combineReducers } from 'redux';\nimport globalMessages, * as fromGlobalMessages from '../../../store/globalMessages';\nimport definitions, * as fromDefinitions from './definitions';\nimport settingsPage, * as fromSettingsPage from './settingsPage';\nimport values, * as fromValues from './values';\n\ninterface State {\n  definitions: fromDefinitions.State;\n  globalMessages: fromGlobalMessages.State;\n  settingsPage: fromSettingsPage.State;\n  values: fromValues.State;\n}\n\nexport default combineReducers({ definitions, values, settingsPage, globalMessages });\n\nexport function getDefinition(state: State, key: string) {\n  return fromDefinitions.getDefinition(state.definitions, key);\n}\n\nexport function getAllCategories(state: State) {\n  return fromDefinitions.getAllCategories(state.definitions);\n}\n\nexport function getDefaultCategory(state: State) {\n  return fromDefinitions.getDefaultCategory(state.definitions);\n}\n\nexport function getValue(state: State, key: string, component?: string) {\n  return fromValues.getValue(state.values, key, component);\n}\n\nexport function getSettingsForCategory(state: State, category: string, component?: string) {\n  return fromDefinitions.getDefinitionsForCategory(state.definitions, category).map(definition => ({\n    key: definition.key,\n    ...getValue(state, definition.key, component),\n    definition\n  }));\n}\n\nexport function getChangedValue(state: State, key: string) {\n  return fromSettingsPage.getChangedValue(state.settingsPage, key);\n}\n\nexport function isLoading(state: State, key: string) {\n  return fromSettingsPage.isLoading(state.settingsPage, key);\n}\n\nexport function getValidationMessage(state: State, key: string) {\n  return fromSettingsPage.getValidationMessage(state.settingsPage, key);\n}\n\nexport function getGlobalMessages(state: State) {\n  return fromGlobalMessages.getGlobalMessages(state.globalMessages);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { combineReducers } from 'redux';\nimport settingsApp, * as fromSettingsApp from '../apps/settings/store/rootReducer';\nimport { BranchLike } from '../types/branch-like';\nimport appState from './appState';\nimport branches, * as fromBranches from './branches';\nimport globalMessages, * as fromGlobalMessages from './globalMessages';\nimport languages, * as fromLanguages from './languages';\nimport metrics, * as fromMetrics from './metrics';\nimport organizations, * as fromOrganizations from './organizations';\nimport users, * as fromUsers from './users';\n\nexport type Store = {\n  appState: T.AppState;\n  branches: fromBranches.State;\n  globalMessages: fromGlobalMessages.State;\n  languages: T.Languages;\n  metrics: fromMetrics.State;\n  organizations: fromOrganizations.State;\n  users: fromUsers.State;\n\n  // apps\n  settingsApp: any;\n};\n\nexport default combineReducers<Store>({\n  appState,\n  branches,\n  globalMessages,\n  languages,\n  metrics,\n  organizations,\n  users,\n\n  // apps\n  settingsApp\n});\n\nexport function getAppState(state: Store) {\n  return state.appState;\n}\n\nexport function getGlobalMessages(state: Store) {\n  return fromGlobalMessages.getGlobalMessages(state.globalMessages);\n}\n\nexport function getLanguages(state: Store) {\n  return fromLanguages.getLanguages(state.languages);\n}\n\nexport function getCurrentUserSetting(state: Store, key: T.CurrentUserSettingNames) {\n  return fromUsers.getCurrentUserSetting(state.users, key);\n}\n\nexport function getCurrentUser(state: Store) {\n  return fromUsers.getCurrentUser(state.users);\n}\n\nexport function getMetrics(state: Store) {\n  return fromMetrics.getMetrics(state.metrics);\n}\n\nexport function getMetricsKey(state: Store) {\n  return fromMetrics.getMetricsKey(state.metrics);\n}\n\nexport function getMetricByKey(state: Store, key: string) {\n  return fromMetrics.getMetricByKey(state.metrics, key);\n}\n\nexport function getOrganizationByKey(state: Store, key: string) {\n  return fromOrganizations.getOrganizationByKey(state.organizations, key);\n}\n\nexport function getMyOrganizations(state: Store) {\n  return fromOrganizations.getMyOrganizations(state.organizations);\n}\n\nexport function areThereCustomOrganizations(state: Store) {\n  return getAppState(state).organizationsEnabled;\n}\n\nexport function getGlobalSettingValue(state: Store, key: string) {\n  return fromSettingsApp.getValue(state.settingsApp, key);\n}\n\nexport function getSettingsAppDefinition(state: Store, key: string) {\n  return fromSettingsApp.getDefinition(state.settingsApp, key);\n}\n\nexport function getSettingsAppAllCategories(state: Store) {\n  return fromSettingsApp.getAllCategories(state.settingsApp);\n}\n\nexport function getSettingsAppDefaultCategory(state: Store) {\n  return fromSettingsApp.getDefaultCategory(state.settingsApp);\n}\n\nexport function getSettingsAppSettingsForCategory(\n  state: Store,\n  category: string,\n  component?: string\n) {\n  return fromSettingsApp.getSettingsForCategory(state.settingsApp, category, component);\n}\n\nexport function getSettingsAppChangedValue(state: Store, key: string) {\n  return fromSettingsApp.getChangedValue(state.settingsApp, key);\n}\n\nexport function isSettingsAppLoading(state: Store, key: string) {\n  return fromSettingsApp.isLoading(state.settingsApp, key);\n}\n\nexport function getSettingsAppValidationMessage(state: Store, key: string) {\n  return fromSettingsApp.getValidationMessage(state.settingsApp, key);\n}\n\nexport function getBranchStatusByBranchLike(\n  state: Store,\n  component: string,\n  branchLike: BranchLike\n) {\n  return fromBranches.getBranchStatusByBranchLike(state.branches, component, branchLike);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBaseUrl, Location } from 'sonar-ui-common/helpers/urls';\nimport { getProfilePath } from '../apps/quality-profiles/utils';\nimport { BranchLike } from '../types/branch-like';\nimport { GraphType } from '../types/project-activity';\nimport { getBranchLikeQuery, isBranch, isMainBranch, isPullRequest } from './branch-like';\n\ntype Query = Location['query'];\n\nexport function getProjectUrl(project: string, branch?: string): Location {\n  return { pathname: '/dashboard', query: { id: project, branch } };\n}\n\nexport function getPortfolioUrl(key: string): Location {\n  return { pathname: '/portfolio', query: { id: key } };\n}\n\nexport function getPortfolioAdminUrl(key: string, qualifier: string) {\n  return { pathname: '/project/admin/extension/governance/console', query: { id: key, qualifier } };\n}\n\nexport function getComponentBackgroundTaskUrl(componentKey: string, status?: string): Location {\n  return { pathname: '/project/background_tasks', query: { id: componentKey, status } };\n}\n\nexport function getBranchLikeUrl(project: string, branchLike?: BranchLike): Location {\n  if (isPullRequest(branchLike)) {\n    return getPullRequestUrl(project, branchLike.key);\n  } else if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return getBranchUrl(project, branchLike.name);\n  } else {\n    return getProjectUrl(project);\n  }\n}\n\nexport function getBranchUrl(project: string, branch: string): Location {\n  return { pathname: '/dashboard', query: { branch, id: project } };\n}\n\nexport function getPullRequestUrl(project: string, pullRequest: string): Location {\n  return { pathname: '/dashboard', query: { id: project, pullRequest } };\n}\n\n/**\n * Generate URL for a global issues page\n */\nexport function getIssuesUrl(query: Query, organization?: string): Location {\n  const pathname = organization ? `/organizations/${organization}/issues` : '/issues';\n  return { pathname, query };\n}\n\n/**\n * Generate URL for a component's issues page\n */\nexport function getComponentIssuesUrl(componentKey: string, query?: Query): Location {\n  return { pathname: '/project/issues', query: { ...(query || {}), id: componentKey } };\n}\n\n/**\n * Generate URL for a component's security hotspot page\n */\nexport function getComponentSecurityHotspotsUrl(componentKey: string, query: Query = {}): Location {\n  const { branch, pullRequest, sinceLeakPeriod, hotspots, assignedToMe } = query;\n  return {\n    pathname: '/security_hotspots',\n    query: { id: componentKey, branch, pullRequest, sinceLeakPeriod, hotspots, assignedToMe }\n  };\n}\n\n/**\n * Generate URL for a component's drilldown page\n */\nexport function getComponentDrilldownUrl(options: {\n  componentKey: string;\n  metric: string;\n  branchLike?: BranchLike;\n  selectionKey?: string;\n  treemapView?: boolean;\n  listView?: boolean;\n}): Location {\n  const { componentKey, metric, branchLike, selectionKey, treemapView, listView } = options;\n  const query: Query = { id: componentKey, metric, ...getBranchLikeQuery(branchLike) };\n  if (treemapView) {\n    query.view = 'treemap';\n  }\n  if (listView) {\n    query.view = 'list';\n  }\n  if (selectionKey) {\n    query.selected = selectionKey;\n  }\n  return { pathname: '/component_measures', query };\n}\n\nexport function getComponentDrilldownUrlWithSelection(\n  componentKey: string,\n  selectionKey: string,\n  metric: string,\n  branchLike?: BranchLike\n): Location {\n  return getComponentDrilldownUrl({ componentKey, selectionKey, metric, branchLike });\n}\n\nexport function getMeasureTreemapUrl(componentKey: string, metric: string) {\n  return getComponentDrilldownUrl({ componentKey, metric, treemapView: true });\n}\n\nexport function getActivityUrl(component: string, branchLike?: BranchLike, graph?: GraphType) {\n  return {\n    pathname: '/project/activity',\n    query: { id: component, graph, ...getBranchLikeQuery(branchLike) }\n  };\n}\n\n/**\n * Generate URL for a component's measure history\n */\nexport function getMeasureHistoryUrl(component: string, metric: string, branchLike?: BranchLike) {\n  return {\n    pathname: '/project/activity',\n    query: {\n      id: component,\n      graph: 'custom',\n      custom_metrics: metric,\n      ...getBranchLikeQuery(branchLike)\n    }\n  };\n}\n\n/**\n * Generate URL for a component's permissions page\n */\nexport function getComponentPermissionsUrl(componentKey: string): Location {\n  return { pathname: '/project_roles', query: { id: componentKey } };\n}\n\n/**\n * Generate URL for a quality profile\n */\nexport function getQualityProfileUrl(\n  name: string,\n  language: string,\n  organization?: string | null\n): Location {\n  return getProfilePath(name, language, organization);\n}\n\nexport function getQualityGateUrl(key: string, organization?: string | null): Location {\n  return {\n    pathname: getQualityGatesUrl(organization).pathname + '/show/' + encodeURIComponent(key)\n  };\n}\n\nexport function getQualityGatesUrl(organization?: string | null): Location {\n  return {\n    pathname:\n      (organization ? '/organizations/' + encodeURIComponent(organization) : '') + '/quality_gates'\n  };\n}\n\n/**\n * Generate URL for the rules page\n */\nexport function getRulesUrl(query: Query, organization: string | null | undefined): Location {\n  const pathname = organization ? `/organizations/${organization}/rules` : '/coding_rules';\n  return { pathname, query };\n}\n\n/**\n * Generate URL for the rules page filtering only active deprecated rules\n */\nexport function getDeprecatedActiveRulesUrl(\n  query: Query = {},\n  organization: string | null | undefined\n): Location {\n  const baseQuery = { activation: 'true', statuses: 'DEPRECATED' };\n  return getRulesUrl({ ...query, ...baseQuery }, organization);\n}\n\nexport function getRuleUrl(rule: string, organization: string | undefined) {\n  return getRulesUrl({ open: rule, rule_key: rule }, organization);\n}\n\nexport function getMarkdownHelpUrl(): string {\n  return getBaseUrl() + '/markdown/help';\n}\n\nexport function getCodeUrl(\n  project: string,\n  branchLike?: BranchLike,\n  selected?: string,\n  line?: number\n) {\n  return {\n    pathname: '/code',\n    query: { id: project, ...getBranchLikeQuery(branchLike), selected, line }\n  };\n}\n\nexport function getOrganizationUrl(organization: string) {\n  return `/organizations/${organization}`;\n}\n\nexport function getHomePageUrl(homepage: T.HomePage) {\n  switch (homepage.type) {\n    case 'APPLICATION':\n      return homepage.branch\n        ? getProjectUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'PROJECT':\n      return homepage.branch\n        ? getBranchUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'ORGANIZATION':\n      return getOrganizationUrl(homepage.organization);\n    case 'PORTFOLIO':\n      return getPortfolioUrl(homepage.component);\n    case 'PORTFOLIOS':\n      return '/portfolios';\n    case 'MY_PROJECTS':\n      return '/projects';\n    case 'ISSUES':\n    case 'MY_ISSUES':\n      return { pathname: '/issues', query: { resolved: 'false' } };\n  }\n\n  // should never happen, but just in case...\n  return '/projects';\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseError } from 'sonar-ui-common/helpers/request';\nimport { addGlobalErrorMessage } from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function throwGlobalError(param: Response | any): Promise<Response | any> {\n  const store = getStore();\n\n  if (param.response instanceof Response) {\n    /* eslint-disable-next-line no-console */\n    console.warn('DEPRECATED: response should not be wrapped, pass it directly.');\n    param = param.response;\n  }\n\n  if (param instanceof Response) {\n    return parseError(param)\n      .then(\n        message => {\n          store.dispatch(addGlobalErrorMessage(message));\n        },\n        () => {}\n      )\n      .then(() => Promise.reject(param));\n  }\n\n  return Promise.reject(param);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { orderBy } from 'lodash';\nimport {\n  Branch,\n  BranchLike,\n  BranchLikeTree,\n  BranchParameters,\n  MainBranch,\n  PullRequest\n} from '../types/branch-like';\n\nexport function isBranch(branchLike?: BranchLike): branchLike is Branch {\n  return branchLike !== undefined && (branchLike as Branch).isMain !== undefined;\n}\n\nexport function isMainBranch(branchLike?: BranchLike): branchLike is MainBranch {\n  return isBranch(branchLike) && branchLike.isMain;\n}\n\nexport function sortBranches(branches: Branch[]) {\n  return orderBy(branches, [b => b.isMain, b => b.name], ['desc', 'asc']);\n}\n\nexport function isPullRequest(branchLike?: BranchLike): branchLike is PullRequest {\n  return branchLike !== undefined && (branchLike as PullRequest).key !== undefined;\n}\n\nexport function sortPullRequests(pullRequests: PullRequest[]) {\n  return orderBy(pullRequests, pr => getPullRequestDisplayName(pr));\n}\n\nexport function getPullRequestDisplayName(pullRequest: PullRequest) {\n  return `${pullRequest.key} – ${pullRequest.title}`;\n}\n\nexport function getBranchLikeDisplayName(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? getPullRequestDisplayName(branchLike) : branchLike.name;\n}\n\nexport function getBranchLikeKey(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? `pull-request-${branchLike.key}` : `branch-${branchLike.name}`;\n}\n\nexport function getBranchQualityGateColor(status: string) {\n  let indicatorColor = 'gray';\n  if (status === 'ERROR') {\n    indicatorColor = 'red';\n  } else if (status === 'WARN') {\n    indicatorColor = 'orange';\n  } else if (status === 'OK') {\n    indicatorColor = 'green';\n  }\n  return indicatorColor;\n}\n\nexport function isSameBranchLike(a: BranchLike | undefined, b: BranchLike | undefined) {\n  // main branches are always equal\n  if (isMainBranch(a) && isMainBranch(b)) {\n    return true;\n  }\n\n  // Branches are compared by name\n  if (isBranch(a) && isBranch(b)) {\n    return a.name === b.name;\n  }\n\n  // pull requests are compared by id\n  if (isPullRequest(a) && isPullRequest(b)) {\n    return a.key === b.key;\n  }\n\n  // finally if both parameters are `undefined`, consider them equal\n  return a === b;\n}\n\nexport function getBrancheLikesAsTree(branchLikes: BranchLike[]): BranchLikeTree {\n  const mainBranch = branchLikes.find(isMainBranch);\n  const branches = orderBy(\n    branchLikes.filter(isBranch).filter(b => !isMainBranch(b)),\n    b => b.name\n  );\n  const pullRequests = orderBy(branchLikes.filter(isPullRequest), b => b.key);\n  const parentlessPullRequests = pullRequests.filter(\n    pr => !pr.isOrphan && ![mainBranch, ...branches].find(b => !!b && b.name === pr.base)\n  );\n  const orphanPullRequests = pullRequests.filter(pr => pr.isOrphan);\n\n  const tree: BranchLikeTree = {\n    branchTree: branches.map(b => ({ branch: b, pullRequests: getPullRequests(b) })),\n    parentlessPullRequests,\n    orphanPullRequests\n  };\n\n  if (mainBranch) {\n    tree.mainBranchTree = {\n      branch: mainBranch,\n      pullRequests: getPullRequests(mainBranch)\n    };\n  }\n\n  return tree;\n\n  function getPullRequests(branch: Branch) {\n    return pullRequests.filter(pr => !pr.isOrphan && pr.base === branch.name);\n  }\n}\n\nexport function getBranchLikeQuery(branchLike?: BranchLike): BranchParameters {\n  if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return { branch: branchLike.name };\n  } else if (isPullRequest(branchLike)) {\n    return { pullRequest: branchLike.key };\n  } else {\n    return {};\n  }\n}\n\n// Create branch object from branch name or pull request key\nexport function fillBranchLike(\n  branch?: string,\n  pullRequest?: string\n): Branch | PullRequest | undefined {\n  if (branch) {\n    return {\n      isMain: false,\n      name: branch\n    } as Branch;\n  } else if (pullRequest) {\n    return { base: '', branch: '', key: pullRequest, title: '' } as PullRequest;\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// IMPORTANT: any change in this file requires restart of the dev server\nconst grid = 8;\n\nmodule.exports = {\n  colors: {\n    blue: '#4b9fd5',\n    veryLightBlue: '#f2faff',\n    lightBlue: '#cae3f2',\n    darkBlue: '#236a97',\n    veryDarkBlue: '#0E516F',\n    green: '#00aa00',\n    lightGreen: '#b0d513',\n    veryLightGreen: '#f5f9fc',\n    yellow: '#eabe06',\n    orange: '#ed7d20',\n    red: '#d4333f',\n    purple: '#9139d4',\n\n    gray94: '#efefef',\n    gray80: '#cdcdcd',\n    gray71: '#b4b4b4',\n    gray67: '#aaa',\n    gray60: '#999',\n    gray40: '#404040',\n\n    transparentWhite: 'rgba(255,255,255,0.62)',\n    transparentGray: 'rgba(200, 200, 200, 0.5)',\n\n    disableGrayText: '#bbb',\n    disableGrayBorder: '#ddd',\n    disableGrayBg: '#ebebeb',\n\n    barBackgroundColor: '#f3f3f3',\n    barBackgroundColorHighlight: '#f8f8f8',\n    barBorderColor: '#e6e6e6',\n\n    globalNavBarBg: '#262626',\n\n    // table\n    rowHoverHighlight: '#ecf6fe',\n\n    // fonts\n    baseFontColor: '#444',\n    secondFontColor: '#777',\n\n    // forms\n    mandatoryFieldColor: '#a4030f',\n\n    // leak\n    leakPrimaryColor: '#fbf3d5',\n    leakSecondaryColor: '#f1e8cb',\n\n    snippetFontColor: '#f0f0f0',\n\n    // issues\n    issueBgColor: '#f2dede',\n    hotspotBgColor: '#eeeff4',\n    issueLocationSelected: '#f4b1b0',\n    issueLocationHighlighted: '#e1e1f2',\n    conciseIssueRed: '#d18582',\n    conciseIssueRedSelected: '#a4030f',\n\n    // coverage\n    lineCoverageRed: '#a4030f',\n    lineCoverageGreen: '#b4dd78',\n\n    // alerts\n    warningIconColor: '#eabe06',\n\n    alertBorderError: '#f4b1b0',\n    alertBackgroundError: '#f2dede',\n    alertTextError: '#862422',\n    alertIconError: '#a4030f',\n\n    alertBorderWarning: '#faebcc',\n    alertBackgroundWarning: '#fcf8e3',\n    alertTextWarning: '#6f4f17',\n    alertIconWarning: '#db781a',\n\n    alertBorderSuccess: '#d6e9c6',\n    alertBackgroundSuccess: '#dff0d8',\n    alertTextSuccess: '#215821',\n    alertIconSuccess: '#6d9867',\n\n    alertBorderInfo: '#b1dff3',\n    alertBackgroundInfo: '#d9edf7',\n    alertTextInfo: '#0e516f',\n    alertIconInfo: '#0271b9',\n\n    // badge\n    badgeBlueBackground: '#2E7CB5',\n    badgeBlueColor: '#FFFFFF',\n\n    // alm\n    azure: '#0078d7',\n    bitbucket: '#0052CC',\n    github: '#e1e4e8',\n\n    // code/pre\n    codeBackground: '#e6e6e6',\n\n    // sonarcloud\n    sonarcloudOrange500: '#fd6a00',\n    sonarcloudOrange600: '#e26003',\n    sonarcloudOrange700: '#db5700',\n\n    sonarcloudBlack100: '#ffffff',\n    sonarcloudBlack200: '#f9f9fb',\n    sonarcloudBlack250: '#e6e8ea',\n    sonarcloudBlack300: '#cfd3d7',\n    sonarcloudBlack500: '#8a8c8f',\n    sonarcloudBlack700: '#434447',\n    sonarcloudBlack800: '#2d3032',\n    sonarcloudBlack900: '#070706',\n\n    sonarcloudBlue500: '#4c9bd6',\n    sonarcloudBlue600: '#327bb3',\n    sonarcloudBlue900: '#0b3c62',\n\n    sonarcloudBorderGray: 'rgba(207, 211, 215, 0.5)'\n  },\n\n  sizes: {\n    gridSize: `${grid}px`,\n\n    baseFontSize: '13px',\n    verySmallFontSize: '10px',\n    smallFontSize: '12px',\n    mediumFontSize: '14px',\n    bigFontSize: '16px',\n    hugeFontSize: '24px',\n    giganticFontSize: '36px',\n\n    hugeControlHeight: `${5 * grid}px`,\n    largeControlHeight: `${4 * grid}px`,\n    controlHeight: `${3 * grid}px`,\n    smallControlHeight: `${2.5 * grid}px`,\n    tinyControlHeight: `${2 * grid}px`,\n\n    globalNavHeight: `${6 * grid}px`,\n\n    globalNavContentHeight: `${4 * grid}px`,\n\n    maxPageWidth: '1320px',\n    minPageWidth: '1080px',\n    pagePadding: '20px'\n  },\n\n  rawSizes: {\n    grid,\n    globalNavHeightRaw: 6 * grid,\n    globalNavContentHeightRaw: 4 * grid,\n    contextNavHeightRaw: 9 * grid\n  },\n\n  fonts: {\n    baseFontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    systemFontFamily: \"-apple-system,'BlinkMacSystemFont','Helvetica','Arial',sans-serif\",\n    sonarcloudFontFamily:\n      \"Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif\"\n  },\n\n  // z-index\n  // =======\n  //    1 -  100  for page elements (e.g. sidebars, panels)\n  //  101 -  500  for generic page fixed elements (e.g. navigation, workspace)\n  //  501 - 3000  for page ui elements\n  // 3001 - 8000  for generic ui elements (e.g. dropdowns, tooltips)\n  zIndexes: {\n    // common\n    aboveNormalZIndex: '3',\n    normalZIndex: '2',\n    belowNormalZIndex: '1',\n\n    // ui elements\n    pageMainZIndex: '50',\n    pageSideZIndex: '51',\n\n    tooltipZIndex: '8000',\n\n    dropdownMenuZIndex: '7500',\n\n    processContainerZIndex: '7000',\n\n    modalZIndex: '6001',\n    modalOverlayZIndex: '6000',\n\n    popupZIndex: '5000'\n  },\n\n  others: {\n    defaultShadow: '0 6px 12px rgba(0, 0, 0, 0.175)'\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function hasGlobalPermission(user: T.CurrentUser, permission: string): boolean {\n  if (!user.permissions) {\n    return false;\n  }\n  return user.permissions.global.includes(permission);\n}\n\nexport function isLoggedIn(user: T.CurrentUser): user is T.LoggedInUser {\n  return user.isLoggedIn;\n}\n\nexport function isUserActive(user: T.UserBase): user is T.UserActive {\n  return user.active !== false && Boolean(user.name);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport { MetricKey } from '../types/metrics';\nimport {\n  QualityGateStatusCondition,\n  QualityGateStatusConditionEnhanced\n} from '../types/quality-gates';\n\n/** Return a localized metric name */\nexport function localizeMetric(metricKey: MetricKey | string): string {\n  return translate('metric', metricKey, 'name');\n}\n\n/** Return corresponding \"short\" for better display in UI */\nexport function getShortType(type: string): string {\n  if (type === 'INT') {\n    return 'SHORT_INT';\n  } else if (type === 'WORK_DUR') {\n    return 'SHORT_WORK_DUR';\n  }\n  return type;\n}\n\nexport function enhanceMeasuresWithMetrics(\n  measures: T.Measure[],\n  metrics: T.Metric[]\n): T.MeasureEnhanced[] {\n  return measures\n    .map(measure => {\n      const metric = metrics.find(metric => metric.key === measure.metric);\n      return metric && { ...measure, metric };\n    })\n    .filter(isDefined);\n}\n\nexport function enhanceConditionWithMeasure(\n  condition: QualityGateStatusCondition,\n  measures: T.MeasureEnhanced[]\n): QualityGateStatusConditionEnhanced | undefined {\n  const measure = measures.find(m => m.metric.key === condition.metric);\n\n  // Make sure we have a period index. This is necessary when dealing with\n  // applications.\n  let { period } = condition;\n  if (measure && measure.periods && !period) {\n    period = measure.periods[0].index;\n  }\n\n  return measure && { ...condition, period, measure };\n}\n\n/** Get period value of a measure */\nexport function getPeriodValue(\n  measure: T.Measure | T.MeasureEnhanced,\n  periodIndex: number\n): string | undefined {\n  const { periods } = measure;\n  const period = periods && periods.find(period => period.index === periodIndex);\n  return period ? period.value : undefined;\n}\n\nexport function isPeriodBestValue(\n  measure: T.Measure | T.MeasureEnhanced,\n  periodIndex: number\n): boolean {\n  const { periods } = measure;\n  const period = periods && periods.find(period => period.index === periodIndex);\n  return (period && period.bestValue) || false;\n}\n\n/** Check if metric is differential */\nexport function isDiffMetric(metricKey: MetricKey | string): boolean {\n  return metricKey.indexOf('new_') === 0;\n}\n\nfunction getRatingGrid(): string {\n  // workaround cyclic dependencies\n  const getStore = require('../app/utils/getStore').default;\n  const { getGlobalSettingValue } = require('../store/rootReducer');\n\n  const store = getStore();\n  const settingValue = getGlobalSettingValue(store.getState(), 'sonar.technicalDebt.ratingGrid');\n  return settingValue ? settingValue.value : '';\n}\n\nlet maintainabilityRatingGrid: number[];\n\nfunction getMaintainabilityRatingGrid(): number[] {\n  if (maintainabilityRatingGrid) {\n    return maintainabilityRatingGrid;\n  }\n\n  const str = getRatingGrid();\n  const numbers = str\n    .split(',')\n    .map(s => parseFloat(s))\n    .filter(n => !isNaN(n));\n\n  if (numbers.length === 4) {\n    maintainabilityRatingGrid = numbers;\n  } else {\n    maintainabilityRatingGrid = [0, 0, 0, 0];\n  }\n\n  return maintainabilityRatingGrid;\n}\n\nfunction getMaintainabilityRatingTooltip(rating: number): string {\n  const maintainabilityGrid = getMaintainabilityRatingGrid();\n  const maintainabilityRatingThreshold = maintainabilityGrid[Math.floor(rating) - 2];\n\n  if (rating < 2) {\n    return translateWithParameters(\n      'metric.sqale_rating.tooltip.A',\n      formatMeasure(maintainabilityGrid[0] * 100, 'PERCENT')\n    );\n  }\n\n  const ratingLetter = formatMeasure(rating, 'RATING');\n\n  return translateWithParameters(\n    'metric.sqale_rating.tooltip',\n    ratingLetter,\n    formatMeasure(maintainabilityRatingThreshold * 100, 'PERCENT')\n  );\n}\n\nexport function getRatingTooltip(metricKey: MetricKey | string, value: number | string): string {\n  const ratingLetter = formatMeasure(value, 'RATING');\n\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n\n  return finalMetricKey === 'sqale_rating' || finalMetricKey === 'maintainability_rating'\n    ? getMaintainabilityRatingTooltip(Number(value))\n    : translate('metric', finalMetricKey, 'tooltip', ratingLetter);\n}\n\nexport function getDisplayMetrics(metrics: T.Metric[]) {\n  return metrics.filter(metric => !metric.hidden && !['DATA', 'DISTRIB'].includes(metric.type));\n}\n\nexport function findMeasure(measures: T.MeasureEnhanced[], metric: MetricKey | string) {\n  return measures.find(measure => measure.metric.key === metric);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport getCoverageStatus from '../components/SourceViewer/helpers/getCoverageStatus';\nimport { RawIssue } from '../helpers/issues';\n\nexport interface IssueResponse {\n  components?: Array<{ key: string; name: string }>;\n  issue: RawIssue;\n  rules?: Array<{}>;\n  users?: Array<T.UserBase>;\n}\n\ninterface IssuesResponse {\n  components?: { key: string; organization: string; name: string }[];\n  effortTotal: number;\n  facets: Array<{\n    property: string;\n    values: { count: number; val: string }[];\n  }>;\n  issues: RawIssue[];\n  paging: T.Paging;\n  rules?: Array<{}>;\n  users?: Array<T.UserBase>;\n}\n\ntype FacetName =\n  | 'assigned_to_me'\n  | 'assignees'\n  | 'authors'\n  | 'createdAt'\n  | 'cwe'\n  | 'directories'\n  | 'files'\n  | 'languages'\n  | 'modules'\n  | 'owaspTop10'\n  | 'projects'\n  | 'reporters'\n  | 'resolutions'\n  | 'rules'\n  | 'sansTop25'\n  | 'severities'\n  | 'statuses'\n  | 'tags'\n  | 'types';\n\nexport function searchIssues(query: RequestData): Promise<IssuesResponse> {\n  return getJSON('/api/issues/search', query);\n}\n\nexport function getFacets(\n  query: RequestData,\n  facets: FacetName[]\n): Promise<{\n  facets: Array<{ property: string; values: T.FacetValue[] }>;\n  response: IssuesResponse;\n}> {\n  const data = {\n    ...query,\n    facets: facets.join(),\n    ps: 1,\n    additionalFields: '_all'\n  };\n  return searchIssues(data).then(r => {\n    return { facets: r.facets, response: r };\n  });\n}\n\nexport function getFacet(\n  query: RequestData,\n  facet: FacetName\n): Promise<{ facet: { count: number; val: string }[]; response: IssuesResponse }> {\n  return getFacets(query, [facet]).then(r => {\n    return { facet: r.facets[0].values, response: r.response };\n  });\n}\n\nexport function searchIssueTags(data: {\n  organization?: string;\n  project?: string;\n  ps?: number;\n  q?: string;\n}): Promise<string[]> {\n  return getJSON('/api/issues/tags', data)\n    .then(r => r.tags)\n    .catch(throwGlobalError);\n}\n\nexport function getIssueChangelog(issue: string): Promise<{ changelog: T.IssueChangelog[] }> {\n  return getJSON('/api/issues/changelog', { issue }).catch(throwGlobalError);\n}\n\nexport function getIssueFilters() {\n  return getJSON('/api/issue_filters/search').then(r => r.issueFilters);\n}\n\nexport function addIssueComment(data: { issue: string; text: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/add_comment', data);\n}\n\nexport function deleteIssueComment(data: { comment: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/delete_comment', data);\n}\n\nexport function editIssueComment(data: { comment: string; text: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/edit_comment', data);\n}\n\nexport function setIssueAssignee(data: {\n  issue: string;\n  assignee?: string;\n}): Promise<IssueResponse> {\n  return postJSON('/api/issues/assign', data);\n}\n\nexport function setIssueSeverity(data: { issue: string; severity: string }): Promise<any> {\n  return postJSON('/api/issues/set_severity', data);\n}\n\nexport function setIssueTags(data: { issue: string; tags: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/set_tags', data);\n}\n\nexport function setIssueTransition(data: {\n  issue: string;\n  transition: string;\n}): Promise<IssueResponse> {\n  return postJSON('/api/issues/do_transition', data);\n}\n\nexport function setIssueType(data: { issue: string; type: string }): Promise<IssueResponse> {\n  return postJSON('/api/issues/set_type', data);\n}\n\nexport function bulkChangeIssues(issueKeys: string[], query: RequestData): Promise<void> {\n  return post('/api/issues/bulk_change', { issues: issueKeys.join(), ...query });\n}\n\nexport function searchIssueAuthors(data: {\n  organization?: string;\n  project?: string;\n  ps?: number;\n  q?: string;\n}): Promise<string[]> {\n  return getJSON('/api/issues/authors', data).then(r => r.authors, throwGlobalError);\n}\n\nexport function getIssueFlowSnippets(issueKey: string): Promise<T.Dict<T.SnippetsByComponent>> {\n  return getJSON('/api/sources/issue_snippets', { issueKey }).then(result => {\n    Object.keys(result).forEach(k => {\n      if (result[k].sources) {\n        result[k].sources = result[k].sources.reduce(\n          (lineMap: T.Dict<T.SourceLine>, line: T.SourceLine) => {\n            line.coverageStatus = getCoverageStatus(line);\n            lineMap[line.line] = line;\n            return lineMap;\n          },\n          {}\n        );\n      }\n    });\n    return result;\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\ninterface SuggestionsContextShape {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: T.SuggestionLink[];\n}\n\nexport const SuggestionsContext = createContext<SuggestionsContextShape>({\n  addSuggestions: () => {},\n  removeSuggestions: () => {},\n  suggestions: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport { ComponentQualifier } from '../types/component';\n\nexport interface BaseSearchProjectsParameters {\n  analyzedBefore?: string;\n  onProvisionedOnly?: boolean;\n  organization: string;\n  projects?: string;\n  q?: string;\n  qualifiers?: string;\n  visibility?: T.Visibility;\n}\n\nexport interface ProjectBase {\n  key: string;\n  name: string;\n  qualifier: string;\n  visibility: T.Visibility;\n}\n\nexport interface Project extends ProjectBase {\n  id: string;\n  lastAnalysisDate?: string;\n  organization: string;\n}\n\nexport interface SearchProjectsParameters extends BaseSearchProjectsParameters {\n  p?: number;\n  ps?: number;\n}\n\nexport function getComponents(\n  parameters: SearchProjectsParameters\n): Promise<{\n  components: Project[];\n  paging: T.Paging;\n}> {\n  return getJSON('/api/projects/search', parameters);\n}\n\nexport function bulkDeleteProjects(\n  parameters: BaseSearchProjectsParameters\n): Promise<void | Response> {\n  return post('/api/projects/bulk_delete', parameters).catch(throwGlobalError);\n}\n\nexport function deleteProject(project: string): Promise<void | Response> {\n  return post('/api/projects/delete', { project }).catch(throwGlobalError);\n}\n\nexport function deletePortfolio(portfolio: string): Promise<void | Response> {\n  return post('/api/views/delete', { key: portfolio }).catch(throwGlobalError);\n}\n\nexport function createProject(data: {\n  name: string;\n  project: string;\n  organization?: string;\n  visibility?: T.Visibility;\n}): Promise<{ project: ProjectBase }> {\n  return postJSON('/api/projects/create', data).catch(throwGlobalError);\n}\n\nexport function searchProjectTags(data?: { ps?: number; q?: string }): Promise<any> {\n  return getJSON('/api/project_tags/search', data).catch(throwGlobalError);\n}\n\nexport function setApplicationTags(data: { application: string; tags: string }): Promise<void> {\n  return post('/api/applications/set_tags', data);\n}\n\nexport function setProjectTags(data: { project: string; tags: string }): Promise<void> {\n  return post('/api/project_tags/set', data);\n}\n\nexport function getComponentTree(\n  strategy: string,\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n): Promise<{\n  baseComponent: T.ComponentMeasure;\n  components: T.ComponentMeasure[];\n  metrics: T.Metric[];\n  paging: T.Paging;\n}> {\n  const url = '/api/measures/component_tree';\n  const data = { ...additional, component, metricKeys: metrics.join(','), strategy };\n  return getJSON(url, data).catch(throwGlobalError);\n}\n\nexport function getChildren(\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n) {\n  return getComponentTree('children', component, metrics, additional);\n}\n\nexport function getComponentLeaves(\n  component: string,\n  metrics: string[] = [],\n  additional: RequestData = {}\n) {\n  return getComponentTree('leaves', component, metrics, additional);\n}\n\nexport function getComponent(\n  data: { component: string; metricKeys: string } & BranchParameters\n): Promise<{ component: T.ComponentMeasure }> {\n  return getJSON('/api/measures/component', data);\n}\n\nexport interface TreeComponent extends T.LightComponent {\n  id?: string;\n  name: string;\n  path?: string;\n  refId?: string;\n  refKey?: string;\n  tags?: string[];\n  visibility: T.Visibility;\n}\n\nexport interface TreeComponentWithPath extends TreeComponent {\n  path: string;\n}\n\ntype GetTreeParams = {\n  asc?: boolean;\n  component: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  s?: string;\n  strategy?: 'all' | 'leaves' | 'children';\n} & BranchParameters;\n\nexport function getTree<T = TreeComponent>(\n  data: GetTreeParams & { qualifiers?: string }\n): Promise<{ baseComponent: TreeComponent; components: T[]; paging: T.Paging }> {\n  return getJSON('/api/components/tree', data).catch(throwGlobalError);\n}\n\nexport function getFiles(data: GetTreeParams) {\n  return getTree<TreeComponentWithPath>({ ...data, qualifiers: 'FIL' });\n}\n\nexport function getDirectories(data: GetTreeParams) {\n  return getTree<TreeComponentWithPath>({ ...data, qualifiers: 'DIR' });\n}\n\nexport function getComponentData(data: { component: string } & BranchParameters): Promise<any> {\n  return getJSON('/api/components/show', data);\n}\n\nexport function doesComponentExists(\n  data: { component: string } & BranchParameters\n): Promise<boolean> {\n  return getComponentData(data).then(\n    ({ component }) => component !== undefined,\n    () => false\n  );\n}\n\nexport function getComponentShow(data: { component: string } & BranchParameters): Promise<any> {\n  return getComponentData(data).catch(throwGlobalError);\n}\n\nexport function getParents(component: string): Promise<any> {\n  return getComponentShow({ component }).then(r => r.ancestors);\n}\n\nexport function getBreadcrumbs(data: { component: string } & BranchParameters): Promise<any> {\n  return getComponentShow(data).then(r => {\n    const reversedAncestors = [...r.ancestors].reverse();\n    return [...reversedAncestors, r.component];\n  });\n}\n\nexport function getMyProjects(data: {\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; projects: T.MyProject[] }> {\n  return getJSON('/api/projects/search_my_projects', data);\n}\n\nexport interface Component {\n  organization: string;\n  id: string;\n  key: string;\n  name: string;\n  isFavorite?: boolean;\n  analysisDate?: string;\n  qualifier: ComponentQualifier;\n  tags: string[];\n  visibility: T.Visibility;\n  leakPeriodDate?: string;\n}\n\nexport interface Facet {\n  property: string;\n  values: Array<{ val: string; count: number }>;\n}\n\nexport function searchProjects(\n  data: RequestData\n): Promise<{\n  components: Component[];\n  facets: Facet[];\n  organizations: Array<{ key: string; name: string }>;\n  paging: T.Paging;\n}> {\n  const url = '/api/components/search_projects';\n  return getJSON(url, data);\n}\n\nexport function searchComponents(data?: {\n  q?: string;\n  qualifiers?: string;\n  ps?: number;\n}): Promise<any> {\n  return getJSON('/api/components/search', data);\n}\n\nexport function changeKey(data: { from: string; to: string }) {\n  return post('/api/projects/update_key', data).catch(throwGlobalError);\n}\n\nexport interface SuggestionsResponse {\n  organizations: Array<{ key: string; name: string }>;\n  projects: Array<{ key: string; name: string }>;\n  results: Array<{\n    items: Array<{\n      isFavorite: boolean;\n      isRecentlyBrowsed: boolean;\n      key: string;\n      match: string;\n      name: string;\n      organization: string;\n      project: string;\n    }>;\n    more: number;\n    q: string;\n  }>;\n  warning?: string;\n}\n\nexport function getSuggestions(\n  query?: string,\n  recentlyBrowsed?: string[],\n  more?: string\n): Promise<SuggestionsResponse> {\n  const data: RequestData = {};\n  if (query) {\n    data.s = query;\n  }\n  if (recentlyBrowsed) {\n    data.recentlyBrowsed = recentlyBrowsed.join();\n  }\n  if (more) {\n    data.more = more;\n  }\n  return getJSON('/api/components/suggestions', data).catch(throwGlobalError);\n}\n\nexport function getComponentForSourceViewer(\n  data: { component: string } & BranchParameters\n): Promise<T.SourceViewerFile> {\n  return getJSON('/api/components/app', data);\n}\n\nexport function getSources(\n  data: { key: string; from?: number; to?: number } & BranchParameters\n): Promise<T.SourceLine[]> {\n  return getJSON('/api/sources/lines', data).then(r => r.sources);\n}\n\nexport function getDuplications(\n  data: { key: string } & BranchParameters\n): Promise<{ duplications: T.Duplication[]; files: T.Dict<T.DuplicatedFile> }> {\n  return getJSON('/api/duplications/show', data).catch(throwGlobalError);\n}\n\nexport function getTests(\n  data: { sourceFileKey: string; sourceFileLineNumber: number | string } & BranchParameters\n): Promise<any> {\n  return getJSON('/api/tests/list', data).then(r => r.tests);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { withRouter as originalWithRouter, WithRouterProps } from 'react-router';\n\nexport type Location = WithRouterProps['location'];\nexport type Router = WithRouterProps['router'];\n\ninterface InjectedProps {\n  location?: Partial<Location>;\n  router?: Partial<Router>;\n}\n\nexport function withRouter<P extends InjectedProps>(\n  WrappedComponent: React.ComponentType<P & InjectedProps>\n): React.ComponentType<T.Omit<P, keyof InjectedProps>> {\n  return originalWithRouter(WrappedComponent as any);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport GenericAvatar from 'sonar-ui-common/components/ui/GenericAvatar';\nimport { getGlobalSettingValue, Store } from '../../store/rootReducer';\n\ninterface Props {\n  className?: string;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n  hash?: string;\n  name?: string;\n  size: number;\n}\n\nfunction Avatar(props: Props) {\n  if (!props.enableGravatar || !props.hash) {\n    if (!props.name) {\n      return null;\n    }\n    return <GenericAvatar className={props.className} name={props.name} size={props.size} />;\n  }\n\n  const url = props.gravatarServerUrl\n    .replace('{EMAIL_MD5}', props.hash)\n    .replace('{SIZE}', String(props.size * 2));\n\n  return (\n    <img\n      alt={props.name}\n      className={classNames(props.className, 'rounded')}\n      height={props.size}\n      src={url}\n      width={props.size}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store) => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nexport default connect(mapStateToProps)(Avatar);\n\nexport const unconnectedAvatar = Avatar;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport thunk, { ThunkMiddleware } from 'redux-thunk';\n\ntype RootReducer = typeof import('../rootReducer').default;\ntype State = import('../rootReducer').Store;\n\nconst middlewares = [thunk as ThunkMiddleware<State, any>];\nconst composed = [];\n\nif (process.env.NODE_ENV === 'development') {\n  const { __REDUX_DEVTOOLS_EXTENSION__ } = window as any;\n  composed.push(__REDUX_DEVTOOLS_EXTENSION__ ? __REDUX_DEVTOOLS_EXTENSION__() : (f: Function) => f);\n}\n\nconst finalCreateStore = compose(applyMiddleware(...middlewares), ...composed)(createStore);\n\nexport default function configureStore(rootReducer: RootReducer, initialState?: State) {\n  return finalCreateStore(rootReducer, initialState);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Store } from 'redux';\nimport { setAppState } from '../../store/appState';\nimport rootReducer, { Store as State } from '../../store/rootReducer';\nimport { receiveCurrentUser } from '../../store/users';\nimport configureStore from '../../store/utils/configureStore';\n\nlet store: Store<State, any>;\n\nconst createStore = (currentUser?: T.CurrentUser, appState?: T.AppState) => {\n  store = configureStore(rootReducer);\n  if (currentUser) {\n    store.dispatch(receiveCurrentUser(currentUser));\n  }\n  if (appState) {\n    store.dispatch(setAppState(appState));\n  }\n  return store;\n};\n\nexport default (currentUser?: T.CurrentUser, appState?: T.AppState) =>\n  store ? store : createStore(currentUser, appState);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqueId } from 'lodash';\nimport { Dispatch } from 'redux';\nimport { requireAuthorization } from './appState';\nimport { ActionType } from './utils/actions';\n\nenum MessageLevel {\n  Error = 'ERROR',\n  Success = 'SUCCESS'\n}\n\ninterface Message {\n  id: string;\n  message: string;\n  level: MessageLevel;\n}\n\nfunction addGlobalMessageActionCreator(id: string, message: string, level: MessageLevel) {\n  return { type: 'ADD_GLOBAL_MESSAGE', message, level, id };\n}\n\nexport function closeGlobalMessage(id: string) {\n  return { type: 'CLOSE_GLOBAL_MESSAGE', id };\n}\n\nexport function closeAllGlobalMessages() {\n  return { type: 'CLOSE_ALL_GLOBAL_MESSAGES' };\n}\n\ntype Action =\n  | ActionType<typeof addGlobalMessageActionCreator, 'ADD_GLOBAL_MESSAGE'>\n  | ActionType<typeof closeGlobalMessage, 'CLOSE_GLOBAL_MESSAGE'>\n  | ActionType<typeof closeAllGlobalMessages, 'CLOSE_ALL_GLOBAL_MESSAGES'>\n  | ActionType<typeof requireAuthorization, 'REQUIRE_AUTHORIZATION'>;\n\nfunction addGlobalMessage(message: string, level: MessageLevel) {\n  return (dispatch: Dispatch) => {\n    const id = uniqueId('global-message-');\n    dispatch(addGlobalMessageActionCreator(id, message, level));\n    setTimeout(() => dispatch(closeGlobalMessage(id)), 5000);\n  };\n}\n\nexport function addGlobalErrorMessage(message: string) {\n  return addGlobalMessage(message, MessageLevel.Error);\n}\n\nexport function addGlobalSuccessMessage(message: string) {\n  return addGlobalMessage(message, MessageLevel.Success);\n}\n\nexport type State = Message[];\n\nexport default function(state: State = [], action: Action): State {\n  switch (action.type) {\n    case 'ADD_GLOBAL_MESSAGE':\n      return [{ id: action.id, message: action.message, level: action.level }];\n\n    case 'REQUIRE_AUTHORIZATION':\n      // FIXME l10n\n      return [\n        {\n          id: uniqueId('global-message-'),\n          message:\n            'You are not authorized to access this page. ' +\n            'Please log in with more privileges and try again.',\n          level: MessageLevel.Error\n        }\n      ];\n\n    case 'CLOSE_GLOBAL_MESSAGE':\n      return state.filter(message => message.id !== action.id);\n\n    case 'CLOSE_ALL_GLOBAL_MESSAGES':\n      return [];\n    default:\n      return state;\n  }\n}\n\nexport function getGlobalMessages(state: State) {\n  return state;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum MetricKey {\n  alert_status = 'alert_status',\n  blocker_violations = 'blocker_violations',\n  branch_coverage = 'branch_coverage',\n  bugs = 'bugs',\n  burned_budget = 'burned_budget',\n  business_value = 'business_value',\n  class_complexity = 'class_complexity',\n  classes = 'classes',\n  code_smells = 'code_smells',\n  cognitive_complexity = 'cognitive_complexity',\n  comment_lines = 'comment_lines',\n  comment_lines_data = 'comment_lines_data',\n  comment_lines_density = 'comment_lines_density',\n  complexity = 'complexity',\n  complexity_in_classes = 'complexity_in_classes',\n  complexity_in_functions = 'complexity_in_functions',\n  conditions_to_cover = 'conditions_to_cover',\n  confirmed_issues = 'confirmed_issues',\n  coverage = 'coverage',\n  critical_violations = 'critical_violations',\n  development_cost = 'development_cost',\n  directories = 'directories',\n  duplicated_blocks = 'duplicated_blocks',\n  duplicated_files = 'duplicated_files',\n  duplicated_lines = 'duplicated_lines',\n  duplicated_lines_density = 'duplicated_lines_density',\n  duplications_data = 'duplications_data',\n  effort_to_reach_maintainability_rating_a = 'effort_to_reach_maintainability_rating_a',\n  executable_lines_data = 'executable_lines_data',\n  false_positive_issues = 'false_positive_issues',\n  file_complexity = 'file_complexity',\n  file_complexity_distribution = 'file_complexity_distribution',\n  filename_size = 'filename_size',\n  filename_size_rating = 'filename_size_rating',\n  files = 'files',\n  function_complexity = 'function_complexity',\n  function_complexity_distribution = 'function_complexity_distribution',\n  functions = 'functions',\n  generated_lines = 'generated_lines',\n  generated_ncloc = 'generated_ncloc',\n  info_violations = 'info_violations',\n  last_change_on_maintainability_rating = 'last_change_on_maintainability_rating',\n  last_change_on_releasability_rating = 'last_change_on_releasability_rating',\n  last_change_on_reliability_rating = 'last_change_on_reliability_rating',\n  last_change_on_security_rating = 'last_change_on_security_rating',\n  last_change_on_security_review_rating = 'last_change_on_security_review_rating',\n  last_commit_date = 'last_commit_date',\n  leak_projects = 'leak_projects',\n  line_coverage = 'line_coverage',\n  lines = 'lines',\n  lines_to_cover = 'lines_to_cover',\n  maintainability_rating_effort = 'maintainability_rating_effort',\n  major_violations = 'major_violations',\n  minor_violations = 'minor_violations',\n  ncloc = 'ncloc',\n  ncloc_data = 'ncloc_data',\n  ncloc_language_distribution = 'ncloc_language_distribution',\n  new_blocker_violations = 'new_blocker_violations',\n  new_branch_coverage = 'new_branch_coverage',\n  new_bugs = 'new_bugs',\n  new_code_smells = 'new_code_smells',\n  new_conditions_to_cover = 'new_conditions_to_cover',\n  new_coverage = 'new_coverage',\n  new_critical_violations = 'new_critical_violations',\n  new_development_cost = 'new_development_cost',\n  new_duplicated_blocks = 'new_duplicated_blocks',\n  new_duplicated_lines = 'new_duplicated_lines',\n  new_duplicated_lines_density = 'new_duplicated_lines_density',\n  new_info_violations = 'new_info_violations',\n  new_line_coverage = 'new_line_coverage',\n  new_lines = 'new_lines',\n  new_lines_to_cover = 'new_lines_to_cover',\n  new_maintainability_rating = 'new_maintainability_rating',\n  new_major_violations = 'new_major_violations',\n  new_minor_violations = 'new_minor_violations',\n  new_reliability_rating = 'new_reliability_rating',\n  new_reliability_remediation_effort = 'new_reliability_remediation_effort',\n  new_security_hotspots = 'new_security_hotspots',\n  new_security_hotspots_reviewed = 'new_security_hotspots_reviewed',\n  new_security_rating = 'new_security_rating',\n  new_security_remediation_effort = 'new_security_remediation_effort',\n  new_security_review_rating = 'new_security_review_rating',\n  new_sqale_debt_ratio = 'new_sqale_debt_ratio',\n  new_technical_debt = 'new_technical_debt',\n  new_uncovered_conditions = 'new_uncovered_conditions',\n  new_uncovered_lines = 'new_uncovered_lines',\n  new_violations = 'new_violations',\n  new_vulnerabilities = 'new_vulnerabilities',\n  open_issues = 'open_issues',\n  projects = 'projects',\n  public_api = 'public_api',\n  public_documented_api_density = 'public_documented_api_density',\n  public_undocumented_api = 'public_undocumented_api',\n  quality_gate_details = 'quality_gate_details',\n  quality_profiles = 'quality_profiles',\n  releasability_effort = 'releasability_effort',\n  releasability_rating = 'releasability_rating',\n  reliability_rating = 'reliability_rating',\n  reliability_rating_effort = 'reliability_rating_effort',\n  reliability_remediation_effort = 'reliability_remediation_effort',\n  reopened_issues = 'reopened_issues',\n  security_hotspots = 'security_hotspots',\n  security_hotspots_reviewed = 'security_hotspots_reviewed',\n  security_rating = 'security_rating',\n  security_rating_effort = 'security_rating_effort',\n  security_remediation_effort = 'security_remediation_effort',\n  security_review_rating = 'security_review_rating',\n  security_review_rating_effort = 'security_review_rating_effort',\n  skipped_tests = 'skipped_tests',\n  sonarjava_feedback = 'sonarjava_feedback',\n  sqale_debt_ratio = 'sqale_debt_ratio',\n  sqale_index = 'sqale_index',\n  sqale_rating = 'sqale_rating',\n  statements = 'statements',\n  team_at_sonarsource = 'team_at_sonarsource',\n  team_size = 'team_size',\n  test_errors = 'test_errors',\n  test_execution_time = 'test_execution_time',\n  test_failures = 'test_failures',\n  test_success_density = 'test_success_density',\n  tests = 'tests',\n  uncovered_conditions = 'uncovered_conditions',\n  uncovered_lines = 'uncovered_lines',\n  violations = 'violations',\n  vulnerabilities = 'vulnerabilities',\n  wont_fix_issues = 'wont_fix_issues'\n}\n\nexport function isMetricKey(key: string): key is MetricKey {\n  return (Object.values(MetricKey) as string[]).includes(key);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\nexport interface A11yContextShape {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n  links: T.A11ySkipLink[];\n}\n\nexport const A11yContext = createContext<A11yContextShape>({\n  addA11ySkipLink: () => {},\n  removeA11ySkipLink: () => {},\n  links: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getInstance } from '../../helpers/system';\n\ninterface Props {\n  children?: (transformedMessage: string) => React.ReactChild;\n  message: string;\n}\n\nexport default function InstanceMessage({ children, message }: Props): any {\n  const transformedMessage = message.replace(/\\{instance\\}/gim, getInstance());\n\n  if (children) {\n    return children(transformedMessage);\n  }\n\n  return transformedMessage;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { request } from 'sonar-ui-common/helpers/request';\n\nexport function login(login: string, password: string): Promise<Response> {\n  return request('/api/authentication/login')\n    .setMethod('POST')\n    .setData({ login, password })\n    .submit()\n    .then(basicCheckStatus);\n}\n\nexport function logout(): Promise<Response> {\n  return request('/api/authentication/logout')\n    .setMethod('POST')\n    .submit()\n    .then(basicCheckStatus);\n}\n\nfunction basicCheckStatus(response: Response): Promise<Response> {\n  if (response.status >= 200 && response.status < 300) {\n    return Promise.resolve(response);\n  } else {\n    return Promise.reject(response);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { InjectedRouter } from 'react-router';\nimport { Dispatch } from 'redux';\nimport * as auth from '../api/auth';\nimport { getLanguages } from '../api/languages';\nimport { getAllMetrics } from '../api/metrics';\nimport { getOrganization, getOrganizationNavigation, getOrganizations } from '../api/organizations';\nimport { getQualityGateProjectStatus } from '../api/quality-gates';\nimport { getBranchLikeQuery } from '../helpers/branch-like';\nimport { extractStatusConditionsFromProjectStatus } from '../helpers/qualityGates';\nimport { BranchLike } from '../types/branch-like';\nimport { requireAuthorization as requireAuthorizationAction } from './appState';\nimport { registerBranchStatusAction } from './branches';\nimport { addGlobalErrorMessage } from './globalMessages';\nimport { receiveLanguages } from './languages';\nimport { receiveMetrics } from './metrics';\nimport { receiveOrganizations } from './organizations';\n\nexport function fetchLanguages() {\n  return (dispatch: Dispatch) => {\n    getLanguages().then(\n      languages => dispatch(receiveLanguages(languages)),\n      () => {}\n    );\n  };\n}\n\nexport function fetchMetrics() {\n  return (dispatch: Dispatch) => {\n    getAllMetrics().then(\n      metrics => dispatch(receiveMetrics(metrics)),\n      () => {}\n    );\n  };\n}\n\nexport function fetchOrganizations(organizations: string[]) {\n  return (dispatch: Dispatch) => {\n    getOrganizations({ organizations: organizations && organizations.join() }).then(\n      r => dispatch(receiveOrganizations(r.organizations)),\n      () => {}\n    );\n  };\n}\n\nexport const fetchOrganization = (key: string) => (dispatch: Dispatch) => {\n  return Promise.all([getOrganization(key), getOrganizationNavigation(key)]).then(\n    ([organization, navigation]) => {\n      if (organization) {\n        const organizationWithPermissions = { ...organization, ...navigation };\n        dispatch(receiveOrganizations([organizationWithPermissions]));\n      }\n    }\n  );\n};\n\nexport function fetchBranchStatus(branchLike: BranchLike, projectKey: string) {\n  return (dispatch: Dispatch<any>) => {\n    getQualityGateProjectStatus({ projectKey, ...getBranchLikeQuery(branchLike) }).then(\n      projectStatus => {\n        const { ignoredConditions, status } = projectStatus;\n        const conditions = extractStatusConditionsFromProjectStatus(projectStatus);\n        dispatch(\n          registerBranchStatusAction(branchLike, projectKey, status, conditions, ignoredConditions)\n        );\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Fetching Quality Gate status failed'));\n      }\n    );\n  };\n}\n\nexport function doLogin(login: string, password: string) {\n  return (dispatch: Dispatch<any>) =>\n    auth.login(login, password).then(\n      () => {\n        /* everything is fine */\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Authentication failed'));\n        return Promise.reject();\n      }\n    );\n}\n\nexport function doLogout() {\n  return (dispatch: Dispatch<any>) =>\n    auth.logout().then(\n      () => {\n        /* everything is fine */\n      },\n      () => {\n        dispatch(addGlobalErrorMessage('Logout failed'));\n        return Promise.reject();\n      }\n    );\n}\n\nexport function requireAuthorization(router: Pick<InjectedRouter, 'replace'>) {\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n  router.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n  return requireAuthorizationAction();\n}\n\nexport function registerBranchStatus(branchLike: BranchLike, component: string, status: T.Status) {\n  return (dispatch: Dispatch) => {\n    dispatch(registerBranchStatusAction(branchLike, component, status));\n  };\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getLanguages(): Promise<T.Language[]> {\n  return getJSON('/api/languages/list').then(r => r.languages, throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getCurrentUser(): Promise<T.CurrentUser> {\n  return getJSON('/api/users/current');\n}\n\nexport function changePassword(data: {\n  login: string;\n  password: string;\n  previousPassword?: string;\n}) {\n  return post('/api/users/change_password', data).catch(throwGlobalError);\n}\n\nexport interface UserGroup {\n  default: boolean;\n  description: string;\n  id: number;\n  name: string;\n  selected: boolean;\n}\n\nexport function getUserGroups(data: {\n  login: string;\n  organization?: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  selected?: string;\n}): Promise<{ paging: T.Paging; groups: UserGroup[] }> {\n  return getJSON('/api/users/groups', data);\n}\n\nexport function getIdentityProviders(): Promise<{ identityProviders: T.IdentityProvider[] }> {\n  return getJSON('/api/users/identity_providers').catch(throwGlobalError);\n}\n\nexport function searchUsers(data: {\n  p?: number;\n  ps?: number;\n  q?: string;\n}): Promise<{ paging: T.Paging; users: T.User[] }> {\n  data.q = data.q || undefined;\n  return getJSON('/api/users/search', data).catch(throwGlobalError);\n}\n\nexport function createUser(data: {\n  email?: string;\n  local?: boolean;\n  login: string;\n  name: string;\n  password?: string;\n  scmAccount: string[];\n}): Promise<void | Response> {\n  return post('/api/users/create', data);\n}\n\nexport function updateUser(data: {\n  email?: string;\n  login: string;\n  name?: string;\n  scmAccount: string[];\n}): Promise<T.User> {\n  return postJSON('/api/users/update', {\n    ...data,\n    scmAccount: data.scmAccount.length > 0 ? data.scmAccount : ''\n  });\n}\n\nexport function deactivateUser(data: { login: string }): Promise<T.User> {\n  return postJSON('/api/users/deactivate', data).catch(throwGlobalError);\n}\n\nexport function skipOnboarding(): Promise<void | Response> {\n  return post('/api/users/skip_onboarding_tutorial').catch(throwGlobalError);\n}\n\nexport function setHomePage(homepage: T.HomePage): Promise<void | Response> {\n  return post('/api/users/set_homepage', homepage).catch(throwGlobalError);\n}\n\nexport function setUserSetting(setting: T.CurrentUserSetting): Promise<void | Response> {\n  return post('/api/users/set_setting', setting).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsBoolean,\n  parseAsDate,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { searchMembers } from '../../api/organizations';\nimport { searchUsers } from '../../api/users';\n\nexport interface Query {\n  assigned: boolean;\n  assignees: string[];\n  authors: string[];\n  createdAfter: Date | undefined;\n  createdAt: string;\n  createdBefore: Date | undefined;\n  createdInLast: string;\n  cwe: string[];\n  directories: string[];\n  files: string[];\n  issues: string[];\n  languages: string[];\n  modules: string[];\n  owaspTop10: string[];\n  projects: string[];\n  resolutions: string[];\n  resolved: boolean;\n  rules: string[];\n  sansTop25: string[];\n  severities: string[];\n  sinceLeakPeriod: boolean;\n  sonarsourceSecurity: string[];\n  sort: string;\n  statuses: string[];\n  tags: string[];\n  types: string[];\n}\n\nexport const STANDARDS = 'standards';\nexport const STANDARD_TYPES: T.StandardType[] = [\n  'owaspTop10',\n  'sansTop25',\n  'cwe',\n  'sonarsourceSecurity'\n];\n\n// allow sorting by CREATION_DATE only\nconst parseAsSort = (sort: string) => (sort === 'CREATION_DATE' ? 'CREATION_DATE' : '');\nconst ISSUES_DEFAULT = 'sonarqube.issues.default';\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    assigned: parseAsBoolean(query.assigned),\n    assignees: parseAsArray(query.assignees, parseAsString),\n    authors: parseAsArray(query.authors, parseAsString),\n    createdAfter: parseAsDate(query.createdAfter),\n    createdAt: parseAsString(query.createdAt),\n    createdBefore: parseAsDate(query.createdBefore),\n    createdInLast: parseAsString(query.createdInLast),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    directories: parseAsArray(query.directories, parseAsString),\n    files: parseAsArray(query.fileUuids, parseAsString),\n    issues: parseAsArray(query.issues, parseAsString),\n    languages: parseAsArray(query.languages, parseAsString),\n    modules: parseAsArray(query.moduleUuids, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    projects: parseAsArray(query.projects, parseAsString),\n    resolutions: parseAsArray(query.resolutions, parseAsString),\n    resolved: parseAsBoolean(query.resolved),\n    rules: parseAsArray(query.rules, parseAsString),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    severities: parseAsArray(query.severities, parseAsString),\n    sinceLeakPeriod: parseAsBoolean(query.sinceLeakPeriod, false),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    sort: parseAsSort(query.s),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function getOpen(query: T.RawQuery): string | undefined {\n  return query.open;\n}\n\nexport const areMyIssuesSelected = (query: T.RawQuery) => query.myIssues === 'true';\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  const filter = {\n    assigned: query.assigned ? undefined : 'false',\n    assignees: serializeStringArray(query.assignees),\n    authors: serializeStringArray(query.authors),\n    createdAfter: serializeDateShort(query.createdAfter),\n    createdAt: serializeString(query.createdAt),\n    createdBefore: serializeDateShort(query.createdBefore),\n    createdInLast: serializeString(query.createdInLast),\n    cwe: serializeStringArray(query.cwe),\n    directories: serializeStringArray(query.directories),\n    fileUuids: serializeStringArray(query.files),\n    issues: serializeStringArray(query.issues),\n    languages: serializeStringArray(query.languages),\n    moduleUuids: serializeStringArray(query.modules),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    projects: serializeStringArray(query.projects),\n    resolutions: serializeStringArray(query.resolutions),\n    resolved: query.resolved ? undefined : 'false',\n    rules: serializeStringArray(query.rules),\n    s: serializeString(query.sort),\n    sansTop25: serializeStringArray(query.sansTop25),\n    severities: serializeStringArray(query.severities),\n    sinceLeakPeriod: query.sinceLeakPeriod ? 'true' : undefined,\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  };\n  return cleanQuery(filter);\n}\n\nexport const areQueriesEqual = (a: T.RawQuery, b: T.RawQuery) =>\n  queriesEqual(parseQuery(a), parseQuery(b));\n\nexport interface RawFacet {\n  property: string;\n  values: Array<{ val: string; count: number }>;\n}\n\nexport interface Facet {\n  [value: string]: number;\n}\n\nexport function mapFacet(facet: string) {\n  const propertyMapping: T.Dict<string> = {\n    files: 'fileUuids',\n    modules: 'moduleUuids'\n  };\n  return propertyMapping[facet] || facet;\n}\n\nexport function parseFacets(facets: RawFacet[]): T.Dict<Facet> {\n  if (!facets) {\n    return {};\n  }\n\n  // for readability purpose\n  const propertyMapping: T.Dict<string> = {\n    fileUuids: 'files',\n    moduleUuids: 'modules'\n  };\n\n  const result: T.Dict<Facet> = {};\n  facets.forEach(facet => {\n    const values: Facet = {};\n    facet.values.forEach(value => {\n      values[value.val] = value.count;\n    });\n    const finalProperty = propertyMapping[facet.property] || facet.property;\n    result[finalProperty] = values;\n  });\n  return result;\n}\n\nexport function formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n\nexport interface ReferencedComponent {\n  key: string;\n  name: string;\n  organization: string;\n  path?: string;\n  uuid: string;\n}\n\nexport interface ReferencedLanguage {\n  name: string;\n}\n\nexport interface ReferencedRule {\n  langName?: string;\n  name: string;\n}\n\nexport const searchAssignees = (\n  query: string,\n  organization: string | undefined,\n  page = 1\n): Promise<{ paging: T.Paging; results: T.UserBase[] }> => {\n  return organization\n    ? searchMembers({ organization, p: page, ps: 50, q: query }).then(({ paging, users }) => ({\n        paging,\n        results: users\n      }))\n    : searchUsers({ p: page, q: query }).then(({ paging, users }) => ({ paging, results: users }));\n};\n\nconst LOCALSTORAGE_MY = 'my';\nconst LOCALSTORAGE_ALL = 'all';\n\nexport const isMySet = () => {\n  return get(ISSUES_DEFAULT) === LOCALSTORAGE_MY;\n};\n\nexport const saveMyIssues = (myIssues: boolean) =>\n  save(ISSUES_DEFAULT, myIssues ? LOCALSTORAGE_MY : LOCALSTORAGE_ALL);\n\nexport function getLocations(\n  { flows, secondaryLocations }: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  if (selectedFlowIndex !== undefined) {\n    return flows[selectedFlowIndex] || [];\n  } else {\n    return flows.length > 0 ? flows[0] : secondaryLocations;\n  }\n}\n\nexport function getSelectedLocation(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined,\n  selectedLocationIndex: number | undefined\n) {\n  const locations = getLocations(issue, selectedFlowIndex);\n  if (\n    selectedLocationIndex !== undefined &&\n    selectedLocationIndex >= 0 &&\n    locations.length >= selectedLocationIndex\n  ) {\n    return locations[selectedLocationIndex];\n  } else {\n    return undefined;\n  }\n}\n\nexport function allLocationsEmpty(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  return getLocations(issue, selectedFlowIndex).every(location => !location.msg);\n}\n\nexport function scrollToIssue(issue: string, smooth = true) {\n  const element = document.querySelector(`[data-issue=\"${issue}\"]`);\n  if (element) {\n    scrollToElement(element, { topOffset: 250, bottomOffset: 100, smooth });\n  }\n}\n\nexport function shouldOpenStandardsFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  return (\n    openFacets[STANDARDS] ||\n    isFilteredBySecurityIssueTypes(query) ||\n    isOneStandardChildFacetOpen(openFacets, query)\n  );\n}\n\nexport function shouldOpenStandardsChildFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>,\n  standardType: T.StandardType\n): boolean {\n  const filter = query[standardType];\n  return (\n    openFacets[STANDARDS] !== false &&\n    (openFacets[standardType] ||\n      (standardType !== 'cwe' && filter !== undefined && filter.length > 0))\n  );\n}\n\nexport function shouldOpenSonarSourceSecurityFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  // Open it by default if the parent is open, and no other standard is open.\n  return (\n    shouldOpenStandardsChildFacet(openFacets, query, 'sonarsourceSecurity') ||\n    (shouldOpenStandardsFacet(openFacets, query) && !isOneStandardChildFacetOpen(openFacets, query))\n  );\n}\n\nfunction isFilteredBySecurityIssueTypes(query: Partial<Query>): boolean {\n  return query.types !== undefined && query.types.includes('VULNERABILITY');\n}\n\nfunction isOneStandardChildFacetOpen(openFacets: T.Dict<boolean>, query: Partial<Query>): boolean {\n  return STANDARD_TYPES.some(standardType =>\n    shouldOpenStandardsChildFacet(openFacets, query, standardType)\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { colors } from '../app/theme';\n\nexport const SEVERITIES = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\nexport const STATUSES = ['OPEN', 'REOPENED', 'CONFIRMED', 'RESOLVED', 'CLOSED'];\nexport const ISSUE_TYPES: T.IssueType[] = [\n  'BUG',\n  'VULNERABILITY',\n  'CODE_SMELL',\n  'SECURITY_HOTSPOT'\n];\nexport const RULE_TYPES: T.RuleType[] = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\nexport const RULE_STATUSES = ['READY', 'BETA', 'DEPRECATED'];\n\nexport const CHART_COLORS_RANGE_PERCENT = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n\nexport const CHART_REVERSED_COLORS_RANGE_PERCENT = [\n  colors.red,\n  colors.orange,\n  colors.yellow,\n  colors.lightGreen,\n  colors.green\n];\n\nexport const RATING_COLORS = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInYears from 'date-fns/difference_in_years';\nimport { sortBy } from 'lodash';\nimport { isValidDate, parseDate } from 'sonar-ui-common/helpers/dates';\nimport { Profile as BaseProfile } from '../../api/quality-profiles';\nimport { Profile } from './types';\n\nexport function sortProfiles(profiles: BaseProfile[]): Profile[] {\n  const result: Profile[] = [];\n  const sorted = sortBy(profiles, 'name');\n\n  function retrieveChildren(parent: BaseProfile | null) {\n    return sorted.filter(\n      p => (parent == null && p.parentKey == null) || (parent != null && p.parentKey === parent.key)\n    );\n  }\n\n  function putProfile(profile: BaseProfile | null = null, depth: number = 1) {\n    const children = retrieveChildren(profile);\n\n    if (profile != null) {\n      result.push({ ...profile, childrenCount: children.length, depth });\n    }\n\n    children.forEach(child => putProfile(child, depth + 1));\n  }\n\n  sorted\n    .filter(\n      profile => profile.parentKey == null || sorted.find(p => p.key === profile.parentKey) == null\n    )\n    .forEach(profile => putProfile(profile));\n\n  return result;\n}\n\nexport function isStagnant(profile: Profile): boolean {\n  if (profile.rulesUpdatedAt) {\n    const updateDate = parseDate(profile.rulesUpdatedAt);\n    if (isValidDate(updateDate)) {\n      return differenceInYears(new Date(), updateDate) >= 1;\n    }\n  }\n  return false;\n}\n\nexport const getProfilesPath = (organization: string | null | undefined) =>\n  organization ? `/organizations/${organization}/quality_profiles` : '/profiles';\n\nexport const getProfilesForLanguagePath = (\n  language: string,\n  organization: string | null | undefined\n) => ({\n  pathname: getProfilesPath(organization),\n  query: { language }\n});\n\nexport const getProfilePath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined\n) => ({\n  pathname: getProfilesPath(organization) + '/show',\n  query: { name, language }\n});\n\nexport const getProfileComparePath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined,\n  withKey?: string\n) => {\n  const query = { language, name };\n  if (withKey) {\n    Object.assign(query, { withKey });\n  }\n  return {\n    pathname: getProfilesPath(organization) + '/compare',\n    query\n  };\n};\n\nexport const getProfileChangelogPath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined,\n  filter?: { since?: string; to?: string }\n) => {\n  const query = { language, name };\n  if (filter) {\n    if (filter.since) {\n      Object.assign(query, { since: filter.since });\n    }\n    if (filter.to) {\n      Object.assign(query, { to: filter.to });\n    }\n  }\n  return {\n    pathname: getProfilesPath(organization) + '/changelog',\n    query\n  };\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getOrganizations(data: {\n  organizations?: string;\n  member?: boolean;\n}): Promise<{\n  organizations: T.Organization[];\n  paging: T.Paging;\n}> {\n  return getJSON('/api/organizations/search', data).catch(throwGlobalError);\n}\n\nexport function getOrganization(key: string): Promise<T.Organization | undefined> {\n  return getJSON('/api/organizations/search', { organizations: key }).then(\n    r => r.organizations.find((o: T.Organization) => o.key === key),\n    throwGlobalError\n  );\n}\n\ninterface GetOrganizationNavigation {\n  adminPages: T.Extension[];\n  alm?: { key: string; membersSync: boolean; personal: boolean; url: string };\n  canUpdateProjectsVisibilityToPrivate: boolean;\n  isDefault: boolean;\n  pages: T.Extension[];\n}\n\nexport function getOrganizationNavigation(key: string): Promise<GetOrganizationNavigation> {\n  return getJSON('/api/navigation/organization', { organization: key }).then(\n    r => r.organization,\n    throwGlobalError\n  );\n}\n\nexport function getOrganizationsThatPreventDeletion(): Promise<{\n  organizations: T.Organization[];\n}> {\n  return getJSON('/api/organizations/prevent_user_deletion').catch(throwGlobalError);\n}\n\nexport function createOrganization(\n  data: T.OrganizationBase & { installationId?: string }\n): Promise<T.Organization> {\n  return postJSON('/api/organizations/create', data).then(r => r.organization, throwGlobalError);\n}\n\nexport function updateOrganization(key: string, changes: T.OrganizationBase) {\n  return post('/api/organizations/update', { key, ...changes }).catch(throwGlobalError);\n}\n\nexport function deleteOrganization(key: string) {\n  return post('/api/organizations/delete', { key }).catch(throwGlobalError);\n}\n\nexport function searchMembers(data: {\n  organization?: string;\n  p?: number;\n  ps?: number;\n  q?: string;\n  selected?: string;\n}): Promise<{ paging: T.Paging; users: T.OrganizationMember[] }> {\n  return getJSON('/api/organizations/search_members', data).catch(throwGlobalError);\n}\n\nexport function addMember(data: {\n  login: string;\n  organization: string;\n}): Promise<T.OrganizationMember> {\n  return postJSON('/api/organizations/add_member', data).then(r => r.user, throwGlobalError);\n}\n\nexport function removeMember(data: { login: string; organization: string }) {\n  return post('/api/organizations/remove_member', data).catch(throwGlobalError);\n}\n\nexport interface OrganizationBilling {\n  nclocCount: number;\n  subscription: {\n    plan?: {\n      maxNcloc: number;\n      price: number;\n    };\n    nextBillingDate?: string;\n    status: 'active' | 'inactive' | 'suspended';\n    trial: boolean;\n  };\n}\n\nexport function getOrganizationBilling(organization: string): Promise<OrganizationBilling> {\n  return getJSON('/api/billing/show', { organization, p: 1, ps: 1 });\n}\n\nexport function setOrganizationMemberSync(data: { enabled: boolean; organization: string }) {\n  return post('/api/organizations/set_members_sync', data).catch(throwGlobalError);\n}\n\nexport function syncMembers(organization: string) {\n  return post('/api/organizations/sync_members', { organization }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport { QualityGateApplicationStatus, QualityGateProjectStatus } from '../types/quality-gates';\n\nexport function fetchQualityGates(data: {\n  organization?: string;\n}): Promise<{\n  actions: { create: boolean };\n  qualitygates: T.QualityGate[];\n}> {\n  return getJSON('/api/qualitygates/list', data).catch(throwGlobalError);\n}\n\nexport function fetchQualityGate(data: {\n  id: number | string;\n  organization?: string;\n}): Promise<T.QualityGate> {\n  return getJSON('/api/qualitygates/show', data).catch(throwGlobalError);\n}\n\nexport function createQualityGate(data: {\n  name: string;\n  organization?: string;\n}): Promise<T.QualityGate> {\n  return postJSON('/api/qualitygates/create', data).catch(throwGlobalError);\n}\n\nexport function deleteQualityGate(data: {\n  id: number;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/destroy', data).catch(throwGlobalError);\n}\n\nexport function renameQualityGate(data: {\n  id: number;\n  name: string;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/rename', data).catch(throwGlobalError);\n}\n\nexport function copyQualityGate(data: {\n  id: number;\n  name: string;\n  organization?: string;\n}): Promise<T.QualityGate> {\n  return postJSON('/api/qualitygates/copy', data).catch(throwGlobalError);\n}\n\nexport function setQualityGateAsDefault(data: {\n  id: number;\n  organization?: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/set_as_default', data).catch(throwGlobalError);\n}\n\nexport function createCondition(\n  data: {\n    gateId: number;\n    organization?: string;\n  } & T.Omit<T.Condition, 'id'>\n): Promise<T.Condition> {\n  return postJSON('/api/qualitygates/create_condition', data).catch(throwGlobalError);\n}\n\nexport function updateCondition(\n  data: { organization?: string } & T.Condition\n): Promise<T.Condition> {\n  return postJSON('/api/qualitygates/update_condition', data).catch(throwGlobalError);\n}\n\nexport function deleteCondition(data: { id: number; organization?: string }): Promise<void> {\n  return post('/api/qualitygates/delete_condition', data);\n}\n\nexport function getGateForProject(data: {\n  organization?: string;\n  project: string;\n}): Promise<T.QualityGate | undefined> {\n  return getJSON('/api/qualitygates/get_by_project', data).then(\n    ({ qualityGate }) =>\n      qualityGate && {\n        ...qualityGate,\n        isDefault: qualityGate.default\n      },\n    throwGlobalError\n  );\n}\n\nexport function searchProjects(data: {\n  gateId: number;\n  organization?: string;\n  page?: number;\n  pageSize?: number;\n  query?: string;\n  selected?: string;\n}): Promise<{\n  paging: T.Paging;\n  results: Array<{ key: string; name: string; selected: boolean }>;\n}> {\n  return getJSON('/api/qualitygates/search', data).catch(throwGlobalError);\n}\n\nexport function associateGateWithProject(data: {\n  gateId: number;\n  organization?: string;\n  projectKey: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/select', data).catch(throwGlobalError);\n}\n\nexport function dissociateGateWithProject(data: {\n  gateId: number;\n  organization?: string;\n  projectKey: string;\n}): Promise<void | Response> {\n  return post('/api/qualitygates/deselect', data).catch(throwGlobalError);\n}\n\nexport function getApplicationQualityGate(data: {\n  application: string;\n  branch?: string;\n  organization?: string;\n}): Promise<QualityGateApplicationStatus> {\n  return getJSON('/api/qualitygates/application_status', data).catch(throwGlobalError);\n}\n\nexport function getQualityGateProjectStatus(\n  data: {\n    projectKey?: string;\n    projectId?: string;\n  } & BranchParameters\n): Promise<QualityGateProjectStatus> {\n  return getJSON('/api/qualitygates/project_status', data)\n    .then(r => r.projectStatus)\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport default function GlobalFooterBranding() {\n  const { official } = window as any;\n  return official ? (\n    <div>\n      SonarQube&trade; technology is powered by{' '}\n      <a href=\"http://www.sonarsource.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n        SonarSource SA\n      </a>\n    </div>\n  ) : (\n    <div>\n      This application is based on{' '}\n      <a\n        href=\"http://www.sonarqube.org/\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarQube™\">\n        SonarQube™\n      </a>{' '}\n      but is <strong>not</strong> an official version provided by{' '}\n      <a\n        href=\"http://www.sonarsource.com\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarSource SA\">\n        SonarSource SA\n      </a>\n      .\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as getYear from 'date-fns/get_year';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport default function GlobalFooterSonarCloud() {\n  return (\n    <div className=\"page-footer page-container\" id=\"footer\">\n      <div>\n        {`© 2008-${getYear(new Date())}, SonarCloud by `}\n        <a\n          href=\"http://www.sonarsource.com\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          title=\"SonarSource SA\">\n          SonarSource SA\n        </a>\n        . All rights reserved.\n      </div>\n\n      <ul className=\"page-footer-menu\">\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://blog.sonarsource.com/product/SonarCloud\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.news')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://twitter.com/sonarcloud\" rel=\"noopener noreferrer\" target=\"_blank\">\n            {translate('footer.twitter')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link rel=\"noopener noreferrer\" target=\"_blank\" to=\"/terms.pdf\">\n            {translate('footer.terms')}\n          </Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about/pricing/\">{translate('footer.pricing')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation/privacy/\">{translate('footer.privacy')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation/security/\">{translate('footer.security')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://community.sonarsource.com/c/help/sc\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.help')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about/contact\">{translate('footer.contact_us')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://sonarcloud.statuspage.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n            {translate('footer.status')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about\">{translate('footer.about')}</Link>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooter from './GlobalFooter';\n\ninterface StateProps {\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  productionDatabase: getAppState(state).productionDatabase,\n  sonarqubeEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  sonarqubeVersion: getAppState(state).version\n});\n\nexport default connect(mapStateToProps)(GlobalFooter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../components/common/InstanceMessage';\nimport { getEdition } from '../../helpers/editions';\nimport { isSonarCloud } from '../../helpers/system';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooterBranding from './GlobalFooterBranding';\nimport GlobalFooterSonarCloud from './GlobalFooterSonarCloud';\n\ninterface Props {\n  hideLoggedInInfo?: boolean;\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nexport default function GlobalFooter({\n  hideLoggedInInfo,\n  productionDatabase,\n  sonarqubeEdition,\n  sonarqubeVersion\n}: Props) {\n  if (isSonarCloud()) {\n    return <GlobalFooterSonarCloud />;\n  }\n\n  const currentEdition = sonarqubeEdition && getEdition(sonarqubeEdition);\n\n  return (\n    <div className=\"page-footer page-container\" id=\"footer\">\n      {productionDatabase === false && (\n        <Alert display=\"inline\" id=\"evaluation_warning\" variant=\"warning\">\n          <p className=\"big\">{translate('footer.production_database_warning')}</p>\n          <p>\n            <InstanceMessage message={translate('footer.production_database_explanation')} />\n          </p>\n        </Alert>\n      )}\n\n      <GlobalFooterBranding />\n\n      <ul className=\"page-footer-menu\">\n        {!hideLoggedInInfo && currentEdition && (\n          <li className=\"page-footer-menu-item\">{currentEdition.name}</li>\n        )}\n        {!hideLoggedInInfo && sonarqubeVersion && (\n          <li className=\"page-footer-menu-item\">\n            {translateWithParameters('footer.version_x', sonarqubeVersion)}\n          </li>\n        )}\n        <li className=\"page-footer-menu-item\">\n          <a href=\"http://www.gnu.org/licenses/lgpl-3.0.txt\">{translate('footer.license')}</a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"http://www.sonarqube.org\">{translate('footer.community')}</a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation\">{translate('footer.documentation')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://redirect.sonarsource.com/doc/community.html\">\n            {translate('footer.support')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://redirect.sonarsource.com/doc/plugin-library.html\">\n            {translate('footer.plugins')}\n          </a>\n        </li>\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/web_api\">{translate('footer.web_api')}</Link>\n          </li>\n        )}\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/about\">{translate('footer.about')}</Link>\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\n\nexport const DEFAULT_CATEGORY = 'general';\n\nexport type DefaultSpecializedInputProps = T.Omit<DefaultInputProps, 'setting'> & {\n  isDefault: boolean;\n  name: string;\n};\n\nexport interface DefaultInputProps {\n  hasValueChanged?: boolean;\n  onCancel?: () => void;\n  onChange: (value: any) => void;\n  onSave?: () => void;\n  setting: T.Setting;\n  value: any;\n}\n\nexport function sanitizeTranslation(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul']\n  });\n}\n\nexport function getPropertyName(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.name`;\n  return hasMessage(key) ? translate(key) : definition.name;\n}\n\nexport function getPropertyDescription(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.description`;\n  return hasMessage(key) ? translate(key) : definition.description;\n}\n\nexport function getCategoryName(category: string) {\n  const key = `property.category.${category}`;\n  return hasMessage(key) ? translate(key) : category;\n}\n\nexport function getSubCategoryName(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}`;\n  return hasMessage(key) ? translate(key) : getCategoryName(subCategory);\n}\n\nexport function getSubCategoryDescription(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}.description`;\n  return hasMessage(key) ? translate(key) : null;\n}\n\nexport function getUniqueName(definition: T.SettingDefinition, index?: string) {\n  const indexSuffix = index ? `[${index}]` : '';\n  return `settings[${definition.key}]${indexSuffix}`;\n}\n\nexport function getSettingValue({ definition, fieldValues, value, values }: T.Setting) {\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    return values;\n  } else if (definition.type === 'PROPERTY_SET') {\n    return fieldValues;\n  } else {\n    return value;\n  }\n}\n\nexport function isEmptyValue(definition: T.SettingDefinition, value: any) {\n  if (value == null) {\n    return true;\n  } else if (definition.type === 'BOOLEAN') {\n    return false;\n  } else {\n    return value.length === 0;\n  }\n}\n\nexport function isCategoryDefinition(\n  item: T.SettingDefinition\n): item is T.SettingCategoryDefinition {\n  return Boolean((item as any).fields);\n}\n\nexport function getEmptyValue(item: T.SettingDefinition | T.SettingCategoryDefinition): any {\n  if (isCategoryDefinition(item)) {\n    if (item.multiValues) {\n      return [getEmptyValue({ ...item, multiValues: false })];\n    }\n\n    if (item.type === 'PROPERTY_SET') {\n      const value: T.Dict<string> = {};\n      item.fields.forEach(field => (value[field.key] = getEmptyValue(field)));\n      return [value];\n    }\n  }\n\n  if (item.type === 'BOOLEAN' || item.type === 'SINGLE_SELECT_LIST') {\n    return null;\n  }\n  return '';\n}\n\nexport function isDefaultOrInherited(setting: T.Setting) {\n  return Boolean(setting.inherited);\n}\n\nexport function getDefaultValue(setting: T.Setting) {\n  const { definition, parentFieldValues, parentValue, parentValues } = setting;\n\n  if (definition.type === 'PASSWORD') {\n    return translate('settings.default.password');\n  }\n\n  if (definition.type === 'BOOLEAN' && parentValue) {\n    const isTrue = parentValue === 'true';\n    return isTrue ? translate('settings.boolean.true') : translate('settings.boolean.false');\n  }\n\n  if (\n    isCategoryDefinition(definition) &&\n    definition.multiValues &&\n    parentValues &&\n    parentValues.length > 0\n  ) {\n    return parentValues.join(', ');\n  }\n\n  if (definition.type === 'PROPERTY_SET' && parentFieldValues && parentFieldValues.length > 0) {\n    return translate('settings.default.complex_value');\n  }\n\n  if (parentValue == null) {\n    return isCategoryDefinition(definition) && definition.defaultValue\n      ? definition.defaultValue\n      : translate('settings.default.no_value');\n  }\n\n  return parentValue;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport { combineReducers, Dispatch } from 'redux';\nimport * as api from '../api/users';\nimport { isLoggedIn } from '../helpers/users';\nimport { ActionType } from './utils/actions';\n\nconst enum Actions {\n  ReceiveCurrentUser = 'RECEIVE_CURRENT_USER',\n  SetCurrentUserSetting = 'SET_CURRENT_USER_SETTING',\n  SkipOnboardingAction = 'SKIP_ONBOARDING',\n  SetHomePageAction = 'SET_HOMEPAGE'\n}\n\ntype Action =\n  | ActionType<typeof receiveCurrentUser, Actions.ReceiveCurrentUser>\n  | ActionType<typeof setCurrentUserSettingAction, Actions.SetCurrentUserSetting>\n  | ActionType<typeof setHomePageAction, Actions.SetHomePageAction>\n  | ActionType<typeof skipOnboardingAction, Actions.SkipOnboardingAction>;\n\nexport interface State {\n  usersByLogin: T.Dict<any>;\n  userLogins: string[];\n  currentUser: T.CurrentUser;\n}\n\nexport function receiveCurrentUser(user: T.CurrentUser) {\n  return { type: Actions.ReceiveCurrentUser, user };\n}\n\nexport function skipOnboardingAction() {\n  return { type: Actions.SkipOnboardingAction };\n}\n\nexport function skipOnboarding() {\n  return (dispatch: Dispatch) =>\n    api.skipOnboarding().then(\n      () => dispatch(skipOnboardingAction()),\n      () => dispatch(skipOnboardingAction())\n    );\n}\n\nexport function setHomePageAction(homepage: T.HomePage) {\n  return { type: Actions.SetHomePageAction, homepage };\n}\n\nexport function setCurrentUserSettingAction(setting: T.CurrentUserSetting) {\n  return { type: Actions.SetCurrentUserSetting, setting };\n}\n\nexport function setHomePage(homepage: T.HomePage) {\n  return (dispatch: Dispatch) => {\n    api.setHomePage(homepage).then(\n      () => {\n        dispatch(setHomePageAction(homepage));\n      },\n      () => {}\n    );\n  };\n}\n\nexport function setCurrentUserSetting(setting: T.CurrentUserSetting) {\n  return (dispatch: Dispatch, getState: () => { users: State }) => {\n    const oldSetting = getCurrentUserSetting(getState().users, setting.key);\n    dispatch(setCurrentUserSettingAction(setting));\n    api.setUserSetting(setting).then(\n      () => {},\n      () => {\n        dispatch(setCurrentUserSettingAction({ ...setting, value: oldSetting || '' }));\n      }\n    );\n  };\n}\n\nfunction usersByLogin(state: State['usersByLogin'] = {}, action: Action): State['usersByLogin'] {\n  if (action.type === Actions.ReceiveCurrentUser && isLoggedIn(action.user)) {\n    return { ...state, [action.user.login]: action.user };\n  } else {\n    return state;\n  }\n}\n\nfunction userLogins(state: State['userLogins'] = [], action: Action): State['userLogins'] {\n  if (action.type === Actions.ReceiveCurrentUser && isLoggedIn(action.user)) {\n    return uniq([...state, action.user.login]);\n  } else {\n    return state;\n  }\n}\n\nfunction currentUser(\n  state: State['currentUser'] = { isLoggedIn: false },\n  action: Action\n): State['currentUser'] {\n  if (action.type === Actions.ReceiveCurrentUser) {\n    return action.user;\n  }\n  if (action.type === Actions.SkipOnboardingAction && isLoggedIn(state)) {\n    return { ...state, showOnboardingTutorial: false } as T.LoggedInUser;\n  }\n  if (action.type === Actions.SetHomePageAction && isLoggedIn(state)) {\n    return { ...state, homepage: action.homepage } as T.LoggedInUser;\n  }\n  if (action.type === Actions.SetCurrentUserSetting && isLoggedIn(state)) {\n    let settings: T.CurrentUserSetting[];\n    if (state.settings) {\n      settings = [...state.settings];\n      const index = settings.findIndex(setting => setting.key === action.setting.key);\n      if (index === -1) {\n        settings.push(action.setting);\n      } else {\n        settings[index] = action.setting;\n      }\n    } else {\n      settings = [action.setting];\n    }\n    return { ...state, settings } as T.LoggedInUser;\n  }\n  return state;\n}\n\nexport default combineReducers({ usersByLogin, userLogins, currentUser });\n\nexport function getCurrentUser(state: State) {\n  return state.currentUser;\n}\n\nexport function getCurrentUserSetting(state: State, key: T.CurrentUserSettingNames) {\n  let setting;\n  if (isLoggedIn(state.currentUser) && state.currentUser.settings) {\n    setting = state.currentUser.settings.find(setting => setting.key === key);\n  }\n  return setting && setting.value;\n}\n\nexport function getUserByLogin(state: State, login: string) {\n  return state.usersByLogin[login];\n}\n\nexport function getUsersByLogins(state: State, logins: string[]) {\n  return logins.map(login => getUserByLogin(state, login));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ActionType } from './utils/actions';\n\nexport const enum Actions {\n  SetAppState = 'SET_APP_STATE',\n  SetAdminPages = 'SET_ADMIN_PAGES',\n  RequireAuthorization = 'REQUIRE_AUTHORIZATION'\n}\n\nexport type Action =\n  | ActionType<typeof setAppState, Actions.SetAppState>\n  | ActionType<typeof setAdminPages, Actions.SetAdminPages>\n  | ActionType<typeof requireAuthorization, Actions.RequireAuthorization>;\n\nexport function setAppState(appState: T.AppState) {\n  return { type: Actions.SetAppState, appState };\n}\n\nexport function setAdminPages(adminPages: T.Extension[]) {\n  return { type: Actions.SetAdminPages, adminPages };\n}\n\nexport function requireAuthorization() {\n  return { type: Actions.RequireAuthorization };\n}\n\nconst defaultValue: T.AppState = {\n  authenticationError: false,\n  authorizationError: false,\n  defaultOrganization: '',\n  edition: undefined,\n  organizationsEnabled: false,\n  productionDatabase: true,\n  qualifiers: [],\n  settings: {},\n  version: ''\n};\n\nexport default function(state: T.AppState = defaultValue, action: Action): T.AppState {\n  if (action.type === Actions.SetAppState) {\n    return { ...state, ...action.appState };\n  }\n  if (action.type === Actions.SetAdminPages) {\n    return { ...state, adminPages: action.adminPages };\n  }\n  if (action.type === Actions.RequireAuthorization) {\n    return { ...state, authorizationError: true };\n  }\n  return state;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getMeasures(\n  data: { component: string; metricKeys: string } & BranchParameters\n): Promise<T.Measure[]> {\n  return getJSON('/api/measures/component', data).then(r => r.component.measures, throwGlobalError);\n}\n\ninterface MeasuresAndMetaWithMetrics {\n  component: T.ComponentMeasure;\n  metrics: T.Metric[];\n}\n\nexport function getMeasuresWithMetrics(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithMetrics> {\n  return getJSON('/api/measures/component', {\n    additionalFields: 'metrics',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\ninterface MeasuresAndMetaWithPeriod {\n  component: T.ComponentMeasure;\n  period: T.Period;\n}\n\nexport function getMeasuresWithPeriod(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithPeriod> {\n  return getJSON('/api/measures/component', {\n    additionalFields: 'period',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\nexport function getMeasuresWithPeriodAndMetrics(\n  component: string,\n  metrics: string[],\n  branchParameters?: BranchParameters\n): Promise<MeasuresAndMetaWithPeriod & MeasuresAndMetaWithMetrics> {\n  return getJSON('/api/measures/component', {\n    additionalFields: 'period,metrics',\n    component,\n    metricKeys: metrics.join(','),\n    ...branchParameters\n  }).catch(throwGlobalError);\n}\n\ninterface MeasuresForProjects {\n  component: string;\n  metric: string;\n  periods?: T.PeriodMeasure[];\n  value?: string;\n}\n\nexport function getMeasuresForProjects(\n  projectKeys: string[],\n  metricKeys: string[]\n): Promise<MeasuresForProjects[]> {\n  return getJSON('/api/measures/search', {\n    projectKeys: projectKeys.join(),\n    metricKeys: metricKeys.join()\n  }).then(r => r.measures);\n}\n\nexport function getCustomMeasures(data: {\n  f?: string;\n  p?: number;\n  projectKey: string;\n  ps?: number;\n}): Promise<{ customMeasures: T.CustomMeasure[]; paging: T.Paging }> {\n  return getJSON('/api/custom_measures/search', data).then(\n    r =>\n      ({\n        customMeasures: r.customMeasures,\n        paging: { pageIndex: r.p, pageSize: r.ps, total: r.total }\n      } as any),\n    throwGlobalError\n  );\n}\n\nexport function createCustomMeasure(data: {\n  description?: string;\n  metricKey: string;\n  projectKey: string;\n  value: string;\n}): Promise<T.CustomMeasure> {\n  return postJSON('/api/custom_measures/create', data).catch(throwGlobalError);\n}\n\nexport function updateCustomMeasure(data: { description?: string; id: string; value?: string }) {\n  return post('/api/custom_measures/update', data).catch(throwGlobalError);\n}\n\nexport function deleteCustomMeasure(data: { id: string }) {\n  return post('/api/custom_measures/delete', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { invert, uniq } from 'lodash';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { RequestData } from 'sonar-ui-common/helpers/request';\nimport { Facet, searchProjects } from '../../api/components';\nimport { getMeasuresForProjects } from '../../api/measures';\nimport { getOrganizations } from '../../api/organizations';\nimport { getPeriodValue, isDiffMetric } from '../../helpers/measures';\nimport { MetricKey } from '../../types/metrics';\nimport { convertToFilter, Query } from './query';\n\ninterface SortingOption {\n  class?: string;\n  value: string;\n}\n\nexport const PROJECTS_DEFAULT_FILTER = 'sonarqube.projects.default';\nexport const PROJECTS_FAVORITE = 'favorite';\nexport const PROJECTS_ALL = 'all';\n\nexport const SORTING_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'reliability' },\n  { value: 'security' },\n  { value: 'maintainability' },\n  { value: 'coverage' },\n  { value: 'duplications' },\n  { value: 'size' }\n];\n\nexport const SORTING_LEAK_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'new_reliability', class: 'projects-leak-sorting-option' },\n  { value: 'new_security', class: 'projects-leak-sorting-option' },\n  { value: 'new_maintainability', class: 'projects-leak-sorting-option' },\n  { value: 'new_coverage', class: 'projects-leak-sorting-option' },\n  { value: 'new_duplications', class: 'projects-leak-sorting-option' },\n  { value: 'new_lines', class: 'projects-leak-sorting-option' }\n];\n\nexport const SORTING_SWITCH: T.Dict<string> = {\n  analysis_date: 'analysis_date',\n  name: 'name',\n  reliability: 'new_reliability',\n  security: 'new_security',\n  maintainability: 'new_maintainability',\n  coverage: 'new_coverage',\n  duplications: 'new_duplications',\n  size: 'new_lines',\n  new_reliability: 'reliability',\n  new_security: 'security',\n  new_maintainability: 'maintainability',\n  new_coverage: 'coverage',\n  new_duplications: 'duplications',\n  new_lines: 'size'\n};\n\nexport const VIEWS = [\n  { value: 'overall', label: 'overall' },\n  { value: 'leak', label: 'new_code' }\n];\n\nexport const VISUALIZATIONS = [\n  'risk',\n  'reliability',\n  'security',\n  'maintainability',\n  'coverage',\n  'duplications'\n];\n\nconst PAGE_SIZE = 50;\nconst PAGE_SIZE_VISUALIZATIONS = 99;\n\nconst METRICS = [\n  MetricKey.alert_status,\n  MetricKey.bugs,\n  MetricKey.reliability_rating,\n  MetricKey.vulnerabilities,\n  MetricKey.security_rating,\n  MetricKey.security_hotspots_reviewed,\n  MetricKey.security_review_rating,\n  MetricKey.code_smells,\n  MetricKey.sqale_rating,\n  MetricKey.duplicated_lines_density,\n  MetricKey.coverage,\n  MetricKey.ncloc,\n  MetricKey.ncloc_language_distribution,\n  MetricKey.projects\n];\n\nconst LEAK_METRICS = [\n  MetricKey.alert_status,\n  MetricKey.new_bugs,\n  MetricKey.new_reliability_rating,\n  MetricKey.new_vulnerabilities,\n  MetricKey.new_security_rating,\n  MetricKey.new_security_hotspots_reviewed,\n  MetricKey.new_security_review_rating,\n  MetricKey.new_code_smells,\n  MetricKey.new_maintainability_rating,\n  MetricKey.new_coverage,\n  MetricKey.new_duplicated_lines_density,\n  MetricKey.new_lines,\n  MetricKey.projects\n];\n\nconst METRICS_BY_VISUALIZATION: T.Dict<string[]> = {\n  risk: [\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.coverage,\n    MetricKey.ncloc,\n    MetricKey.sqale_index\n  ],\n  // x, y, size, color\n  reliability: [\n    MetricKey.ncloc,\n    MetricKey.reliability_remediation_effort,\n    MetricKey.bugs,\n    MetricKey.reliability_rating\n  ],\n  security: [\n    MetricKey.ncloc,\n    MetricKey.security_remediation_effort,\n    MetricKey.vulnerabilities,\n    MetricKey.security_rating\n  ],\n  maintainability: [\n    MetricKey.ncloc,\n    MetricKey.sqale_index,\n    MetricKey.code_smells,\n    MetricKey.sqale_rating\n  ],\n  coverage: [MetricKey.complexity, MetricKey.coverage, MetricKey.uncovered_lines],\n  duplications: [MetricKey.ncloc, MetricKey.duplicated_lines_density, MetricKey.duplicated_blocks]\n};\n\nexport const FACETS = [\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating',\n  'sqale_rating',\n  'coverage',\n  'duplicated_lines_density',\n  'ncloc',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nexport const LEAK_FACETS = [\n  'new_reliability_rating',\n  'new_security_rating',\n  'new_security_review_rating',\n  'new_maintainability_rating',\n  'new_coverage',\n  'new_duplicated_lines_density',\n  'new_lines',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nconst REVERSED_FACETS = ['coverage', 'new_coverage'];\n\nexport function localizeSorting(sort?: string): string {\n  return translate('projects.sort', sort || 'name');\n}\n\nexport function parseSorting(sort: string): { sortValue: string; sortDesc: boolean } {\n  const desc = sort[0] === '-';\n  return { sortValue: desc ? sort.substr(1) : sort, sortDesc: desc };\n}\n\nexport function fetchProjects(\n  query: Query,\n  isFavorite: boolean,\n  organization: T.Organization | undefined,\n  pageIndex = 1\n) {\n  const ps = query.view === 'visualizations' ? PAGE_SIZE_VISUALIZATIONS : PAGE_SIZE;\n  const data = convertToQueryData(query, isFavorite, organization && organization.key, {\n    p: pageIndex > 1 ? pageIndex : undefined,\n    ps,\n    facets: defineFacets(query).join(),\n    f: 'analysisDate,leakPeriodDate'\n  });\n  return searchProjects(data)\n    .then(response =>\n      Promise.all([\n        fetchProjectMeasures(response.components, query),\n        fetchProjectOrganizations(response.components, organization),\n        Promise.resolve(response)\n      ])\n    )\n    .then(([measures, organizations, { components, facets, paging }]) => {\n      return {\n        facets: getFacetsMap(facets),\n        projects: components\n          .map(component => {\n            const componentMeasures: T.Dict<string> = {};\n            measures\n              .filter(measure => measure.component === component.key)\n              .forEach(measure => {\n                const value = isDiffMetric(measure.metric)\n                  ? getPeriodValue(measure, 1)\n                  : measure.value;\n                if (value !== undefined) {\n                  componentMeasures[measure.metric] = value;\n                }\n              });\n            return { ...component, measures: componentMeasures };\n          })\n          .map(component => {\n            const organization = organizations.find(o => o.key === component.organization);\n            return { ...component, organization };\n          }),\n        total: paging.total\n      };\n    });\n}\n\nfunction defineMetrics(query: Query): string[] {\n  switch (query.view) {\n    case 'visualizations':\n      return METRICS_BY_VISUALIZATION[query.visualization || 'risk'];\n    case 'leak':\n      return LEAK_METRICS;\n    default:\n      return METRICS;\n  }\n}\n\nfunction defineFacets(query: Query): string[] {\n  if (query.view === 'leak') {\n    return LEAK_FACETS;\n  }\n  return FACETS;\n}\n\nfunction convertToQueryData(\n  query: Query,\n  isFavorite: boolean,\n  organization?: string,\n  defaultData = {}\n) {\n  const data: RequestData = { ...defaultData, organization };\n  const filter = convertToFilter(query, isFavorite);\n  const sort = convertToSorting(query);\n\n  if (filter) {\n    data.filter = filter;\n  }\n  if (sort.s) {\n    data.s = sort.s;\n  }\n  if (sort.asc !== undefined) {\n    data.asc = sort.asc;\n  }\n  return data;\n}\n\nexport function fetchProjectMeasures(projects: Array<{ key: string }>, query: Query) {\n  if (!projects.length) {\n    return Promise.resolve([]);\n  }\n\n  const projectKeys = projects.map(project => project.key);\n  const metrics = defineMetrics(query);\n  return getMeasuresForProjects(projectKeys, metrics);\n}\n\nexport function fetchProjectOrganizations(\n  projects: Array<{ organization: string }>,\n  organization: T.Organization | undefined\n) {\n  if (organization) {\n    return Promise.resolve([organization]);\n  }\n  if (!projects.length) {\n    return Promise.resolve([]);\n  }\n\n  const organizations = uniq(projects.map(project => project.organization));\n  return getOrganizations({ organizations: organizations.join() }).then(r => r.organizations);\n}\n\nfunction mapFacetValues(values: Array<{ val: string; count: number }>) {\n  const map: T.Dict<number> = {};\n  values.forEach(value => {\n    map[value.val] = value.count;\n  });\n  return map;\n}\n\nconst propertyToMetricMap: T.Dict<string | undefined> = {\n  analysis_date: 'analysisDate',\n  reliability: 'reliability_rating',\n  new_reliability: 'new_reliability_rating',\n  security: 'security_rating',\n  new_security: 'new_security_rating',\n  security_review_rating: 'security_review_rating',\n  new_security_review_rating: 'new_security_review_rating',\n  maintainability: 'sqale_rating',\n  new_maintainability: 'new_maintainability_rating',\n  coverage: 'coverage',\n  new_coverage: 'new_coverage',\n  duplications: 'duplicated_lines_density',\n  new_duplications: 'new_duplicated_lines_density',\n  size: 'ncloc',\n  new_lines: 'new_lines',\n  gate: 'alert_status',\n  languages: 'languages',\n  tags: 'tags',\n  search: 'query',\n  qualifier: 'qualifier'\n};\n\nconst metricToPropertyMap = invert(propertyToMetricMap);\n\nfunction getFacetsMap(facets: Facet[]) {\n  const map: T.Dict<T.Dict<number>> = {};\n  facets.forEach(facet => {\n    const property = metricToPropertyMap[facet.property];\n    const { values } = facet;\n    if (REVERSED_FACETS.includes(property)) {\n      values.reverse();\n    }\n    map[property] = mapFacetValues(values);\n  });\n  return map;\n}\n\nfunction convertToSorting({ sort }: Query): { s?: string; asc?: boolean } {\n  if (sort && sort[0] === '-') {\n    return { s: propertyToMetricMap[sort.substr(1)], asc: false };\n  }\n  return { s: propertyToMetricMap[sort || ''] };\n}\n\nconst ONE_MINUTE = 60000;\nconst ONE_HOUR = 60 * ONE_MINUTE;\nconst ONE_DAY = 24 * ONE_HOUR;\nconst ONE_MONTH = 30 * ONE_DAY;\nconst ONE_YEAR = 12 * ONE_MONTH;\n\nfunction format(periods: Array<{ value: number; label: string }>) {\n  let result = '';\n  let count = 0;\n  let lastId = -1;\n  for (let i = 0; i < periods.length && count < 2; i++) {\n    if (periods[i].value > 0) {\n      count++;\n      if (lastId < 0 || lastId + 1 === i) {\n        lastId = i;\n        result += translateWithParameters(periods[i].label, periods[i].value) + ' ';\n      }\n    }\n  }\n  return result;\n}\n\nexport function formatDuration(ms: number) {\n  if (ms < ONE_MINUTE) {\n    return translate('duration.seconds');\n  }\n  const years = Math.floor(ms / ONE_YEAR);\n  ms -= years * ONE_YEAR;\n  const months = Math.floor(ms / ONE_MONTH);\n  ms -= months * ONE_MONTH;\n  const days = Math.floor(ms / ONE_DAY);\n  ms -= days * ONE_DAY;\n  const hours = Math.floor(ms / ONE_HOUR);\n  ms -= hours * ONE_HOUR;\n  const minutes = Math.floor(ms / ONE_MINUTE);\n  return format([\n    { value: years, label: 'duration.years' },\n    { value: months, label: 'duration.months' },\n    { value: days, label: 'duration.days' },\n    { value: hours, label: 'duration.hours' },\n    { value: minutes, label: 'duration.minutes' }\n  ]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten, sortBy } from 'lodash';\nimport { ISSUE_TYPES } from './constants';\n\ninterface Comment {\n  login: string;\n  [x: string]: any;\n}\n\ninterface Rule {}\n\ninterface Component {\n  key: string;\n  name: string;\n}\n\ninterface IssueBase {\n  severity: string;\n  [x: string]: any;\n}\n\nexport interface RawIssue extends IssueBase {\n  assignee?: string;\n  author?: string;\n  comments?: Array<Comment>;\n  component: string;\n  flows?: Array<{\n    // `componentName` is not available in RawIssue\n    locations?: Array<T.Omit<T.FlowLocation, 'componentName'>>;\n  }>;\n  key: string;\n  line?: number;\n  project: string;\n  rule: string;\n  status: string;\n  subProject?: string;\n  textRange?: T.TextRange;\n}\n\nexport function sortByType<T extends Pick<T.Issue, 'type'>>(issues: T[]): T[] {\n  return sortBy(issues, issue => ISSUE_TYPES.indexOf(issue.type));\n}\n\nfunction injectRelational(\n  issue: T.Dict<any>,\n  source: any[] | undefined,\n  baseField: string,\n  lookupField: string\n) {\n  const newFields: T.Dict<any> = {};\n  const baseValue = issue[baseField];\n  if (baseValue !== undefined && source !== undefined) {\n    const lookupValue = source.find(candidate => candidate[lookupField] === baseValue);\n    if (lookupValue != null) {\n      Object.keys(lookupValue).forEach(key => {\n        const newKey = baseField + key.charAt(0).toUpperCase() + key.slice(1);\n        newFields[newKey] = lookupValue[key];\n      });\n    }\n  }\n  return newFields;\n}\n\nfunction injectCommentsRelational(issue: RawIssue, users?: T.UserBase[]) {\n  if (!issue.comments) {\n    return {};\n  }\n  const comments = issue.comments.map(comment => {\n    const commentWithAuthor = { ...comment, author: comment.login, login: undefined };\n    return {\n      ...commentWithAuthor,\n      ...injectRelational(commentWithAuthor, users, 'author', 'login')\n    };\n  });\n  return { comments };\n}\n\nfunction prepareClosed(\n  issue: RawIssue,\n  secondaryLocations: T.FlowLocation[],\n  flows: T.FlowLocation[][]\n) {\n  return issue.status === 'CLOSED'\n    ? { flows: [], line: undefined, textRange: undefined, secondaryLocations: [] }\n    : { flows, secondaryLocations };\n}\n\nfunction ensureTextRange(issue: RawIssue): { textRange?: T.TextRange } {\n  return issue.line && !issue.textRange\n    ? {\n        textRange: {\n          startLine: issue.line,\n          endLine: issue.line,\n          startOffset: 0,\n          endOffset: 999999\n        }\n      }\n    : {};\n}\n\nfunction reverseLocations(locations: T.FlowLocation[]): T.FlowLocation[] {\n  const x = [...locations];\n  x.reverse();\n  return x;\n}\n\nfunction splitFlows(\n  issue: RawIssue,\n  components: Component[] = []\n): { secondaryLocations: T.FlowLocation[]; flows: T.FlowLocation[][] } {\n  const parsedFlows: T.FlowLocation[][] = (issue.flows || [])\n    .filter(flow => flow.locations !== undefined)\n    .map(flow => flow.locations!.filter(location => location.textRange != null))\n    .map(flow =>\n      flow.map(location => {\n        const component = components.find(component => component.key === location.component);\n        return { ...location, componentName: component && component.name };\n      })\n    );\n\n  const onlySecondaryLocations = parsedFlows.every(flow => flow.length === 1);\n\n  return onlySecondaryLocations\n    ? { secondaryLocations: orderLocations(flatten(parsedFlows)), flows: [] }\n    : { secondaryLocations: [], flows: parsedFlows.map(reverseLocations) };\n}\n\nfunction orderLocations(locations: T.FlowLocation[]) {\n  return sortBy(\n    locations,\n    location => location.textRange && location.textRange.startLine,\n    location => location.textRange && location.textRange.startOffset\n  );\n}\n\nexport function parseIssueFromResponse(\n  issue: RawIssue,\n  components?: Component[],\n  users?: T.UserBase[],\n  rules?: Rule[]\n): T.Issue {\n  const { secondaryLocations, flows } = splitFlows(issue, components);\n  return {\n    ...issue,\n    ...injectRelational(issue, components, 'component', 'key'),\n    ...injectRelational(issue, components, 'project', 'key'),\n    ...injectRelational(issue, components, 'subProject', 'key'),\n    ...injectRelational(issue, rules, 'rule', 'key'),\n    ...injectRelational(issue, users, 'assignee', 'login'),\n    ...injectCommentsRelational(issue, users),\n    ...prepareClosed(issue, secondaryLocations, flows),\n    ...ensureTextRange(issue)\n  } as T.Issue;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { isCategoryDefinition } from '../apps/settings/utils';\nimport { BranchParameters } from '../types/branch-like';\n\nexport function getDefinitions(component?: string): Promise<T.SettingCategoryDefinition[]> {\n  return getJSON('/api/settings/list_definitions', { component }).then(\n    r => r.definitions,\n    throwGlobalError\n  );\n}\n\nexport function getValues(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<T.SettingValue[]> {\n  return getJSON('/api/settings/values', data).then(r => r.settings);\n}\n\nexport function setSettingValue(\n  definition: T.SettingDefinition,\n  value: any,\n  component?: string\n): Promise<void> {\n  const { key } = definition;\n  const data: RequestData = { key, component };\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    data.values = value;\n  } else if (definition.type === 'PROPERTY_SET') {\n    data.fieldValues = value\n      .map((fields: any) => omitBy(fields, value => value == null))\n      .map(JSON.stringify);\n  } else {\n    data.value = value;\n  }\n\n  return post('/api/settings/set', data);\n}\n\nexport function setSimpleSettingValue(\n  data: { component?: string; value: string; key: string } & BranchParameters\n): Promise<void | Response> {\n  return post('/api/settings/set', data).catch(throwGlobalError);\n}\n\nexport function resetSettingValue(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<void> {\n  return post('/api/settings/reset', data);\n}\n\nexport function sendTestEmail(to: string, subject: string, message: string): Promise<void> {\n  return post('/api/emails/send', { to, subject, message });\n}\n\nexport function checkSecretKey(): Promise<{ secretKeyAvailable: boolean }> {\n  return getJSON('/api/settings/check_secret_key').catch(throwGlobalError);\n}\n\nexport function generateSecretKey(): Promise<{ secretKey: string }> {\n  return postJSON('/api/settings/generate_secret_key').catch(throwGlobalError);\n}\n\nexport function encryptValue(value: string): Promise<{ encryptedValue: string }> {\n  return postJSON('/api/settings/encrypt', { value }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\nexport interface ComponentDescriptor {\n  branchLike: BranchLike | undefined;\n  key: string;\n  line?: number;\n  name?: string;\n  qualifier?: string;\n}\n\nexport interface RuleDescriptor {\n  key: string;\n  name?: string;\n  organization: string;\n}\n\nexport interface WorkspaceContextShape {\n  openComponent: (component: ComponentDescriptor) => void;\n  openRule: (rule: RuleDescriptor) => void;\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextShape>({\n  openComponent: () => {},\n  openRule: () => {}\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, uniq, without } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from './utils/actions';\n\ntype ReceiveOrganizationsAction =\n  | ActionType<typeof receiveOrganizations, 'RECEIVE_ORGANIZATIONS'>\n  | ActionType<typeof receiveMyOrganizations, 'RECEIVE_MY_ORGANIZATIONS'>;\n\ntype Action =\n  | ReceiveOrganizationsAction\n  | ActionType<typeof createOrganization, 'CREATE_ORGANIZATION'>\n  | ActionType<typeof updateOrganization, 'UPDATE_ORGANIZATION'>\n  | ActionType<typeof deleteOrganization, 'DELETE_ORGANIZATION'>;\n\nexport interface State {\n  byKey: T.Dict<T.Organization>;\n  my: string[];\n}\n\nexport function receiveOrganizations(organizations: T.Organization[]) {\n  return { type: 'RECEIVE_ORGANIZATIONS', organizations };\n}\n\nexport function receiveMyOrganizations(organizations: T.Organization[]) {\n  return { type: 'RECEIVE_MY_ORGANIZATIONS', organizations };\n}\n\nexport function createOrganization(organization: T.Organization) {\n  return { type: 'CREATE_ORGANIZATION', organization };\n}\n\nexport function updateOrganization(key: string, changes: T.OrganizationBase) {\n  return { type: 'UPDATE_ORGANIZATION', key, changes };\n}\n\nexport function deleteOrganization(key: string) {\n  return { type: 'DELETE_ORGANIZATION', key };\n}\n\nfunction onReceiveOrganizations(state: State['byKey'], action: ReceiveOrganizationsAction) {\n  const nextState = { ...state };\n  action.organizations.forEach(organization => {\n    nextState[organization.key] = { ...state[organization.key], ...organization };\n  });\n  return nextState;\n}\n\nfunction byKey(state: State['byKey'] = {}, action: Action): State['byKey'] {\n  switch (action.type) {\n    case 'RECEIVE_ORGANIZATIONS':\n    case 'RECEIVE_MY_ORGANIZATIONS':\n      return onReceiveOrganizations(state, action);\n    case 'CREATE_ORGANIZATION':\n      return {\n        ...state,\n        [action.organization.key]: {\n          ...action.organization,\n          actions: { ...(action.organization.actions || {}), admin: true }\n        }\n      };\n    case 'UPDATE_ORGANIZATION':\n      return {\n        ...state,\n        [action.key]: {\n          ...state[action.key],\n          key: action.key,\n          ...action.changes\n        }\n      };\n    case 'DELETE_ORGANIZATION':\n      return omit(state, action.key);\n    default:\n      return state;\n  }\n}\n\nfunction my(state: State['my'] = [], action: Action): State['my'] {\n  switch (action.type) {\n    case 'RECEIVE_MY_ORGANIZATIONS':\n      return uniq([...state, ...action.organizations.map(o => o.key)]);\n    case 'CREATE_ORGANIZATION':\n      return uniq([...state, action.organization.key]);\n    case 'DELETE_ORGANIZATION':\n      return without(state, action.key);\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({ byKey, my });\n\nexport function getOrganizationByKey(state: State, key: string) {\n  return state.byKey[key];\n}\n\nexport function getMyOrganizations(state: State) {\n  return state.my.map(key => getOrganizationByKey(state, key));\n}\n\nexport function areThereCustomOrganizations(state: State) {\n  return Object.keys(state.byKey).length > 1;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface MetricsResponse {\n  metrics: T.Metric[];\n  p: number;\n  ps: number;\n  total: number;\n}\n\nexport function getMetrics(data?: {\n  isCustom?: boolean;\n  p?: number;\n  ps?: number;\n}): Promise<MetricsResponse> {\n  return getJSON('/api/metrics/search', data).catch(throwGlobalError);\n}\n\nexport function getAllMetrics(data?: {\n  isCustom?: boolean;\n  p?: number;\n  ps?: number;\n}): Promise<T.Metric[]> {\n  return inner(data);\n\n  function inner(\n    data: { p?: number; ps?: number } = { ps: 500 },\n    prev?: MetricsResponse\n  ): Promise<T.Metric[]> {\n    return getMetrics(data).then(r => {\n      const result = prev ? prev.metrics.concat(r.metrics) : r.metrics;\n      if (r.p * r.ps >= r.total) {\n        return result;\n      }\n      return inner({ ...data, p: r.p + 1 }, { ...r, metrics: result });\n    });\n  }\n}\n\nexport function getMetricDomains(): Promise<string[]> {\n  return getJSON('/api/metrics/domains').then(r => r.domains, throwGlobalError);\n}\n\nexport function getMetricTypes(): Promise<string[]> {\n  return getJSON('/api/metrics/types').then(r => r.types, throwGlobalError);\n}\n\nexport function createMetric(data: {\n  description?: string;\n  domain?: string;\n  key: string;\n  name: string;\n  type: string;\n}): Promise<T.Metric> {\n  return postJSON('/api/metrics/create', data).catch(throwGlobalError);\n}\n\nexport function updateMetric(data: {\n  description?: string;\n  domain?: string;\n  id: string;\n  key?: string;\n  name?: string;\n  type?: string;\n}) {\n  return post('/api/metrics/update', data).catch(throwGlobalError);\n}\n\nexport function deleteMetric(data: { keys: string }) {\n  return post('/api/metrics/delete', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport GenericAvatar from 'sonar-ui-common/components/ui/GenericAvatar';\nimport './OrganizationAvatar.css';\n\ninterface Props {\n  className?: string;\n  organization: Pick<T.OrganizationBase, 'avatar' | 'name'>;\n  small?: boolean;\n}\n\ninterface State {\n  imgLoadError: boolean;\n}\n\nexport default class OrganizationAvatar extends React.PureComponent<Props, State> {\n  state = { imgLoadError: false };\n\n  handleImgError = () => {\n    this.setState({ imgLoadError: true });\n  };\n\n  render() {\n    const { className, organization, small } = this.props;\n    const { imgLoadError } = this.state;\n    return (\n      <div\n        className={classNames(\n          'navbar-context-avatar',\n          'rounded',\n          { 'no-border': !organization.avatar, 'is-small': small },\n          className\n        )}>\n        {organization.avatar && !imgLoadError ? (\n          <img\n            alt={organization.name}\n            className=\"rounded\"\n            onError={this.handleImgError}\n            src={organization.avatar}\n          />\n        ) : (\n          <GenericAvatar name={organization.name} size={small ? 15 : 30} />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\ninterface Props {\n  children?: React.ReactNode;\n  organization: { key: string };\n  [x: string]: any;\n}\n\nexport default function OrganizationLink(props: Props) {\n  const { children, organization, ...other } = props;\n\n  return (\n    <Link to={`/organizations/${organization.key}`} {...other}>\n      {children}\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { Action as AppStateAction, Actions as AppStateActions } from '../../../store/appState';\nimport { ActionType } from '../../../store/utils/actions';\n\nenum Actions {\n  receiveValues = 'RECEIVE_VALUES'\n}\n\ntype Action = ActionType<typeof receiveValues, Actions.receiveValues>;\n\ntype SettingsState = T.Dict<T.SettingValue>;\n\nexport interface State {\n  components: T.Dict<SettingsState>;\n  global: SettingsState;\n}\n\nexport function receiveValues(\n  settings: Array<{ key: string; value?: string }>,\n  component?: string\n) {\n  return { type: Actions.receiveValues, settings, component };\n}\n\nfunction components(state: State['components'] = {}, action: Action) {\n  const { component: key } = action;\n  if (!key) {\n    return state;\n  }\n  if (action.type === Actions.receiveValues) {\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, [key]: { ...(state[key] || {}), ...settingsByKey } };\n  }\n  return state;\n}\n\nfunction global(state: State['components'] = {}, action: Action | AppStateAction) {\n  if (action.type === Actions.receiveValues) {\n    if (action.component) {\n      return state;\n    }\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, ...settingsByKey };\n  }\n  if (action.type === AppStateActions.SetAppState) {\n    const settingsByKey: SettingsState = {};\n    Object.keys(action.appState.settings).forEach(\n      key => (settingsByKey[key] = { key, value: action.appState.settings[key] })\n    );\n    return { ...state, ...settingsByKey };\n  }\n  return state;\n}\n\nexport default combineReducers({ components, global });\n\nexport function getValue(\n  state: State,\n  key: string,\n  component?: string\n): T.SettingValue | undefined {\n  if (component) {\n    return state.components[component] && state.components[component][key];\n  }\n  return state.global[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { getAppState, getCurrentUser, Store } from '../../../store/rootReducer';\nimport { ComponentQualifier } from '../../../types/component';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  qualifiers: getAppState(state).qualifiers as ComponentQualifier[]\n});\n\nexport default connect(stateToProps)(lazyLoadComponent(() => import('./AllProjects')));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Dispatch } from 'redux';\nimport { getOrganizations } from '../../../api/organizations';\nimport { getValues } from '../../../api/settings';\nimport { receiveMyOrganizations } from '../../../store/organizations';\nimport { receiveValues } from '../../settings/store/values';\n\nexport const fetchMyOrganizations = () => (dispatch: Dispatch) => {\n  return getOrganizations({ member: true }).then(({ organizations }) => {\n    return dispatch(receiveMyOrganizations(organizations));\n  });\n};\n\nexport const fetchIfAnyoneCanCreateOrganizations = () => (dispatch: Dispatch) => {\n  return getValues({ keys: 'sonar.organizations.anyoneCanCreate' }).then(values => {\n    dispatch(receiveValues(values));\n  });\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { Edition, EditionKey } from '../types/editions';\nimport { SystemUpgrade } from '../types/system';\n\nconst EDITIONS: { [x in EditionKey]: Edition } = {\n  community: {\n    key: EditionKey.community,\n    name: 'Community Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/community.html',\n    downloadProperty: 'downloadUrl'\n  },\n  developer: {\n    key: EditionKey.developer,\n    name: 'Developer Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/developer.html',\n    downloadProperty: 'downloadDeveloperUrl'\n  },\n  enterprise: {\n    key: EditionKey.enterprise,\n    name: 'Enterprise Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/enterprise.html',\n    downloadProperty: 'downloadEnterpriseUrl'\n  },\n  datacenter: {\n    key: EditionKey.datacenter,\n    name: 'Data Center Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/datacenter.html',\n    downloadProperty: 'downloadDatacenterUrl'\n  }\n};\n\nexport function getEdition(editionKey: EditionKey) {\n  return EDITIONS[editionKey];\n}\n\nexport function getAllEditionsAbove(currentEdition?: EditionKey) {\n  const editions = Object.values(EDITIONS);\n  const currentEditionIdx = editions.findIndex(edition => edition.key === currentEdition);\n  return editions.slice(currentEditionIdx + 1);\n}\n\nexport function getEditionUrl(\n  edition: Edition,\n  data: { serverId?: string; ncloc?: number; sourceEdition?: EditionKey }\n) {\n  let url = edition.homeUrl;\n  const query = stringify(omitNil(data));\n  if (query) {\n    url += '?' + query;\n  }\n  return url;\n}\n\nexport function getEditionDownloadUrl(edition: Edition, lastUpgrade: SystemUpgrade) {\n  return lastUpgrade[edition.downloadProperty] || lastUpgrade.downloadUrl;\n}\n\nexport function getEditionDownloadFilename(url: string) {\n  return url.replace(/^.+\\/(sonarqube-[\\w\\-.]+\\.zip)$/, '$1');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { get, remove, save } from 'sonar-ui-common/helpers/storage';\n\nconst RECENT_HISTORY = 'sonar_recent_history';\nconst HISTORY_LIMIT = 10;\n\nexport type History = Array<{\n  key: string;\n  name: string;\n  icon: string;\n  organization?: string;\n}>;\n\nexport default class RecentHistory {\n  static get(): History {\n    const history = get(RECENT_HISTORY);\n    if (history == null) {\n      return [];\n    } else {\n      try {\n        return JSON.parse(history);\n      } catch {\n        remove(RECENT_HISTORY);\n        return [];\n      }\n    }\n  }\n\n  static set(newHistory: History) {\n    save(RECENT_HISTORY, JSON.stringify(newHistory));\n  }\n\n  static clear() {\n    remove(RECENT_HISTORY);\n  }\n\n  static add(\n    componentKey: string,\n    componentName: string,\n    icon: string,\n    organization: string | undefined\n  ) {\n    const sonarHistory = RecentHistory.get();\n    const newEntry = { key: componentKey, name: componentName, icon, organization };\n    let newHistory = sonarHistory.filter(entry => entry.key !== newEntry.key);\n    newHistory.unshift(newEntry);\n    newHistory = newHistory.slice(0, HISTORY_LIMIT);\n    RecentHistory.set(newHistory);\n  }\n\n  static remove(componentKey: string) {\n    const history = RecentHistory.get();\n    const newHistory = history.filter(entry => entry.key !== componentKey);\n    RecentHistory.set(newHistory);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsOptionalBoolean,\n  parseAsOptionalString,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeOptionalBoolean,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\n\nexport interface Query {\n  activation: boolean | undefined;\n  activationSeverities: string[];\n  availableSince: Date | undefined;\n  compareToProfile: string | undefined;\n  cwe: string[];\n  inheritance: T.RuleInheritance | undefined;\n  languages: string[];\n  owaspTop10: string[];\n  profile: string | undefined;\n  repositories: string[];\n  ruleKey: string | undefined;\n  sansTop25: string[];\n  searchQuery: string | undefined;\n  severities: string[];\n  sonarsourceSecurity: string[];\n  statuses: string[];\n  tags: string[];\n  template: boolean | undefined;\n  types: string[];\n}\n\nexport type FacetKey = keyof Query;\n\nexport interface Facet {\n  [value: string]: number;\n}\n\nexport type Facets = { [F in FacetKey]?: Facet };\n\nexport type OpenFacets = T.Dict<boolean>;\n\nexport interface Activation {\n  inherit: T.RuleInheritance;\n  severity: string;\n}\n\nexport interface Actives {\n  [rule: string]: {\n    [profile: string]: Activation;\n  };\n}\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    activation: parseAsOptionalBoolean(query.activation),\n    activationSeverities: parseAsArray(query.active_severities, parseAsString),\n    availableSince: parseAsDate(query.available_since),\n    compareToProfile: parseAsOptionalString(query.compareToProfile),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    inheritance: parseAsInheritance(query.inheritance),\n    languages: parseAsArray(query.languages, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    profile: parseAsOptionalString(query.qprofile),\n    repositories: parseAsArray(query.repositories, parseAsString),\n    ruleKey: parseAsOptionalString(query.rule_key),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    searchQuery: parseAsOptionalString(query.q),\n    severities: parseAsArray(query.severities, parseAsString),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    template: parseAsOptionalBoolean(query.is_template),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  return cleanQuery({\n    activation: serializeOptionalBoolean(query.activation),\n    active_severities: serializeStringArray(query.activationSeverities),\n    available_since: serializeDateShort(query.availableSince),\n    compareToProfile: serializeString(query.compareToProfile),\n    cwe: serializeStringArray(query.cwe),\n    inheritance: serializeInheritance(query.inheritance),\n    is_template: serializeOptionalBoolean(query.template),\n    languages: serializeStringArray(query.languages),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    q: serializeString(query.searchQuery),\n    qprofile: serializeString(query.profile),\n    repositories: serializeStringArray(query.repositories),\n    rule_key: serializeString(query.ruleKey),\n    sansTop25: serializeStringArray(query.sansTop25),\n    severities: serializeStringArray(query.severities),\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  });\n}\n\nexport function areQueriesEqual(a: T.RawQuery, b: T.RawQuery) {\n  return queriesEqual(parseQuery(a), parseQuery(b));\n}\n\nexport function shouldRequestFacet(facet: string): facet is FacetKey {\n  const facetsToRequest = [\n    'activationSeverities',\n    'cwe',\n    'languages',\n    'owaspTop10',\n    'repositories',\n    'sansTop25',\n    'severities',\n    'sonarsourceSecurity',\n    'standard',\n    'statuses',\n    'tags',\n    'types'\n  ];\n  return facetsToRequest.includes(facet);\n}\n\nexport function getServerFacet(facet: FacetKey) {\n  return facet === 'activationSeverities' ? 'active_severities' : facet;\n}\n\nexport function getAppFacet(serverFacet: string): FacetKey {\n  return serverFacet === 'active_severities' ? 'activationSeverities' : (serverFacet as FacetKey);\n}\n\nexport function getOpen(query: T.RawQuery) {\n  return query.open;\n}\n\nexport function hasRuleKey(query: T.RawQuery) {\n  return Boolean(query.rule_key);\n}\n\nfunction parseAsInheritance(value?: string): T.RuleInheritance | undefined {\n  if (value === 'INHERITED' || value === 'NONE' || value === 'OVERRIDES') {\n    return value;\n  } else {\n    return undefined;\n  }\n}\n\nfunction serializeInheritance(value: T.RuleInheritance | undefined): string | undefined {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from '../../../store/utils/actions';\n\nconst enum Actions {\n  CancelChange = 'settingsPage/CANCEL_CHANGE',\n  ChangeValue = 'settingsPage/CHANGE_VALUE',\n  FailValidation = 'settingsPage/FAIL_VALIDATION',\n  PassValidation = 'settingsPage/PASS_VALIDATION',\n  StartLoading = 'settingsPage/START_LOADING',\n  StopLoading = 'settingsPage/STOP_LOADING'\n}\n\ntype Action =\n  | ActionType<typeof cancelChange, Actions.CancelChange>\n  | ActionType<typeof changeValue, Actions.ChangeValue>\n  | ActionType<typeof failValidation, Actions.FailValidation>\n  | ActionType<typeof passValidation, Actions.PassValidation>\n  | ActionType<typeof startLoading, Actions.StartLoading>\n  | ActionType<typeof stopLoading, Actions.StopLoading>;\n\nexport interface State {\n  changedValues: T.Dict<any>;\n  loading: T.Dict<boolean>;\n  validationMessages: T.Dict<string>;\n}\n\nexport function cancelChange(key: string) {\n  return { type: Actions.CancelChange, key };\n}\n\nexport function changeValue(key: string, value: any) {\n  return { type: Actions.ChangeValue, key, value };\n}\n\nfunction changedValues(state: State['changedValues'] = {}, action: Action) {\n  if (action.type === Actions.ChangeValue) {\n    return { ...state, [action.key]: action.value };\n  }\n  if (action.type === Actions.CancelChange) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function failValidation(key: string, message: string) {\n  return { type: Actions.FailValidation, key, message };\n}\n\nexport function passValidation(key: string) {\n  return { type: Actions.PassValidation, key };\n}\n\nfunction validationMessages(state: State['validationMessages'] = {}, action: Action) {\n  if (action.type === Actions.FailValidation) {\n    return { ...state, [action.key]: action.message };\n  }\n  if (action.type === Actions.PassValidation) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function startLoading(key: string) {\n  return { type: Actions.StartLoading, key };\n}\n\nexport function stopLoading(key: string) {\n  return { type: Actions.StopLoading, key };\n}\n\nfunction loading(state: State['loading'] = {}, action: Action) {\n  if (action.type === Actions.StartLoading) {\n    return { ...state, [action.key]: true };\n  }\n  if (action.type === Actions.StopLoading) {\n    return { ...state, [action.key]: false };\n  }\n  return state;\n}\n\nexport default combineReducers({ changedValues, loading, validationMessages });\n\nexport function getChangedValue(state: State, key: string) {\n  return state.changedValues[key];\n}\n\nexport function getValidationMessage(state: State, key: string): string | undefined {\n  return state.validationMessages[key];\n}\n\nexport function isLoading(state: State, key: string) {\n  return Boolean(state.loading[key]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { ActionType } from './utils/actions';\n\nexport function receiveLanguages(languages: Array<{ key: string; name: string }>) {\n  return { type: 'RECEIVE_LANGUAGES', languages };\n}\n\ntype Action = ActionType<typeof receiveLanguages, 'RECEIVE_LANGUAGES'>;\n\nexport default function(state: T.Languages = {}, action: Action): T.Languages {\n  if (action.type === 'RECEIVE_LANGUAGES') {\n    return keyBy(action.languages, 'key');\n  }\n\n  return state;\n}\n\nexport function getLanguages(state: T.Languages) {\n  return state;\n}\n\nexport function getLanguageByKey(state: T.Languages, key: string) {\n  return state[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport default function getCoverageStatus(s: T.SourceLine): T.SourceLineCoverageStatus | undefined {\n  let status: T.SourceLineCoverageStatus | undefined;\n  if (s.lineHits != null && s.lineHits > 0) {\n    status = 'partially-covered';\n  }\n  if (s.lineHits != null && s.lineHits > 0 && s.conditions === s.coveredConditions) {\n    status = 'covered';\n  }\n  if (s.lineHits === 0 || s.coveredConditions === 0) {\n    status = 'uncovered';\n  }\n  return status;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ComponentQualifier } from '../../types/component';\nimport { VISUALIZATIONS } from './utils';\n\ntype Level = 'ERROR' | 'WARN' | 'OK';\n\nexport interface Query {\n  gate?: Level;\n  reliability?: number;\n  new_reliability?: number;\n  security?: number;\n  new_security?: number;\n  security_review_rating?: number;\n  new_security_review_rating?: number;\n  maintainability?: number;\n  new_maintainability?: number;\n  coverage?: number;\n  new_coverage?: number;\n  duplications?: number;\n  new_duplications?: number;\n  size?: number;\n  new_lines?: number;\n  languages?: string[];\n  qualifier?: ComponentQualifier;\n  tags?: string[];\n  search?: string;\n  sort?: string;\n  view?: string;\n  visualization?: string;\n  [x: string]: string | number | string[] | undefined;\n}\n\nexport function parseUrlQuery(urlQuery: T.RawQuery): Query {\n  return {\n    gate: getAsLevel(urlQuery['gate']),\n    reliability: getAsNumericRating(urlQuery['reliability']),\n    new_reliability: getAsNumericRating(urlQuery['new_reliability']),\n    security: getAsNumericRating(urlQuery['security']),\n    new_security: getAsNumericRating(urlQuery['new_security']),\n    security_review_rating: getAsNumericRating(urlQuery['security_review']),\n    new_security_review_rating: getAsNumericRating(urlQuery['new_security_review']),\n    maintainability: getAsNumericRating(urlQuery['maintainability']),\n    new_maintainability: getAsNumericRating(urlQuery['new_maintainability']),\n    coverage: getAsNumericRating(urlQuery['coverage']),\n    new_coverage: getAsNumericRating(urlQuery['new_coverage']),\n    duplications: getAsNumericRating(urlQuery['duplications']),\n    new_duplications: getAsNumericRating(urlQuery['new_duplications']),\n    size: getAsNumericRating(urlQuery['size']),\n    new_lines: getAsNumericRating(urlQuery['new_lines']),\n    languages: getAsStringArray(urlQuery['languages']),\n    tags: getAsStringArray(urlQuery['tags']),\n    qualifier: getAsQualifier(urlQuery['qualifier']),\n    search: getAsString(urlQuery['search']),\n    sort: getAsString(urlQuery['sort']),\n    view: getView(urlQuery['view']),\n    visualization: getVisualization(urlQuery['visualization'])\n  };\n}\n\nexport function convertToFilter(query: Query, isFavorite: boolean): string {\n  const conditions: string[] = [];\n\n  if (isFavorite) {\n    conditions.push('isFavorite');\n  }\n\n  if (query['gate'] != null) {\n    conditions.push(mapPropertyToMetric('gate') + ' = ' + query['gate']);\n  }\n\n  ['coverage', 'new_coverage'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertCoverage)\n  );\n\n  ['duplications', 'new_duplications'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertDuplications)\n  );\n\n  ['size', 'new_lines'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertSize)\n  );\n\n  [\n    'reliability',\n    'security',\n    'security_review_rating',\n    'maintainability',\n    'new_reliability',\n    'new_security',\n    'new_security_review_rating',\n    'new_maintainability'\n  ].forEach(property => pushMetricToArray(query, property, conditions, convertIssuesRating));\n\n  ['languages', 'tags', 'qualifier'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertArrayMetric)\n  );\n\n  if (query['search'] != null) {\n    conditions.push(`${mapPropertyToMetric('search')} = \"${query['search']}\"`);\n  }\n\n  return conditions.join(' and ');\n}\n\nconst visualizationParams = ['sort', 'view', 'visualization'];\n\nexport function hasFilterParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => !visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nexport function hasVisualizationParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nfunction getAsNumericRating(value: any): number | undefined {\n  if (value === '' || value == null || isNaN(value)) {\n    return undefined;\n  }\n  const num = Number(value);\n  return num > 0 && num < 7 ? num : undefined;\n}\n\nfunction getAsLevel(value: any): Level | undefined {\n  if (value === 'ERROR' || value === 'WARN' || value === 'OK') {\n    return value;\n  }\n  return undefined;\n}\n\nfunction getAsString(value: any): string | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value;\n}\n\nfunction getAsStringArray(value: any): string[] | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value.split(',');\n}\n\nfunction getAsQualifier(value: string | undefined): ComponentQualifier | undefined {\n  return value ? (value as ComponentQualifier) : undefined;\n}\n\nfunction getView(value: any): string | undefined {\n  return typeof value !== 'string' || value === 'overall' ? undefined : value;\n}\n\nfunction getVisualization(value: string): string | undefined {\n  return VISUALIZATIONS.includes(value) ? value : undefined;\n}\n\nfunction convertIssuesRating(metric: string, rating: number): string {\n  if (rating > 1 && rating < 5) {\n    return `${metric} >= ${rating}`;\n  } else {\n    return `${metric} = ${rating}`;\n  }\n}\n\nfunction convertCoverage(metric: string, coverage: number): string {\n  switch (coverage) {\n    case 1:\n      return metric + ' >= 80';\n    case 2:\n      return metric + ' < 80';\n    case 3:\n      return metric + ' < 70';\n    case 4:\n      return metric + ' < 50';\n    case 5:\n      return metric + ' < 30';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertDuplications(metric: string, duplications: number): string {\n  switch (duplications) {\n    case 1:\n      return metric + ' < 3';\n    case 2:\n      return metric + ' >= 3';\n    case 3:\n      return metric + ' >= 5';\n    case 4:\n      return metric + ' >= 10';\n    case 5:\n      return metric + ' >= 20';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertSize(metric: string, size: number): string {\n  switch (size) {\n    case 1:\n      return metric + ' < 1000';\n    case 2:\n      return metric + ' >= 1000';\n    case 3:\n      return metric + ' >= 10000';\n    case 4:\n      return metric + ' >= 100000';\n    case 5:\n      return metric + ' >= 500000';\n    default:\n      return '';\n  }\n}\n\nfunction mapPropertyToMetric(property?: string): string | undefined {\n  const map: T.Dict<string> = {\n    analysis_date: 'analysisDate',\n    reliability: 'reliability_rating',\n    new_reliability: 'new_reliability_rating',\n    security: 'security_rating',\n    new_security: 'new_security_rating',\n    security_review_rating: 'security_review_rating',\n    new_security_review_rating: 'new_security_review_rating',\n    maintainability: 'sqale_rating',\n    new_maintainability: 'new_maintainability_rating',\n    coverage: 'coverage',\n    new_coverage: 'new_coverage',\n    duplications: 'duplicated_lines_density',\n    new_duplications: 'new_duplicated_lines_density',\n    size: 'ncloc',\n    new_lines: 'new_lines',\n    gate: 'alert_status',\n    languages: 'languages',\n    tags: 'tags',\n    search: 'query',\n    qualifier: 'qualifier'\n  };\n  return property && map[property];\n}\n\nfunction pushMetricToArray(\n  query: Query,\n  property: string,\n  conditionsArray: string[],\n  convertFunction: (metric: string, value: any) => string\n): void {\n  const metric = mapPropertyToMetric(property);\n  if (query[property] != null && metric) {\n    conditionsArray.push(convertFunction(metric, query[property]));\n  }\n}\n\nfunction convertArrayMetric(metric: string, items: string | string[]): string {\n  if (!Array.isArray(items) || items.length < 2) {\n    return metric + ' = ' + items;\n  }\n  return `${metric} IN (${items.join(', ')})`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport GlobalMessages from 'sonar-ui-common/components/controls/GlobalMessages';\nimport { closeGlobalMessage } from '../../store/globalMessages';\nimport { getGlobalMessages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  messages: getGlobalMessages(state)\n});\n\nconst mapDispatchToProps = { closeGlobalMessage };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalMessages);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\nexport type OnboardingContextShape = (organization?: T.Organization) => void;\n\nexport const OnboardingContext = createContext<OnboardingContextShape>(() => {});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport OrganizationAvatar from '../common/OrganizationAvatar';\nimport OrganizationLink from './OrganizationLink';\n\ninterface Props {\n  organization: T.Organization;\n}\n\nexport default function OrganizationListItem({ organization }: Props) {\n  const { actions = {} } = organization;\n  return (\n    <li>\n      <OrganizationLink className=\"display-flex-center\" organization={organization}>\n        <div>\n          <OrganizationAvatar organization={organization} small={true} />\n          <span className=\"spacer-left\">{organization.name}</span>\n        </div>\n        {actions.admin && <span className=\"badge spacer-left\">{translate('admin')}</span>}\n      </OrganizationLink>\n    </li>\n  );\n}\n"],"sourceRoot":""}