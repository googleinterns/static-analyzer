(window.webpackJsonp=window.webpackJsonp||[]).push([[316],{1035:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return y})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return b}));var r=n(927),a=n.n(r),o=n(773),i=n(173),s=n(778),c=n(757),l=n(860),p=["VERSION","QUALITY_GATE","QUALITY_PROFILE","OTHER"],u=["QUALITY_GATE","DEFINITION_CHANGE","OTHER"];function d(e,t){return e.category!==t.category||h(e,t)}function m(e,t){return!a()(e.customMetrics,t.customMetrics)}function h(e,t){return!a()(e.from,t.from)||!a()(e.to,t.to)}function f(e,t){return e.graph!==t.graph}function y(e,t){return e.reduce((function(e,n){var r=e[e.length-1],a=n.events.find((function(e){return"VERSION"===e.category}));if(a){var s={version:a.name,key:a.key,byDay:{}};!r||Object.keys(r.byDay).length>0?e.push(s):e[e.length-1]=s,r=s}else r||(r={version:null,key:null,byDay:{}},e.push(r));var c=o(Object(i.parseDate)(n.date)).getTime().toString(),l=!0;if(t.category||t.from||t.to){var p=!t.from||n.date>=t.from,u=!t.to||n.date<=t.to,d=!t.category||null!=n.events.find((function(e){return e.category===t.category}));l=p&&u&&d}return l&&(r.byDay[c]||(r.byDay[c]=[]),r.byDay[c].push(n)),e}),[])}function v(e){return{category:Object(s.parseAsString)(e.category),customMetrics:Object(s.parseAsArray)(e.custom_metrics,s.parseAsString),from:Object(s.parseAsDate)(e.from),graph:(t=e.graph,n=Object(s.parseAsString)(t),Object.keys(l.a).includes(n)?n:c.a),project:Object(s.parseAsString)(e.id),to:Object(s.parseAsDate)(e.to),selectedDate:Object(s.parseAsDate)(e.selected_date)};var t,n}function g(e){return Object(s.cleanQuery)({category:Object(s.serializeString)(e.category),from:Object(s.serializeDate)(e.from),project:Object(s.serializeString)(e.project),to:Object(s.serializeDate)(e.to)})}function b(e){return Object(s.cleanQuery)({category:Object(s.serializeString)(e.category),custom_metrics:Object(s.serializeStringArray)(e.customMetrics),from:Object(s.serializeDate)(e.from),graph:(t=e.graph,t===c.a?void 0:t),id:Object(s.serializeString)(e.project),to:Object(s.serializeDate)(e.to),selected_date:Object(s.serializeDate)(e.selectedDate)});var t}},1050:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),a=r.createContext({branchLike:void 0,component:void 0})},1133:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(51),a=n(670);function o(e){return Object(r.getJSON)("/api/project_analyses/search",e).catch(a.a)}function i(e,t,n,o){var i={analysis:e,name:t};return n&&(i.category=n),o&&(i.description=o),Object(r.postJSON)("/api/project_analyses/create_event",i).then((function(e){return e.event}),a.a)}function s(e){return Object(r.post)("/api/project_analyses/delete_event",{event:e}).catch(a.a)}function c(e,t,n){var o={event:e};return t&&(o.name=t),n&&(o.description=n),Object(r.postJSON)("/api/project_analyses/update_event",o).then((function(e){return e.event}),a.a)}function l(e){return Object(r.post)("/api/project_analyses/delete",{analysis:e}).catch(a.a)}},1134:function(e,t,n){var r=n(660),a=n(1422);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},i=(r(a,o),a.locals?a.locals:{});e.exports=i},1135:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var r,a=n(13),o=n(653),i=n(663),s=n(659),c=n(750),l=n.n(c),p=n(679),u=n.n(p),d=n(37),m=n(739),h=n(678),f=n(669),y=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function v(e){return"DEFINITION_CHANGE"===e.category&&void 0!==e.definitionChange}var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1},t.stopPropagation=function(e){e.stopPropagation()},t.toggleProjectsList=function(){t.setState((function(e){return{expanded:!e.expanded}}))},t.renderProjectLink=function(e,n){return a.createElement(i.Link,{onClick:t.stopPropagation,title:e.name,to:Object(f.t)(e.key,n)},Object(m.limitComponentName)(e.name,28))},t.renderBranch=function(e){return void 0===e&&(e=Object(d.translate)("branches.main_branch")),a.createElement("span",{className:"nowrap",title:e},a.createElement(l.a,{className:"little-spacer-left text-text-top"}),e)},t}return y(t,e),t.prototype.renderProjectChange=function(e){var t=!this.props.branchLike||Object(h.g)(this.props.branchLike);if("ADDED"===e.changeType){var n=t?"event.definition_change.added":"event.definition_change.branch_added";return a.createElement("div",{className:"text-ellipsis"},a.createElement(o.FormattedMessage,{defaultMessage:Object(d.translate)(n),id:n,values:{project:this.renderProjectLink(e,e.branch),branch:this.renderBranch(e.branch)}}))}if("REMOVED"===e.changeType){n=t?"event.definition_change.removed":"event.definition_change.branch_removed";return a.createElement("div",{className:"text-ellipsis"},a.createElement(o.FormattedMessage,{defaultMessage:Object(d.translate)(n),id:n,values:{project:this.renderProjectLink(e,e.branch),branch:this.renderBranch(e.branch)}}))}return"BRANCH_CHANGED"===e.changeType?a.createElement(o.FormattedMessage,{defaultMessage:Object(d.translate)("event.definition_change.branch_replaced"),id:"event.definition_change.branch_replaced",values:{project:this.renderProjectLink(e,e.newBranch),oldBranch:this.renderBranch(e.oldBranch),newBranch:this.renderBranch(e.newBranch)}}):null},t.prototype.render=function(){var e=this,t=this.props.event,n=this.state.expanded;return a.createElement(a.Fragment,null,a.createElement("span",{className:"note"},Object(d.translate)("event.category",t.category),":"),a.createElement("div",null,a.createElement(s.ResetButtonLink,{className:"project-activity-event-inner-more-link",onClick:this.toggleProjectsList,stopPropagation:!0},n?Object(d.translate)("hide"):Object(d.translate)("more"),a.createElement(u.a,{className:"little-spacer-left",turned:n}))),n&&a.createElement("ul",{className:"spacer-left spacer-top"},t.definitionChange.projects.map((function(t){return a.createElement("li",{className:"display-flex-center spacer-top",key:t.key},e.renderProjectChange(t))}))))},t}(a.PureComponent)},1136:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return y}));var r,a=n(13),o=n(653),i=n(663),s=n(659),c=n(679),l=n.n(c),p=n(720),u=n.n(p),d=n(37),m=n(669),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function f(e){return"QUALITY_GATE"===e.category&&void 0!==e.qualityGate}var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1},t.stopPropagation=function(e){e.stopPropagation()},t.toggleProjectsList=function(){t.setState((function(e){return{expanded:!e.expanded}}))},t}return h(t,e),t.prototype.render=function(){var e=this,t=this.props.event,n=this.state.expanded;return a.createElement(a.Fragment,null,a.createElement("span",{className:"note spacer-right"},Object(d.translate)("event.category",t.category),":"),t.qualityGate.stillFailing?a.createElement(o.FormattedMessage,{defaultMessage:Object(d.translate)("event.quality_gate.still_x"),id:"event.quality_gate.still_x",values:{status:a.createElement(u.a,{level:t.qualityGate.status,small:!0})}}):a.createElement(u.a,{level:t.qualityGate.status,small:!0}),a.createElement("div",null,t.qualityGate.failing.length>0&&a.createElement(s.ResetButtonLink,{className:"project-activity-event-inner-more-link",onClick:this.toggleProjectsList,stopPropagation:!0},n?Object(d.translate)("hide"):Object(d.translate)("more"),a.createElement(l.a,{className:"little-spacer-left",turned:n}))),n&&a.createElement("ul",{className:"spacer-left spacer-top"},t.qualityGate.failing.map((function(n){return a.createElement("li",{className:"display-flex-center spacer-top",key:n.key},a.createElement(u.a,{"aria-label":Object(d.translate)("quality_gates.status"),className:"spacer-right",level:t.qualityGate.status,small:!0}),a.createElement("div",{className:"flex-1 text-ellipsis"},a.createElement(i.Link,{onClick:e.stopPropagation,title:n.name,to:Object(m.t)(n.key,n.branch)},a.createElement("span",{"aria-label":Object(d.translateWithParameters)("project_x",n.name)},n.name))))}))))},t}(a.PureComponent)},1421:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(51),a=n(670),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e){return Object(r.getJSON)("/api/measures/search_history",e).catch(a.a)}function s(e,t){return i(o(o({},e),{ps:1e3})).then((function(n){var r=t?{measures:t.measures.map((function(e,t){return o(o({},e),{history:e.history.concat(n.measures[t].history)})})),paging:n.paging}:n;return r.paging.pageIndex*r.paging.pageSize>=r.paging.total?r:s(o(o({},e),{p:r.paging.pageIndex+1}),r)}))}},1422:function(e,t,n){(t=n(661)(!1)).push([e.i,".activity-graph-container{padding:10px 0}.activity-graph-tooltip{padding:8px}.activity-graph-tooltip-line{height:20px}.activity-graph-tooltip-line+.activity-graph-tooltip-line{padding-top:4px}.activity-graph-tooltip-issues-line{height:26px;padding-bottom:4px}.activity-graph-tooltip-separator{padding-left:16px;padding-right:16px}.activity-graph-tooltip-separator hr{margin-top:8px;margin-bottom:8px}.activity-graph-tooltip-title,.activity-graph-tooltip-value{font-weight:700}.activity-graph-legends{flex-grow:0;padding-bottom:16px;text-align:center}.activity-graph-legend-actionable{display:inline-block;padding:4px 8px 4px 12px;border-width:1px;border-style:solid;border-radius:12px}",""]),e.exports=t},1446:function(e,t,n){"use strict";var r,a=n(927),o=n.n(a),i=n(13),s=n(665),c=n.n(s),l=n(37),p=n(685),u=n(860),d=n(1021),m=n(1423),h=n.n(m),f=n(667),y=n(694),v=n(664),g=n.n(v),b=n(658),E=n.n(b),j=n(659),O=n(1041),_=n.n(O),x=n(1e3),D=n.n(x),k=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.props.removeMetric&&t.props.removeMetric(t.props.metric)},t}return k(t,e),t.prototype.render=function(){var e=null!=this.props.removeMetric,t=b({"activity-graph-legend-actionable":e},this.props.className);return i.createElement("span",{className:t},this.props.showWarning?i.createElement(_.a,{className:"spacer-right"}):i.createElement(D.a,{className:"text-middle spacer-right",index:this.props.index}),i.createElement("span",{className:"text-middle"},this.props.name),e&&i.createElement(j.ClearButton,{className:"button-tiny spacer-left text-middle",iconProps:{size:12},onClick:this.handleClick}))},t}(i.PureComponent),S=n(757);function P(e){var t=e.removeMetric,n=e.series;return i.createElement("div",{className:"activity-graph-legends"},n.map((function(e,n){var r=Object(S.h)(e),a=i.createElement(N,{index:n,metric:e.name,name:e.translatedName,removeMetric:t,showWarning:!r});return r?i.createElement("span",{className:"spacer-left spacer-right",key:e.name},a):i.createElement(g.a,{key:e.name,overlay:Object(l.translate)("project_activity.graphs.custom.metric_no_history")},i.createElement("span",{className:"spacer-left spacer-right"},a))})))}function C(e){var t=e.series;return i.createElement("div",{className:"activity-graph-legends"},t.map((function(e,t){return i.createElement(N,{className:"big-spacer-left big-spacer-right",index:t,key:e.name,metric:e.name,name:e.translatedName})})))}var w=n(698),M=n.n(w),A=n(713),L=n(758);function T(e){var t=e.name,n=e.index,r=e.translatedName,a=e.value;return i.createElement("tr",{className:"activity-graph-tooltip-line",key:t},i.createElement("td",{className:"thin"},i.createElement(D.a,{className:"spacer-right",index:n})),i.createElement("td",{className:"activity-graph-tooltip-value text-right spacer-right thin"},a),i.createElement("td",null,r))}function I(e){var t=e.addSeparator,n=e.measuresHistory,r=e.tooltipIdx,a=n.find((function(e){return"uncovered_lines"===e.metric})),o=n.find((function(e){return"coverage"===e.metric}));if(!(a&&a.history[r]&&o&&o.history[r]))return null;var s=a.history[r].value,c=o.history[r].value;return i.createElement("tbody",null,t&&i.createElement("tr",null,i.createElement("td",{className:"activity-graph-tooltip-separator",colSpan:3},i.createElement("hr",null))),s&&i.createElement("tr",{className:"activity-graph-tooltip-line"},i.createElement("td",{className:"activity-graph-tooltip-value text-right spacer-right thin",colSpan:2},Object(f.formatMeasure)(s,"SHORT_INT")),i.createElement("td",null,Object(l.translate)("metric.uncovered_lines.name"))),c&&i.createElement("tr",{className:"activity-graph-tooltip-line"},i.createElement("td",{className:"activity-graph-tooltip-value text-right spacer-right thin",colSpan:2},Object(f.formatMeasure)(c,"PERCENT")),i.createElement("td",null,Object(l.translate)("metric.coverage.name"))))}function q(e){var t=e.addSeparator,n=e.measuresHistory,r=e.tooltipIdx,a=n.find((function(e){return"duplicated_lines_density"===e.metric}));if(!a||!a.history[r])return null;var o=a.history[r].value;return o?i.createElement("tbody",null,t&&i.createElement("tr",null,i.createElement("td",{className:"activity-graph-tooltip-separator",colSpan:3},i.createElement("hr",null))),i.createElement("tr",{className:"activity-graph-tooltip-line"},i.createElement("td",{className:"activity-graph-tooltip-value text-right spacer-right thin",colSpan:2},Object(f.formatMeasure)(o,"PERCENT")),i.createElement("td",null,Object(l.translate)("metric.duplicated_lines_density.name")))):null}var H=n(948),B=n.n(H);function F(e){var t=e.addSeparator,n=e.events;return i.createElement("tbody",null,t&&i.createElement("tr",null,i.createElement("td",{className:"activity-graph-tooltip-separator",colSpan:3},i.createElement("hr",null))),i.createElement("tr",{className:"activity-graph-tooltip-line"},i.createElement("td",{colSpan:3},i.createElement("span",null,Object(l.translate)("events"),":"),n.map((function(e){return i.createElement("span",{className:"spacer-left",key:e.key},i.createElement(B.a,{className:E()("project-activity-event-icon",e.category)}))})))))}var R=n(737),z=n.n(R),G={bugs:"reliability_rating",vulnerabilities:"security_rating",code_smells:"sqale_rating"};function Q(e){var t=e.measuresHistory.find((function(t){return t.metric===G[e.name]}));if(!t||!t.history[e.tooltipIdx])return null;var n=t.history[e.tooltipIdx].value;return i.createElement("tr",{className:"activity-graph-tooltip-issues-line",key:e.name},i.createElement("td",{className:"thin"},i.createElement(D.a,{className:"spacer-right",index:e.index})),i.createElement("td",{className:"text-right spacer-right"},i.createElement("span",{className:"activity-graph-tooltip-value"},e.value),n&&i.createElement(z.a,{className:"spacer-left",small:!0,value:n})),i.createElement("td",null,e.translatedName))}var V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),t.prototype.renderContent=function(){var e=this,t=this.props.tooltipIdx;return this.props.series.map((function(n,r){var a=n.data[t];return!a||!a.y&&0!==a.y?null:e.props.graph===S.a?i.createElement(Q,{index:r,key:n.name,measuresHistory:e.props.measuresHistory,name:n.name,tooltipIdx:t,translatedName:n.translatedName,value:e.props.formatValue(a.y)}):i.createElement(T,{index:r,key:n.name,name:n.name,translatedName:n.translatedName,value:e.props.formatValue(a.y)})}))},t.prototype.render=function(){var e=this.props,t=e.events,n=e.measuresHistory,r=e.tooltipIdx,a=this.props.tooltipPos+60,o=A.PopupPlacement.RightTop;a>this.props.graphWidth-250-50&&(a-=250,o=A.PopupPlacement.LeftTop);var s=this.renderContent().filter(L.isDefined),c=s.length>0;return i.createElement(A.Popup,{className:"disabled-pointer-events",placement:o,style:{top:30,left:a,width:250}},i.createElement("div",{className:"activity-graph-tooltip"},i.createElement("div",{className:"activity-graph-tooltip-title spacer-bottom"},i.createElement(M.a,{date:this.props.selectedDate})),i.createElement("table",{className:"width-100"},i.createElement("tbody",null,s),"coverage"===this.props.graph&&i.createElement(I,{addSeparator:c,measuresHistory:n,tooltipIdx:r}),"duplications"===this.props.graph&&i.createElement(q,{addSeparator:c,measuresHistory:n,tooltipIdx:r}),t&&t.length>0&&i.createElement(F,{addSeparator:c,events:t}))))},t}(i.PureComponent),U=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.formatValue=function(e){return Object(f.formatMeasure)(e,Object(y.getShortType)(t.props.metricsType))},t.formatTooltipValue=function(e){return Object(f.formatMeasure)(e,t.props.metricsType)},t.updateTooltip=function(e,n,r){t.props.updateTooltip(e),t.setState({tooltipXPos:n,tooltipIdx:r})},t}return U(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.events,r=t.graph,a=t.graphEndDate,o=t.graphStartDate,s=t.isCustom,c=t.leakPeriodDate,l=t.measuresHistory,p=t.metricsType,u=t.selectedDate,m=t.series,f=t.showAreas,y=this.state,v=y.tooltipIdx,g=y.tooltipXPos;return i.createElement("div",{className:"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center"},s&&this.props.removeCustomMetric?i.createElement(P,{removeMetric:this.props.removeCustomMetric,series:m}):i.createElement(C,{series:m}),i.createElement("div",{className:"flex-1"},i.createElement(d.AutoSizer,null,(function(t){var s=t.height,d=t.width;return i.createElement("div",null,i.createElement(h.a,{endDate:a,formatYTick:e.formatValue,height:s,leakPeriodDate:c,metricType:p,selectedDate:u,series:m,showAreas:f,startDate:o,updateSelectedDate:e.props.updateSelectedDate,updateTooltip:e.updateTooltip,updateZoom:e.props.updateGraphZoom,width:d}),void 0!==u&&void 0!==v&&void 0!==g&&i.createElement(W,{events:n,formatValue:e.formatTooltipValue,graph:r,graphWidth:d,measuresHistory:l,selectedDate:u,series:m,tooltipIdx:v,tooltipPos:g}))}))))},t}(i.PureComponent),Z=(n(1134),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Y=function(e){function t(t){var n=e.call(this,t)||this;return n.getSelectedDateEvents=function(){var e=n.state.selectedDate,t=n.props.analyses;if(t&&e){var r=t.find((function(t){return t.date.valueOf()===e.valueOf()}));if(r)return r.events}return[]},n.updateTooltip=function(e){n.setState({selectedDate:e})},n.state={selectedDate:t.selectedDate},n}return Z(t,e),t.prototype.componentWillReceiveProps=function(e){o()(e.selectedDate,this.props.selectedDate)||this.setState({selectedDate:e.selectedDate})},t.prototype.render=function(){var e=this,t=this.props,n=t.graph,r=t.loading,a=t.series,o=Object(S.j)(n);if(r)return i.createElement("div",{className:"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center"},i.createElement("div",{className:"text-center"},i.createElement(c.a,{loading:r})));if(!Object(S.i)(a))return i.createElement("div",{className:"activity-graph-container flex-grow display-flex-column display-flex-stretch display-flex-justify-center"},i.createElement("div",{className:"display-flex-center display-flex-justify-center"},i.createElement("img",{alt:"",className:"spacer-right",height:52,src:Object(p.getBaseUrl)()+"/images/activity-chart.svg"}),i.createElement("div",{className:"big-spacer-left big text-muted",style:{maxWidth:300}},Object(l.translate)(o?"project_activity.graphs.custom.no_history":"component_measures.no_history"))));var s=this.getSelectedDateEvents(),d=[u.a.coverage,u.a.duplications].includes(n);return i.createElement("div",{className:"display-flex-justify-center display-flex-column display-flex-stretch flex-grow"},this.props.graphs.map((function(t,r){return i.createElement(K,{events:s,graph:n,graphEndDate:e.props.graphEndDate,graphStartDate:e.props.graphStartDate,isCustom:o,key:r,leakPeriodDate:e.props.leakPeriodDate,measuresHistory:e.props.measuresHistory,metricsType:Object(S.g)(t),removeCustomMetric:e.props.removeCustomMetric,selectedDate:e.state.selectedDate,series:t,showAreas:d,updateGraphZoom:e.props.updateGraphZoom,updateSelectedDate:e.props.updateSelectedDate,updateTooltip:e.updateTooltip})})))},t}(i.PureComponent);t.a=Y},1447:function(e,t,n){"use strict";var r=n(675),a=n.n(r),o=n(13),i=n(658),s=n(659),c=n(948),l=n.n(c),p=n(37),u=n(664),d=n.n(u),m=n(1050),h=n(1135),f=n(1136);function y(e){var t=e.event;if(Object(f.b)(t))return o.createElement(f.a,{event:t});if(Object(h.b)(t))return o.createElement(m.a.Consumer,null,(function(e){var n=e.branchLike;return o.createElement(h.a,{branchLike:n,event:t})}));var n=o.createElement("span",{className:"text-middle"},o.createElement("span",{className:"note little-spacer-right"},Object(p.translate)("event.category",t.category),":"),o.createElement("strong",{className:"spacer-right"},t.name));return t.description?o.createElement(d.a,{overlay:t.description},n):n}var v,g=n(693),b=n.n(g),E=(v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(e){function t(t){var n=e.call(this,t)||this;return n.changeInput=function(e){n.setState({name:e.target.value})},n.handleSubmit=function(){return n.props.changeEvent(n.props.event.key,n.state.name)},n.state={name:t.event.name},n}return E(t,e),t.prototype.render=function(){var e=this.state.name;return o.createElement(b.a,{confirmButtonText:Object(p.translate)("change_verb"),confirmDisable:!e||e===this.props.event.name,header:this.props.header,onClose:this.props.onClose,onConfirm:this.handleSubmit,size:"small"},o.createElement("div",{className:"modal-field"},o.createElement("label",null,Object(p.translate)("name")),o.createElement("input",{autoFocus:!0,onChange:this.changeInput,type:"text",value:e})))},t}(o.PureComponent);function O(e){var t=e.analysisKey,n=e.event,r=e.header,a=e.removeEventQuestion;return o.createElement(b.a,{confirmButtonText:Object(p.translate)("delete"),header:r,isDestructive:!0,onClose:e.onClose,onConfirm:function(){return e.onConfirm(t,n.key)}},a)}var _=o.memo((function(e){var t=e.analysisKey,n=e.event,r=e.canAdmin,a=e.isFirst,c=o.useState(!1),u=c[0],d=c[1],m=o.useState(!1),h=m[0],f=m[1],v="OTHER"===n.category,g="VERSION"===n.category,b=(v||g)&&e.onChange,E=(v||g&&!a)&&e.onDelete,_=r&&(b||E);return o.createElement("div",{className:"project-activity-event"},o.createElement(l.a,{className:i("project-activity-event-icon little-spacer-right text-middle",n.category)}),o.createElement(y,{event:n}),_&&o.createElement("span",{className:"nowrap"},b&&o.createElement(s.EditButton,{"aria-label":Object(p.translate)("project_activity.events.tooltip.edit"),className:"button-small","data-test":"project-activity__edit-event",onClick:function(){return d(!0)},stopPropagation:!0}),E&&o.createElement(s.DeleteButton,{"aria-label":Object(p.translate)("project_activity.events.tooltip.delete"),className:"button-small","data-test":"project-activity__delete-event",onClick:function(){return f(!0)},stopPropagation:!0})),u&&e.onChange&&o.createElement(j,{changeEvent:e.onChange,event:n,header:g?Object(p.translate)("project_activity.change_version"):Object(p.translate)("project_activity.change_custom_event"),onClose:function(){return d(!1)}}),h&&e.onDelete&&o.createElement(O,{analysisKey:t,event:n,header:g?Object(p.translate)("project_activity.remove_version"):Object(p.translate)("project_activity.remove_custom_event"),onClose:function(){return f(!1)},onConfirm:e.onDelete,removeEventQuestion:Object(p.translate)("project_activity."+(g?"remove_version":"remove_custom_event")+".question")}))}));t.a=o.memo((function(e){var t=e.analysisKey,n=e.canAdmin,r=e.events,i=e.isFirst,s=a()(r,(function(e){return"VERSION"===e.category?1:0}),"category");return o.createElement("div",{className:"big-spacer-top"},s.map((function(r){return o.createElement(_,{analysisKey:t,canAdmin:n,event:r,isFirst:i,key:r.key,onChange:e.onChange,onDelete:e.onDelete})})))}))},1449:function(e,t,n){"use strict";var r=n(658),a=n.n(r),o=n(13),i=n(688),s=n.n(i),c=n(37),l=n(675),p=n.n(l),u=n(844),d=n.n(u),m=n(659),h=n(673),f=n.n(h),y=n(679),v=n.n(y),g=n(694),b=n(674),E=n(809),j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function O(e){var t=e.elements,n=e.metricsTypeFilter,r=j(e,["elements","metricsTypeFilter"]),a="";return r.selectedElements.length>=6?a=o.createElement(b.Alert,{className:"spacer-left spacer-right spacer-top",variant:"info"},Object(c.translate)("project_activity.graphs.custom.add_metric_info")):n&&n.length>0&&(a=o.createElement(b.Alert,{className:"spacer-left spacer-right spacer-top",variant:"info"},Object(c.translateWithParameters)("project_activity.graphs.custom.type_x_message",n.map((function(e){return Object(c.translate)("metric.type",e)})).sort().join(", ")))),o.createElement("div",{className:"menu abs-width-300"},o.createElement(E.a,{allowNewElements:!1,allowSelection:r.selectedElements.length<6,elements:t,filterSelected:r.filterSelected,footerNode:a,onSearch:r.onSearch,onSelect:function(e){return t.includes(e)&&r.onSelect(e)},onUnselect:r.onUnselect,placeholder:Object(c.translate)("search.search_for_tags"),renderLabel:r.renderLabel,selectedElements:r.selectedElements}))}var _,x=(_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),D=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r},k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={metrics:[],query:"",selectedMetrics:[]},t.filterSelected=function(e,n){return n.filter((function(n){return t.getLocalizedMetricNameFromKey(n).toLowerCase().includes(e.toLowerCase())}))},t.filterMetricsElements=function(e,t){var n=e.metricsTypeFilter,r=e.metrics,a=e.selectedMetrics;return r.filter((function(e){return!(e.hidden||Object(g.isDiffMetric)(e.key)||["DATA","DISTRIB"].includes(e.type)||a.includes(e.key)||!Object(c.getLocalizedMetricName)(e).toLowerCase().includes(t.toLowerCase()))&&(!(n&&n.length>0)||n.includes(e.type))})).map((function(e){return e.key}))},t.getSelectedMetricsElements=function(e,n){var r=n||t.props.selectedMetrics;return e.filter((function(e){return r.includes(e.key)})).map((function(e){return e.key}))},t.getLocalizedMetricNameFromKey=function(e){var n=d()(t.props.metrics,{key:e});return void 0===n?e:Object(c.getLocalizedMetricName)(n)},t.onSearch=function(e){return t.setState({query:e}),Promise.resolve()},t.onSelect=function(e){t.props.addMetric(e),t.setState((function(n){return{selectedMetrics:p()(D(n.selectedMetrics,[e])),metrics:t.filterMetricsElements(t.props,n.query)}}))},t.onUnselect=function(e){t.props.removeMetric(e),t.setState((function(t){return{metrics:p()(D(t.metrics,[e])),selectedMetrics:t.selectedMetrics.filter((function(t){return t!==e}))}}))},t}return x(t,e),t.prototype.render=function(){var e=this,t=this.state.query,n=this.filterMetricsElements(this.props,t),r=this.getSelectedMetricsElements(this.props.metrics,this.props.selectedMetrics);return o.createElement(f.a,{className:"display-inline-block",overlay:o.createElement(O,{elements:n,filterSelected:this.filterSelected,metricsTypeFilter:this.props.metricsTypeFilter,onSearch:this.onSearch,onSelect:this.onSelect,onUnselect:this.onUnselect,renderLabel:function(t){return e.getLocalizedMetricNameFromKey(t)},selectedElements:r})},o.createElement(m.Button,{className:"spacer-left"},o.createElement("span",{className:"text-ellipsis text-middle"},Object(c.translate)("project_activity.graphs.custom.add")),o.createElement(v.a,{className:"text-top little-spacer-left"})))},t}(o.PureComponent),N=(n(1134),n(757)),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleGraphChange=function(e){e.value!==t.props.graph&&t.props.updateGraph(e.value)},t}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.addCustomMetric,n=e.className,r=e.graph,i=e.metrics,l=e.metricsTypeFilter,p=e.removeCustomMetric,u=e.selectedMetrics,d=void 0===u?[]:u,m=Object(N.e)(void 0===t||void 0===p).map((function(e){return{label:Object(c.translate)("project_activity.graphs",e),value:e}}));return o.createElement("div",{className:a()(n,"position-relative")},o.createElement(s.a,{className:"pull-left input-medium",clearable:!1,onChange:this.handleGraphChange,options:m,searchable:!1,value:r}),Object(N.j)(r)&&void 0!==t&&void 0!==p&&o.createElement(k,{addMetric:t,className:"pull-left spacer-left",metrics:i,metricsTypeFilter:l,removeMetric:p,selectedMetrics:d}))},t}(o.PureComponent);t.a=P},2139:function(e,t,n){var r=n(660),a=n(2140);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},i=(r(a,o),a.locals?a.locals:{});e.exports=i},2140:function(e,t,n){(t=n(661)(!1)).push([e.i,".project-activity-page{min-height:600px;height:calc(100vh - 250px)}.project-activity-page-side-outer{position:relative;width:400px;margin-bottom:0;display:flex;flex-direction:row;align-items:stretch}.project-activity-layout-page-main{flex-grow:1;min-width:640px;padding-left:20px;display:flex}.project-activity-layout-page-main-inner{min-width:640px;max-width:880px;margin-bottom:0;flex:1;display:flex;flex-direction:column;align-items:stretch}.project-activity-versions-list{max-width:400px;box-sizing:border-box;overflow:auto;flex-grow:1;flex-shrink:0;padding:16px 16px 16px 12px}.project-activity-day{margin-top:8px;margin-bottom:24px}.project-activity-day:last-child{margin-bottom:10px}.project-activity-date{margin-bottom:16px;font-size:16px;font-weight:700}.project-activity-analysis{position:relative;min-height:20px;padding:16px;cursor:pointer}.project-activity-analysis.selected{cursor:default;background-color:#ecf6fe}.project-activity-analysis:focus{outline:none}.project-activity-analysis:hover{background-color:#ecf6fe}.project-activity-analysis+.project-activity-analysis{border-top:none}.project-activity-analysis-actions{height:20px}.project-activity-time{height:20px;line-height:20px}.project-activity-event{line-height:20px;text-indent:-20px;padding-left:20px}.project-activity-event *{text-indent:0}.project-activity-event+.project-activity-event{margin-top:8px}.project-activity-event-inner-more-link{line-height:16px}.project-activity-event-icon.VERSION{color:#4b9fd5}.project-activity-event-icon.QUALITY_GATE{color:#9139d4}.project-activity-event-icon.QUALITY_PROFILE{color:#ccc}.project-activity-event-icon.DEFINITION_CHANGE{color:#33a759}.project-activity-event-icon.OTHER{color:#442d1b}.project-activity-version-badge{margin-left:-12px;padding-top:8px;padding-bottom:8px;background-color:#fff}.project-activity-version-badge.first,.project-activity-version-badge.sticky{position:absolute;top:0;left:12px;right:16px;padding-top:24px;z-index:1}.project-activity-version-badge.sticky+.project-activity-days-list{padding-top:36px}.project-activity-version-badge .analysis-version{max-width:385px;border-radius:0 2px 2px 0;overflow:hidden;text-overflow:ellipsis}.activity-graph-tooltip-line .project-activity-event-icon,.Select .project-activity-event-icon{margin-top:1px}.baseline-marker{position:absolute;top:-10px;left:0;right:0;display:flex;flex-direction:row;align-items:center}.baseline-marker>.wedge{border:10px solid transparent;border-left-color:#f1e8cb}.baseline-marker>hr{border:none;margin:0 0 0 -11px;background-color:#f1e8cb;height:2px;flex:1 0 auto}.baseline-marker>.label{background-color:#fbf3d5;border:1px solid #f1e8cb;padding:2px 8px;font-size:10px}",""]),e.exports=t},2241:function(e,t,n){"use strict";n.r(t),n.d(t,"PROJECT_ACTIVITY_GRAPH",(function(){return Ce}));var r=n(13),a=n(173),o=n(1012),i=n(1133),s=n(1421),c=n(757),l=n(678),p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r};var d,m=n(1035),h=n(677),f=n(37),y=n(699),v=n(680),g=(n(2139),n(1111)),b=n.n(g),E=n(658),j=n(1079),O=n(664),_=n.n(O),x=n(700),D=n.n(x),k=n(697),N=n(729),S=n.n(N),P=n(772),C=n.n(P),w=n(671),M=n.n(w),A=n(910),L=n.n(A),T=n(713),I=n(782),q=n(1447),H=n(693),B=n.n(H),F=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={name:""},t.handleNameChange=function(e){t.setState({name:e.target.value})},t.handleSubmit=function(){return t.props.addEvent(t.props.analysis.key,t.state.name)},t}return F(t,e),t.prototype.render=function(){return r.createElement(B.a,{confirmButtonText:Object(f.translate)("save"),confirmDisable:!this.state.name,header:Object(f.translate)(this.props.addEventButtonText),onClose:this.props.onClose,onConfirm:this.handleSubmit,size:"small"},r.createElement("div",{className:"modal-field"},r.createElement("label",null,Object(f.translate)("name")),r.createElement("input",{autoFocus:!0,onChange:this.handleNameChange,type:"text",value:this.state.name})))},t}(r.PureComponent);function z(e){var t=e.analysis,n=e.deleteAnalysis,a=e.onClose;return r.createElement(B.a,{confirmButtonText:Object(f.translate)("delete"),confirmData:t.key,header:Object(f.translate)("project_activity.delete_analysis"),isDestructive:!0,onClose:a,onConfirm:n},Object(f.translate)("project_activity.delete_analysis.question"))}var G=r.memo((function(e){var t=null,n=e.analysis,o=e.isBaseline,i=e.isFirst,s=e.canAdmin,c=e.canCreateVersion,l=e.parentScrollContainer,p=e.selected;r.useEffect((function(){if(t&&l&&p){var e=t.getBoundingClientRect().height;Object(I.scrollToElement)(t,{bottomOffset:e+20,topOffset:60,parent:l,smooth:!1})}}));var u=r.useState(!1),d=u[0],m=u[1],h=r.useState(!1),y=h[0],v=h[1],g=r.useState(!1),b=g[0],j=g[1],O=Object(a.parseDate)(n.date),_=null!=n.events.find((function(e){return"VERSION"===e.category})),x=s&&!_&&c,D=s,k=e.canDeleteAnalyses&&!i&&!n.manualNewCodePeriodBaseline;return r.createElement("li",{className:E("project-activity-analysis bordered-top bordered-bottom",{selected:p}),onClick:function(){return e.updateSelectedDate(n.date)},ref:function(e){return t=e}},r.createElement("div",{className:"display-flex-center display-flex-space-between"},r.createElement("div",{className:"project-activity-time"},r.createElement(L.a,{date:O,long:!1},(function(e){return r.createElement("time",{className:"text-middle",dateTime:O.toISOString()},e)}))),n.buildString&&r.createElement("div",{className:"flex-shrink small text-muted text-ellipsis"},Object(f.translateWithParameters)("project_activity.analysis_build_string_X",n.buildString)),(x||D||k)&&r.createElement(C.a,null,r.createElement("div",{className:"project-activity-analysis-actions big-spacer-left"},r.createElement(S.a,{overlayPlacement:T.PopupPlacement.BottomRight,small:!0,toggleClassName:"js-analysis-actions"},x&&r.createElement(N.ActionsDropdownItem,{className:"js-add-version",onClick:function(){return v(!0)}},Object(f.translate)("project_activity.add_version")),D&&r.createElement(N.ActionsDropdownItem,{className:"js-add-event",onClick:function(){return m(!0)}},Object(f.translate)("project_activity.add_custom_event")),(x||D)&&k&&r.createElement(N.ActionsDropdownDivider,null),k&&r.createElement(N.ActionsDropdownItem,{className:"js-delete-analysis",destructive:!0,onClick:function(){return j(!0)}},Object(f.translate)("project_activity.delete_analysis"))),y&&r.createElement(R,{addEvent:e.addVersion,addEventButtonText:"project_activity.add_version",analysis:n,onClose:function(){return v(!1)}}),d&&r.createElement(R,{addEvent:e.addCustomEvent,addEventButtonText:"project_activity.add_custom_event",analysis:n,onClose:function(){return m(!1)}}),b&&r.createElement(z,{analysis:n,deleteAnalysis:e.deleteAnalysis,onClose:function(){return j(!1)}})))),n.events.length>0&&r.createElement(q.a,{analysisKey:n.key,canAdmin:s,events:n.events,isFirst:i,onChange:e.changeEvent,onDelete:e.deleteEvent}),o&&r.createElement("div",{className:"baseline-marker"},r.createElement("div",{className:"wedge"}),r.createElement("hr",null),r.createElement("div",{className:"label display-flex-center"},Object(f.translate)("project_activity.new_code_period_start"),r.createElement(M.a,{className:"little-spacer-left",overlay:Object(f.translate)("project_activity.new_code_period_start.help"),placement:"top"}))))})),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(e){function t(t){var n=e.call(this,t)||this;return n.handleScroll=function(){return n.updateStickyBadges(!0)},n.resetScrollTop=function(e,t){if(n.scrollContainer&&(n.scrollContainer.scrollTop=e),n.badges)for(var r=1;r<n.badges.length;r++)n.badges[r].removeAttribute("originOffsetTop"),n.badges[r].classList.remove("sticky");n.updateStickyBadges(t)},n.updateStickyBadges=function(e){if(n.scrollContainer&&n.badges){var t=n.scrollContainer.scrollTop;if(null!=t){for(var r,a=1;a<n.badges.length;a++){var o=n.badges[a],i=o.getAttribute("originOffsetTop");null==i&&(i=String(o.offsetTop),o.setAttribute("originOffsetTop",i)),Number(i)<t+18+2*a?(e&&!o.classList.contains("sticky")&&(r=i),o.classList.add("sticky")):o.classList.remove("sticky")}e&&null!=r&&(n.scrollContainer.scrollTop=Number(r)-6)}}},n.updateSelectedDate=function(e){n.props.updateQuery({selectedDate:e})},n.handleScroll=b()(n.handleScroll,20),n}return Q(t,e),t.prototype.componentDidMount=function(){this.badges=document.getElementsByClassName("project-activity-version-badge"),this.analyses=document.getElementsByClassName("project-activity-analysis")},t.prototype.componentDidUpdate=function(e){this.scrollContainer&&Object(m.c)(e.query,this.props.query)&&this.resetScrollTop(0,!0)},t.prototype.shouldRenderBaselineMarker=function(e){return Boolean(this.props.leakPeriodDate&&Object(j.isEqual)(this.props.leakPeriodDate,e.date))},t.prototype.renderAnalysis=function(e){var t=this.props.analyses[0].key,n=this.props.query.selectedDate?this.props.query.selectedDate.valueOf():null;return r.createElement(G,{addCustomEvent:this.props.addCustomEvent,addVersion:this.props.addVersion,analysis:e,canAdmin:this.props.canAdmin,canCreateVersion:this.props.project.qualifier===k.a.Project,canDeleteAnalyses:this.props.canDeleteAnalyses,changeEvent:this.props.changeEvent,deleteAnalysis:this.props.deleteAnalysis,deleteEvent:this.props.deleteEvent,isBaseline:this.shouldRenderBaselineMarker(e),isFirst:e.key===t,key:e.key,parentScrollContainer:this.scrollContainer,selected:e.date.valueOf()===n,updateSelectedDate:this.updateSelectedDate})},t.prototype.render=function(){var e=this,t=Object(m.f)(this.props.analyses,this.props.query),n=t.length>1||1===t.length&&Object.keys(t[0].byDay).length>0;return 0!==this.props.analyses.length&&n?r.createElement("ul",{className:"project-activity-versions-list",onScroll:this.handleScroll,ref:function(t){return e.scrollContainer=t},style:{paddingTop:this.props.project.qualifier===k.a.Project?52:void 0}},t.map((function(t,n){var o=Object.keys(t.byDay);return o.length<=0?null:r.createElement("li",{key:t.key||"noversion"},t.version&&r.createElement("div",{className:E("project-activity-version-badge",{first:0===n})},r.createElement(_.a,{mouseEnterDelay:.5,overlay:Object(f.translate)("version")+" "+t.version},r.createElement("span",{className:"analysis-version"},t.version))),r.createElement("ul",{className:"project-activity-days-list"},o.map((function(n){return r.createElement("li",{className:"project-activity-day","data-day":Object(a.toShortNotSoISOString)(Number(n)),key:n},r.createElement("div",{className:"project-activity-date"},r.createElement(D.a,{date:Number(n),long:!0})),r.createElement("ul",{className:"project-activity-analyses-list"},null!=t.byDay[n]&&t.byDay[n].map((function(t){return e.renderAnalysis(t)}))))}))))})),this.props.analysesLoading&&r.createElement("li",{className:"text-center"},r.createElement("i",{className:"spinner"}))):r.createElement("div",{className:"boxed-group-inner"},this.props.initializing?r.createElement("div",{className:"text-center"},r.createElement("i",{className:"spinner"})):r.createElement("span",{className:"note"},Object(f.translate)("no_results")))},t}(r.PureComponent),W=n(675),U=n.n(W),K=n(2141),Z=n.n(K),Y=n(1430),J=n.n(Y),X=n(2143),$=n.n(X),ee=n(718),te=n.n(ee),ne=n(1449),re=n(1446),ae=n(1021),oe=n(2144),ie=n.n(oe);function se(e){return e.loading||!Object(c.i)(e.series)?null:r.createElement("div",{className:"activity-graph-zoom"},r.createElement(ae.AutoSizer,{disableHeight:!0},(function(t){var n=t.width;return r.createElement(ie.a,{endDate:e.graphEndDate,height:64,leakPeriodDate:e.leakPeriodDate,metricType:e.metricsType,padding:[0,10,18,60],series:e.series,showAreas:e.showAreas,startDate:e.graphStartDate,updateZoom:e.updateGraphZoom,width:n})})))}var ce=n(860),le=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ue=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r},de=function(e){function t(t){var n=e.call(this,t)||this;n.getStateZoomDates=function(e,t,n){var r={from:t.query.from||void 0,to:t.query.to||void 0};if(!e||Object(m.e)(e.query,t.query))return{graphEndDate:r.to,graphStartDate:r.from};if(void 0===r.to&&void 0===r.from&&void 0!==n){var a=Z()(n.map((function(e){return e.data.find((function(e){return Boolean(e.y||0===e.y)}))})),"x"),o=J()(n.map((function(e){return $()(e.data,(function(e){return Boolean(e.y||0===e.y)}))})),"x");return{graphEndDate:o&&o.x,graphStartDate:a&&a.x}}return null},n.getMetricsTypeFilter=function(){if(!(n.state.graphs.length<2))return n.state.graphs.filter((function(e){return e.length<3})).map((function(e){return e[0].type}))},n.addCustomMetric=function(e){var t=ue(n.props.query.customMetrics,[e]);Object(c.k)(Ce,n.props.project,ce.a.custom,t),n.props.updateQuery({customMetrics:t})},n.removeCustomMetric=function(e){var t=n.props.query.customMetrics.filter((function(t){return t!==e}));Object(c.k)(Ce,n.props.project,ce.a.custom,t),n.props.updateQuery({customMetrics:t})},n.updateGraph=function(e){if(Object(c.k)(Ce,n.props.project,e),Object(c.j)(e)&&n.props.query.customMetrics.length<=0){var t=Object(c.c)(Ce,n.props.project).customGraphs;n.props.updateQuery({graph:e,customMetrics:t})}else n.props.updateQuery({graph:e,customMetrics:[]})},n.updateGraphZoom=function(e,t){if(void 0!==t&&void 0!==e&&Math.abs(t.valueOf()-e.valueOf())<432e5)return;n.setState({graphStartDate:e,graphEndDate:t}),n.updateQueryDateRange([e,t])},n.updateSelectedDate=function(e){return n.props.updateQuery({selectedDate:e})},n.updateQueryDateRange=function(e){if(void 0===e[0]||void 0===e[1])n.props.updateQuery({from:e[0],to:e[1]});else{var t=U()(e);n.props.updateQuery({from:t[0],to:t[1]})}};var r=Object(c.b)(t.measuresHistory,t.query.graph,t.metrics,Object(c.d)(t.query.graph,t.query.customMetrics));return n.state=pe({series:r,graphs:Object(c.l)(r,2,3)},n.getStateZoomDates(void 0,t,r)),n.updateQueryDateRange=te()(n.updateQueryDateRange,500),n}return le(t,e),t.prototype.componentDidUpdate=function(e){var t,n;(e.measuresHistory!==this.props.measuresHistory||Object(m.g)(e.query,this.props.query))&&(t=Object(c.b)(this.props.measuresHistory,this.props.query.graph,this.props.metrics,Object(c.d)(this.props.query.graph,this.props.query.customMetrics)),n=Object(c.l)(t,2,3));var r=this.getStateZoomDates(e,this.props,t);if(t||r){var a={};t&&(a.series=t),n&&(a.graphs=n),r&&(a=pe(pe({},a),r)),this.setState(a)}},t.prototype.render=function(){var e=this.props,t=e.leakPeriodDate,n=e.loading,a=e.metrics,o=e.query,i=this.state,s=i.graphEndDate,l=i.graphStartDate,p=i.series;return r.createElement("div",{className:"project-activity-layout-page-main-inner boxed-group boxed-group-inner"},r.createElement(ne.a,{addCustomMetric:this.addCustomMetric,className:"big-spacer-bottom",graph:o.graph,metrics:a,metricsTypeFilter:this.getMetricsTypeFilter(),removeCustomMetric:this.removeCustomMetric,selectedMetrics:this.props.query.customMetrics,updateGraph:this.updateGraph}),r.createElement(re.a,{analyses:this.props.analyses,graph:o.graph,graphEndDate:s,graphStartDate:l,graphs:this.state.graphs,leakPeriodDate:t,loading:n,measuresHistory:this.props.measuresHistory,removeCustomMetric:this.removeCustomMetric,selectedDate:this.props.query.selectedDate,series:p,updateGraphZoom:this.updateGraphZoom,updateSelectedDate:this.updateSelectedDate}),r.createElement(se,{graphEndDate:s,graphStartDate:l,leakPeriodDate:t,loading:n,metricsType:Object(c.g)(p),series:p,showAreas:[ce.a.coverage,ce.a.duplications].includes(o.graph),updateGraphZoom:this.updateGraphZoom}))},t}(r.PureComponent),me=n(688),he=n.n(me),fe=n(659),ye=n(979),ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){var n=e.from,r=e.to;t.props.onChange({from:n,to:r})},t.handleResetClick=function(){t.props.onChange({from:void 0,to:void 0})},t}return ve(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement(ye.a,{onChange:this.handleChange,value:{from:this.props.from,to:this.props.to}}),r.createElement(fe.Button,{className:"spacer-left",disabled:void 0===this.props.from&&void 0===this.props.to,onClick:this.handleResetClick},Object(f.translate)("project_activity.reset_dates")))},t}(r.PureComponent),be=n(948),Ee=n.n(be),je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),t.props.onSelect(t.props.option,e)},t.handleMouseEnter=function(e){t.props.onFocus(t.props.option,e)},t.handleMouseMove=function(e){t.props.isFocused||t.props.onFocus(t.props.option,e)},t}return je(t,e),t.prototype.render=function(){var e=this.props.option;return r.createElement("div",{className:this.props.className,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,role:"link",tabIndex:0,title:e.label},r.createElement(Ee.a,{className:"project-activity-event-icon "+e.value}),r.createElement("span",{className:"little-spacer-left"},this.props.children))},t}(r.PureComponent);function _e(e){var t=e.children,n=e.value;return r.createElement("div",{className:"Select-value",title:n.label},r.createElement("div",{className:"Select-value-label"},r.createElement(Ee.a,{className:"project-activity-event-icon "+n.value}),r.createElement("span",{className:"little-spacer-left"},t)))}var xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCategoryChange=function(e){return t.props.updateQuery({category:e?e.value:""})},t}return xe(t,e),t.prototype.render=function(){var e="APP"===this.props.project.qualifier,t=(e?m.a:m.b).map((function(e){return{label:Object(f.translate)("event.category",e),value:e}}));return r.createElement("header",{className:"page-header"},!["VW","SVW"].includes(this.props.project.qualifier)&&r.createElement(he.a,{className:E("pull-left big-spacer-right",{"input-medium":!e,"input-large":e}),clearable:!0,onChange:this.handleCategoryChange,optionComponent:Oe,options:t,placeholder:Object(f.translate)("project_activity.filter_events")+"...",searchable:!1,value:this.props.category,valueComponent:_e}),r.createElement(ge,{from:this.props.from,onChange:this.props.updateQuery,to:this.props.to}))},t}(r.PureComponent);function ke(e){var t=e.analyses,n=e.measuresHistory,o=e.query,i=e.project.configuration,s=("TRK"===e.project.qualifier||"APP"===e.project.qualifier)&&!!i&&i.showHistory,c=!!i&&i.showHistory;return r.createElement("div",{className:"page page-limited",id:"project-activity"},r.createElement(v.a,{suggestions:"project_activity"}),r.createElement(h.a,{defer:!1,title:Object(f.translate)("project_activity.page")}),r.createElement(y.a,{anchor:"activity_main"}),r.createElement(De,{category:o.category,from:o.from,project:e.project,to:o.to,updateQuery:e.updateQuery}),r.createElement("div",{className:"layout-page project-activity-page"},r.createElement("div",{className:"layout-page-side-outer project-activity-page-side-outer boxed-group"},r.createElement(V,{addCustomEvent:e.addCustomEvent,addVersion:e.addVersion,analyses:t,analysesLoading:e.analysesLoading,canAdmin:s,canDeleteAnalyses:c,changeEvent:e.changeEvent,deleteAnalysis:e.deleteAnalysis,deleteEvent:e.deleteEvent,initializing:e.initializing,leakPeriodDate:e.project.leakPeriodDate?Object(a.parseDate)(e.project.leakPeriodDate):void 0,project:e.project,query:e.query,updateQuery:e.updateQuery})),r.createElement("div",{className:"project-activity-layout-page-main"},r.createElement(de,{analyses:t,leakPeriodDate:e.project.leakPeriodDate?Object(a.parseDate)(e.project.leakPeriodDate):void 0,loading:e.graphLoading,measuresHistory:n,metrics:e.metrics,project:e.project.key,query:o,updateQuery:e.updateQuery}))))}var Ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=function(){return(Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Pe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ce="sonar_project_activity.graph",we=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.addCustomEvent=function(e,t,r){return i.b(e,t,r).then((function(e){var t=e.analysis,r=Pe(e,["analysis"]);n.mounted&&n.setState(function(e,t){return function(n){return{analyses:n.analyses.map((function(n){return n.key!==e?n:p(p({},n),{events:u(n.events,[t])})}))}}}(t,r))}))},n.addVersion=function(e,t){return n.addCustomEvent(e,t,"VERSION")},n.changeEvent=function(e,t){return i.a(e,t).then((function(e){var t=e.analysis,r=Pe(e,["analysis"]);n.mounted&&n.setState(function(e,t){return function(n){return{analyses:n.analyses.map((function(n){return n.key!==e?n:p(p({},n),{events:n.events.map((function(e){return e.key===t.key?p(p({},e),t):e}))})}))}}}(t,r))}))},n.deleteAnalysis=function(e){return i.c(e).then((function(){n.mounted&&(n.updateGraphData(n.state.query.graph||c.a,n.state.query.customMetrics),n.setState(function(e){return function(t){return{analyses:t.analyses.filter((function(t){return t.key!==e}))}}}(e)))}))},n.deleteEvent=function(e,t){return i.d(t).then((function(){n.mounted&&n.setState(function(e,t){return function(n){return{analyses:n.analyses.map((function(n){return n.key!==e?n:p(p({},n),{events:n.events.filter((function(e){return e.key!==t}))})}))}}}(e,t))}))},n.fetchActivity=function(e,t,r,o){var s=Se({project:e,p:t,ps:r},Object(l.d)(n.props.branchLike));return i.e(Se(Se({},o),s)).then((function(e){var t=e.analyses,n=e.paging;return{analyses:t.map((function(e){return Se(Se({},e),{date:Object(a.parseDate)(e.date)})})),paging:n}}))},n.fetchMeasuresHistory=function(e){return e.length<=0?Promise.resolve([]):Object(s.a)(Se({component:n.props.component.key,metrics:e.join()},Object(l.d)(n.props.branchLike))).then((function(e){return e.measures.map((function(e){return{metric:e.metric,history:e.history.map((function(e){return{date:Object(a.parseDate)(e.date),value:e.value}}))}}))}))},n.fetchAllActivities=function(e){n.setState({analysesLoading:!0}),n.loadAllActivities(e).then((function(e){var t=e.analyses;n.mounted&&n.setState({analyses:t,analysesLoading:!1})}),(function(){n.mounted&&n.setState({analysesLoading:!1})}))},n.loadAllActivities=function(e,t){if(t&&t.paging.pageIndex*t.paging.pageSize>=t.paging.total)return Promise.resolve(t);var r=t?t.paging.pageIndex+1:1;return n.fetchActivity(e,r,500).then((function(r){return t?n.loadAllActivities(e,{analyses:t.analyses.concat(r.analyses),paging:r.paging}):n.loadAllActivities(e,r)}))},n.getTopLevelComponent=function(e){for(var t=e.breadcrumbs.length-1;t>0&&!["TRK","VW","APP"].includes(e.breadcrumbs[t].qualifier);)t--;return e.breadcrumbs[t].key},n.updateGraphData=function(e,t){var r=Object(c.f)(e,t);n.setState({graphLoading:!0}),n.fetchMeasuresHistory(r).then((function(e){n.mounted&&n.setState({graphLoading:!1,measuresHistory:e})}),(function(){n.mounted&&n.setState({graphLoading:!1,measuresHistory:[]})}))},n.updateQuery=function(e){var t=Object(m.j)(Se(Se({},n.state.query),e));n.props.router.push({pathname:n.props.location.pathname,query:Se(Se(Se({},t),Object(l.d)(n.props.branchLike)),{id:n.props.component.key})})},n.shouldRedirect=function(){var e=n.props.location.query;if(!e)return!1;var t=Object.keys(e).some((function(t){return"id"!==t&&""!==e[t]})),r=Object(c.c)(Ce,n.props.component.key),a=r.graph,o=r.customGraphs,i=Object(c.j)(a)&&o.length<=0;return!t&&null!=a&&a!==c.a&&!i},n.state={analyses:[],analysesLoading:!1,graphLoading:!0,initialized:!1,measuresHistory:[],metrics:[],query:Object(m.h)(t.location.query)},n}return Ne(t,e),t.prototype.componentDidMount=function(){if(this.mounted=!0,this.shouldRedirect()){var e=Object(c.c)(Ce,this.props.component.key),t=e.graph,n=e.customGraphs,r=Se(Se({},this.state.query),{graph:t});Object(c.j)(r.graph)&&(r.customMetrics=n),this.props.router.replace({pathname:this.props.location.pathname,query:Se(Se({},Object(m.j)(r)),Object(l.d)(this.props.branchLike))})}else this.firstLoadData(this.state.query,this.props.component)},t.prototype.componentDidUpdate=function(e){if(e.location.query!==this.props.location.query){var t=Object(m.h)(this.props.location.query);(t.graph!==this.state.query.graph||Object(m.d)(this.state.query,t))&&(this.state.initialized?this.updateGraphData(t.graph||c.a,t.customMetrics):this.firstLoadData(t,this.props.component)),this.setState({query:t})}},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.filterMetrics=function(e,t){var n=e.qualifier;return["VW","SVW"].includes(n)?t:t.filter((function(e){return"security_review_rating"!==e.key}))},t.prototype.firstLoadData=function(e,t){var n=this,r=Object(c.f)(e.graph||c.a,e.customMetrics),a=this.getTopLevelComponent(t);Promise.all([this.fetchActivity(a,1,100,Object(m.i)(e)),Object(o.c)(),this.fetchMeasuresHistory(r)]).then((function(e){var r=e[0].analyses,o=e[1],i=e[2];n.mounted&&(n.setState({analyses:r,graphLoading:!1,initialized:!0,measuresHistory:i,metrics:n.filterMetrics(t,o)}),n.fetchAllActivities(a))}),(function(){n.mounted&&n.setState({initialized:!0,graphLoading:!1})}))},t.prototype.render=function(){return this.shouldRedirect()?null:r.createElement(ke,{addCustomEvent:this.addCustomEvent,addVersion:this.addVersion,analyses:this.state.analyses,analysesLoading:this.state.analysesLoading,changeEvent:this.changeEvent,deleteAnalysis:this.deleteAnalysis,deleteEvent:this.deleteEvent,graphLoading:!this.state.initialized||this.state.graphLoading,initializing:!this.state.initialized,measuresHistory:this.state.measuresHistory,metrics:this.state.metrics,project:this.props.component,query:this.state.query,updateQuery:this.updateQuery})},t}(r.PureComponent);t.default=we},680:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r,a=n(13),o=n(705),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function s(e){var t=e.suggestions;return a.createElement(o.a.Consumer,null,(function(e){var n=e.addSuggestions,r=e.removeSuggestions;return a.createElement(c,{addSuggestions:n,removeSuggestions:r,suggestions:t})}))}var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},t.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))},t.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},t.prototype.render=function(){return null},t}(a.PureComponent)},697:function(e,t,n){"use strict";var r,a;function o(e){return!!e&&[r.Portfolio.toString(),r.SubPortfolio.toString()].includes(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),function(e){e.Application="APP",e.Directory="DIR",e.Developper="DEV",e.File="FIL",e.Portfolio="VW",e.Project="TRK",e.SubPortfolio="SVW",e.SubProject="BRC",e.TestFile="UTS"}(r||(r={})),function(e){e.Public="public",e.Private="private"}(a||(a={}))},699:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(13),o=n(37),i=n(749),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function l(e){return a.createElement(i.a.Consumer,null,(function(t){var n=t.addA11ySkipLink,r=t.removeA11ySkipLink;return a.createElement(p,c({addA11ySkipLink:n,removeA11ySkipLink:r},e))}))}var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLink=function(){var e=t.props,n=e.anchor,r=e.label;return{key:n,label:void 0===r?Object(o.translate)("skip_to_content"):r,weight:e.weight}},t}return s(t,e),t.prototype.componentDidMount=function(){this.props.addA11ySkipLink(this.getLink())},t.prototype.componentWillUnmount=function(){this.props.removeA11ySkipLink(this.getLink())},t.prototype.render=function(){var e=this.props.anchor;return a.createElement("span",{id:"a11y_target__"+e})},t}(a.PureComponent)},757:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"h",(function(){return x})),n.d(t,"i",(function(){return D})),n.d(t,"g",(function(){return k})),n.d(t,"d",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"l",(function(){return P})),n.d(t,"b",(function(){return C})),n.d(t,"k",(function(){return w})),n.d(t,"c",(function(){return M}));var r,a,o=n(675),i=n.n(o),s=n(732),c=n.n(s),l=n(871),p=n.n(l),u=n(998),d=n.n(u),m=n(37),h=n(175),f=n(694),y=n(743),v=n(860),g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r},b=v.a.issues,E=((r={})[v.a.issues]=[y.a.bugs,y.a.code_smells,y.a.vulnerabilities],r[v.a.coverage]=[y.a.lines_to_cover,y.a.uncovered_lines],r[v.a.duplications]=[y.a.ncloc,y.a.duplicated_lines],r),j=((a={})[v.a.issues]=E[v.a.issues].concat([y.a.reliability_rating,y.a.security_rating,y.a.sqale_rating]),a[v.a.coverage]=g(E[v.a.coverage],[y.a.coverage]),a[v.a.duplications]=g(E[v.a.duplications],[y.a.duplicated_lines_density]),a);function O(e){return e===v.a.custom}function _(e){void 0===e&&(e=!1);var t=[v.a.issues,v.a.coverage,v.a.duplications];return e?t:g(t,[v.a.custom])}function x(e){return e.data.some((function(e){return Boolean(e.y||0===e.y)}))}function D(e){return e.some((function(e){return e.data&&e.data.length>1}))}function k(e){return e.length>0?e[0].type:"INT"}function N(e,t){return O(e)?t:E[e]}function S(e,t){return O(e)?t:j[e]}function P(e,t,n){return p()(c()(e,(function(e){return e.type})),(function(e){return d()(e,n)})).slice(0,t)}function C(e,t,n,r){return r.length<=0||void 0===e?[]:i()(e.filter((function(e){return r.indexOf(e.metric)>=0})).map((function(r){if(r.metric===y.a.uncovered_lines&&!O(t))return function(e,t){var n=t.find((function(e){return e.metric===y.a.lines_to_cover}));return{data:n?e.history.map((function(e,t){return{x:e.date,y:Number(n.history[t].value)-Number(e.value)}})):[],name:"covered_lines",translatedName:Object(m.translate)("project_activity.custom_metric.covered_lines"),type:"INT"}}(r,e);var a=function(e,t){if(Array.isArray(t))return t.find((function(t){return t.key===e}));return t[e]}(r.metric,n);return{data:r.history.map((function(e){return{x:e.date,y:a&&"LEVEL"===a.type?e.value:Number(e.value)}})),name:r.metric,translatedName:a?Object(m.getLocalizedMetricName)(a):Object(f.localizeMetric)(r.metric),type:a?a.type:"INT"}})),(function(e){return r.indexOf("covered_lines"===e.name?"uncovered_lines":e.name)}))}function w(e,t,n,r){void 0===r&&(r=[]),Object(h.save)(e,n,t),O(n)&&Object(h.save)(e+".custom",r.join(","),t)}function M(e,t){var n=Object(h.get)(e+".custom",t);return{graph:Object(h.get)(e,t)||b,customGraphs:n?n.split(","):[]}}},809:function(e,t,n){"use strict";var r=n(736),a=n.n(r),o=n(658),i=n(13),s=n(704),c=n.n(s),l=n(37),p=n(692),u=n.n(p);function d(e){var t=e.active,n=e.custom,r=e.disabled,a=e.element,s=e.selected,c=function(){return e.onHover(a)},p=o({active:t,disabled:r}),d=e.renderLabel(a);return i.createElement("li",{onFocus:c,onMouseOver:c},i.createElement(u.a,{checked:Boolean(s),className:p,disabled:r,id:a,onCheck:e.onSelectChange},n?i.createElement("span",{"aria-label":Object(l.translate)("create_new_element")+": "+d,className:"little-spacer-left"},i.createElement("span",{"aria-hidden":!0,className:"little-spacer-right"},"+"),d):i.createElement("span",{className:"little-spacer-left"},d)))}var m,h=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r},y=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleSelectChange=function(e,t){e?n.onSelectItem(t):n.onUnselectItem(t)},n.handleSearchChange=function(e){n.onSearchQuery(n.props.validateSearchInput(e))},n.handleElementHover=function(e){n.setState((function(t,r){return{activeIdx:n.getAllElements(r,t).indexOf(e)}}))},n.handleKeyboard=function(e){switch(e.keyCode){case 40:e.stopPropagation(),e.preventDefault(),n.setState(n.selectNextElement);break;case 38:e.stopPropagation(),e.preventDefault(),n.setState(n.selectPreviousElement);break;case 37:case 39:e.stopPropagation();break;case 13:n.state.activeIdx>=0&&n.toggleSelect(n.getAllElements(n.props,n.state)[n.state.activeIdx])}},n.onSearchQuery=function(e){n.setState({activeIdx:0,loading:!0,query:e}),n.props.onSearch(e).then(n.stopLoading,n.stopLoading)},n.onSelectItem=function(e){n.isNewElement(e,n.props)&&n.onSearchQuery(""),n.props.onSelect(e)},n.onUnselectItem=function(e){return n.props.onUnselect(e)},n.isNewElement=function(e,t){var n=t.selectedElements,r=t.elements;return e.length>0&&-1===n.indexOf(e)&&-1===r.indexOf(e)},n.updateSelectedElements=function(e){n.setState((function(t){return t.query?{selectedElements:e.filterSelected(t.query,e.selectedElements)}:{selectedElements:f(e.selectedElements)}}))},n.updateUnselectedElements=function(e){n.setState((function(t){return 0===e.listSize?{unselectedElements:a()(e.elements,e.selectedElements)}:e.listSize<t.selectedElements.length?{unselectedElements:[]}:{unselectedElements:a()(e.elements,e.selectedElements).slice(0,e.listSize-t.selectedElements.length)}}))},n.getAllElements=function(e,t){return n.isNewElement(t.query,e)?f(t.selectedElements,t.unselectedElements,[t.query]):f(t.selectedElements,t.unselectedElements)},n.setElementActive=function(e){return n.setState({activeIdx:e})},n.selectNextElement=function(e,t){var r=e.activeIdx,a=n.getAllElements(t,e);return r<0||r>=a.length-1?{activeIdx:0}:{activeIdx:r+1}},n.selectPreviousElement=function(e,t){var r=e.activeIdx,a=n.getAllElements(t,e);return r<=0?{activeIdx:a.length-1}:{activeIdx:r-1}},n.stopLoading=function(){n.mounted&&n.setState({loading:!1})},n.toggleSelect=function(e){-1===n.props.selectedElements.indexOf(e)?n.onSelectItem(e):n.onUnselectItem(e)},n.state={activeIdx:0,loading:!0,query:"",selectedElements:[],unselectedElements:[]},n}return h(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.onSearchQuery(""),this.updateSelectedElements(this.props),this.updateUnselectedElements(this.props),this.container&&this.container.addEventListener("keydown",this.handleKeyboard,!0)},t.prototype.componentWillReceiveProps=function(e){if(this.props.elements!==e.elements||this.props.selectedElements!==e.selectedElements){this.updateSelectedElements(e),this.updateUnselectedElements(e);var t=this.getAllElements(e,this.state).length;this.state.activeIdx>=t&&this.setState({activeIdx:t-1})}},t.prototype.componentDidUpdate=function(){this.searchInput&&this.searchInput.focus()},t.prototype.componentWillUnmount=function(){this.mounted=!1,this.container&&this.container.removeEventListener("keydown",this.handleKeyboard)},t.prototype.render=function(){var e=this,t=this.props,n=t.allowSelection,r=void 0===n||n,a=t.allowNewElements,s=void 0===a||a,p=t.footerNode,u=void 0===p?"":p,m=this.props.renderLabel,h=this.state,f=h.query,y=h.activeIdx,v=h.selectedElements,g=h.unselectedElements,b=this.getAllElements(this.props,this.state)[y],E=s&&this.isNewElement(f,this.props),j=0===this.props.listSize,O=o("menu",{"menu-vertically-limited":j,"spacer-top":j,"with-top-separator":j,"with-bottom-separator":Boolean(u)});return i.createElement("div",{className:"multi-select",ref:function(t){return e.container=t}},i.createElement("div",{className:"menu-search"},i.createElement(c.a,{autoFocus:!0,className:"little-spacer-top",loading:this.state.loading,onChange:this.handleSearchChange,placeholder:this.props.placeholder,value:f})),i.createElement("ul",{className:O},v.length>0&&v.map((function(t){return i.createElement(d,{active:b===t,element:t,key:t,onHover:e.handleElementHover,onSelectChange:e.handleSelectChange,renderLabel:m,selected:!0})})),g.length>0&&g.map((function(t){return i.createElement(d,{active:b===t,disabled:!r,element:t,key:t,onHover:e.handleElementHover,onSelectChange:e.handleSelectChange,renderLabel:m})})),E&&i.createElement(d,{active:b===f,custom:!0,element:f,key:f,onHover:this.handleElementHover,onSelectChange:this.handleSelectChange,renderLabel:m}),!E&&v.length<1&&g.length<1&&i.createElement("li",{className:"spacer-left"},Object(l.translateWithParameters)("no_results_for_x",f))),u)},t.defaultProps={filterSelected:function(e,t){return t.filter((function(t){return t.includes(e)}))},listSize:0,renderLabel:function(e){return e},validateSearchInput:function(e){return e}},t}(i.PureComponent);t.a=y},860:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.issues="issues",e.coverage="coverage",e.duplications="duplications",e.custom="custom"}(r||(r={}))},879:function(e,t,n){"use strict";var r,a=n(834),o=n.n(a),i=n(658),s=n(733),c=n(786),l=n(816),p=n(817),u=n(13),d=n(653),m=n(659),h=n(889),f=n.n(h),y=n(688),v=n.n(y),g=n(880),b=n.n(g),E=n(842),j=n.n(E),O=n(765),_=n.n(O),x=n(672),D=n(37),k=(n(881),n(883),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},S=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},P=Object(x.lazyLoadComponent)((function(){return n.e(338).then(n.t.bind(null,1037,7))}),"DayPicker"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.focus=function(){n.input&&n.input.focus(),n.openCalendar()},n.handleResetClick=function(){n.closeCalendar(),n.props.onChange(void 0)},n.openCalendar=function(){n.setState({currentMonth:n.props.value||n.props.currentMonth||new Date,lastHovered:void 0,open:!0})},n.closeCalendar=function(){n.setState({open:!1})},n.handleDayClick=function(e,t){t.disabled||(n.closeCalendar(),n.props.onChange(e))},n.handleDayMouseEnter=function(e,t){n.setState({lastHovered:t.disabled?void 0:e})},n.handleCurrentMonthChange=function(e){var t=e.value;n.setState((function(e){return{currentMonth:c(e.currentMonth,t)}}))},n.handleCurrentYearChange=function(e){var t=e.value;n.setState((function(e){return{currentMonth:l(e.currentMonth,t)}}))},n.handlePreviousMonthClick=function(){n.setState((function(e){return{currentMonth:p(e.currentMonth,1)}}))},n.handleNextMonthClick=function(){n.setState((function(e){return{currentMonth:s(e.currentMonth,1)}}))},n.state={currentMonth:t.value||t.currentMonth||new Date,open:!1},n}return k(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=n.highlightFrom,a=n.highlightTo,s=n.minDate,c=n.value,l=this.state.lastHovered,p=this.props.maxDate||new Date,d=o()(12),h=o()((new Date).getFullYear()-10,(new Date).getFullYear()+1),y=c?[c]:[],g=l||c;r&&g&&(e={highlighted:{from:r,to:g}},y.push(r)),a&&g&&(e={highlighted:{from:g,to:a}},y.push(a));var E=o()(7).map(D.getWeekDayName),O=o()(7).map(D.getShortWeekDayName);return u.createElement(f.a,{onClickOutside:this.closeCalendar},u.createElement("span",{className:i("date-input-control",this.props.className)},u.createElement(M,{className:i("date-input-control-input",this.props.inputClassName,{"is-filled":void 0!==this.props.value}),innerRef:function(e){return t.input=e},name:this.props.name,onFocus:this.openCalendar,placeholder:this.props.placeholder,readOnly:!0,type:"text",value:c}),u.createElement(b.a,{className:"date-input-control-icon",fill:""}),void 0!==this.props.value&&u.createElement(m.ClearButton,{className:"button-tiny date-input-control-reset",iconProps:{size:12},onClick:this.handleResetClick}),this.state.open&&u.createElement("div",{className:"date-input-calendar"},u.createElement("nav",{className:"date-input-calendar-nav"},u.createElement(m.ButtonIcon,{className:"button-small",onClick:this.handlePreviousMonthClick},u.createElement(j.a,null)),u.createElement("div",{className:"date-input-calender-month"},u.createElement(v.a,{className:"date-input-calender-month-select",onChange:this.handleCurrentMonthChange,options:d.map((function(e){return{label:Object(D.getShortMonthName)(e),value:e}})),value:this.state.currentMonth.getMonth()}),u.createElement(v.a,{className:"date-input-calender-month-select spacer-left",onChange:this.handleCurrentYearChange,options:h.map((function(e){return{label:String(e),value:e}})),value:this.state.currentMonth.getFullYear()})),u.createElement(m.ButtonIcon,{className:"button-small",onClick:this.handleNextMonthClick},u.createElement(_.a,null))),u.createElement(P,{captionElement:u.createElement(w,null),disabledDays:{after:p,before:s},firstDayOfWeek:1,modifiers:e,month:this.state.currentMonth,navbarElement:u.createElement(w,null),onDayClick:this.handleDayClick,onDayMouseEnter:this.handleDayMouseEnter,selectedDays:y,weekdaysLong:E,weekdaysShort:O}))))},t}(u.PureComponent);function w(){return null}t.a=C;var M=Object(d.injectIntl)((function(e){var t=e.innerRef,n=e.intl,r=e.value,a=S(e,["innerRef","intl","value"]),o=r&&n.formatDate(r,{year:"numeric",month:"short",day:"numeric"});return u.createElement("input",N({},a,{ref:t,value:o||""}))}))},881:function(e,t,n){var r=n(660),a=n(882);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},i=(r(a,o),a.locals?a.locals:{});e.exports=i},882:function(e,t,n){(t=n(661)(!1)).push([e.i,".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}",""]),e.exports=t},883:function(e,t,n){var r=n(660),a=n(884);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},i=(r(a,o),a.locals?a.locals:{});e.exports=i},884:function(e,t,n){(t=n(661)(!1)).push([e.i,".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}",""]),e.exports=t},979:function(e,t,n){"use strict";var r,a=n(658),o=n(13),i=n(37),s=n(879),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFromChange=function(e){t.props.onChange({from:e,to:t.to}),setTimeout((function(){e&&!t.to&&t.toDateInput&&t.toDateInput.focus()}),0)},t.handleToChange=function(e){t.props.onChange({from:t.from,to:e})},t}return c(t,e),Object.defineProperty(t.prototype,"from",{get:function(){return this.props.value&&this.props.value.from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.props.value&&this.props.value.to},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this;return o.createElement("div",{className:a("display-inline-flex-center",this.props.className)},o.createElement(s.a,{currentMonth:this.to,"data-test":"from",highlightTo:this.to,maxDate:this.to,onChange:this.handleFromChange,placeholder:Object(i.translate)("start_date"),value:this.from}),o.createElement("span",{className:"note little-spacer-left little-spacer-right"},Object(i.translate)("to_")),o.createElement(s.a,{currentMonth:this.from,"data-test":"to",highlightFrom:this.from,minDate:this.from,onChange:this.handleToChange,placeholder:Object(i.translate)("end_date"),ref:function(t){return e.toDateInput=t},value:this.to}))},t}(o.PureComponent);t.a=l}}]);
//# sourceMappingURL=316.1588858339197.chunk.js.map