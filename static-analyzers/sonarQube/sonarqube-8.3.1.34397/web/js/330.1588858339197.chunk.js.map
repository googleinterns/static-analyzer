{"version":3,"sources":["webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/utils.ts","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.tsx","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css?ff37","webpack:///./src/main/js/apps/issues/crossComponentSourceViewer/SnippetViewer.css","webpack:///./src/main/js/apps/security-hotspots/styles.css?978b","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css?98a3","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.css","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css?fed6","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.css","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css?94be","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.css","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css?dec8","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.css","webpack:///./src/main/js/apps/security-hotspots/styles.css","webpack:///./src/main/js/api/security-hotspots.ts","webpack:///./src/main/js/apps/security-hotspots/components/EmptyHotspotsPage.tsx","webpack:///./src/main/js/apps/security-hotspots/components/FilterBar.tsx","webpack:///./src/main/js/apps/security-hotspots/utils.ts","webpack:///./src/main/js/apps/security-hotspots/components/HotspotListItem.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCategory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotList.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/AssigneeRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/assignee/Assignee.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotCommentPopup.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistory.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotReviewHistoryAndComments.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerTabs.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotSnippetContainer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusDescription.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelectionRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/StatusSelection.tsx","webpack:///./src/main/js/apps/security-hotspots/components/status/Status.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewerRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/components/HotspotViewer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsAppRenderer.tsx","webpack:///./src/main/js/apps/security-hotspots/SecurityHotspotsApp.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/api/favorites.ts"],"names":["MERGE_DISTANCE","LINES_BELOW_ISSUE","EXPAND_BY_LINES","collision","startA","endA","startB","getPrimaryLocation","issue","component","textRange","endLine","endOffset","startLine","startOffset","createSnippets","params","locations","hasSecondaryLocations","secondaryLocations","length","ranges","reduce","snippets","loc","index","firstCollision","startIndex","Math","max","endIndex","locationEnd","issueEndLine","addLinesBellow","filter","snippet","start","end","keep","min","undefined","push","sort","a","b","linesForSnippets","componentLines","map","lines","i","groupLocationsByComponent","components","currentGroup","currentComponent","groups","addGroup","key","measures","path","project","projectName","q","uuid","sources","every","forEach","expandSnippet","direction","snippetIndex","snippetToExpand","find","s","Error","toDelete","inSnippet","line","props","doScroll","element","scroll","parent","snippetNodeRef","current","offset","getBoundingClientRect","width","leftOffset","rightOffset","scrollToLastExpandedRow","snippetNode","rows","querySelectorAll","lastRow","expandBlock","then","renderLine","displayDuplications","displaySCM","issuesForLine","issueLocations","symbols","verticalBuffer","secondaryIssueLocations","this","duplications","duplicationsByLine","duplicationsCount","lineDuplications","isSinkLine","some","branchLike","displayAllIssues","displayCoverage","displayIssues","displayLocationMarkers","highlighted","highlightedLocationMessage","highlightedSymbols","issuePopup","issues","last","linePopup","loadDuplications","onIssueChange","onIssuePopupToggle","onIssueSelect","onIssueUnselect","onIssuesClose","handleCloseIssues","onIssuesOpen","handleOpenIssues","onLinePopupToggle","handleLinePopupToggle","onLocationSelect","onSymbolClick","handleSymbolClick","openIssues","openIssuesByLine","previousLine","renderDuplicationPopup","selectedIssue","render","issuesByLine","lastSnippetOfLastGroup","locationsByLine","lastLine","parseInt","bottomLine","issueLine","lowestVisibleIssue","Object","keys","k","l","className","ref","onClick","type","api","content","__esModule","default","module","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","assignSecurityHotspot","hotspotKey","data","hotspot","catch","throwGlobalError","EmptyHotspotsPage","translationRoot","filtered","isStaticListOfHotspots","alt","height","src","target","to","pathname","AssigneeFilterOption","statusOptions","value","TO_REVIEW","label","FIXED","SAFE","periodOptions","assigneeFilterOptions","ME","ALL","withCurrentUser","currentUser","filters","hotspotsReviewedMeasure","loadingMeasure","onBranch","isProject","qualifier","Project","id","role","tabIndex","name","onCheck","onChangeFilters","assignedToMe","clearable","onChange","option","status","searchable","sinceLeakPeriod","overlay","loading","CoverageRating","Measure","metricKey","metricType","RISK_EXPOSURE_LEVELS","HIGH","MEDIUM","LOW","groupByCategory","hotspots","securityCategories","h","title","getCategoryTitle","STATUS_AND_RESOLUTION_TO_STATUS_OPTION","REVIEWED","getStatusOptionFromStatusAndResolution","resolution","STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP","HotspotListItem","selected","highlight","href","message","HotspotCategory","categoryKey","expanded","selectedHotspot","risk","vulnerabilityProbability","securityCategory","onToggleExpand","onHotspotClick","groupHotspots","risks","categories","handleToggleCategory","setState","expandedCategories","state","groupedHotspots","componentDidUpdate","prevProps","hotspotsTotal","loadingMore","statusFilter","riskGroup","cat","count","loadMore","onLoadMore","total","AssigneeSelectionRenderer","open","query","suggestedUsers","autoFocus","onSearch","onKeyDown","placeholder","Dropdown","noPadding","placement","BottomLeft","suggestion","active","login","onSelect","Avatar","hash","avatar","size","mounted","handleSearch","handleNoSearch","handleActualSearch","allowCurrentUserSelection","loggedInUser","result","users","handleKeyDown","event","keyCode","Enter","preventDefault","selectHighlighted","UpArrow","highlightPrevious","DownArrow","highlightNext","getCurrentIndex","findIndex","highlightIndex","componentDidMount","componentWillUnmount","AssigneeRenderer","assignee","canEdit","editing","onEnterEditionMode","onKeydown","onExitEditionMode","onClickOutside","onAssign","handleEnterEditionMode","handleExitEditionMode","handleAssign","newAssignee","onAssigneeChange","addGlobalSuccessMessage","assigneeUser","HotspotCommentPopup","comment","setComment","MarkdownTips","onCommentEditSubmit","onCancelEdit","HotspotReviewHistory","reviewHistory","history","creationDate","Creation","date","user","authorUser","changelog","log","Diff","isUserActive","userName","diffs","Comment","createdAt","updatable","html","htmlText","markdown","elt","getHotspotReviewHistory","editedCommentKey","setEditedCommentKey","historyElt","historyIndex","diff","diffIndex","IssueChangelogDiff","dangerouslySetInnerHTML","__html","onRequestClose","BottomRight","markdownComment","onEditComment","onOpen","onDeleteComment","overlayPlacement","handleCommentChange","handleCloseComment","onCloseComment","handleSubmitComment","onCommentUpdate","handleDeleteComment","commentKey","handleEditComment","text","editSecurityHotspotComment","commentTextRef","commentVisible","invisible","onOpenComment","noop","HotspotSnippetContainerRenderer","displayProjectName","sourceLines","sourceViewerFile","SourceViewerHeaderSlim","expandable","linkToProject","onExpand","SourceViewerContext","Provider","file","SnippetViewer","_i","onExpandBlock","TabKeys","handleExpansion","range","from","additionalLines","concatSourceLines","checkLastLine","concat","slice","samePopup","componentWillMount","fetchSources","lastLineReceived","toString","constructSourceViewerFile","Application","handleSelectTabs","tabKey","currentTab","tabs","tab","computeTabs","RiskDescription","rule","riskDescription","VulnerabilityDescription","vulnerabilityDescription","FixRecommendation","fixRecommendations","Boolean","StatusDescription","statusOption","showTitle","StatusSelectionRenderer","selectedStatus","submitDisabled","renderOption","checked","onStatusChange","htmlFor","onCommentChange","currentTarget","disabled","onSubmit","handleStatusChange","handleSubmit","initialStatus","onStatusOptionChange","isOpen","setIsOpen","readonly","canChangeStatus","trigger","actionableTrigger","closeOnClickOutside","closeOnEscape","Bottom","parentScrollRef","permalink","copyValue","onUpdateHotspot","fetchHotspot","securityHotspotKey","response","u","author","c","handleHotspotUpdate","handleOpenComment","focus","preventScroll","bottomOffset","prevState","SecurityHotspotsAppRenderer","onShowAllHotspots","ScreenPositionHelper","top","style","Suggestions","suggestions","A11ySkipTarget","anchor","handleCallFailure","fetchSecurityHotspotsReviewed","reviewedHotspotsMetricKey","metricKeys","measure","reloadSecurityHotspotList","fetchSecurityHotspots","paging","hotspotsPageIndex","handleChangeFilters","changes","handleHotspotClick","Promise","all","p","hotspotPages","allHotspots","nextHotspot","pageIndex","handleShowAllHotspots","router","location","handleLoadMore","additionalHotspots","constructFiltersFromProps","fetchInitialData","previous","sonarsourceSecurity","page","hotspotKeys","split","join","getSecurityHotspotList","projectKey","ps","onlyMine","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","weight","dispatch","addFavorite","removeFavorite"],"mappings":"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","file":"js/330.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nconst LINES_ABOVE = 5;\nconst LINES_BELOW = 5;\nexport const MERGE_DISTANCE = 11; // Merge if snippets are eleven lines away (separated by 10 lines) or fewer\nexport const LINES_BELOW_ISSUE = 9;\nexport const EXPAND_BY_LINES = 50;\n\nfunction unknownComponent(key: string): T.SnippetsByComponent {\n  return {\n    component: {\n      key,\n      measures: {},\n      path: '',\n      project: '',\n      projectName: '',\n      q: 'FIL',\n      uuid: ''\n    },\n    sources: []\n  };\n}\n\nfunction collision([startA, endA]: number[], [startB, endB]: number[]) {\n  return !(startA > endB + MERGE_DISTANCE || endA < startB - MERGE_DISTANCE);\n}\n\nexport function getPrimaryLocation(issue: T.Issue): T.FlowLocation {\n  return {\n    component: issue.component,\n    textRange: issue.textRange || {\n      endLine: 0,\n      endOffset: 0,\n      startLine: 0,\n      startOffset: 0\n    }\n  };\n}\n\nfunction addLinesBellow(params: { issue: T.Issue; locationEnd: number }) {\n  const { issue, locationEnd } = params;\n  const issueEndLine = (issue.textRange && issue.textRange.endLine) || 0;\n\n  if (!issueEndLine || issueEndLine === locationEnd) {\n    return locationEnd + LINES_BELOW_ISSUE;\n  }\n\n  return locationEnd + LINES_BELOW;\n}\n\nexport function createSnippets(params: {\n  component: string;\n  issue: T.Issue;\n  locations: T.FlowLocation[];\n}): T.Snippet[] {\n  const { component, issue, locations } = params;\n\n  const hasSecondaryLocations = issue.secondaryLocations.length > 0;\n  const addIssueLocation = hasSecondaryLocations && issue.component === component;\n\n  // For each location: compute its range, and then compare with other ranges\n  // to merge snippets that collide.\n  const ranges = (addIssueLocation ? [getPrimaryLocation(issue), ...locations] : locations).reduce(\n    (snippets: T.Snippet[], loc, index) => {\n      const startIndex = Math.max(1, loc.textRange.startLine - LINES_ABOVE);\n      const endIndex = addLinesBellow({ issue, locationEnd: loc.textRange.endLine });\n\n      let firstCollision: { start: number; end: number } | undefined;\n\n      // Remove ranges that collide into the first collision\n      snippets = snippets.filter(snippet => {\n        if (collision([snippet.start, snippet.end], [startIndex, endIndex])) {\n          let keep = false;\n          // Check if we've already collided\n          if (!firstCollision) {\n            firstCollision = snippet;\n            keep = true;\n          }\n          // Merge with first collision:\n          firstCollision.start = Math.min(startIndex, snippet.start, firstCollision.start);\n          firstCollision.end = Math.max(endIndex, snippet.end, firstCollision.end);\n\n          // remove the range if it was not the first collision\n          return keep;\n        }\n        return true;\n      });\n\n      if (firstCollision === undefined) {\n        snippets.push({\n          start: startIndex,\n          end: endIndex,\n          index\n        });\n      }\n\n      return snippets;\n    },\n    []\n  );\n\n  // Sort snippets by line number in the case of secondary locations\n  // Preserve location order for flows!\n  return hasSecondaryLocations ? ranges.sort((a, b) => a.start - b.start) : ranges;\n}\n\nexport function linesForSnippets(snippets: T.Snippet[], componentLines: T.LineMap) {\n  return snippets\n    .map(snippet => {\n      const lines = [];\n      for (let i = snippet.start; i <= snippet.end; i++) {\n        if (componentLines[i]) {\n          lines.push(componentLines[i]);\n        }\n      }\n      return lines;\n    })\n    .filter(snippet => snippet.length > 0);\n}\n\nexport function groupLocationsByComponent(\n  issue: T.Issue,\n  locations: T.FlowLocation[],\n  components: { [key: string]: T.SnippetsByComponent }\n) {\n  let currentComponent = '';\n  let currentGroup: T.SnippetGroup;\n  const groups: T.SnippetGroup[] = [];\n\n  const addGroup = (loc: T.FlowLocation) => {\n    currentGroup = {\n      ...(components[loc.component] || unknownComponent(loc.component)),\n      locations: []\n    };\n    groups.push(currentGroup);\n    currentComponent = loc.component;\n  };\n\n  if (\n    issue.secondaryLocations.length > 0 &&\n    locations.every(loc => loc.component !== issue.component)\n  ) {\n    addGroup(getPrimaryLocation(issue));\n  }\n\n  locations.forEach((loc, index) => {\n    if (loc.component !== currentComponent) {\n      addGroup(loc);\n    }\n    loc.index = index;\n    currentGroup.locations.push(loc);\n  });\n\n  return groups;\n}\n\nexport function expandSnippet({\n  direction,\n  snippetIndex,\n  snippets\n}: {\n  direction: T.ExpandDirection;\n  snippetIndex: number;\n  snippets: T.Snippet[];\n}) {\n  const snippetToExpand = snippets.find(s => s.index === snippetIndex);\n  if (!snippetToExpand) {\n    throw new Error(`Snippet ${snippetIndex} not found`);\n  }\n\n  snippetToExpand.start = Math.max(\n    0,\n    snippetToExpand.start - (direction === 'up' ? EXPAND_BY_LINES : 0)\n  );\n  snippetToExpand.end += direction === 'down' ? EXPAND_BY_LINES : 0;\n\n  return snippets.map(snippet => {\n    if (snippet.index === snippetIndex) {\n      return snippetToExpand;\n    }\n    if (collision([snippet.start, snippet.end], [snippetToExpand.start, snippetToExpand.end])) {\n      // Merge with expanded snippet\n      snippetToExpand.start = Math.min(snippet.start, snippetToExpand.start);\n      snippetToExpand.end = Math.max(snippet.end, snippetToExpand.end);\n      snippet.toDelete = true;\n    }\n    return snippet;\n  });\n}\n\nexport function inSnippet(line: number, snippet: T.SourceLine[]) {\n  return line >= snippet[0].line && line <= snippet[snippet.length - 1].line;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { scrollHorizontally } from 'sonar-ui-common/helpers/scrolling';\nimport Line from '../../../components/SourceViewer/components/Line';\nimport { symbolsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getSecondaryIssueLocationsForLine } from '../../../components/SourceViewer/helpers/issueLocations';\nimport {\n  optimizeHighlightedSymbols,\n  optimizeLocationMessage,\n  optimizeSelectedIssue\n} from '../../../components/SourceViewer/helpers/lines';\nimport { BranchLike } from '../../../types/branch-like';\nimport './SnippetViewer.css';\nimport { inSnippet, LINES_BELOW_ISSUE } from './utils';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  component: T.SourceViewerFile;\n  displaySCM?: boolean;\n  duplications?: T.Duplication[];\n  duplicationsByLine?: { [line: number]: number[] };\n  expandBlock: (snippetIndex: number, direction: T.ExpandDirection) => Promise<void>;\n  handleCloseIssues: (line: T.SourceLine) => void;\n  handleLinePopupToggle: (line: T.SourceLine) => void;\n  handleOpenIssues: (line: T.SourceLine) => void;\n  handleSymbolClick: (symbols: string[]) => void;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[];\n  index: number;\n  issue: Pick<T.Issue, 'key' | 'textRange' | 'line'>;\n  issuePopup?: { issue: string; name: string };\n  issuesByLine: T.IssuesByLine;\n  lastSnippetOfLastGroup: boolean;\n  linePopup?: T.LinePopup;\n  loadDuplications: (line: T.SourceLine) => void;\n  locations: T.FlowLocation[];\n  locationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onLocationSelect: (index: number) => void;\n  openIssuesByLine: T.Dict<boolean>;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement, offset?: number) => void;\n  snippet: T.SourceLine[];\n}\n\nexport default class SnippetViewer extends React.PureComponent<Props> {\n  snippetNodeRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.snippetNodeRef = React.createRef();\n  }\n\n  doScroll = (element: HTMLElement) => {\n    if (this.props.scroll) {\n      this.props.scroll(element);\n    }\n    const parent = this.snippetNodeRef.current as Element;\n\n    if (parent) {\n      const offset = parent.getBoundingClientRect().width / 2;\n\n      scrollHorizontally(element, {\n        leftOffset: offset,\n        rightOffset: offset,\n        parent\n      });\n    }\n  };\n\n  scrollToLastExpandedRow = () => {\n    if (this.props.scroll) {\n      const snippetNode = this.snippetNodeRef.current as Element;\n      if (!snippetNode) {\n        return;\n      }\n      const rows = snippetNode.querySelectorAll('tr');\n      const lastRow = rows[rows.length - 1];\n      this.props.scroll(lastRow, 100);\n    }\n  };\n\n  expandBlock = (direction: T.ExpandDirection) => () =>\n    this.props.expandBlock(this.props.index, direction).then(() => {\n      if (direction === 'down') {\n        this.scrollToLastExpandedRow();\n      }\n    });\n\n  renderLine({\n    displayDuplications,\n    displaySCM,\n    index,\n    issuesForLine,\n    issueLocations,\n    line,\n    snippet,\n    symbols,\n    verticalBuffer\n  }: {\n    displayDuplications: boolean;\n    displaySCM?: boolean;\n    index: number;\n    issuesForLine: T.Issue[];\n    issueLocations: T.LinearIssueLocation[];\n    line: T.SourceLine;\n    snippet: T.SourceLine[];\n    symbols: string[];\n    verticalBuffer: number;\n  }) {\n    const secondaryIssueLocations = getSecondaryIssueLocationsForLine(line, this.props.locations);\n\n    const { duplications, duplicationsByLine } = this.props;\n    const duplicationsCount = duplications ? duplications.length : 0;\n    const lineDuplications =\n      (duplicationsCount && duplicationsByLine && duplicationsByLine[line.line]) || [];\n\n    const isSinkLine = issuesForLine.some(i => i.key === this.props.issue.key);\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={false}\n        displayCoverage={true}\n        displayDuplications={displayDuplications}\n        displayIssues={!isSinkLine || issuesForLine.length > 1}\n        displayLocationMarkers={true}\n        displaySCM={displaySCM}\n        duplications={lineDuplications}\n        duplicationsCount={duplicationsCount}\n        highlighted={false}\n        highlightedLocationMessage={optimizeLocationMessage(\n          this.props.highlightedLocationMessage,\n          secondaryIssueLocations\n        )}\n        highlightedSymbols={optimizeHighlightedSymbols(symbols, this.props.highlightedSymbols)}\n        issueLocations={issueLocations}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={false}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={() => {}}\n        onIssueUnselect={() => {}}\n        onIssuesClose={this.props.handleCloseIssues}\n        onIssuesOpen={this.props.handleOpenIssues}\n        onLinePopupToggle={this.props.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.handleSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line]}\n        previousLine={index > 0 ? snippet[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.doScroll}\n        secondaryIssueLocations={secondaryIssueLocations}\n        selectedIssue={optimizeSelectedIssue(this.props.issue.key, issuesForLine)}\n        verticalBuffer={verticalBuffer}\n      />\n    );\n  }\n\n  render() {\n    const {\n      component,\n      displaySCM,\n      issue,\n      issuesByLine = {},\n      lastSnippetOfLastGroup,\n      locationsByLine,\n      openIssuesByLine,\n      snippet\n    } = this.props;\n    const lastLine =\n      component.measures && component.measures.lines && parseInt(component.measures.lines, 10);\n\n    const symbols = symbolsByLine(snippet);\n\n    const bottomLine = snippet[snippet.length - 1].line;\n    const issueLine = issue.textRange ? issue.textRange.endLine : issue.line;\n    const lowestVisibleIssue = Math.max(\n      ...Object.keys(issuesByLine)\n        .map(k => parseInt(k, 10))\n        .filter(l => inSnippet(l, snippet) && (l === issueLine || openIssuesByLine[l]))\n    );\n    const verticalBuffer = lastSnippetOfLastGroup\n      ? Math.max(0, LINES_BELOW_ISSUE - (bottomLine - lowestVisibleIssue))\n      : 0;\n\n    const displayDuplications = snippet.some(s => !!s.duplicated);\n\n    return (\n      <div className=\"source-viewer-code snippet\" ref={this.snippetNodeRef}>\n        <div>\n          {snippet[0].line > 1 && (\n            <div className=\"expand-block expand-block-above\">\n              <button\n                aria-label={translate('source_viewer.expand_above')}\n                onClick={this.expandBlock('up')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n          <table\n            className={classNames('source-table', {\n              'expand-up': snippet[0].line > 1,\n              'expand-down': !lastLine || snippet[snippet.length - 1].line < lastLine\n            })}>\n            <tbody>\n              {snippet.map((line, index) =>\n                this.renderLine({\n                  displayDuplications,\n                  displaySCM,\n                  index,\n                  issuesForLine: issuesByLine[line.line] || [],\n                  issueLocations: locationsByLine[line.line] || [],\n                  line,\n                  snippet,\n                  symbols: symbols[line.line],\n                  verticalBuffer: index === snippet.length - 1 ? verticalBuffer : 0\n                })\n              )}\n            </tbody>\n          </table>\n          {(!lastLine || snippet[snippet.length - 1].line < lastLine) && (\n            <div className=\"expand-block expand-block-below\">\n              <button\n                aria-label={translate('source_viewer.expand_below')}\n                onClick={this.expandBlock('down')}\n                type=\"button\">\n                <ExpandSnippetIcon />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./SnippetViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#777;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=\\\");top:0}.expand-block-below{background:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC\\\");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-list-header{padding:16px 8px}.hotspot-risk-header{padding:8px}.hotspot-category{background-color:#fff;border:1px solid #e6e6e6}.hotspot-category .hotspot-category-header{padding:16px 8px;color:#444;border-bottom:none;border-left:4px solid}.hotspot-category .hotspot-category-header.contains-selected-hotspot,.hotspot-category .hotspot-category-header:hover{color:#4b9fd5}.hotspot-category.HIGH .hotspot-category-header{border-left-color:#d4333f}.hotspot-category.MEDIUM .hotspot-category-header{border-left-color:#ed7d20}.hotspot-category.LOW .hotspot-category-header{border-left-color:#eabe06}.hotspot-item{color:#444;display:block;padding:8px 16px;border:1px solid transparent;border-top-color:#e6e6e6;transition:padding 0s,border 0s}.hotspot-item:hover{background-color:#f2faff;border:1px dashed #4b9fd5;color:#444}.hotspot-item.highlight{background-color:#f2faff;color:#444;border:1px solid #4b9fd5;cursor:unset}.hotspot-risk-badge{color:#fff;text-transform:uppercase;display:inline-block;text-align:center;min-width:48px;padding:0 8px;font-weight:700;border-radius:2px}.hotspot-risk-badge.HIGH{background-color:#d4333f}.hotspot-risk-badge.MEDIUM{background-color:#ed7d20}.hotspot-risk-badge.LOW{background-color:#eabe06}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./AssigneeSelection.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-assignee-search-results{min-width:300px}.hotspot-assignee-search-results li{cursor:pointer}.hotspot-assignee-search-results li.active,.hotspot-assignee-search-results li:hover{background-color:#f3f3f3}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./HotspotViewer.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hotspot-information{flex-basis:320px}.hotspot-information>div>span{flex-basis:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Status.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#status-trigger,#status-trigger+.popup{width:400px;box-sizing:border-box}#status-trigger{height:80px;border-radius:4px;outline:none}#status-trigger.readonly{cursor:not-allowed}#status-trigger:not(.readonly){cursor:pointer;background-color:#236a97}#status-trigger:not(.readonly) *{color:#fff}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"#security_hotspots .wrapper{position:fixed;bottom:0;width:100%}#security_hotspots .layout-page{margin:0 auto;min-width:1080px;max-width:1280px;height:100%}#security_hotspots .filter-bar{max-width:1280px;box-sizing:border-box;margin:0 auto;padding:16px 8px;border-bottom:1px solid #e6e6e6}#security_hotspots .sidebar{flex:0 0 300px;border-right:1px solid #e6e6e6;height:100%;overflow-y:auto}#security_hotspots .main{flex:1 1 auto;background-color:#fff;overflow-x:auto}#security_hotspots .main .hotspot-content{overflow-y:auto;height:100%;box-sizing:border-box}.invisible{visibility:hidden}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\nimport {\n  Hotspot,\n  HotspotAssignRequest,\n  HotspotComment,\n  HotspotResolution,\n  HotspotSearchResponse,\n  HotspotSetStatusRequest,\n  HotspotStatus\n} from '../types/security-hotspots';\n\nexport function assignSecurityHotspot(\n  hotspotKey: string,\n  data: HotspotAssignRequest\n): Promise<void> {\n  return post('/api/hotspots/assign', { hotspot: hotspotKey, ...data }).catch(throwGlobalError);\n}\n\nexport function setSecurityHotspotStatus(\n  hotspotKey: string,\n  data: HotspotSetStatusRequest\n): Promise<void> {\n  return post('/api/hotspots/change_status', { hotspot: hotspotKey, ...data }).catch(\n    throwGlobalError\n  );\n}\n\nexport function commentSecurityHotspot(hotspotKey: string, comment: string): Promise<void> {\n  return post('/api/hotspots/add_comment', { hotspot: hotspotKey, comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function deleteSecurityHotspotComment(commentKey: string): Promise<void> {\n  return post('/api/hotspots/delete_comment', { comment: commentKey }).catch(throwGlobalError);\n}\n\nexport function editSecurityHotspotComment(\n  commentKey: string,\n  comment: string\n): Promise<HotspotComment> {\n  return post('/api/hotspots/edit_comment', { comment: commentKey, text: comment }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspots(\n  data: {\n    projectKey: string;\n    p: number;\n    ps: number;\n    status?: HotspotStatus;\n    resolution?: HotspotResolution;\n    onlyMine?: boolean;\n    sinceLeakPeriod?: boolean;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', data).catch(throwGlobalError);\n}\n\nexport function getSecurityHotspotList(\n  hotspotKeys: string[],\n  data: {\n    projectKey: string;\n  } & BranchParameters\n): Promise<HotspotSearchResponse> {\n  return getJSON('/api/hotspots/search', { ...data, hotspots: hotspotKeys.join() }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getSecurityHotspotDetails(securityHotspotKey: string): Promise<Hotspot> {\n  return getJSON('/api/hotspots/show', { hotspot: securityHotspotKey })\n    .then((response: Hotspot & { users: T.UserBase[] }) => {\n      const { users, ...hotspot } = response;\n\n      if (users) {\n        if (hotspot.assignee) {\n          hotspot.assigneeUser = users.find(u => u.login === hotspot.assignee) || {\n            active: true,\n            login: hotspot.assignee\n          };\n        }\n        hotspot.authorUser = users.find(u => u.login === hotspot.author) || {\n          active: true,\n          login: hotspot.author\n        };\n        hotspot.comment.forEach(c => {\n          c.user = users.find(u => u.login === c.login) || { active: true, login: c.login };\n        });\n      }\n\n      return hotspot;\n    })\n    .catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\n\nexport interface EmptyHotspotsPageProps {\n  filtered: boolean;\n  isStaticListOfHotspots: boolean;\n}\n\nexport default function EmptyHotspotsPage(props: EmptyHotspotsPageProps) {\n  const { filtered, isStaticListOfHotspots } = props;\n\n  let translationRoot;\n  if (isStaticListOfHotspots) {\n    translationRoot = 'no_hotspots_for_keys';\n  } else if (filtered) {\n    translationRoot = 'no_hotspots_for_filters';\n  } else {\n    translationRoot = 'no_hotspots';\n  }\n\n  return (\n    <div className=\"display-flex-column display-flex-center huge-spacer-top\">\n      <img\n        alt={translate('hotspots.page')}\n        className=\"huge-spacer-top\"\n        height={100}\n        src={`${getBaseUrl()}/images/${filtered ? 'filter-large' : 'hotspot-large'}.svg`}\n      />\n      <h1 className=\"huge-spacer-top\">{translate(`hotspots.${translationRoot}.title`)}</h1>\n      <div className=\"abs-width-400 text-center big-spacer-top\">\n        {translate(`hotspots.${translationRoot}.description`)}\n      </div>\n      {!(filtered || isStaticListOfHotspots) && (\n        <Link\n          className=\"big-spacer-top\"\n          target=\"_blank\"\n          to={{ pathname: '/documentation/user-guide/security-hotspots/' }}>\n          {translate('hotspots.learn_more')}\n        </Link>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { HotspotFilters, HotspotStatusFilter } from '../../../types/security-hotspots';\n\nexport interface FilterBarProps {\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspotsReviewedMeasure?: string;\n  isStaticListOfHotspots: boolean;\n  loadingMeasure: boolean;\n  onBranch: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onShowAllHotspots: () => void;\n}\n\nconst statusOptions: Array<{ label: string; value: string }> = [\n  { value: HotspotStatusFilter.TO_REVIEW, label: translate('hotspot.filters.status.to_review') },\n  { value: HotspotStatusFilter.FIXED, label: translate('hotspot.filters.status.fixed') },\n  { value: HotspotStatusFilter.SAFE, label: translate('hotspot.filters.status.safe') }\n];\n\nconst periodOptions = [\n  { value: true, label: translate('hotspot.filters.period.since_leak_period') },\n  { value: false, label: translate('hotspot.filters.period.overall') }\n];\n\nexport enum AssigneeFilterOption {\n  ALL = 'all',\n  ME = 'me'\n}\n\nconst assigneeFilterOptions = [\n  { value: AssigneeFilterOption.ME, label: translate('hotspot.filters.assignee.assigned_to_me') },\n  { value: AssigneeFilterOption.ALL, label: translate('hotspot.filters.assignee.all') }\n];\n\nexport function FilterBar(props: FilterBarProps) {\n  const {\n    currentUser,\n    component,\n    filters,\n    hotspotsReviewedMeasure,\n    isStaticListOfHotspots,\n    loadingMeasure,\n    onBranch\n  } = props;\n  const isProject = component.qualifier === ComponentQualifier.Project;\n\n  return (\n    <div className=\"filter-bar display-flex-center\">\n      {isStaticListOfHotspots ? (\n        <a id=\"show_all_hotspot\" onClick={() => props.onShowAllHotspots()} role=\"link\" tabIndex={0}>\n          {translate('hotspot.filters.show_all')}\n        </a>\n      ) : (\n        <div className=\"display-flex-space-between width-100\">\n          <div className=\"display-flex-center\">\n            <h3 className=\"huge-spacer-right\">{translate('hotspot.filters.title')}</h3>\n\n            {isLoggedIn(currentUser) && (\n              <RadioToggle\n                className=\"huge-spacer-right\"\n                name=\"assignee-filter\"\n                onCheck={(value: AssigneeFilterOption) =>\n                  props.onChangeFilters({ assignedToMe: value === AssigneeFilterOption.ME })\n                }\n                options={assigneeFilterOptions}\n                value={filters.assignedToMe ? AssigneeFilterOption.ME : AssigneeFilterOption.ALL}\n              />\n            )}\n\n            <span className=\"spacer-right\">{translate('status')}</span>\n            <Select\n              className=\"input-medium big-spacer-right\"\n              clearable={false}\n              onChange={(option: { value: HotspotStatusFilter }) =>\n                props.onChangeFilters({ status: option.value })\n              }\n              options={statusOptions}\n              searchable={false}\n              value={filters.status}\n            />\n\n            {onBranch && (\n              <Select\n                className=\"input-medium big-spacer-right\"\n                clearable={false}\n                onChange={(option: { value: boolean }) =>\n                  props.onChangeFilters({ sinceLeakPeriod: option.value })\n                }\n                options={periodOptions}\n                searchable={false}\n                value={filters.sinceLeakPeriod}\n              />\n            )}\n          </div>\n\n          {isProject && (\n            <div className=\"display-flex-center\">\n              <span className=\"little-spacer-right\">\n                {translate('metric.security_hotspots_reviewed.name')}\n              </span>\n              <HelpTooltip\n                className=\"big-spacer-right\"\n                overlay={translate('hotspots.reviewed.tooltip')}\n              />\n              <DeferredSpinner loading={loadingMeasure}>\n                {hotspotsReviewedMeasure && <CoverageRating value={hotspotsReviewedMeasure} />}\n                <Measure\n                  className=\"spacer-left huge\"\n                  metricKey={\n                    onBranch && !filters.sinceLeakPeriod\n                      ? 'security_hotspots_reviewed'\n                      : 'new_security_hotspots_reviewed'\n                  }\n                  metricType=\"PERCENT\"\n                  value={hotspotsReviewedMeasure}\n                />\n              </DeferredSpinner>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(FilterBar);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { groupBy, sortBy } from 'lodash';\nimport {\n  Hotspot,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusOption,\n  RawHotspot,\n  ReviewHistoryElement,\n  ReviewHistoryType,\n  RiskExposure\n} from '../../types/security-hotspots';\n\nexport const RISK_EXPOSURE_LEVELS = [RiskExposure.HIGH, RiskExposure.MEDIUM, RiskExposure.LOW];\n\nexport function mapRules(rules: Array<{ key: string; name: string }>): T.Dict<string> {\n  return rules.reduce((ruleMap: T.Dict<string>, r) => {\n    ruleMap[r.key] = r.name;\n    return ruleMap;\n  }, {});\n}\n\nexport function groupByCategory(\n  hotspots: RawHotspot[] = [],\n  securityCategories: T.StandardSecurityCategories\n) {\n  const groups = groupBy(hotspots, h => h.securityCategory);\n\n  return Object.keys(groups).map(key => ({\n    key,\n    title: getCategoryTitle(key, securityCategories),\n    hotspots: groups[key]\n  }));\n}\n\nexport function sortHotspots(\n  hotspots: RawHotspot[],\n  securityCategories: T.Dict<{ title: string }>\n) {\n  return sortBy(hotspots, [\n    h => RISK_EXPOSURE_LEVELS.indexOf(h.vulnerabilityProbability),\n    h => getCategoryTitle(h.securityCategory, securityCategories),\n    h => h.message\n  ]);\n}\n\nfunction getCategoryTitle(key: string, securityCategories: T.StandardSecurityCategories) {\n  return securityCategories[key] ? securityCategories[key].title : key;\n}\n\nexport function constructSourceViewerFile(\n  { component, project }: Hotspot,\n  lines?: number\n): T.SourceViewerFile {\n  return {\n    key: component.key,\n    measures: { lines: lines ? lines.toString() : undefined },\n    path: component.path || '',\n    project: project.key,\n    projectName: project.name,\n    q: component.qualifier,\n    uuid: ''\n  };\n}\n\nexport function getHotspotReviewHistory(hotspot: Hotspot): ReviewHistoryElement[] {\n  const history: ReviewHistoryElement[] = [];\n\n  if (hotspot.creationDate) {\n    history.push({\n      type: ReviewHistoryType.Creation,\n      date: hotspot.creationDate,\n      user: {\n        ...hotspot.authorUser,\n        name: hotspot.authorUser.name || hotspot.authorUser.login\n      }\n    });\n  }\n\n  if (hotspot.changelog && hotspot.changelog.length > 0) {\n    history.push(\n      ...hotspot.changelog.map(log => ({\n        type: ReviewHistoryType.Diff,\n        date: log.creationDate,\n        user: {\n          active: log.isUserActive,\n          avatar: log.avatar,\n          name: log.userName || log.user\n        },\n        diffs: log.diffs\n      }))\n    );\n  }\n\n  if (hotspot.comment && hotspot.comment.length > 0) {\n    history.push(\n      ...hotspot.comment.map(comment => ({\n        type: ReviewHistoryType.Comment,\n        date: comment.createdAt,\n        updatable: comment.updatable,\n        user: {\n          ...comment.user,\n          name: comment.user.name || comment.user.login\n        },\n        html: comment.htmlText,\n        key: comment.key,\n        markdown: comment.markdown\n      }))\n    );\n  }\n\n  return sortBy(history, elt => elt.date);\n}\n\nconst STATUS_AND_RESOLUTION_TO_STATUS_OPTION = {\n  [HotspotStatus.TO_REVIEW]: HotspotStatusOption.TO_REVIEW,\n  [HotspotStatus.REVIEWED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.FIXED]: HotspotStatusOption.FIXED,\n  [HotspotResolution.SAFE]: HotspotStatusOption.SAFE\n};\n\nexport function getStatusOptionFromStatusAndResolution(\n  status: HotspotStatus,\n  resolution?: HotspotResolution\n) {\n  // Resolution is the most determinist info here, so we use it first to get the matching status option\n  // If not provided, we use the status (which will be TO_REVIEW)\n  return STATUS_AND_RESOLUTION_TO_STATUS_OPTION[resolution ?? status];\n}\n\nconst STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP = {\n  [HotspotStatusOption.TO_REVIEW]: { status: HotspotStatus.TO_REVIEW, resolution: undefined },\n  [HotspotStatusOption.FIXED]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.FIXED\n  },\n  [HotspotStatusOption.SAFE]: {\n    status: HotspotStatus.REVIEWED,\n    resolution: HotspotResolution.SAFE\n  }\n};\n\nexport function getStatusAndResolutionFromStatusOption(statusOption: HotspotStatusOption) {\n  return STATUS_OPTION_TO_STATUS_AND_RESOLUTION_MAP[statusOption];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../utils';\n\nexport interface HotspotListItemProps {\n  hotspot: RawHotspot;\n  onClick: (hotspot: RawHotspot) => void;\n  selected: boolean;\n}\n\nexport default function HotspotListItem(props: HotspotListItemProps) {\n  const { hotspot, selected } = props;\n  return (\n    <a\n      className={classNames('hotspot-item', { highlight: selected })}\n      href=\"#\"\n      onClick={() => !selected && props.onClick(hotspot)}>\n      <div className=\"little-spacer-left\">{hotspot.message}</div>\n      <div className=\"badge spacer-top\">\n        {translate(\n          'hotspots.status_option',\n          getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution)\n        )}\n      </div>\n    </a>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport ChevronUpIcon from 'sonar-ui-common/components/icons/ChevronUpIcon';\nimport { RawHotspot } from '../../../types/security-hotspots';\nimport HotspotListItem from './HotspotListItem';\n\nexport interface HotspotCategoryProps {\n  categoryKey: string;\n  expanded: boolean;\n  hotspots: RawHotspot[];\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onToggleExpand: (categoryKey: string, value: boolean) => void;\n  selectedHotspot: RawHotspot;\n  title: string;\n}\n\nexport default function HotspotCategory(props: HotspotCategoryProps) {\n  const { categoryKey, expanded, hotspots, selectedHotspot, title } = props;\n\n  if (hotspots.length < 1) {\n    return null;\n  }\n\n  const risk = hotspots[0].vulnerabilityProbability;\n\n  return (\n    <div className={classNames('hotspot-category', risk)}>\n      <a\n        className={classNames(\n          'hotspot-category-header display-flex-space-between display-flex-center',\n          { 'contains-selected-hotspot': selectedHotspot.securityCategory === categoryKey }\n        )}\n        href=\"#\"\n        onClick={() => props.onToggleExpand(categoryKey, !expanded)}>\n        <strong className=\"flex-1\">{title}</strong>\n        <span>\n          <span className=\"counter-badge\">{hotspots.length}</span>\n          {expanded ? (\n            <ChevronUpIcon className=\"big-spacer-left\" />\n          ) : (\n            <ChevronDownIcon className=\"big-spacer-left\" />\n          )}\n        </span>\n      </a>\n      {expanded && (\n        <ul>\n          {hotspots.map(h => (\n            <li key={h.key}>\n              <HotspotListItem\n                hotspot={h}\n                onClick={props.onHotspotClick}\n                selected={h.key === selectedHotspot.key}\n              />\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { groupBy } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusFilter, RawHotspot, RiskExposure } from '../../../types/security-hotspots';\nimport { groupByCategory, RISK_EXPOSURE_LEVELS } from '../utils';\nimport HotspotCategory from './HotspotCategory';\nimport './HotspotList.css';\n\ninterface Props {\n  hotspots: RawHotspot[];\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loadingMore: boolean;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot;\n  statusFilter: HotspotStatusFilter;\n}\n\ninterface State {\n  expandedCategories: T.Dict<boolean>;\n  groupedHotspots: Array<{\n    risk: RiskExposure;\n    categories: Array<{ key: string; hotspots: RawHotspot[]; title: string }>;\n  }>;\n}\n\nexport default class HotspotList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      expandedCategories: { [props.selectedHotspot.securityCategory]: true },\n      groupedHotspots: this.groupHotspots(props.hotspots, props.securityCategories)\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Force open the category of selected hotspot\n    if (\n      this.props.selectedHotspot.securityCategory !== prevProps.selectedHotspot.securityCategory\n    ) {\n      this.handleToggleCategory(this.props.selectedHotspot.securityCategory, true);\n    }\n\n    // Compute the hotspot tree from the list\n    if (\n      this.props.hotspots !== prevProps.hotspots ||\n      this.props.securityCategories !== prevProps.securityCategories\n    ) {\n      const groupedHotspots = this.groupHotspots(\n        this.props.hotspots,\n        this.props.securityCategories\n      );\n      this.setState({ groupedHotspots });\n    }\n  }\n\n  groupHotspots = (hotspots: RawHotspot[], securityCategories: T.StandardSecurityCategories) => {\n    const risks = groupBy(hotspots, h => h.vulnerabilityProbability);\n\n    return RISK_EXPOSURE_LEVELS.map(risk => ({\n      risk,\n      categories: groupByCategory(risks[risk], securityCategories)\n    })).filter(risk => risk.categories.length > 0);\n  };\n\n  handleToggleCategory = (categoryKey: string, value: boolean) => {\n    this.setState(({ expandedCategories }) => ({\n      expandedCategories: { ...expandedCategories, [categoryKey]: value }\n    }));\n  };\n\n  render() {\n    const {\n      hotspots,\n      hotspotsTotal,\n      isStaticListOfHotspots,\n      loadingMore,\n      selectedHotspot,\n      statusFilter\n    } = this.props;\n\n    const { expandedCategories, groupedHotspots } = this.state;\n\n    return (\n      <div className=\"huge-spacer-bottom\">\n        <h1 className=\"hotspot-list-header bordered-bottom\">\n          <SecurityHotspotIcon className=\"spacer-right\" />\n          {translateWithParameters(\n            isStaticListOfHotspots ? 'hotspots.list_title' : `hotspots.list_title.${statusFilter}`,\n            hotspots.length\n          )}\n        </h1>\n        <ul className=\"big-spacer-bottom\">\n          {groupedHotspots.map(riskGroup => (\n            <li className=\"big-spacer-bottom\" key={riskGroup.risk}>\n              <div className=\"hotspot-risk-header little-spacer-left\">\n                <span>{translate('hotspots.risk_exposure')}:</span>\n                <div className={classNames('hotspot-risk-badge', 'spacer-left', riskGroup.risk)}>\n                  {translate('risk_exposure', riskGroup.risk)}\n                </div>\n              </div>\n              <ul>\n                {riskGroup.categories.map(cat => (\n                  <li className=\"spacer-bottom\" key={cat.key}>\n                    <HotspotCategory\n                      categoryKey={cat.key}\n                      expanded={expandedCategories[cat.key]}\n                      hotspots={cat.hotspots}\n                      onHotspotClick={this.props.onHotspotClick}\n                      onToggleExpand={this.handleToggleCategory}\n                      selectedHotspot={selectedHotspot}\n                      title={cat.title}\n                    />\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n        <ListFooter\n          count={hotspots.length}\n          loadMore={!loadingMore ? this.props.onLoadMore : undefined}\n          loading={loadingMore}\n          total={hotspotsTotal}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport './AssigneeSelection.css';\n\nexport interface HotspotAssigneeSelectRendererProps {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  onKeyDown: (event: React.KeyboardEvent) => void;\n  onSearch: (query: string) => void;\n  onSelect: (user: T.UserActive) => void;\n  open: boolean;\n  query?: string;\n  suggestedUsers?: T.UserActive[];\n}\n\nexport default function AssigneeSelectionRenderer(props: HotspotAssigneeSelectRendererProps) {\n  const { highlighted, loading, open, query, suggestedUsers } = props;\n  return (\n    <>\n      <div className=\"display-flex-center\">\n        <SearchBox\n          autoFocus={true}\n          onChange={props.onSearch}\n          onKeyDown={props.onKeyDown}\n          placeholder={translate('hotspots.assignee.select_user')}\n          value={query}\n        />\n\n        {loading && <DeferredSpinner className=\"spacer-left\" />}\n      </div>\n\n      {!loading && open && (\n        <div className=\"position-relative\">\n          <DropdownOverlay noPadding={true} placement={PopupPlacement.BottomLeft}>\n            {suggestedUsers && suggestedUsers.length > 0 ? (\n              <ul className=\"hotspot-assignee-search-results\">\n                {suggestedUsers.map(suggestion => (\n                  <li\n                    className={classNames('padded', {\n                      active: highlighted && highlighted.login === suggestion.login\n                    })}\n                    key={suggestion.login}\n                    onClick={() => props.onSelect(suggestion)}>\n                    <Avatar\n                      className=\"spacer-right\"\n                      hash={suggestion.avatar}\n                      name={suggestion.name}\n                      size={16}\n                    />\n                    {suggestion.name}\n                  </li>\n                ))}\n              </ul>\n            ) : (\n              <div className=\"padded\">{translate('no_results')}</div>\n            )}\n          </DropdownOverlay>\n        </div>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\nimport { KeyCodes } from 'sonar-ui-common/helpers/keycodes';\nimport { searchUsers } from '../../../../api/users';\nimport { isUserActive } from '../../../../helpers/users';\nimport AssigneeSelectionRenderer from './AssigneeSelectionRenderer';\n\ninterface Props {\n  allowCurrentUserSelection: boolean;\n  loggedInUser: T.LoggedInUser;\n  onSelect: (user?: T.UserActive) => void;\n}\n\ninterface State {\n  highlighted?: T.UserActive;\n  loading: boolean;\n  open: boolean;\n  query?: string;\n  suggestedUsers: T.UserActive[];\n}\n\nexport default class AssigneeSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      open: props.allowCurrentUserSelection,\n      suggestedUsers: props.allowCurrentUserSelection ? [props.loggedInUser] : []\n    };\n\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSearch = (query: string) => {\n    if (this.mounted) {\n      if (query.length < 2) {\n        this.handleNoSearch(query);\n      } else {\n        this.handleActualSearch(query);\n      }\n    }\n  };\n\n  handleNoSearch = (query: string) => {\n    const { allowCurrentUserSelection, loggedInUser } = this.props;\n\n    this.setState({\n      loading: false,\n      open: allowCurrentUserSelection,\n      query,\n      suggestedUsers: allowCurrentUserSelection ? [loggedInUser] : []\n    });\n  };\n\n  handleActualSearch = (query: string) => {\n    this.setState({ loading: true, query });\n    searchUsers({ q: query })\n      .then(result => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            query,\n            open: true,\n            suggestedUsers: result.users.filter(isUserActive) as T.UserActive[]\n          });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case KeyCodes.Enter:\n        event.preventDefault();\n        this.selectHighlighted();\n        break;\n      case KeyCodes.UpArrow:\n        event.preventDefault();\n        this.highlightPrevious();\n        break;\n      case KeyCodes.DownArrow:\n        event.preventDefault();\n        this.highlightNext();\n        break;\n    }\n  };\n\n  getCurrentIndex = () => {\n    const { highlighted, suggestedUsers } = this.state;\n\n    return highlighted\n      ? suggestedUsers.findIndex(suggestion => suggestion.login === highlighted.login)\n      : -1;\n  };\n\n  highlightIndex = (index: number) => {\n    const { suggestedUsers } = this.state;\n\n    if (suggestedUsers.length > 0) {\n      if (index < 0) {\n        index = suggestedUsers.length - 1;\n      } else if (index >= suggestedUsers.length) {\n        index = 0;\n      }\n\n      this.setState({ highlighted: suggestedUsers[index] });\n    }\n  };\n\n  highlightPrevious = () => {\n    this.highlightIndex(this.getCurrentIndex() - 1);\n  };\n\n  highlightNext = () => {\n    this.highlightIndex(this.getCurrentIndex() + 1);\n  };\n\n  selectHighlighted = () => {\n    const { highlighted } = this.state;\n\n    if (highlighted !== undefined) {\n      this.props.onSelect(highlighted);\n    }\n  };\n\n  render() {\n    const { highlighted, loading, open, query, suggestedUsers } = this.state;\n\n    return (\n      <AssigneeSelectionRenderer\n        highlighted={highlighted}\n        loading={loading}\n        onKeyDown={this.handleKeyDown}\n        onSearch={this.handleSearch}\n        onSelect={this.props.onSelect}\n        open={open}\n        query={query}\n        suggestedUsers={suggestedUsers}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport EscKeydownHandler from 'sonar-ui-common/components/controls/EscKeydownHandler';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport AssigneeSelection from './AssigneeSelection';\n\nexport interface AssigneeRendererProps {\n  canEdit: boolean;\n  editing: boolean;\n  loading: boolean;\n\n  assignee?: T.UserBase;\n  loggedInUser?: T.LoggedInUser;\n\n  onAssign: (user?: T.UserActive) => void;\n  onEnterEditionMode: () => void;\n  onExitEditionMode: () => void;\n}\n\nexport default function AssigneeRenderer(props: AssigneeRendererProps) {\n  const { assignee, canEdit, loggedInUser, editing, loading } = props;\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {!editing && (\n        <div className=\"display-flex-center\">\n          <strong className=\"nowrap\">\n            {assignee &&\n              (assignee.active\n                ? assignee.name ?? assignee.login\n                : translateWithParameters('user.x_deleted', assignee.name ?? assignee.login))}\n            {!assignee && translate('unassigned')}\n          </strong>\n          {loggedInUser && canEdit && (\n            <EditButton className=\"spacer-left\" onClick={props.onEnterEditionMode} />\n          )}\n        </div>\n      )}\n\n      {loggedInUser && editing && (\n        <EscKeydownHandler onKeydown={props.onExitEditionMode}>\n          <OutsideClickHandler onClickOutside={props.onExitEditionMode}>\n            <AssigneeSelection\n              allowCurrentUserSelection={loggedInUser.login !== assignee?.login}\n              loggedInUser={loggedInUser}\n              onSelect={props.onAssign}\n            />\n          </OutsideClickHandler>\n        </EscKeydownHandler>\n      )}\n    </DeferredSpinner>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { assignSecurityHotspot } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot, HotspotStatus } from '../../../../types/security-hotspots';\nimport AssigneeRenderer from './AssigneeRenderer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onAssigneeChange: () => void;\n}\n\ninterface State {\n  editing: boolean;\n  loading: boolean;\n}\n\nexport class Assignee extends React.PureComponent<Props, State> {\n  mounted = false;\n  state = {\n    editing: false,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleEnterEditionMode = () => {\n    this.setState({ editing: true });\n  };\n\n  handleExitEditionMode = () => {\n    this.setState({ editing: false });\n  };\n\n  handleAssign = (newAssignee?: T.UserActive) => {\n    if (newAssignee && newAssignee.login) {\n      this.setState({ loading: true });\n      assignSecurityHotspot(this.props.hotspot.key, {\n        assignee: newAssignee.login\n      })\n        .then(() => {\n          if (this.mounted) {\n            this.setState({ editing: false, loading: false });\n            this.props.onAssigneeChange();\n          }\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters('hotspots.assign.success', newAssignee.name)\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const {\n      currentUser,\n      hotspot: { assigneeUser, status }\n    } = this.props;\n    const { editing, loading } = this.state;\n\n    const canEdit = status === HotspotStatus.TO_REVIEW;\n\n    return (\n      <AssigneeRenderer\n        assignee={assigneeUser}\n        canEdit={canEdit}\n        editing={editing}\n        loading={loading}\n        loggedInUser={isLoggedIn(currentUser) ? currentUser : undefined}\n        onAssign={this.handleAssign}\n        onEnterEditionMode={this.handleEnterEditionMode}\n        onExitEditionMode={this.handleExitEditionMode}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(Assignee);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\n\nexport interface HotspotCommentPopupProps {\n  markdownComment: string;\n  onCommentEditSubmit: (comment: string) => void;\n  onCancelEdit: () => void;\n}\n\nexport default function HotspotCommentPopup(props: HotspotCommentPopupProps) {\n  const [comment, setComment] = React.useState(props.markdownComment);\n\n  return (\n    <div className=\"issue-comment-bubble-popup\">\n      <div className=\"issue-comment-form-text\">\n        <textarea\n          autoFocus={true}\n          onChange={event => setComment(event.target.value)}\n          rows={2}\n          value={comment}\n        />\n      </div>\n      <div className=\"spacer-top display-flex-space-between\">\n        <div className=\"issue-comment-form-tips\">\n          <MarkdownTips />\n        </div>\n        <div className=\"\">\n          <Button\n            className=\"little-spacer-right\"\n            onClick={() => props.onCommentEditSubmit(comment)}>\n            {translate('save')}\n          </Button>\n          <ResetButtonLink\n            onClick={() => {\n              setComment('');\n              props.onCancelEdit();\n            }}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { Button, DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown, { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport IssueChangelogDiff from '../../../components/issue/components/IssueChangelogDiff';\nimport Avatar from '../../../components/ui/Avatar';\nimport { Hotspot, ReviewHistoryType } from '../../../types/security-hotspots';\nimport { getHotspotReviewHistory } from '../utils';\nimport HotspotCommentPopup from './HotspotCommentPopup';\n\nexport interface HotspotReviewHistoryProps {\n  hotspot: Hotspot;\n  onDeleteComment: (key: string) => void;\n  onEditComment: (key: string, comment: string) => void;\n}\n\nexport default function HotspotReviewHistory(props: HotspotReviewHistoryProps) {\n  const { hotspot } = props;\n  const reviewHistory = getHotspotReviewHistory(hotspot);\n  const [editedCommentKey, setEditedCommentKey] = React.useState('');\n\n  return (\n    <>\n      {reviewHistory.map((historyElt, historyIndex) => {\n        const { user, type, diffs, date, html, key, updatable, markdown } = historyElt;\n        return (\n          <div\n            className={classNames('padded', { 'bordered-top': historyIndex > 0 })}\n            key={historyIndex}>\n            <div className=\"display-flex-center\">\n              {user.name && (\n                <>\n                  <Avatar\n                    className=\"little-spacer-right\"\n                    hash={user.avatar}\n                    name={user.name}\n                    size={20}\n                  />\n                  <strong>\n                    {user.active ? user.name : translateWithParameters('user.x_deleted', user.name)}\n                  </strong>\n                  {type === ReviewHistoryType.Creation && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.created')}\n                    </span>\n                  )}\n                  {type === ReviewHistoryType.Comment && (\n                    <span className=\"little-spacer-left\">\n                      {translate('hotspots.review_history.comment_added')}\n                    </span>\n                  )}\n                  <span className=\"little-spacer-left little-spacer-right\">-</span>\n                </>\n              )}\n              <DateTimeFormatter date={date} />\n            </div>\n\n            {type === ReviewHistoryType.Diff && diffs && (\n              <div className=\"spacer-top\">\n                {diffs.map((diff, diffIndex) => (\n                  <IssueChangelogDiff diff={diff} key={diffIndex} />\n                ))}\n              </div>\n            )}\n\n            {type === ReviewHistoryType.Comment && key && html && markdown && (\n              <div className=\"spacer-top display-flex-space-between\">\n                <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: sanitize(html) }} />\n                {updatable && (\n                  <div>\n                    <div className=\"dropdown\">\n                      <Toggler\n                        onRequestClose={() => {\n                          setEditedCommentKey('');\n                        }}\n                        open={key === editedCommentKey}\n                        overlay={\n                          <DropdownOverlay placement={PopupPlacement.BottomRight}>\n                            <HotspotCommentPopup\n                              markdownComment={markdown}\n                              onCancelEdit={() => setEditedCommentKey('')}\n                              onCommentEditSubmit={comment => {\n                                setEditedCommentKey('');\n                                props.onEditComment(key, comment);\n                              }}\n                            />\n                          </DropdownOverlay>\n                        }>\n                        <EditButton\n                          className=\"it__hotspots-comment-edit button-small\"\n                          onClick={() => setEditedCommentKey(key)}\n                        />\n                      </Toggler>\n                    </div>\n                    <Dropdown\n                      onOpen={() => setEditedCommentKey('')}\n                      overlay={\n                        <div className=\"padded abs-width-150\">\n                          <p>{translate('issue.comment.delete_confirm_message')}</p>\n                          <Button\n                            className=\"button-red big-spacer-top pull-right\"\n                            onClick={() => props.onDeleteComment(key)}>\n                            {translate('delete')}\n                          </Button>\n                        </div>\n                      }\n                      overlayPlacement={PopupPlacement.BottomRight}>\n                      <DeleteButton className=\"it__hotspots-comment-delete button-small\" />\n                    </Dropdown>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  commentSecurityHotspot,\n  deleteSecurityHotspotComment,\n  editSecurityHotspotComment\n} from '../../../api/security-hotspots';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotReviewHistory from './HotspotReviewHistory';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  commentVisible: boolean;\n  onCommentUpdate: () => void;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n}\n\ninterface State {\n  comment: string;\n}\n\nexport default class HotspotReviewHistoryAndComments extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      comment: ''\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot !== this.props.hotspot) {\n      this.setState({\n        comment: ''\n      });\n    }\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  handleCloseComment = () => {\n    this.setState({ comment: '' });\n    this.props.onCloseComment();\n  };\n\n  handleSubmitComment = () => {\n    return commentSecurityHotspot(this.props.hotspot.key, this.state.comment).then(() => {\n      this.setState({ comment: '' });\n      this.props.onCloseComment();\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleDeleteComment = (key: string) => {\n    return deleteSecurityHotspotComment(key).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  handleEditComment = (key: string, comment: string) => {\n    return editSecurityHotspotComment(key, comment).then(() => {\n      this.props.onCommentUpdate();\n    });\n  };\n\n  render() {\n    const { currentUser, hotspot, commentTextRef, commentVisible } = this.props;\n    const { comment } = this.state;\n    return (\n      <>\n        <h1>{translate('hotspot.section.activity')}</h1>\n        <div className=\"padded\">\n          <HotspotReviewHistory\n            hotspot={hotspot}\n            onDeleteComment={this.handleDeleteComment}\n            onEditComment={this.handleEditComment}\n          />\n\n          {isLoggedIn(currentUser) && (\n            <>\n              <hr />\n              <div className=\"big-spacer-top\">\n                <Button\n                  className={classNames({ invisible: commentVisible })}\n                  id=\"hotspot-comment-box-display\"\n                  onClick={this.props.onOpenComment}>\n                  {translate('hotspots.comment.open')}\n                </Button>\n\n                <div className={classNames({ invisible: !commentVisible })}>\n                  <div className=\"little-spacer-bottom\">{translate('hotspots.comment.field')}</div>\n                  <textarea\n                    className=\"form-field fixed-width width-100 spacer-bottom\"\n                    onChange={this.handleCommentChange}\n                    ref={commentTextRef}\n                    rows={2}\n                    value={comment}\n                  />\n                  <div className=\"display-flex-space-between display-flex-center \">\n                    <MarkdownTips className=\"huge-spacer-bottom\" />\n                    <div>\n                      <Button\n                        className=\"huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-submit\"\n                        onClick={this.handleSubmitComment}>\n                        {translate('hotspots.comment.submit')}\n                      </Button>\n                      <ResetButtonLink\n                        className=\"spacer-left huge-spacer-bottom\"\n                        id=\"hotspot-comment-box-cancel\"\n                        onClick={this.handleCloseComment}>\n                        {translate('cancel')}\n                      </ResetButtonLink>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { SourceViewerContext } from '../../../components/SourceViewer/SourceViewerContext';\nimport SourceViewerHeaderSlim from '../../../components/SourceViewer/SourceViewerHeaderSlim';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport SnippetViewer from '../../issues/crossComponentSourceViewer/SnippetViewer';\n\nexport interface HotspotSnippetContainerRendererProps {\n  branchLike?: BranchLike;\n  displayProjectName?: boolean;\n  highlightedSymbols: string[];\n  hotspot: Hotspot;\n  lastLine?: number;\n  loading: boolean;\n  locations: { [line: number]: T.LinearIssueLocation[] };\n  linePopup?: T.LinePopup & { component: string };\n  onExpandBlock: (direction: T.ExpandDirection) => Promise<void>;\n  onLinePopupToggle: (line: T.SourceLine) => void;\n  onSymbolClick: (symbols: string[]) => void;\n  sourceLines: T.SourceLine[];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nconst noop = () => undefined;\n\nexport default function HotspotSnippetContainerRenderer(\n  props: HotspotSnippetContainerRendererProps\n) {\n  const {\n    branchLike,\n    displayProjectName,\n    highlightedSymbols,\n    hotspot,\n    linePopup,\n    loading,\n    locations,\n    sourceLines,\n    sourceViewerFile\n  } = props;\n\n  return (\n    <div className=\"bordered big-spacer-bottom\">\n      <SourceViewerHeaderSlim\n        branchLike={branchLike}\n        expandable={false}\n        displayProjectName={displayProjectName}\n        linkToProject={false}\n        loading={loading}\n        onExpand={noop}\n        sourceViewerFile={sourceViewerFile}\n      />\n      <DeferredSpinner loading={loading}>\n        {sourceLines.length > 0 && (\n          <SourceViewerContext.Provider /* Used by LineOptionsPopup */\n            value={{ branchLike, file: sourceViewerFile }}>\n            <SnippetViewer\n              branchLike={branchLike}\n              component={sourceViewerFile}\n              displaySCM={false}\n              expandBlock={(_i, direction) => props.onExpandBlock(direction)}\n              handleCloseIssues={noop}\n              handleLinePopupToggle={props.onLinePopupToggle}\n              handleOpenIssues={noop}\n              handleSymbolClick={props.onSymbolClick}\n              highlightedLocationMessage={undefined}\n              highlightedSymbols={highlightedSymbols}\n              index={0}\n              issue={hotspot}\n              issuesByLine={{}}\n              lastSnippetOfLastGroup={false}\n              linePopup={linePopup}\n              loadDuplications={noop}\n              locations={[]}\n              locationsByLine={locations}\n              onIssueChange={noop}\n              onIssuePopupToggle={noop}\n              onLocationSelect={noop}\n              openIssuesByLine={{}}\n              renderDuplicationPopup={noop}\n              snippet={sourceLines}\n            />\n          </SourceViewerContext.Provider>\n        )}\n      </DeferredSpinner>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport BoxedTabs from 'sonar-ui-common/components/controls/BoxedTabs';\nimport Tab from 'sonar-ui-common/components/controls/Tabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Hotspot } from '../../../types/security-hotspots';\n\ninterface Props {\n  hotspot: Hotspot;\n}\n\ninterface State {\n  currentTab: Tab;\n  tabs: Tab[];\n}\n\ninterface Tab {\n  key: TabKeys;\n  label: React.ReactNode;\n  content: string;\n}\n\nexport enum TabKeys {\n  RiskDescription = 'risk',\n  VulnerabilityDescription = 'vulnerability',\n  FixRecommendation = 'fix'\n}\n\nexport default class HotspotViewerTabs extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const tabs = this.computeTabs();\n    this.state = {\n      currentTab: tabs[0],\n      tabs\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.hotspot.key !== prevProps.hotspot.key) {\n      const tabs = this.computeTabs();\n      this.setState({\n        currentTab: tabs[0],\n        tabs\n      });\n    }\n  }\n\n  handleSelectTabs = (tabKey: TabKeys) => {\n    const { tabs } = this.state;\n    const currentTab = tabs.find(tab => tab.key === tabKey)!;\n    this.setState({ currentTab });\n  };\n\n  computeTabs() {\n    const { hotspot } = this.props;\n    return [\n      {\n        key: TabKeys.RiskDescription,\n        label: translate('hotspots.tabs.risk_description'),\n        content: hotspot.rule.riskDescription || ''\n      },\n      {\n        key: TabKeys.VulnerabilityDescription,\n        label: translate('hotspots.tabs.vulnerability_description'),\n        content: hotspot.rule.vulnerabilityDescription || ''\n      },\n      {\n        key: TabKeys.FixRecommendation,\n        label: translate('hotspots.tabs.fix_recommendations'),\n        content: hotspot.rule.fixRecommendations || ''\n      }\n    ].filter(tab => Boolean(tab.content));\n  }\n\n  render() {\n    const { tabs, currentTab } = this.state;\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    return (\n      <>\n        <BoxedTabs onSelect={this.handleSelectTabs} selected={currentTab.key} tabs={tabs} />\n        <div className=\"bordered huge-spacer-bottom\">\n          <div\n            className=\"markdown big-padded\"\n            dangerouslySetInnerHTML={{ __html: sanitize(currentTab.content) }}\n          />\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getSources } from '../../../api/components';\nimport { locationsByLine } from '../../../components/SourceViewer/helpers/indexing';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { BranchLike } from '../../../types/branch-like';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport { constructSourceViewerFile } from '../utils';\nimport HotspotSnippetContainerRenderer from './HotspotSnippetContainerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspot: Hotspot;\n}\n\ninterface State {\n  highlightedSymbols: string[];\n  lastLine?: number;\n  loading: boolean;\n  linePopup?: T.LinePopup & { component: string };\n  sourceLines: T.SourceLine[];\n}\n\nconst BUFFER_LINES = 5;\nconst EXPAND_BY_LINES = 50;\n\nexport default class HotspotSnippetContainer extends React.Component<Props, State> {\n  mounted = false;\n  state: State = {\n    highlightedSymbols: [],\n    loading: true,\n    sourceLines: []\n  };\n\n  componentWillMount() {\n    this.mounted = true;\n    this.fetchSources();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.hotspot.key !== this.props.hotspot.key) {\n      this.fetchSources();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkLastLine(lines: T.SourceLine[], target: number): number | undefined {\n    if (lines.length < 1) {\n      return undefined;\n    }\n    const lastLineReceived = lines[lines.length - 1].line;\n    if (lastLineReceived < target) {\n      return lastLineReceived;\n    }\n    return undefined;\n  }\n\n  fetchSources() {\n    const {\n      branchLike,\n      hotspot: { component, textRange }\n    } = this.props;\n\n    const from = Math.max(1, textRange.startLine - BUFFER_LINES);\n    // Add 1 to check for end-of-file:\n    const to = textRange.endLine + BUFFER_LINES + 1;\n\n    this.setState({ loading: true });\n    return getSources({ key: component.key, from, to, ...getBranchLikeQuery(branchLike) })\n      .then(sourceLines => {\n        if (this.mounted) {\n          const lastLine = this.checkLastLine(sourceLines, to);\n\n          // remove extra sourceline if we didn't reach the end:\n          sourceLines = lastLine ? sourceLines : sourceLines.slice(0, -1);\n          this.setState({ lastLine, loading: false, sourceLines });\n        }\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  }\n\n  handleExpansion = (direction: T.ExpandDirection) => {\n    const { branchLike, hotspot } = this.props;\n    const { sourceLines } = this.state;\n\n    const range =\n      direction === 'up'\n        ? {\n            from: Math.max(1, sourceLines[0].line - EXPAND_BY_LINES),\n            to: sourceLines[0].line - 1\n          }\n        : {\n            from: sourceLines[sourceLines.length - 1].line + 1,\n            // Add 1 to check for end-of-file:\n            to: sourceLines[sourceLines.length - 1].line + EXPAND_BY_LINES + 1\n          };\n\n    return getSources({\n      key: hotspot.component.key,\n      ...range,\n      ...getBranchLikeQuery(branchLike)\n    }).then(additionalLines => {\n      const lastLine =\n        direction === 'down' ? this.checkLastLine(additionalLines, range.to) : undefined;\n\n      let concatSourceLines;\n      if (direction === 'up') {\n        concatSourceLines = additionalLines.concat(sourceLines);\n      } else {\n        // remove extra sourceline if we didn't reach the end:\n        concatSourceLines = sourceLines.concat(\n          lastLine ? additionalLines : additionalLines.slice(0, -1)\n        );\n      }\n\n      this.setState({\n        lastLine,\n        sourceLines: concatSourceLines\n      });\n    });\n  };\n\n  handleLinePopupToggle = (params: T.LinePopup & { component: string }) => {\n    const { component, index, line, name, open } = params;\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.line === line &&\n        state.linePopup.name === name &&\n        state.linePopup.component === component &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: params };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (highlightedSymbols: string[]) => {\n    this.setState({ highlightedSymbols });\n  };\n\n  render() {\n    const { branchLike, component, hotspot } = this.props;\n    const { highlightedSymbols, lastLine, linePopup, loading, sourceLines } = this.state;\n\n    const locations = locationsByLine([hotspot]);\n\n    const sourceViewerFile = constructSourceViewerFile(hotspot, lastLine);\n\n    return (\n      <HotspotSnippetContainerRenderer\n        branchLike={branchLike}\n        displayProjectName={component.qualifier === ComponentQualifier.Application}\n        highlightedSymbols={highlightedSymbols}\n        hotspot={hotspot}\n        lastLine={lastLine}\n        linePopup={linePopup}\n        loading={loading}\n        locations={locations}\n        onExpandBlock={this.handleExpansion}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onSymbolClick={this.handleSymbolClick}\n        sourceLines={sourceLines}\n        sourceViewerFile={sourceViewerFile}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\n\nexport interface StatusDescriptionProps {\n  statusOption: HotspotStatusOption;\n  showTitle?: boolean;\n}\n\nexport default function StatusDescription(props: StatusDescriptionProps) {\n  const { statusOption, showTitle } = props;\n\n  return (\n    <div>\n      <h3>\n        {showTitle && `${translate('status')}: `}\n        {translate('hotspots.status_option', statusOption)}\n      </h3>\n      <span>{translate('hotspots.status_option', statusOption, 'description')}</span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../../../components/common/MarkdownTips';\nimport { HotspotStatusOption } from '../../../../types/security-hotspots';\nimport StatusDescription from './StatusDescription';\n\nexport interface StatusSelectionRendererProps {\n  selectedStatus: HotspotStatusOption;\n  onStatusChange: (statusOption: HotspotStatusOption) => void;\n\n  comment?: string;\n  onCommentChange: (comment: string) => void;\n\n  onSubmit: () => void;\n\n  loading: boolean;\n  submitDisabled: boolean;\n}\n\nexport default function StatusSelectionRenderer(props: StatusSelectionRendererProps) {\n  const { comment, loading, selectedStatus, submitDisabled } = props;\n\n  const renderOption = (status: HotspotStatusOption) => {\n    return (\n      <Radio\n        checked={selectedStatus === status}\n        className=\"big-spacer-bottom\"\n        onCheck={props.onStatusChange}\n        value={status}>\n        <StatusDescription statusOption={status} />\n      </Radio>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"big-padded\">\n        {renderOption(HotspotStatusOption.TO_REVIEW)}\n        {renderOption(HotspotStatusOption.FIXED)}\n        {renderOption(HotspotStatusOption.SAFE)}\n      </div>\n\n      <hr />\n      <div className=\"big-padded display-flex-column\">\n        <label className=\"text-bold\" htmlFor=\"comment-textarea\">\n          {translate('hotspots.status.add_comment')}\n        </label>\n        <textarea\n          className=\"spacer-top form-field fixed-width spacer-bottom\"\n          id=\"comment-textarea\"\n          onChange={(event: React.ChangeEvent<HTMLTextAreaElement>) =>\n            props.onCommentChange(event.currentTarget.value)\n          }\n          rows={4}\n          value={comment}\n        />\n        <MarkdownTips />\n\n        <div className=\"big-spacer-top display-flex-justify-end display-flex-center\">\n          <SubmitButton disabled={submitDisabled || loading} onClick={props.onSubmit}>\n            {translate('hotspots.status.change_status')}\n          </SubmitButton>\n\n          {loading && <i className=\"spacer-left spinner\" />}\n        </div>\n      </div>\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { setSecurityHotspotStatus } from '../../../../api/security-hotspots';\nimport addGlobalSuccessMessage from '../../../../app/utils/addGlobalSuccessMessage';\nimport { Hotspot, HotspotStatusOption } from '../../../../types/security-hotspots';\nimport {\n  getStatusAndResolutionFromStatusOption,\n  getStatusOptionFromStatusAndResolution\n} from '../../utils';\nimport StatusSelectionRenderer from './StatusSelectionRenderer';\n\ninterface Props {\n  hotspot: Hotspot;\n  onStatusOptionChange: (statusOption: HotspotStatusOption) => void;\n}\n\ninterface State {\n  comment?: string;\n  loading: boolean;\n  initialStatus: HotspotStatusOption;\n  selectedStatus: HotspotStatusOption;\n}\n\nexport default class StatusSelection extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    const initialStatus = getStatusOptionFromStatusAndResolution(\n      props.hotspot.status,\n      props.hotspot.resolution\n    );\n\n    this.state = {\n      loading: false,\n      initialStatus,\n      selectedStatus: initialStatus\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleStatusChange = (selectedStatus: HotspotStatusOption) => {\n    this.setState({ selectedStatus });\n  };\n\n  handleCommentChange = (comment: string) => {\n    this.setState({ comment });\n  };\n\n  handleSubmit = () => {\n    const { hotspot } = this.props;\n    const { comment, initialStatus, selectedStatus } = this.state;\n\n    if (selectedStatus && selectedStatus !== initialStatus) {\n      this.setState({ loading: true });\n      setSecurityHotspotStatus(hotspot.key, {\n        ...getStatusAndResolutionFromStatusOption(selectedStatus),\n        comment: comment || undefined\n      })\n        .then(() => {\n          this.setState({ loading: false });\n          this.props.onStatusOptionChange(selectedStatus);\n        })\n        .then(() =>\n          addGlobalSuccessMessage(\n            translateWithParameters(\n              'hotspots.update.success',\n              translate('hotspots.status_option', selectedStatus)\n            )\n          )\n        )\n        .catch(() => this.setState({ loading: false }));\n    }\n  };\n\n  render() {\n    const { comment, initialStatus, loading, selectedStatus } = this.state;\n    const submitDisabled = selectedStatus === initialStatus;\n\n    return (\n      <StatusSelectionRenderer\n        comment={comment}\n        loading={loading}\n        onCommentChange={this.handleCommentChange}\n        onStatusChange={this.handleStatusChange}\n        onSubmit={this.handleSubmit}\n        selectedStatus={selectedStatus}\n        submitDisabled={submitDisabled}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport ChevronDownIcon from 'sonar-ui-common/components/icons/ChevronDownIcon';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { withCurrentUser } from '../../../../components/hoc/withCurrentUser';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { Hotspot } from '../../../../types/security-hotspots';\nimport { getStatusOptionFromStatusAndResolution } from '../../utils';\nimport './Status.css';\nimport StatusDescription from './StatusDescription';\nimport StatusSelection from './StatusSelection';\n\nexport interface StatusProps {\n  currentUser: T.CurrentUser;\n  hotspot: Hotspot;\n\n  onStatusChange: () => void;\n}\n\nexport function Status(props: StatusProps) {\n  const { currentUser, hotspot } = props;\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const statusOption = getStatusOptionFromStatusAndResolution(hotspot.status, hotspot.resolution);\n  const readonly = !hotspot.canChangeStatus || !isLoggedIn(currentUser);\n\n  const trigger = (\n    <div\n      aria-expanded={isOpen}\n      aria-haspopup={true}\n      className={classNames('padded bordered display-flex-column display-flex-justify-center', {\n        readonly\n      })}\n      id=\"status-trigger\"\n      onClick={() => !readonly && setIsOpen(true)}\n      role=\"button\"\n      tabIndex={0}>\n      <div className=\"display-flex-center display-flex-space-between\">\n        {isOpen ? (\n          <span className=\"h3\">{translate('hotspots.status.select_status')}</span>\n        ) : (\n          <StatusDescription showTitle={true} statusOption={statusOption} />\n        )}\n        {!readonly && <ChevronDownIcon className=\"big-spacer-left\" />}\n      </div>\n    </div>\n  );\n\n  const actionableTrigger = (\n    <Toggler\n      closeOnClickOutside={true}\n      closeOnEscape={true}\n      onRequestClose={() => setIsOpen(false)}\n      open={isOpen}\n      overlay={\n        <DropdownOverlay noPadding={true} placement={PopupPlacement.Bottom}>\n          <StatusSelection\n            hotspot={hotspot}\n            onStatusOptionChange={() => {\n              setIsOpen(false);\n              props.onStatusChange();\n            }}\n          />\n        </DropdownOverlay>\n      }>\n      {trigger}\n    </Toggler>\n  );\n\n  return (\n    <div className=\"dropdown\">\n      {readonly ? (\n        <Tooltip overlay={translate('hotspots.status.cannot_change_status')} placement=\"bottom\">\n          {trigger}\n        </Tooltip>\n      ) : (\n        actionableTrigger\n      )}\n    </div>\n  );\n}\n\nexport default withCurrentUser(Status);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { withCurrentUser } from '../../../components/hoc/withCurrentUser';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentSecurityHotspotsUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport Assignee from './assignee/Assignee';\nimport HotspotReviewHistoryAndComments from './HotspotReviewHistoryAndComments';\nimport HotspotSnippetContainer from './HotspotSnippetContainer';\nimport './HotspotViewer.css';\nimport HotspotViewerTabs from './HotspotViewerTabs';\nimport Status from './status/Status';\n\nexport interface HotspotViewerRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  currentUser: T.CurrentUser;\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  onOpenComment: () => void;\n  onCloseComment: () => void;\n  onUpdateHotspot: () => Promise<void>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport function HotspotViewerRenderer(props: HotspotViewerRendererProps) {\n  const {\n    branchLike,\n    component,\n    currentUser,\n    hotspot,\n    loading,\n    securityCategories,\n    commentTextRef,\n    commentVisible,\n    parentScrollRef\n  } = props;\n\n  const permalink = getPathUrlAsString(\n    getComponentSecurityHotspotsUrl(component.key, {\n      ...getBranchLikeQuery(branchLike),\n      hotspots: hotspot?.key\n    }),\n    false\n  );\n\n  return (\n    <DeferredSpinner loading={loading}>\n      {hotspot && (\n        <div className=\"big-padded hotspot-content\" ref={parentScrollRef}>\n          <div className=\"huge-spacer-bottom display-flex-space-between\">\n            <strong className=\"big big-spacer-right\">{hotspot.message}</strong>\n            <div className=\"display-flex-row flex-0\">\n              {isLoggedIn(currentUser) && (\n                <div className=\"dropdown spacer-right flex-1-0-auto\">\n                  <Button onClick={props.onOpenComment}>\n                    {translate('hotspots.comment.open')}\n                  </Button>\n                </div>\n              )}\n              <ClipboardButton className=\"flex-1-0-auto\" copyValue={permalink}>\n                <LinkIcon className=\"spacer-right\" />\n                <span>{translate('hotspots.get_permalink')}</span>\n              </ClipboardButton>\n            </div>\n          </div>\n\n          <div className=\"huge-spacer-bottom display-flex-row\">\n            <div className=\"hotspot-information display-flex-column display-flex-space-between\">\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('category')}</span>\n                <strong className=\"nowrap\">\n                  {securityCategories[hotspot.rule.securityCategory].title}\n                </strong>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('hotspots.risk_exposure')}</span>\n                <div\n                  className={classNames(\n                    'hotspot-risk-badge',\n                    hotspot.rule.vulnerabilityProbability\n                  )}>\n                  {translate('risk_exposure', hotspot.rule.vulnerabilityProbability)}\n                </div>\n              </div>\n              <div className=\"display-flex-center\">\n                <span className=\"big-spacer-right\">{translate('assignee')}</span>\n                <div>\n                  <Assignee hotspot={hotspot} onAssigneeChange={props.onUpdateHotspot} />\n                </div>\n              </div>\n            </div>\n            <div className=\"huge-spacer-left\">\n              <Status hotspot={hotspot} onStatusChange={props.onUpdateHotspot} />\n            </div>\n          </div>\n\n          <HotspotSnippetContainer\n            branchLike={branchLike}\n            component={component}\n            hotspot={hotspot}\n          />\n          <HotspotViewerTabs hotspot={hotspot} />\n          <HotspotReviewHistoryAndComments\n            commentTextRef={commentTextRef}\n            commentVisible={commentVisible}\n            currentUser={currentUser}\n            hotspot={hotspot}\n            onCloseComment={props.onCloseComment}\n            onCommentUpdate={props.onUpdateHotspot}\n            onOpenComment={props.onOpenComment}\n          />\n        </div>\n      )}\n    </DeferredSpinner>\n  );\n}\n\nexport default withCurrentUser(HotspotViewerRenderer);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nimport * as React from 'react';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSecurityHotspotDetails } from '../../../api/security-hotspots';\nimport { BranchLike } from '../../../types/branch-like';\nimport { Hotspot } from '../../../types/security-hotspots';\nimport HotspotViewerRenderer from './HotspotViewerRenderer';\n\ninterface Props {\n  branchLike?: BranchLike;\n  component: T.Component;\n  hotspotKey: string;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  securityCategories: T.StandardSecurityCategories;\n}\n\ninterface State {\n  hotspot?: Hotspot;\n  loading: boolean;\n  commentVisible: boolean;\n}\n\nexport default class HotspotViewer extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n  commentTextRef: React.RefObject<HTMLTextAreaElement>;\n  parentScrollRef: React.RefObject<HTMLDivElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.commentTextRef = React.createRef<HTMLTextAreaElement>();\n    this.parentScrollRef = React.createRef<HTMLDivElement>();\n    this.state = { loading: false, commentVisible: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHotspot();\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.hotspotKey !== this.props.hotspotKey) {\n      this.fetchHotspot();\n    }\n    if (this.commentTextRef.current && !prevState.commentVisible && this.state.commentVisible) {\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHotspot = () => {\n    this.setState({ loading: true });\n    return getSecurityHotspotDetails(this.props.hotspotKey)\n      .then(hotspot => {\n        if (this.mounted) {\n          this.setState({ hotspot, loading: false });\n        }\n        return hotspot;\n      })\n      .catch(() => this.mounted && this.setState({ loading: false }));\n  };\n\n  handleHotspotUpdate = () => {\n    return this.fetchHotspot().then((hotspot?: Hotspot) => {\n      if (hotspot) {\n        return this.props.onUpdateHotspot(hotspot.key);\n      }\n    });\n  };\n\n  handleOpenComment = () => {\n    this.setState({ commentVisible: true });\n    if (this.commentTextRef.current) {\n      // Edge case when the comment is already open and unfocus.\n      this.commentTextRef.current.focus({ preventScroll: true });\n    }\n    if (this.commentTextRef.current && this.parentScrollRef.current) {\n      scrollToElement(this.commentTextRef.current, {\n        parent: this.parentScrollRef.current,\n        bottomOffset: 100\n      });\n    }\n  };\n\n  handleCloseComment = () => {\n    this.setState({ commentVisible: false });\n  };\n\n  render() {\n    const { branchLike, component, securityCategories } = this.props;\n    const { hotspot, loading, commentVisible } = this.state;\n\n    return (\n      <HotspotViewerRenderer\n        branchLike={branchLike}\n        component={component}\n        commentTextRef={this.commentTextRef}\n        commentVisible={commentVisible}\n        hotspot={hotspot}\n        loading={loading}\n        onCloseComment={this.handleCloseComment}\n        onOpenComment={this.handleOpenComment}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        parentScrollRef={this.parentScrollRef}\n        securityCategories={securityCategories}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport A11ySkipTarget from '../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../components/common/ScreenPositionHelper';\nimport { isBranch } from '../../helpers/branch-like';\nimport { BranchLike } from '../../types/branch-like';\nimport { HotspotFilters, HotspotStatusFilter, RawHotspot } from '../../types/security-hotspots';\nimport EmptyHotspotsPage from './components/EmptyHotspotsPage';\nimport FilterBar from './components/FilterBar';\nimport HotspotList from './components/HotspotList';\nimport HotspotViewer from './components/HotspotViewer';\nimport './styles.css';\n\nexport interface SecurityHotspotsAppRendererProps {\n  branchLike?: BranchLike;\n  component: T.Component;\n  filters: HotspotFilters;\n  hotspots: RawHotspot[];\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  isStaticListOfHotspots: boolean;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  onChangeFilters: (filters: Partial<HotspotFilters>) => void;\n  onHotspotClick: (hotspot: RawHotspot) => void;\n  onLoadMore: () => void;\n  onShowAllHotspots: () => void;\n  onUpdateHotspot: (hotspotKey: string) => Promise<void>;\n  selectedHotspot: RawHotspot | undefined;\n  securityCategories: T.StandardSecurityCategories;\n}\n\nexport default function SecurityHotspotsAppRenderer(props: SecurityHotspotsAppRendererProps) {\n  const {\n    branchLike,\n    component,\n    hotspots,\n    hotspotsReviewedMeasure,\n    hotspotsTotal,\n    isStaticListOfHotspots,\n    loading,\n    loadingMeasure,\n    loadingMore,\n    securityCategories,\n    selectedHotspot,\n    filters\n  } = props;\n\n  return (\n    <div id=\"security_hotspots\">\n      <FilterBar\n        component={component}\n        filters={filters}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        isStaticListOfHotspots={isStaticListOfHotspots}\n        loadingMeasure={loadingMeasure}\n        onBranch={isBranch(branchLike)}\n        onChangeFilters={props.onChangeFilters}\n        onShowAllHotspots={props.onShowAllHotspots}\n      />\n      <ScreenPositionHelper>\n        {({ top }) => (\n          <div className=\"wrapper\" style={{ top }}>\n            <Suggestions suggestions=\"security_hotspots\" />\n            <Helmet title={translate('hotspots.page')} />\n\n            <A11ySkipTarget anchor=\"security_hotspots_main\" />\n\n            {loading ? (\n              <DeferredSpinner className=\"huge-spacer-left big-spacer-top\" />\n            ) : (\n              <>\n                {hotspots.length === 0 || !selectedHotspot ? (\n                  <EmptyHotspotsPage\n                    filtered={\n                      filters.assignedToMe ||\n                      (isBranch(branchLike) && filters.sinceLeakPeriod) ||\n                      filters.status !== HotspotStatusFilter.TO_REVIEW\n                    }\n                    isStaticListOfHotspots={isStaticListOfHotspots}\n                  />\n                ) : (\n                  <div className=\"layout-page\">\n                    <div className=\"sidebar\">\n                      <HotspotList\n                        hotspots={hotspots}\n                        hotspotsTotal={hotspotsTotal}\n                        isStaticListOfHotspots={isStaticListOfHotspots}\n                        loadingMore={loadingMore}\n                        onHotspotClick={props.onHotspotClick}\n                        onLoadMore={props.onLoadMore}\n                        securityCategories={securityCategories}\n                        selectedHotspot={selectedHotspot}\n                        statusFilter={filters.status}\n                      />\n                    </div>\n                    <div className=\"main\">\n                      <HotspotViewer\n                        branchLike={branchLike}\n                        component={component}\n                        hotspotKey={selectedHotspot.key}\n                        onUpdateHotspot={props.onUpdateHotspot}\n                        securityCategories={securityCategories}\n                      />\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n          </div>\n        )}\n      </ScreenPositionHelper>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Location } from 'history';\nimport { flatMap, range } from 'lodash';\nimport * as React from 'react';\nimport { addNoFooterPageClass, removeNoFooterPageClass } from 'sonar-ui-common/helpers/pages';\nimport { getMeasures } from '../../api/measures';\nimport { getSecurityHotspotList, getSecurityHotspots } from '../../api/security-hotspots';\nimport { withCurrentUser } from '../../components/hoc/withCurrentUser';\nimport { Router } from '../../components/hoc/withRouter';\nimport { getLeakValue } from '../../components/measure/utils';\nimport { getBranchLikeQuery, isPullRequest, isSameBranchLike } from '../../helpers/branch-like';\nimport { getStandards } from '../../helpers/security-standard';\nimport { isLoggedIn } from '../../helpers/users';\nimport { BranchLike } from '../../types/branch-like';\nimport {\n  HotspotFilters,\n  HotspotResolution,\n  HotspotStatus,\n  HotspotStatusFilter,\n  RawHotspot\n} from '../../types/security-hotspots';\nimport SecurityHotspotsAppRenderer from './SecurityHotspotsAppRenderer';\nimport './styles.css';\n\nconst PAGE_SIZE = 500;\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentUser: T.CurrentUser;\n  component: T.Component;\n  location: Location;\n  router: Router;\n}\n\ninterface State {\n  hotspotKeys?: string[];\n  hotspots: RawHotspot[];\n  hotspotsPageIndex: number;\n  hotspotsReviewedMeasure?: string;\n  hotspotsTotal?: number;\n  loading: boolean;\n  loadingMeasure: boolean;\n  loadingMore: boolean;\n  securityCategories: T.StandardSecurityCategories;\n  selectedHotspot: RawHotspot | undefined;\n  filters: HotspotFilters;\n}\n\nexport class SecurityHotspotsApp extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      loadingMeasure: false,\n      loadingMore: false,\n      hotspots: [],\n      hotspotsPageIndex: 1,\n      securityCategories: {},\n      selectedHotspot: undefined,\n      filters: {\n        ...this.constructFiltersFromProps(props),\n        status: HotspotStatusFilter.TO_REVIEW\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addNoFooterPageClass();\n    this.fetchInitialData();\n  }\n\n  componentDidUpdate(previous: Props) {\n    if (\n      this.props.component.key !== previous.component.key ||\n      this.props.location.query.hotspots !== previous.location.query.hotspots\n    ) {\n      this.fetchInitialData();\n    }\n\n    if (\n      !isSameBranchLike(this.props.branchLike, previous.branchLike) ||\n      isLoggedIn(this.props.currentUser) !== isLoggedIn(previous.currentUser) ||\n      this.props.location.query.assignedToMe !== previous.location.query.assignedToMe ||\n      this.props.location.query.sinceLeakPeriod !== previous.location.query.sinceLeakPeriod\n    ) {\n      this.setState(({ filters }) => ({\n        filters: { ...this.constructFiltersFromProps, ...filters }\n      }));\n    }\n  }\n\n  componentWillUnmount() {\n    removeNoFooterPageClass();\n    this.mounted = false;\n  }\n\n  constructFiltersFromProps(\n    props: Props\n  ): Pick<HotspotFilters, 'assignedToMe' | 'sinceLeakPeriod'> {\n    return {\n      assignedToMe: props.location.query.assignedToMe === 'true' && isLoggedIn(props.currentUser),\n      sinceLeakPeriod:\n        isPullRequest(props.branchLike) || props.location.query.sinceLeakPeriod === 'true'\n    };\n  }\n\n  handleCallFailure = () => {\n    if (this.mounted) {\n      this.setState({ loading: false, loadingMore: false });\n    }\n  };\n\n  fetchInitialData() {\n    return Promise.all([\n      getStandards(),\n      this.fetchSecurityHotspots(),\n      this.fetchSecurityHotspotsReviewed()\n    ])\n      .then(([{ sonarsourceSecurity }, { hotspots, paging }]) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsTotal: paging.total,\n          loading: false,\n          securityCategories: sonarsourceSecurity,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  }\n\n  fetchSecurityHotspotsReviewed = () => {\n    const { branchLike, component } = this.props;\n    const { filters } = this.state;\n\n    const reviewedHotspotsMetricKey = filters.sinceLeakPeriod\n      ? 'new_security_hotspots_reviewed'\n      : 'security_hotspots_reviewed';\n\n    this.setState({ loadingMeasure: true });\n    return getMeasures({\n      component: component.key,\n      metricKeys: reviewedHotspotsMetricKey,\n      ...getBranchLikeQuery(branchLike)\n    })\n      .then(measures => {\n        if (!this.mounted) {\n          return;\n        }\n        const measure = measures && measures.length > 0 ? measures[0] : undefined;\n        const hotspotsReviewedMeasure = filters.sinceLeakPeriod\n          ? getLeakValue(measure)\n          : measure?.value;\n\n        this.setState({ hotspotsReviewedMeasure, loadingMeasure: false });\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loadingMeasure: false });\n        }\n      });\n  };\n\n  fetchSecurityHotspots(page = 1) {\n    const { branchLike, component, location } = this.props;\n    const { filters } = this.state;\n\n    const hotspotKeys = location.query.hotspots\n      ? (location.query.hotspots as string).split(',')\n      : undefined;\n\n    this.setState({ hotspotKeys });\n\n    if (hotspotKeys && hotspotKeys.length > 0) {\n      return getSecurityHotspotList(hotspotKeys, {\n        projectKey: component.key,\n        ...getBranchLikeQuery(branchLike)\n      });\n    }\n\n    const status =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? HotspotStatus.TO_REVIEW\n        : HotspotStatus.REVIEWED;\n\n    const resolution =\n      filters.status === HotspotStatusFilter.TO_REVIEW\n        ? undefined\n        : HotspotResolution[filters.status];\n\n    return getSecurityHotspots({\n      projectKey: component.key,\n      p: page,\n      ps: PAGE_SIZE,\n      status,\n      resolution,\n      onlyMine: filters.assignedToMe,\n      sinceLeakPeriod: filters.sinceLeakPeriod,\n      ...getBranchLikeQuery(branchLike)\n    });\n  }\n\n  reloadSecurityHotspotList = () => {\n    this.setState({ loading: true });\n\n    return this.fetchSecurityHotspots()\n      .then(({ hotspots, paging }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots,\n          hotspotsPageIndex: 1,\n          hotspotsTotal: paging.total,\n          loading: false,\n          selectedHotspot: hotspots.length > 0 ? hotspots[0] : undefined\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  handleChangeFilters = (changes: Partial<HotspotFilters>) => {\n    this.setState(\n      ({ filters }) => ({ filters: { ...filters, ...changes } }),\n      () => {\n        this.reloadSecurityHotspotList();\n        if (changes.sinceLeakPeriod !== undefined) {\n          this.fetchSecurityHotspotsReviewed();\n        }\n      }\n    );\n  };\n\n  handleHotspotClick = (selectedHotspot: RawHotspot) => this.setState({ selectedHotspot });\n\n  handleHotspotUpdate = (hotspotKey: string) => {\n    const { hotspots, hotspotsPageIndex } = this.state;\n    const index = hotspots.findIndex(h => h.key === hotspotKey);\n\n    return Promise.all(\n      range(hotspotsPageIndex).map(p => this.fetchSecurityHotspots(p + 1 /* pages are 1-indexed */))\n    )\n      .then(hotspotPages => {\n        const allHotspots = flatMap(hotspotPages, 'hotspots');\n\n        const { paging } = hotspotPages[hotspotPages.length - 1];\n\n        const nextHotspot = allHotspots[Math.min(index, allHotspots.length - 1)];\n\n        this.setState({\n          hotspots: allHotspots,\n          hotspotsPageIndex: paging.pageIndex,\n          hotspotsTotal: paging.total,\n          selectedHotspot: nextHotspot\n        });\n      })\n      .then(this.fetchSecurityHotspotsReviewed);\n  };\n\n  handleShowAllHotspots = () => {\n    this.props.router.push({\n      ...this.props.location,\n      query: { ...this.props.location.query, hotspots: undefined }\n    });\n  };\n\n  handleLoadMore = () => {\n    const { hotspots, hotspotsPageIndex: hotspotPages } = this.state;\n\n    this.setState({ loadingMore: true });\n\n    return this.fetchSecurityHotspots(hotspotPages + 1)\n      .then(({ hotspots: additionalHotspots }) => {\n        if (!this.mounted) {\n          return;\n        }\n\n        this.setState({\n          hotspots: [...hotspots, ...additionalHotspots],\n          hotspotsPageIndex: hotspotPages + 1,\n          loadingMore: false\n        });\n      })\n      .catch(this.handleCallFailure);\n  };\n\n  render() {\n    const { branchLike, component } = this.props;\n    const {\n      hotspotKeys,\n      hotspots,\n      hotspotsReviewedMeasure,\n      hotspotsTotal,\n      loading,\n      loadingMeasure,\n      loadingMore,\n      securityCategories,\n      selectedHotspot,\n      filters\n    } = this.state;\n\n    return (\n      <SecurityHotspotsAppRenderer\n        branchLike={branchLike}\n        component={component}\n        filters={filters}\n        hotspots={hotspots}\n        hotspotsReviewedMeasure={hotspotsReviewedMeasure}\n        hotspotsTotal={hotspotsTotal}\n        isStaticListOfHotspots={Boolean(hotspotKeys && hotspotKeys.length > 0)}\n        loading={loading}\n        loadingMeasure={loadingMeasure}\n        loadingMore={loadingMore}\n        onChangeFilters={this.handleChangeFilters}\n        onHotspotClick={this.handleHotspotClick}\n        onLoadMore={this.handleLoadMore}\n        onShowAllHotspots={this.handleShowAllHotspots}\n        onUpdateHotspot={this.handleHotspotUpdate}\n        securityCategories={securityCategories}\n        selectedHotspot={selectedHotspot}\n      />\n    );\n  }\n}\n\nexport default withCurrentUser(SecurityHotspotsApp);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as globalMessages from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n"],"sourceRoot":""}