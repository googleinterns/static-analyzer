{"version":3,"sources":["webpack:///./src/main/js/app/components/ProjectAdminContainer.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.ts"],"names":["componentDidMount","this","checkPermissions","componentDidUpdate","isProjectAdmin","configuration","showSettings","render","children","anchor","props","A11ySkipTarget","Consumer","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","label","key","weight","componentWillUnmount","id","handleRequiredAuthorization","store","history","returnTo","window","location","pathname","search","hash","dispatch","replace","query","return_to"],"mappings":"owBAmCA,2B,+CAiCA,OAjCmD,OACjD,YAAAA,kBAAA,WACEC,KAAKC,oBAGP,YAAAC,mBAAA,WACEF,KAAKC,oBAGP,YAAAA,iBAAA,WACOD,KAAKG,kBACR,eAIJ,YAAAA,eAAA,WACU,IAAAC,EAAA,qBAAAA,cACR,OAAwB,MAAjBA,GAAyBA,EAAcC,cAGhD,YAAAC,OAAA,WACE,IAAKN,KAAKG,iBACR,OAAO,KAGT,IAAM,aAAEI,EAAA,EAAAA,SAAU,oBAClB,OACE,gCACE,gBAAC,IAAc,CAACC,OAAO,eACtB,eAAmBD,EAAUE,KAItC,EAjCA,CAAmD,iB,knBCNrC,SAAUC,EAAeD,GACrC,OACE,gBAAC,IAAYE,SAAQ,MAClB,SAAC,G,IAAEC,EAAA,EAAAA,gBAAiBC,EAAA,EAAAA,mBAAyB,OAC5C,gBAACC,EAAmB,GAClBF,gBAAiBA,EACjBC,mBAAoBA,GAChBJ,OAYd,6E,OASE,EAAAM,QAAU,WACF,cAAE,IAAAP,OAAa,IAAAQ,MACrB,MAAO,CAAEC,IAAG,EAAED,WADO,IAAQ,EAAR,yCACAE,OADsC,EAAAA,S,EAQ/D,OAlByC,OACvC,YAAAnB,kBAAA,WACEC,KAAKS,MAAMG,gBAAgBZ,KAAKe,YAGlC,YAAAI,qBAAA,WACEnB,KAAKS,MAAMI,mBAAmBb,KAAKe,YAQrC,YAAAT,OAAA,WACU,IAAAE,EAAA,WAAAA,OACR,OAAO,wBAAMY,GAAI,gBAAgBZ,KAErC,EAlBA,CAAyC,kB,iCChDzC,0EAuBc,SAAUa,IACtB,IAAMC,EAAQ,oBACRC,EAAU,MAEVC,EAAWC,OAAOC,SAASC,SAAWF,OAAOC,SAASE,OAASH,OAAOC,SAASG,KAErFP,EAAMQ,SAAS,eACfP,EAAQQ,QAAQ,CAAEJ,SAAU,gBAAiBK,MAAO,CAAEC,UAAWT","file":"js/376.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\nimport handleRequiredAuthorization from '../utils/handleRequiredAuthorization';\nimport A11ySkipTarget from './a11y/A11ySkipTarget';\n\ninterface Props {\n  children: JSX.Element;\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: T.Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  onBranchesChange: () => void;\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class ProjectAdminContainer extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.checkPermissions();\n  }\n\n  componentDidUpdate() {\n    this.checkPermissions();\n  }\n\n  checkPermissions() {\n    if (!this.isProjectAdmin()) {\n      handleRequiredAuthorization();\n    }\n  }\n\n  isProjectAdmin() {\n    const { configuration } = this.props.component;\n    return configuration != null && configuration.showSettings;\n  }\n\n  render() {\n    if (!this.isProjectAdmin()) {\n      return null;\n    }\n\n    const { children, ...props } = this.props;\n    return (\n      <>\n        <A11ySkipTarget anchor=\"admin_main\" />\n        {React.cloneElement(children, props)}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport { requireAuthorization } from '../../store/appState';\nimport getStore from './getStore';\n\nexport default function handleRequiredAuthorization() {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n}\n"],"sourceRoot":""}