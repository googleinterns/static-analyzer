{"version":3,"sources":["webpack:///./src/main/js/api/webhooks.ts","webpack:///./src/main/js/apps/webhooks/components/CreateWebhookForm.tsx","webpack:///./src/main/js/apps/webhooks/components/PageActions.tsx","webpack:///./src/main/js/apps/webhooks/components/PageHeader.tsx","webpack:///./src/main/js/apps/webhooks/components/DeleteWebhookForm.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveryItem.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveryAccordion.tsx","webpack:///./src/main/js/apps/webhooks/components/DeliveriesForm.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookActions.tsx","webpack:///./src/main/js/apps/webhooks/components/LatestDeliveryForm.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookItemLatestDelivery.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhookItem.tsx","webpack:///./src/main/js/apps/webhooks/components/WebhooksList.tsx","webpack:///./src/main/js/apps/webhooks/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/common/CodeSnippet.tsx","webpack:///./src/main/js/components/common/CodeSnippet.css?463c","webpack:///./src/main/js/components/common/CodeSnippet.css"],"names":["searchDeliveries","data","catch","throwGlobalError","getDelivery","handleCancelClick","event","preventDefault","currentTarget","blur","this","props","onClose","handleValidate","name","secret","url","errors","trim","startsWith","length","webhook","isUpdate","modalHeader","confirmButtonText","header","initialValues","isInitialValid","onSubmit","onDone","size","validate","dirty","handleBlur","handleChange","isSubmitting","touched","values","autoFocus","disabled","error","id","label","htmlFor","className","onBlur","onChange","type","value","description","mounted","state","openCreate","handleCreateClose","setState","handleCreateOpen","renderCreate","webhooksCount","overlay","onClick","onCreate","loading","PageHeader","children","defaultMessage","to","DeleteWebhookForm","onCloseClick","onFormSubmit","submitting","DeliveryItem","delivery","payload","httpStatus","durationMs","CodeSnippet","noCopy","snippet","formatPayload","JSON","stringify","parse","undefined","open","fetchPayload","deliveryId","then","handleClick","renderHeader","success","title","date","at","deliveries","fetchDeliveries","key","ps","paging","stopLoading","fetchMoreDeliveries","p","pageIndex","contentLabel","onRequestClose","map","count","loadMore","ready","total","deleting","updating","handleDelete","onDelete","handleDeleteClick","handleDeletingStop","handleDeliveriesClick","handleDeliveriesStop","handleUpdate","onUpdate","handleUpdateClick","handleUpdatingStop","ActionsDropdown","latestDelivery","destructive","modal","handleModalClose","WebhookItem","webhooks","toLowerCase","fetchWebhooks","getScopeParams","organization","component","organizationKey","project","handleCreate","createWebhook","filter","item","updateWebhook","Suggestions","suggestions","defer","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","prevProps","isOneLine","render","wrap","snippetArray","Array","isArray","line","finalSnippet","join","copyValue","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"js/358.m.5db239d9.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function createWebhook(data: {\n  name: string;\n  organization: string | undefined;\n  project?: string;\n  secret?: string;\n  url: string;\n}): Promise<{ webhook: T.Webhook }> {\n  return postJSON('/api/webhooks/create', data).catch(throwGlobalError);\n}\n\nexport function deleteWebhook(data: { webhook: string }): Promise<void | Response> {\n  return post('/api/webhooks/delete', data).catch(throwGlobalError);\n}\n\nexport function searchWebhooks(data: {\n  organization: string | undefined;\n  project?: string;\n}): Promise<{ webhooks: T.Webhook[] }> {\n  return getJSON('/api/webhooks/list', data).catch(throwGlobalError);\n}\n\nexport function updateWebhook(data: {\n  webhook: string;\n  name: string;\n  secret?: string;\n  url: string;\n}): Promise<void | Response> {\n  return post('/api/webhooks/update', data).catch(throwGlobalError);\n}\n\nexport function searchDeliveries(data: {\n  ceTaskId?: string;\n  componentKey?: string;\n  webhook?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{\n  deliveries: T.WebhookDelivery[];\n  paging: T.Paging;\n}> {\n  return getJSON('/api/webhooks/deliveries', data).catch(throwGlobalError);\n}\n\nexport function getDelivery(data: {\n  deliveryId: string;\n}): Promise<{ delivery: T.WebhookDelivery & { payload: string } }> {\n  return getJSON('/api/webhooks/delivery', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport InputValidationField from 'sonar-ui-common/components/controls/InputValidationField';\nimport ValidationModal from 'sonar-ui-common/components/controls/ValidationModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isWebUri } from 'valid-url';\n\ninterface Props {\n  onClose: () => void;\n  onDone: (data: Values) => Promise<void>;\n  webhook?: T.Webhook;\n}\n\ninterface Values {\n  name: string;\n  secret: string;\n  url: string;\n}\n\nexport default class CreateWebhookForm extends React.PureComponent<Props> {\n  handleCancelClick = (event: React.SyntheticEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClose();\n  };\n\n  handleValidate = (data: Values) => {\n    const { name, secret, url } = data;\n    const errors: { name?: string; secret?: string; url?: string } = {};\n    if (!name.trim()) {\n      errors.name = translate('webhooks.name.required');\n    }\n    if (!url.trim()) {\n      errors.url = translate('webhooks.url.required');\n    } else if (!url.startsWith('http://') && !url.startsWith('https://')) {\n      errors.url = translate('webhooks.url.bad_protocol');\n    } else if (!isWebUri(url)) {\n      errors.url = translate('webhooks.url.bad_format');\n    }\n    if (secret && secret.length > 200) {\n      errors.secret = translate('webhooks.secret.bad_format');\n    }\n    return errors;\n  };\n\n  render() {\n    const { webhook } = this.props;\n    const isUpdate = !!webhook;\n    const modalHeader = isUpdate ? translate('webhooks.update') : translate('webhooks.create');\n    const confirmButtonText = isUpdate ? translate('update_verb') : translate('create');\n    return (\n      <ValidationModal\n        confirmButtonText={confirmButtonText}\n        header={modalHeader}\n        initialValues={{\n          name: (webhook && webhook.name) || '',\n          secret: (webhook && webhook.secret) || '',\n          url: (webhook && webhook.url) || ''\n        }}\n        isInitialValid={isUpdate}\n        onClose={this.props.onClose}\n        onSubmit={this.props.onDone}\n        size=\"small\"\n        validate={this.handleValidate}>\n        {({ dirty, errors, handleBlur, handleChange, isSubmitting, touched, values }) => (\n          <>\n            <InputValidationField\n              autoFocus={true}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.name}\n              id=\"webhook-name\"\n              label={\n                <label htmlFor=\"webhook-name\">\n                  {translate('webhooks.name')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n              }\n              name=\"name\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.name}\n              type=\"text\"\n              value={values.name}\n            />\n            <InputValidationField\n              description={translate('webhooks.url.description')}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.url}\n              id=\"webhook-url\"\n              label={\n                <label htmlFor=\"webhook-url\">\n                  {translate('webhooks.url')}\n                  <em className=\"mandatory\">*</em>\n                </label>\n              }\n              name=\"url\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.url}\n              type=\"text\"\n              value={values.url}\n            />\n            <InputValidationField\n              description={translate('webhooks.secret.description')}\n              dirty={dirty}\n              disabled={isSubmitting}\n              error={errors.secret}\n              id=\"webhook-secret\"\n              label={<label htmlFor=\"webhook-secret\">{translate('webhooks.secret')}</label>}\n              name=\"secret\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              touched={touched.secret}\n              type=\"password\"\n              value={values.secret}\n            />\n          </>\n        )}\n      </ValidationModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport CreateWebhookForm from './CreateWebhookForm';\n\ninterface Props {\n  loading: boolean;\n  onCreate: (data: { name: string; secret?: string; url: string }) => Promise<void>;\n  webhooksCount: number;\n}\n\ninterface State {\n  openCreate: boolean;\n}\n\nconst WEBHOOKS_LIMIT = 10;\n\nexport default class PageActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { openCreate: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleCreateClose = () => {\n    if (this.mounted) {\n      this.setState({ openCreate: false });\n    }\n  };\n\n  handleCreateOpen = () => {\n    this.setState({ openCreate: true });\n  };\n\n  renderCreate = () => {\n    if (this.props.webhooksCount >= WEBHOOKS_LIMIT) {\n      return (\n        <Tooltip overlay={translateWithParameters('webhooks.maximum_reached', WEBHOOKS_LIMIT)}>\n          <Button className=\"js-webhook-create disabled\">{translate('create')}</Button>\n        </Tooltip>\n      );\n    }\n\n    return (\n      <>\n        <Button className=\"js-webhook-create\" onClick={this.handleCreateOpen}>\n          {translate('create')}\n        </Button>\n        {this.state.openCreate && (\n          <CreateWebhookForm onClose={this.handleCreateClose} onDone={this.props.onCreate} />\n        )}\n      </>\n    );\n  };\n\n  render() {\n    if (this.props.loading) {\n      return null;\n    }\n\n    return <div className=\"page-actions\">{this.renderCreate()}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  children?: React.ReactNode;\n  loading: boolean;\n}\n\nexport default function PageHeader({ children, loading }: Props) {\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('webhooks.page')}</h1>\n      {loading && <i className=\"spinner\" />}\n\n      {children}\n\n      <p className=\"page-description\">\n        <FormattedMessage\n          defaultMessage={translate('webhooks.description')}\n          id=\"webhooks.description\"\n          values={{\n            url: (\n              <Link to=\"/documentation/project-administration/webhooks/\">\n                {translate('webhooks.documentation_link')}\n              </Link>\n            )\n          }}\n        />\n      </p>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onClose: () => void;\n  onSubmit: () => Promise<void>;\n  webhook: T.Webhook;\n}\n\nexport default function DeleteWebhookForm({ onClose, onSubmit, webhook }: Props) {\n  const header = translate('webhooks.delete');\n\n  return (\n    <SimpleModal header={header} onClose={onClose} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translateWithParameters('webhooks.delete.confirm', webhook.name)}\n          </div>\n\n          <footer className=\"modal-foot\">\n            <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('delete')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport CodeSnippet from '../../../components/common/CodeSnippet';\n\ninterface Props {\n  className?: string;\n  delivery: T.WebhookDelivery;\n  loading: boolean;\n  payload: string | undefined;\n}\n\nexport default function DeliveryItem({ className, delivery, loading, payload }: Props) {\n  return (\n    <div className={className}>\n      <p className=\"spacer-bottom\">\n        {translateWithParameters(\n          'webhooks.delivery.response_x',\n          delivery.httpStatus || translate('webhooks.delivery.server_unreachable')\n        )}\n      </p>\n      <p className=\"spacer-bottom\">\n        {translateWithParameters(\n          'webhooks.delivery.duration_x',\n          formatMeasure(delivery.durationMs, 'MILLISEC')\n        )}\n      </p>\n      <p className=\"spacer-bottom\">{translate('webhooks.delivery.payload')}</p>\n      <DeferredSpinner className=\"spacer-left spacer-top\" loading={loading}>\n        {payload && <CodeSnippet noCopy={true} snippet={formatPayload(payload)} />}\n      </DeferredSpinner>\n    </div>\n  );\n}\n\nfunction formatPayload(payload: string) {\n  try {\n    return JSON.stringify(JSON.parse(payload), undefined, 2);\n  } catch (error) {\n    return payload;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BoxedGroupAccordion from 'sonar-ui-common/components/controls/BoxedGroupAccordion';\nimport AlertErrorIcon from 'sonar-ui-common/components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from 'sonar-ui-common/components/icons/AlertSuccessIcon';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { getDelivery } from '../../../api/webhooks';\nimport DeliveryItem from './DeliveryItem';\n\ninterface Props {\n  delivery: T.WebhookDelivery;\n}\n\ninterface State {\n  loading: boolean;\n  open: boolean;\n  payload?: string;\n}\n\nexport default class DeliveryAccordion extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false, open: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPayload = ({ delivery } = this.props) => {\n    this.setState({ loading: true });\n    return getDelivery({ deliveryId: delivery.id }).then(\n      ({ delivery }) => {\n        if (this.mounted) {\n          this.setState({ payload: delivery.payload, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  formatPayload = (payload: string) => {\n    try {\n      return JSON.stringify(JSON.parse(payload), undefined, 2);\n    } catch (error) {\n      return payload;\n    }\n  };\n\n  handleClick = () => {\n    if (!this.state.payload) {\n      this.fetchPayload();\n    }\n    this.setState(({ open }) => ({ open: !open }));\n  };\n\n  render() {\n    const { delivery } = this.props;\n    const { loading, open, payload } = this.state;\n\n    return (\n      <BoxedGroupAccordion\n        onClick={this.handleClick}\n        open={open}\n        renderHeader={() =>\n          delivery.success ? (\n            <AlertSuccessIcon className=\"pull-right js-success\" />\n          ) : (\n            <AlertErrorIcon className=\"pull-right js-error\" />\n          )\n        }\n        title={<DateTimeFormatter date={delivery.at} />}>\n        <DeliveryItem\n          className=\"big-spacer-left\"\n          delivery={delivery}\n          loading={loading}\n          payload={payload}\n        />\n      </BoxedGroupAccordion>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { searchDeliveries } from '../../../api/webhooks';\nimport DeliveryAccordion from './DeliveryAccordion';\n\ninterface Props {\n  onClose: () => void;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  deliveries: T.WebhookDelivery[];\n  loading: boolean;\n  paging?: T.Paging;\n}\n\nconst PAGE_SIZE = 10;\n\nexport default class DeliveriesForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deliveries: [], loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchDeliveries();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDeliveries = ({ webhook } = this.props) => {\n    searchDeliveries({ webhook: webhook.key, ps: PAGE_SIZE }).then(({ deliveries, paging }) => {\n      if (this.mounted) {\n        this.setState({ deliveries, loading: false, paging });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreDeliveries = ({ webhook } = this.props) => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      searchDeliveries({ webhook: webhook.key, p: paging.pageIndex + 1, ps: PAGE_SIZE }).then(\n        ({ deliveries, paging }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              deliveries: [...state.deliveries, ...deliveries],\n              loading: false,\n              paging\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  render() {\n    const { webhook } = this.props;\n    const { deliveries, loading, paging } = this.state;\n    const header = translateWithParameters('webhooks.deliveries_for_x', webhook.name);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <div className=\"modal-body modal-container\">\n          {deliveries.map(delivery => (\n            <DeliveryAccordion delivery={delivery} key={delivery.id} />\n          ))}\n          <div className=\"text-center\">\n            <DeferredSpinner loading={loading} />\n          </div>\n          {paging !== undefined && (\n            <ListFooter\n              className=\"little-spacer-bottom\"\n              count={deliveries.length}\n              loadMore={this.fetchMoreDeliveries}\n              ready={!loading}\n              total={paging.total}\n            />\n          )}\n        </div>\n        <footer className=\"modal-foot\">\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('close')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownDivider,\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport CreateWebhookForm from './CreateWebhookForm';\nimport DeleteWebhookForm from './DeleteWebhookForm';\nimport DeliveriesForm from './DeliveriesForm';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  deleting: boolean;\n  deliveries: boolean;\n  updating: boolean;\n}\n\nexport default class WebhookActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { deleting: false, deliveries: false, updating: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDelete = () => {\n    return this.props.onDelete(this.props.webhook.key);\n  };\n\n  handleDeleteClick = () => {\n    this.setState({ deleting: true });\n  };\n\n  handleDeletingStop = () => {\n    if (this.mounted) {\n      this.setState({ deleting: false });\n    }\n  };\n\n  handleDeliveriesClick = () => {\n    this.setState({ deliveries: true });\n  };\n\n  handleDeliveriesStop = () => {\n    this.setState({ deliveries: false });\n  };\n\n  handleUpdate = (data: { name: string; url: string }) => {\n    return this.props.onUpdate({ ...data, webhook: this.props.webhook.key });\n  };\n\n  handleUpdateClick = () => {\n    this.setState({ updating: true });\n  };\n\n  handleUpdatingStop = () => {\n    this.setState({ updating: false });\n  };\n\n  render() {\n    const { webhook } = this.props;\n    return (\n      <>\n        <ActionsDropdown className=\"big-spacer-left\">\n          <ActionsDropdownItem className=\"js-webhook-update\" onClick={this.handleUpdateClick}>\n            {translate('update_verb')}\n          </ActionsDropdownItem>\n          {webhook.latestDelivery && (\n            <ActionsDropdownItem\n              className=\"js-webhook-deliveries\"\n              onClick={this.handleDeliveriesClick}>\n              {translate('webhooks.deliveries.show')}\n            </ActionsDropdownItem>\n          )}\n          <ActionsDropdownDivider />\n          <ActionsDropdownItem\n            className=\"js-webhook-delete\"\n            destructive={true}\n            onClick={this.handleDeleteClick}>\n            {translate('delete')}\n          </ActionsDropdownItem>\n        </ActionsDropdown>\n\n        {this.state.deliveries && (\n          <DeliveriesForm onClose={this.handleDeliveriesStop} webhook={webhook} />\n        )}\n\n        {this.state.updating && (\n          <CreateWebhookForm\n            onClose={this.handleUpdatingStop}\n            onDone={this.handleUpdate}\n            webhook={webhook}\n          />\n        )}\n\n        {this.state.deleting && (\n          <DeleteWebhookForm\n            onClose={this.handleDeletingStop}\n            onSubmit={this.handleDelete}\n            webhook={webhook}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getDelivery } from '../../../api/webhooks';\nimport DeliveryItem from './DeliveryItem';\n\ninterface Props {\n  delivery: T.WebhookDelivery;\n  onClose: () => void;\n  webhook: T.Webhook;\n}\n\ninterface State {\n  loading: boolean;\n  payload?: string;\n}\n\nexport default class LatestDeliveryForm extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPayload();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPayload = ({ delivery } = this.props) => {\n    return getDelivery({ deliveryId: delivery.id }).then(\n      ({ delivery }) => {\n        if (this.mounted) {\n          this.setState({ payload: delivery.payload, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  formatPayload = (payload: string) => {\n    try {\n      return JSON.stringify(JSON.parse(payload), undefined, 2);\n    } catch (error) {\n      return payload;\n    }\n  };\n\n  render() {\n    const { delivery, webhook } = this.props;\n    const { loading, payload } = this.state;\n    const header = translateWithParameters('webhooks.latest_delivery_for_x', webhook.name);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <DeliveryItem\n          className=\"modal-body modal-container\"\n          delivery={delivery}\n          loading={loading}\n          payload={payload}\n        />\n        <footer className=\"modal-foot\">\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('close')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport AlertErrorIcon from 'sonar-ui-common/components/icons/AlertErrorIcon';\nimport AlertSuccessIcon from 'sonar-ui-common/components/icons/AlertSuccessIcon';\nimport BulletListIcon from 'sonar-ui-common/components/icons/BulletListIcon';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport LatestDeliveryForm from './LatestDeliveryForm';\n\ninterface Props {\n  webhook: T.Webhook;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class WebhookItemLatestDelivery extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    const { webhook } = this.props;\n    if (!webhook.latestDelivery) {\n      return <span>{translate('webhooks.last_execution.none')}</span>;\n    }\n\n    const { modal } = this.state;\n    return (\n      <>\n        {webhook.latestDelivery.success ? (\n          <AlertSuccessIcon className=\"text-text-top\" />\n        ) : (\n          <AlertErrorIcon className=\"text-text-top\" />\n        )}\n        <span className=\"spacer-left display-inline-flex-center\">\n          <DateTimeFormatter date={webhook.latestDelivery.at} />\n          <ButtonIcon className=\"button-small little-spacer-left\" onClick={this.handleClick}>\n            <BulletListIcon />\n          </ButtonIcon>\n        </span>\n\n        {modal && (\n          <LatestDeliveryForm\n            delivery={webhook.latestDelivery}\n            onClose={this.handleModalClose}\n            webhook={webhook}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport WebhookActions from './WebhookActions';\nimport WebhookItemLatestDelivery from './WebhookItemLatestDelivery';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhook: T.Webhook;\n}\n\nexport default function WebhookItem({ onDelete, onUpdate, webhook }: Props) {\n  return (\n    <tr>\n      <td>{webhook.name}</td>\n      <td>{webhook.url}</td>\n      <td>{webhook.secret ? translate('yes') : translate('no')}</td>\n      <td>\n        <WebhookItemLatestDelivery webhook={webhook} />\n      </td>\n      <td className=\"thin nowrap text-right\">\n        <WebhookActions onDelete={onDelete} onUpdate={onUpdate} webhook={webhook} />\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport WebhookItem from './WebhookItem';\n\ninterface Props {\n  onDelete: (webhook: string) => Promise<void>;\n  onUpdate: (data: { webhook: string; name: string; url: string }) => Promise<void>;\n  webhooks: T.Webhook[];\n}\n\nexport default class WebhooksList extends React.PureComponent<Props> {\n  renderHeader = () => (\n    <thead>\n      <tr>\n        <th>{translate('name')}</th>\n        <th>{translate('webhooks.url')}</th>\n        <th>{translate('webhooks.secret_header')}</th>\n        <th>{translate('webhooks.last_execution')}</th>\n        <th />\n      </tr>\n    </thead>\n  );\n\n  render() {\n    const { webhooks } = this.props;\n    if (webhooks.length < 1) {\n      return <p>{translate('webhooks.no_result')}</p>;\n    }\n    return (\n      <table className=\"data zebra\">\n        {this.renderHeader()}\n        <tbody>\n          {sortBy(webhooks, webhook => webhook.name.toLowerCase()).map(webhook => (\n            <WebhookItem\n              key={webhook.key}\n              onDelete={this.props.onDelete}\n              onUpdate={this.props.onUpdate}\n              webhook={webhook}\n            />\n          ))}\n        </tbody>\n      </table>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createWebhook, deleteWebhook, searchWebhooks, updateWebhook } from '../../../api/webhooks';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport PageActions from './PageActions';\nimport PageHeader from './PageHeader';\nimport WebhooksList from './WebhooksList';\n\ninterface Props {\n  component?: T.LightComponent;\n  organization: T.Organization | undefined;\n}\n\ninterface State {\n  loading: boolean;\n  webhooks: T.Webhook[];\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, webhooks: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchWebhooks();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchWebhooks = () => {\n    return searchWebhooks(this.getScopeParams()).then(\n      ({ webhooks }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, webhooks });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  getScopeParams = ({ organization, component } = this.props) => {\n    const organizationKey = organization && organization.key;\n    return {\n      organization: component ? component.organization : organizationKey,\n      project: component && component.key\n    };\n  };\n\n  handleCreate = (data: { name: string; secret?: string; url: string }) => {\n    const createData = {\n      name: data.name,\n      url: data.url,\n      ...(data.secret && { secret: data.secret }),\n      ...this.getScopeParams()\n    };\n\n    return createWebhook(createData).then(({ webhook }) => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({ webhooks: [...webhooks, webhook] }));\n      }\n    });\n  };\n\n  handleDelete = (webhook: string) => {\n    return deleteWebhook({ webhook }).then(() => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({\n          webhooks: webhooks.filter(item => item.key !== webhook)\n        }));\n      }\n    });\n  };\n\n  handleUpdate = (data: { webhook: string; name: string; secret?: string; url: string }) => {\n    const udpateData = {\n      webhook: data.webhook,\n      name: data.name,\n      url: data.url,\n      ...(data.secret && { secret: data.secret })\n    };\n\n    return updateWebhook(udpateData).then(() => {\n      if (this.mounted) {\n        this.setState(({ webhooks }) => ({\n          webhooks: webhooks.map(webhook =>\n            webhook.key === data.webhook\n              ? { ...webhook, name: data.name, secret: data.secret, url: data.url }\n              : webhook\n          )\n        }));\n      }\n    });\n  };\n\n  render() {\n    const { loading, webhooks } = this.state;\n\n    return (\n      <>\n        <Suggestions suggestions=\"webhooks\" />\n        <Helmet defer={false} title={translate('webhooks.page')} />\n\n        <div className=\"page page-limited\">\n          <PageHeader loading={loading}>\n            <PageActions\n              loading={loading}\n              onCreate={this.handleCreate}\n              webhooksCount={webhooks.length}\n            />\n          </PageHeader>\n\n          {!loading && (\n            <div className=\"boxed-group boxed-group-inner\">\n              <WebhooksList\n                onDelete={this.handleDelete}\n                onUpdate={this.handleUpdate}\n                webhooks={webhooks}\n              />\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ClipboardButton } from 'sonar-ui-common/components/controls/clipboard';\nimport './CodeSnippet.css';\n\ninterface Props {\n  className?: string;\n  isOneLine?: boolean;\n  noCopy?: boolean;\n  render?: () => JSX.Element;\n  snippet: string | (string | undefined)[];\n  wrap?: boolean;\n}\n\n// keep this \"useless\" concatentation for the readability reason\n// eslint-disable-next-line no-useless-concat\nconst s = ' \\\\' + '\\n  ';\n\nexport default function CodeSnippet({\n  className,\n  isOneLine,\n  noCopy,\n  render,\n  snippet,\n  wrap\n}: Props) {\n  const snippetArray = Array.isArray(snippet)\n    ? snippet.filter(line => line !== undefined)\n    : [snippet];\n  const finalSnippet = isOneLine ? snippetArray.join(' ') : snippetArray.join(s);\n  return (\n    <div\n      className={classNames(\n        'code-snippet',\n        { 'code-snippet-oneline': isOneLine, 'code-snippet-wrap': wrap },\n        className\n      )}>\n      <pre>{render ? render() : finalSnippet}</pre>\n      {!noCopy && <ClipboardButton copyValue={finalSnippet} />}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./CodeSnippet.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".code-snippet{position:relative;margin:8px 0;background:#404040;color:#f0f0f0;border-radius:3px}.code-snippet pre{padding:16px;overflow:auto}.code-snippet>button{position:absolute;top:16px;right:16px;line-height:18px;border:1px solid #fff;color:#fff;font-size:11px;font-weight:400;-webkit-user-select:none;-ms-user-select:none;user-select:none}.code-snippet>button:active,.code-snippet>button:focus,.code-snippet>button:hover{background-color:#fff;color:#404040}.code-snippet-oneline pre{padding-bottom:40px}.code-snippet-oneline>button{top:auto;bottom:16px}.code-snippet-wrap pre{white-space:pre-wrap;word-break:break-all}.code-snippet .highlight{font-weight:700;color:#f4b1b0}.code-snippet .button-icon{color:#fff!important}.code-snippet .button-icon:active svg,.code-snippet .button-icon:focus svg,.code-snippet .button-icon:hover svg{background-color:#fff;color:#404040}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}