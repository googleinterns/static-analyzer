{"version":3,"sources":["webpack:///./src/main/js/apps/quality-profiles/components/BuiltInQualityProfileBadge.tsx","webpack:///../sonar-docs/src/tooltips/quality-profiles/built-in-quality-profile.md","webpack:///./src/main/js/apps/coding-rules/components/SimilarRulesFilter.tsx","webpack:///./src/main/js/apps/coding-rules/styles.css?8cf5","webpack:///./src/main/js/apps/coding-rules/styles.css","webpack:///./src/main/js/apps/issues/sidebar/StandardFacet.tsx","webpack:///../sonar-docs/src/tooltips/rules/custom-rules.md","webpack:///./src/main/js/apps/coding-rules/components/RemoveExtendedDescriptionModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsDescription.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsTagsPopup.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsMeta.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationFormModal.tsx","webpack:///../sonar-docs/src/tooltips/rules/rules-quality-profiles.md","webpack:///../sonar-docs/src/tooltips/rules/rule-templates.md","webpack:///../sonar-docs/src/tooltips/rules/custom-rule-removal.md","webpack:///./src/main/js/apps/coding-rules/components/BulkChangeModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/BulkChange.tsx","webpack:///./src/main/js/apps/coding-rules/components/Facet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/AvailableSinceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/DefaultSeverityFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/InheritanceFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/LanguageFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/ProfileFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/RepositoryFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/StatusFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TagFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TemplateFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/TypeFacet.tsx","webpack:///./src/main/js/apps/coding-rules/components/FacetsList.tsx","webpack:///./src/main/js/apps/coding-rules/components/PageActions.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleFormModal.tsx","webpack:///./src/main/js/apps/coding-rules/components/CustomRuleButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsCustomRules.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsIssues.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsParameters.tsx","webpack:///./src/main/js/apps/coding-rules/components/ActivationButton.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleInheritanceIcon.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetailsProfiles.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleDetails.tsx","webpack:///./src/main/js/apps/coding-rules/components/RuleListItem.tsx","webpack:///./src/main/js/apps/coding-rules/components/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/api/quality-profiles.ts","webpack:///./src/main/js/api/rules.ts"],"names":["BuiltInQualityProfileBadge","className","tooltip","badge","doc","handleLanguageClick","event","preventDefault","currentTarget","blur","props","rule","lang","onFilterChange","languages","handleTypeClick","types","type","handleSeverityClick","severity","severities","handleTagClick","tag","tags","render","sysTags","allTags","overlay","href","onClick","this","langName","query","length","map","key","title","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","mounted","property","state","standards","owaspTop10","sansTop25","cwe","sonarsourceSecurity","loadStandards","then","setState","getValues","item","handleHeaderClick","onToggle","handleOwaspTop10HeaderClick","handleSansTop25HeaderClick","handleSonarSourceSecurityHeaderClick","handleClear","onChange","handleItemClick","prop","itemValue","multiple","items","newValue","includes","handleOwaspTop10ItemClick","handleSansTop25ItemClick","handleSonarSourceSecurityItemClick","handleCWESearch","Promise","resolve","results","Object","keys","filter","toLowerCase","loadCWESearchResultCount","categories","loadSearchResultCount","renderList","statsProp","valuesProp","renderName","stats","values","renderFacetItemsList","renderTooltip","getStat","category","undefined","active","name","stat","value","renderHint","componentDidMount","open","componentDidUpdate","prevProps","componentWillUnmount","renderOwaspTop10List","renderOwaspTop10Hint","renderSansTop25List","renderSansTop25Hint","renderSonarSourceSecurityList","renderSonarSourceSecurityHint","renderSubFacets","fetching","fetchingSonarSourceSecurity","sonarsourceSecurityOpen","fetchingOwaspTop10","owaspTop10Open","fetchingSansTop25","sansTop25Open","facetHeader","fetchingCwe","getFacetItemText","getSearchResultKey","getSearchResultText","onSearch","cweOpen","renderFacetItem","renderSearchResult","searchPlaceholder","cweStats","onClear","RemoveExtendedDescriptionModal","onCancel","onSubmit","header","onClose","onCloseClick","onFormSubmit","submitting","disabled","description","descriptionForm","removeDescriptionModal","handleDescriptionChange","handleCancelClick","handleSaveClick","updateDescription","handleRemoveDescriptionClick","handleCancelRemoving","handleConfirmRemoving","text","ruleDetails","markdown_note","organization","handleExtendDescriptionClick","mdNote","renderDescription","id","htmlNote","dangerouslySetInnerHTML","__html","canWrite","renderForm","colSpan","autoFocus","rows","MarkdownTips","hasDescription","isExternal","htmlDesc","templateKey","searchResult","q","ps","Math","min","onSelect","setTags","onUnselect","availableTags","TagsSelector","listSize","selectedTags","renderType","renderSeverity","SeverityHelper","renderStatus","status","renderTags","closeOnClick","closeOnClickOutside","onTagsChange","overlayPlacement","BottomLeft","TagsList","allowUpdate","renderCreationDate","date","renderRepository","referencedRepositories","repository","repo","renderTemplate","isTemplate","renderParentTemplate","to","DocTooltip","renderRemediation","debtRemFnType","debtRemFnOffset","debtRemFnCoeff","effortToFixDescription","renderScope","scope","renderExternalBadge","engine","replace","RegExp","renderKey","displayedKey","startsWith","substr","hasTypeData","hideSimilarRulesFilter","SimilarRulesFilter","getParams","activation","params","param","defaultValue","getQualityProfilesWithDepth","profiles","profile","isBuiltIn","actions","edit","language","depth","handleFormSubmit","data","onDone","handleParameterChange","handleProfileChange","handleSeverityChange","renderSeverityOption","profilesWithDepth","isCustomRule","activeInAllProfiles","isUpdateMode","contentLabel","modalHeader","onRequestClose","size","variant","clearable","label","repeat","optionRenderer","searchable","valueRenderer","placeholder","handleProfileSelect","selectedProfiles","option","getAvailableQualityProfiles","referencedProfiles","processResponse","response","failed","succeeded","sendRequests","looper","method","action","targetKey","finished","renderResult","result","profileKey","Alert","renderProfileSelect","languageName","multi","availableProfiles","total","htmlFor","modal","getSelectedProfile","closeModal","handleActivateClick","handleActivateInProfileClick","handleDeactivateClick","handleDeactivateInProfileClick","some","Boolean","canChangeProfile","allowActivateOnProfile","allowDeactivateOnProfile","singleSelection","renderItem","renderTextName","FacetItem","halfWidth","FacetBox","FacetHeader","disabledHelper","children","FacetItemsList","renderFooter","defaultRenderName","availableSince","handlePeriodChange","intl","formatDate","DateInput","getLanguageName","languageKey","installedLanguages","find","l","handleSearch","getAllPossibleOptions","paging","pageIndex","pageSize","term","ListStyleFacet","minSearchLength","selected","compareToProfile","activationSeverities","inheritance","handleActiveClick","stopPropagation","handleInactiveClick","getTextValue","getTooltip","base","renderActivation","isCompare","role","tabIndex","referencedLanguages","repositoryKey","facetProps","handleSelect","getTagName","renderTag","fill","gray60","handleChange","changes","template","Array","isArray","String","FacetsList","languageDisabled","hideProfileFacet","inheritanceDisabled","selectedProfile","isInherited","activationSeverityDisabled","onFacetToggle","openFacets","facets","repositories","statuses","StandardFacet","owaspTop10Stats","sansTop25Stats","sonarsourceSecurityStats","organizationsEnabled","PageActions","Shortcuts","loading","onReload","PageCounter","current","selectedIndex","prepareRequest","customRule","templateRule","csv","join","ruleData","markdown_description","custom_key","prevent_reactivation","reactivating","template_key","newRuleDetails","handleNameChange","keyModifiedByUser","handleKeyChange","handleTypeChange","handleStatusChange","renderNameField","required","renderKeyField","renderDescriptionField","renderTypeOption","TypeHelper","renderTypeField","renderSeverityField","renderStatusField","renderParameterField","mdDesc","submit","handleClick","handleModalClose","handleDone","fetchRules","f","rules","handleRuleCreate","handleRuleDelete","ruleKey","renderRule","canChange","confirmButtonText","confirmData","isDestructive","modalBody","onConfirm","fetchIssues","resolved","facet","components","projects","project","component","count","renderTotal","path","totalItem","appState","branchesEnabled","renderProject","withAppState","renderParameter","handleButtonClick","handleCloseModal","buttonText","ActivationFormModal","RuleInheritanceIcon","red","baseFontColor","height","version","viewBox","width","xmlSpace","xmlnsXlink","other","d","style","fillRule","handleActivate","handleDeactivate","onDeactivate","handleRevert","reset","onActivate","renderInheritedProfile","parentName","profilePath","inherit","parentActivation","originalParam","p","originalValue","renderParameters","renderActions","canEdit","hasParent","parentKey","activations","qProfile","x","canActivate","InstanceMessage","message","fetchRuleDetails","actives","handleRuleChange","handleTagsChange","oldTags","catch","handleDelete","onDelete","allowCustomRules","hideQualityProfiles","isCustom","isEditable","RuleDetailsMeta","RuleDetailsDescription","handleNameClick","isLeftClickEvent","button","metaKey","altKey","ctrlKey","shiftKey","onOpen","isLoggedIn","canCopy","copy","renderDeactivateButton","overlayTranslationKey","attachShortcuts","selectPreviousRule","selectNextRule","openSelectedRule","handleBack","detachShortcuts","getOpenRule","location","getFacetsToFetch","getFieldsToFetch","fields","getSearchParameters","s","stopLoading","fetchInitialData","all","fetchQualityProfiles","fetchFirstRules","makeFetchRequest","rawActives","entries","parseActives","rawFacets","rawFacet","rawValue","val","parseFacets","openRule","usingPermalink","fetchMoreRules","nextPage","fetchFacet","currentUser","userOrganizations","getSelectedIndex","index","findIndex","getRulePath","pathname","router","closeRule","scrollToSelectedRule","smooth","element","document","querySelector","topOffset","bottomOffset","getRuleActivation","closeFacet","handleRuleOpen","handleReset","handleFilterChange","handleFacetToggle","willOpenProperty","newState","handleReload","pickRuleAround","handleRuleActivate","handleRuleDeactivate","newRule","searchQuery","isFiltered","renderBulkButton","componentWillReceiveProps","nextProps","prevState","Suggestions","suggestions","defer","ScreenPositionHelper","top","A11ySkipTarget","anchor","weight","FiltersHeader","displayReset","onReset","minLength","loadMore","ready","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","searchQualityProfiles","parameters","getQualityProfile","compareToSonarWay","createQualityProfile","restoreQualityProfile","getProfileProjects","getProfileInheritance","qualityProfile","setDefaultProfile","renameProfile","copyProfile","fromKey","toName","deleteProfile","changeProfileParent","parentProfile","parentQualityProfile","getQualityProfileBackupUrl","encodeURIComponent","getQualityProfileExporterUrl","exporterKey","getImporters","r","getExporters","getProfileChangelog","since","page","compareProfiles","leftKey","rightKey","associateProject","dissociateProject","searchUsers","searchGroups","addUser","removeUser","addGroup","removeGroup","bulkActivateRules","bulkDeactivateRules","activateRule","deactivateRule","getRulesApp","searchRules","takeFacet","getRuleDetails","getRuleTags","createRule","reject","deleteRule","updateRule"],"mappings":"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","file":"js/331.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\n\ninterface Props {\n  className?: string;\n  tooltip?: boolean;\n}\n\nexport default function BuiltInQualityProfileBadge({ className, tooltip = true }: Props) {\n  const badge = (\n    <div className={classNames('badge badge-info', className)}>\n      {translate('quality_profiles.built_in')}\n    </div>\n  );\n\n  if (tooltip) {\n    return (\n      <DocTooltip\n        doc={import(\n          /* webpackMode: \"eager\" */ 'Docs/tooltips/quality-profiles/built-in-quality-profile.md'\n        )}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n  return badge;\n}\n","export default \"Built-in profiles are provided directly by the language analyzers and may be updated with each new analyzer version. They represent best-practice, minimum rule sets.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { Query } from '../query';\n\ninterface Props {\n  onFilterChange: (changes: Partial<Query>) => void;\n  rule: T.Rule;\n}\n\nexport default class SimilarRulesFilter extends React.PureComponent<Props> {\n  handleLanguageClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.lang) {\n      this.props.onFilterChange({ languages: [this.props.rule.lang] });\n    }\n  };\n\n  handleTypeClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onFilterChange({ types: [this.props.rule.type] });\n  };\n\n  handleSeverityClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (this.props.rule.severity) {\n      this.props.onFilterChange({ severities: [this.props.rule.severity] });\n    }\n  };\n\n  handleTagClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { tag } = event.currentTarget.dataset;\n    if (tag) {\n      this.props.onFilterChange({ tags: [tag] });\n    }\n  };\n\n  render() {\n    const { rule } = this.props;\n    const { tags = [], sysTags = [], severity } = rule;\n    const allTags = [...tags, ...sysTags];\n\n    return (\n      <Dropdown\n        className=\"display-inline-block\"\n        overlay={\n          <>\n            <ul className=\"menu\">\n              <li className=\"menu-header\">{translate('coding_rules.filter_similar_rules')}</li>\n              <li>\n                <a\n                  data-test=\"coding-rules__similar-language\"\n                  href=\"#\"\n                  onClick={this.handleLanguageClick}>\n                  {rule.langName}\n                </a>\n              </li>\n\n              <li>\n                <a\n                  className=\"display-flex-center\"\n                  data-test=\"coding-rules__similar-type\"\n                  href=\"#\"\n                  onClick={this.handleTypeClick}>\n                  <IssueTypeIcon query={rule.type} />\n                  <span className=\"little-spacer-left\">{translate('issue.type', rule.type)}</span>\n                </a>\n              </li>\n\n              {severity && (\n                <li>\n                  <a\n                    data-test=\"coding-rules__similar-severity\"\n                    href=\"#\"\n                    onClick={this.handleSeverityClick}>\n                    <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n                  </a>\n                </li>\n              )}\n\n              {allTags.length > 0 && <li className=\"divider\" />}\n              {allTags.map(tag => (\n                <li key={tag}>\n                  <a\n                    data-tag={tag}\n                    data-test=\"coding-rules__similar-tag\"\n                    href=\"#\"\n                    onClick={this.handleTagClick}>\n                    <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                    <span className=\"text-middle\">{tag}</span>\n                  </a>\n                </li>\n              ))}\n            </ul>\n          </>\n        }>\n        <a\n          className=\"js-rule-filter link-no-underline spacer-left dropdown-toggle\"\n          href=\"#\"\n          title={translate('coding_rules.filter_similar_rules')}>\n          <FilterIcon className=\"icon-half-transparent\" />\n          <DropdownIcon className=\"icon-half-transparent\" />\n        </a>\n      </Dropdown>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".coding-rules-extended-view .coding-rules-list{display:none}.coding-rules-extended-view .coding-rules-details{display:block}.coding-rules-detail-title{position:relative;display:inline-block;margin:16px 0;font-size:16px;font-weight:400}.coding-rules-detail-quality-profile-parameter{display:block;height:100%;padding-top:0;padding-right:10px}.coding-rules-detail-quality-profile-parameter .key,.coding-rules-detail-quality-profile-parameter .sep,.coding-rules-detail-quality-profile-parameter .value{display:inline;vertical-align:top}.coding-rules-detail-quality-profile-parameter .value{display:inline-block;vertical-align:top;line-height:23px;max-width:300px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace}.coding-rules-detail-quality-profile-parameter+.coding-rules-detail-quality-profile-parameter{margin-top:0}.coding-rules-detail-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:8px}.coding-rules-detail-properties+.coding-rules-detail-properties{margin-top:-10px}.coding-rules-detail-property{display:flex;align-items:center;margin-right:16px;margin-bottom:8px;font-size:12px}.coding-rules-detail-tag+.coding-rules-detail-tag{margin-left:10px}.coding-rules-detail-tags-change{cursor:pointer}.coding-rules-detail-tags-change:hover span{text-decoration:underline}.coding-rules-detail-tag-edit{line-height:1}.coding-rules-details-tag-edit-cancel{vertical-align:middle}.coding-rules-detail-description{margin:20px 0}.coding-rules-detail-description-extra{margin-top:-10px}.coding-rules-detail-extend-description-form{margin:10px 0}.coding-rules-detail-parameters{width:100%;margin:10px 0 20px}.coding-rules-detail-parameter-name{width:1px;vertical-align:top;padding:5px 10px 5px 0;font-weight:700}.coding-rules-detail-parameter-description{vertical-align:top;padding:5px}.coding-rules-detail-parameter-value{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;word-break:break-all}.coding-rules-detail-list,.coding-rules-detail-quality-profiles{width:100%;line-height:22px}.coding-rules-detail-list td,.coding-rules-detail-quality-profiles td{border-top:1px solid #e6e6e6}.coding-rules-detail-list tr:first-child td,.coding-rules-detail-quality-profiles tr:first-child td{border-top:none}.coding-rules-detail-list-name,.coding-rules-detail-quality-profile-name{vertical-align:top;width:1px;padding:8px 5px 8px 0;font-weight:600;white-space:nowrap}.coding-rules-detail-list-severity,.coding-rules-detail-quality-profile-severity{vertical-align:top;width:1px;padding:8px 5px;white-space:nowrap}.coding-rules-detail-quality-profile-severity i{margin-top:2px}.coding-rules-detail-list-parameters,.coding-rules-detail-quality-profile-parameters{vertical-align:top;padding:8px 5px}.coding-rules-detail-list-actions,.coding-rules-detail-quality-profile-actions{vertical-align:top;width:1px;padding:8px 0 8px 5px;text-align:right;white-space:nowrap}.coding-rules-detail-quality-profile-inheritance{font-size:12px;font-weight:400}.coding-rules-detail-quality-profiles-activation{margin-top:-3px;margin-left:10px}.coding-rules-most-violated-projects td{border-top-color:transparent}.coding-rules-most-violated-projects tr:first-child+tr td{border-top-color:#e6e6e6}.coding-rules-most-violated-projects .coding-rules-detail-list-name{font-weight:400}.coding-rule{padding:8px 10px 8px 8px;border:1px solid transparent;background-color:#fff}.coding-rule.selected{border-color:#4b9fd5!important}.coding-rule+.coding-rule{border-top-color:#e6e6e6}.coding-rule.selected+.coding-rule{border-top-color:transparent}.coding-rule-table{width:100%}.coding-rule-table td{vertical-align:top}.coding-rule-table+.coding-rule-table{margin-top:5px}.coding-rule-table-meta-cell{width:1px;white-space:nowrap}@media (max-width:1320px){.coding-rule-table .tags-list span{max-width:100px}}.coding-rule-title{line-height:20px;font-size:13px}.coding-rule-meta{padding:2px 2px 2px 30px;font-size:12px}.coding-rule-activation{width:40px;line-height:19.5px}.coding-rule-activation-actions{padding-left:20px}.coding-rule-section-separator{height:0;margin:10px 0;border-top:1px solid #e6e6e6}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport MultipleSelectionHint from '../../../components/facet/MultipleSelectionHint';\nimport {\n  getStandards,\n  renderCWECategory,\n  renderOwaspTop10Category,\n  renderSansTop25Category,\n  renderSonarSourceSecurityCategory\n} from '../../../helpers/security-standard';\nimport { Facet, formatFacetStat, Query, STANDARDS } from '../utils';\n\ninterface Props {\n  cwe: string[];\n  cweOpen: boolean;\n  cweStats: T.Dict<number> | undefined;\n  fetchingCwe: boolean;\n  fetchingOwaspTop10: boolean;\n  fetchingSansTop25: boolean;\n  fetchingSonarSourceSecurity: boolean;\n  loadSearchResultCount?: (property: string, changes: Partial<Query>) => Promise<Facet>;\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: string) => void;\n  open: boolean;\n  owaspTop10: string[];\n  owaspTop10Open: boolean;\n  owaspTop10Stats: T.Dict<number> | undefined;\n  query: Partial<Query>;\n  sansTop25: string[];\n  sansTop25Open: boolean;\n  sansTop25Stats: T.Dict<number> | undefined;\n  sonarsourceSecurity: string[];\n  sonarsourceSecurityOpen: boolean;\n  sonarsourceSecurityStats: T.Dict<number> | undefined;\n}\n\ninterface State {\n  standards: T.Standards;\n}\n\ntype StatsProp = 'owaspTop10Stats' | 'cweStats' | 'sansTop25Stats' | 'sonarsourceSecurityStats';\ntype ValuesProp = T.StandardType;\n\nexport default class StandardFacet extends React.PureComponent<Props, State> {\n  mounted = false;\n  property = STANDARDS;\n  state: State = {\n    standards: { owaspTop10: {}, sansTop25: {}, cwe: {}, sonarsourceSecurity: {} }\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n\n    // load standards.json only if the facet is open, or there is a selected value\n    if (\n      this.props.open ||\n      this.props.owaspTop10.length > 0 ||\n      this.props.cwe.length > 0 ||\n      this.props.sansTop25.length > 0 ||\n      this.props.sonarsourceSecurity.length > 0\n    ) {\n      this.loadStandards();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.open && this.props.open) {\n      this.loadStandards();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStandards = () => {\n    getStandards().then(\n      ({ owaspTop10, sansTop25, cwe, sonarsourceSecurity }: T.Standards) => {\n        if (this.mounted) {\n          this.setState({ standards: { owaspTop10, sansTop25, cwe, sonarsourceSecurity } });\n        }\n      },\n      () => {}\n    );\n  };\n\n  getValues = () => {\n    return [\n      ...this.props.sonarsourceSecurity.map(item =>\n        renderSonarSourceSecurityCategory(this.state.standards, item, true)\n      ),\n      ...this.props.owaspTop10.map(item =>\n        renderOwaspTop10Category(this.state.standards, item, true)\n      ),\n      ...this.props.sansTop25.map(item =>\n        renderSansTop25Category(this.state.standards, item, true)\n      ),\n      ...this.props.cwe.map(item => renderCWECategory(this.state.standards, item))\n    ];\n  };\n\n  handleHeaderClick = () => {\n    this.props.onToggle(this.property);\n  };\n\n  handleOwaspTop10HeaderClick = () => {\n    this.props.onToggle('owaspTop10');\n  };\n\n  handleSansTop25HeaderClick = () => {\n    this.props.onToggle('sansTop25');\n  };\n\n  handleSonarSourceSecurityHeaderClick = () => {\n    this.props.onToggle('sonarsourceSecurity');\n  };\n\n  handleClear = () => {\n    this.props.onChange({\n      [this.property]: [],\n      owaspTop10: [],\n      sansTop25: [],\n      cwe: [],\n      sonarsourceSecurity: []\n    });\n  };\n\n  handleItemClick = (prop: ValuesProp, itemValue: string, multiple: boolean) => {\n    const items = this.props[prop];\n    if (multiple) {\n      const newValue = sortBy(\n        items.includes(itemValue) ? without(items, itemValue) : [...items, itemValue]\n      );\n      this.props.onChange({ [prop]: newValue });\n    } else {\n      this.props.onChange({\n        [prop]: items.includes(itemValue) && items.length < 2 ? [] : [itemValue]\n      });\n    }\n  };\n\n  handleOwaspTop10ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('owaspTop10', itemValue, multiple);\n  };\n\n  handleSansTop25ItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sansTop25', itemValue, multiple);\n  };\n\n  handleSonarSourceSecurityItemClick = (itemValue: string, multiple: boolean) => {\n    this.handleItemClick('sonarsourceSecurity', itemValue, multiple);\n  };\n\n  handleCWESearch = (query: string) => {\n    return Promise.resolve({\n      results: Object.keys(this.state.standards.cwe).filter(cwe =>\n        renderCWECategory(this.state.standards, cwe)\n          .toLowerCase()\n          .includes(query.toLowerCase())\n      )\n    });\n  };\n\n  loadCWESearchResultCount = (categories: string[]) => {\n    const { loadSearchResultCount } = this.props;\n    return loadSearchResultCount\n      ? loadSearchResultCount('cwe', { cwe: categories })\n      : Promise.resolve({});\n  };\n\n  renderList = (\n    statsProp: StatsProp,\n    valuesProp: ValuesProp,\n    renderName: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    const stats = this.props[statsProp];\n    const values = this.props[valuesProp];\n    if (!stats) {\n      return null;\n    }\n    const categories = sortBy(Object.keys(stats), key => -stats[key]);\n    return this.renderFacetItemsList(stats, values, categories, renderName, renderName, onClick);\n  };\n\n  // eslint-disable-next-line max-params\n  renderFacetItemsList = (\n    stats: any,\n    values: string[],\n    categories: string[],\n    renderName: (standards: T.Standards, category: string) => React.ReactNode,\n    renderTooltip: (standards: T.Standards, category: string) => string,\n    onClick: (x: string, multiple?: boolean) => void\n  ) => {\n    if (!categories.length) {\n      return (\n        <div className=\"search-navigator-facet-empty little-spacer-top\">\n          {translate('no_results')}\n        </div>\n      );\n    }\n\n    const getStat = (category: string) => {\n      return stats ? stats[category] : undefined;\n    };\n\n    return (\n      <FacetItemsList>\n        {categories.map(category => (\n          <FacetItem\n            active={values.includes(category)}\n            key={category}\n            name={renderName(this.state.standards, category)}\n            onClick={onClick}\n            stat={formatFacetStat(getStat(category))}\n            tooltip={renderTooltip(this.state.standards, category)}\n            value={category}\n          />\n        ))}\n      </FacetItemsList>\n    );\n  };\n\n  renderHint = (statsProp: StatsProp, valuesProp: ValuesProp) => {\n    const stats = this.props[statsProp] || {};\n    const values = this.props[valuesProp];\n    return <MultipleSelectionHint options={Object.keys(stats).length} values={values.length} />;\n  };\n\n  renderOwaspTop10List() {\n    return this.renderList(\n      'owaspTop10Stats',\n      'owaspTop10',\n      renderOwaspTop10Category,\n      this.handleOwaspTop10ItemClick\n    );\n  }\n\n  renderOwaspTop10Hint() {\n    return this.renderHint('owaspTop10Stats', 'owaspTop10');\n  }\n\n  renderSansTop25List() {\n    return this.renderList(\n      'sansTop25Stats',\n      'sansTop25',\n      renderSansTop25Category,\n      this.handleSansTop25ItemClick\n    );\n  }\n\n  renderSansTop25Hint() {\n    return this.renderHint('sansTop25Stats', 'sansTop25');\n  }\n\n  renderSonarSourceSecurityList() {\n    return this.renderList(\n      'sonarsourceSecurityStats',\n      'sonarsourceSecurity',\n      renderSonarSourceSecurityCategory,\n      this.handleSonarSourceSecurityItemClick\n    );\n  }\n\n  renderSonarSourceSecurityHint() {\n    return this.renderHint('sonarsourceSecurityStats', 'sonarsourceSecurity');\n  }\n\n  renderSubFacets() {\n    return (\n      <>\n        <FacetBox className=\"is-inner\" property=\"sonarsourceSecurity\">\n          <FacetHeader\n            fetching={this.props.fetchingSonarSourceSecurity}\n            name={translate('issues.facet.sonarsourceSecurity')}\n            onClick={this.handleSonarSourceSecurityHeaderClick}\n            open={this.props.sonarsourceSecurityOpen}\n            values={this.props.sonarsourceSecurity.map(item =>\n              renderSonarSourceSecurityCategory(this.state.standards, item)\n            )}\n          />\n          {this.props.sonarsourceSecurityOpen && (\n            <>\n              {this.renderSonarSourceSecurityList()}\n              {this.renderSonarSourceSecurityHint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"owaspTop10\">\n          <FacetHeader\n            fetching={this.props.fetchingOwaspTop10}\n            name={translate('issues.facet.owaspTop10')}\n            onClick={this.handleOwaspTop10HeaderClick}\n            open={this.props.owaspTop10Open}\n            values={this.props.owaspTop10.map(item =>\n              renderOwaspTop10Category(this.state.standards, item)\n            )}\n          />\n          {this.props.owaspTop10Open && (\n            <>\n              {this.renderOwaspTop10List()}\n              {this.renderOwaspTop10Hint()}\n            </>\n          )}\n        </FacetBox>\n        <FacetBox className=\"is-inner\" property=\"sansTop25\">\n          <FacetHeader\n            fetching={this.props.fetchingSansTop25}\n            name={translate('issues.facet.sansTop25')}\n            onClick={this.handleSansTop25HeaderClick}\n            open={this.props.sansTop25Open}\n            values={this.props.sansTop25.map(item =>\n              renderSansTop25Category(this.state.standards, item)\n            )}\n          />\n          {this.props.sansTop25Open && (\n            <>\n              {this.renderSansTop25List()}\n              {this.renderSansTop25Hint()}\n            </>\n          )}\n        </FacetBox>\n        <ListStyleFacet<string>\n          className=\"is-inner\"\n          facetHeader={translate('issues.facet.cwe')}\n          fetching={this.props.fetchingCwe}\n          getFacetItemText={item => renderCWECategory(this.state.standards, item)}\n          getSearchResultKey={item => item}\n          getSearchResultText={item => renderCWECategory(this.state.standards, item)}\n          loadSearchResultCount={this.loadCWESearchResultCount}\n          onChange={this.props.onChange}\n          onSearch={this.handleCWESearch}\n          onToggle={this.props.onToggle}\n          open={this.props.cweOpen}\n          property=\"cwe\"\n          query={omit(this.props.query, 'cwe')}\n          renderFacetItem={item => renderCWECategory(this.state.standards, item)}\n          renderSearchResult={(item, query) =>\n            highlightTerm(renderCWECategory(this.state.standards, item), query)\n          }\n          searchPlaceholder={translate('search.search_for_cwe')}\n          stats={this.props.cweStats}\n          values={this.props.cwe}\n        />\n      </>\n    );\n  }\n\n  render() {\n    return (\n      <FacetBox property={this.property}>\n        <FacetHeader\n          name={translate('issues.facet', this.property)}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && this.renderSubFacets()}\n      </FacetBox>\n    );\n  }\n}\n","export default \"Custom rules are created by administrators from templates, and are the only fully-editable rules.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onCancel: () => void;\n  onSubmit: () => void;\n}\n\nexport default function RemoveExtendedDescriptionModal({ onCancel, onSubmit }: Props) {\n  const header = translate('coding_rules.remove_extended_description');\n  return (\n    <SimpleModal header={header} onClose={onCancel} onSubmit={onSubmit}>\n      {({ onCloseClick, onFormSubmit, submitting }) => (\n        <form onSubmit={onFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {translate('coding_rules.remove_extended_description.confirm')}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton className=\"button-red\" disabled={submitting}>\n              {translate('remove')}\n            </SubmitButton>\n            <ResetButtonLink onClick={onCloseClick}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      )}\n    </SimpleModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport RemoveExtendedDescriptionModal from './RemoveExtendedDescriptionModal';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  onChange: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  descriptionForm: boolean;\n  removeDescriptionModal: boolean;\n  submitting: boolean;\n}\n\nexport default class RuleDetailsDescription extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    description: '',\n    descriptionForm: false,\n    submitting: false,\n    removeDescriptionModal: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleCancelClick = () => {\n    this.setState({ descriptionForm: false });\n  };\n\n  handleSaveClick = () => {\n    this.updateDescription(this.state.description);\n  };\n\n  handleRemoveDescriptionClick = () => {\n    this.setState({ removeDescriptionModal: true });\n  };\n\n  handleCancelRemoving = () => this.setState({ removeDescriptionModal: false });\n\n  handleConfirmRemoving = () => {\n    this.setState({ removeDescriptionModal: false });\n    this.updateDescription('');\n  };\n\n  updateDescription = (text: string) => {\n    this.setState({ submitting: true });\n\n    updateRule({\n      key: this.props.ruleDetails.key,\n      markdown_note: text,\n      organization: this.props.organization\n    }).then(\n      ruleDetails => {\n        this.props.onChange(ruleDetails);\n        if (this.mounted) {\n          this.setState({ submitting: false, descriptionForm: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  handleExtendDescriptionClick = () => {\n    this.setState({\n      // set description` to the current `mdNote` each time the form is open\n      description: this.props.ruleDetails.mdNote || '',\n      descriptionForm: true\n    });\n  };\n\n  renderDescription = () => (\n    <div id=\"coding-rules-detail-description-extra\">\n      {this.props.ruleDetails.htmlNote !== undefined && (\n        <div\n          className=\"rule-desc spacer-bottom markdown\"\n          // Safe: defined by rule creator (instance admin?)\n          dangerouslySetInnerHTML={{ __html: this.props.ruleDetails.htmlNote }}\n        />\n      )}\n      {this.props.canWrite && (\n        <Button\n          id=\"coding-rules-detail-extend-description\"\n          onClick={this.handleExtendDescriptionClick}>\n          {translate('coding_rules.extend_description')}\n        </Button>\n      )}\n    </div>\n  );\n\n  renderForm = () => (\n    <div className=\"coding-rules-detail-extend-description-form\">\n      <table className=\"width-100\">\n        <tbody>\n          <tr>\n            <td colSpan={2}>\n              <textarea\n                autoFocus={true}\n                className=\"width-100 little-spacer-bottom\"\n                id=\"coding-rules-detail-extend-description-text\"\n                onChange={this.handleDescriptionChange}\n                rows={4}\n                value={this.state.description}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <Button\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-submit\"\n                onClick={this.handleSaveClick}>\n                {translate('save')}\n              </Button>\n              {this.props.ruleDetails.mdNote !== undefined && (\n                <>\n                  <Button\n                    className=\"button-red spacer-left\"\n                    disabled={this.state.submitting}\n                    id=\"coding-rules-detail-extend-description-remove\"\n                    onClick={this.handleRemoveDescriptionClick}>\n                    {translate('remove')}\n                  </Button>\n                  {this.state.removeDescriptionModal && (\n                    <RemoveExtendedDescriptionModal\n                      onCancel={this.handleCancelRemoving}\n                      onSubmit={this.handleConfirmRemoving}\n                    />\n                  )}\n                </>\n              )}\n              <ResetButtonLink\n                className=\"spacer-left\"\n                disabled={this.state.submitting}\n                id=\"coding-rules-detail-extend-description-cancel\"\n                onClick={this.handleCancelClick}>\n                {translate('cancel')}\n              </ResetButtonLink>\n              {this.state.submitting && <i className=\"spinner spacer-left\" />}\n            </td>\n            <td className=\"text-right\">\n              <MarkdownTips />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasDescription = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n\n    return (\n      <div className=\"js-rule-description\">\n        {hasDescription ? (\n          <div\n            className=\"coding-rules-detail-description rule-desc markdown\"\n            // Safe: defined by rule creator (instance admin?)\n            dangerouslySetInnerHTML={{ __html: ruleDetails.htmlDesc || '' }}\n          />\n        ) : (\n          <div className=\"coding-rules-detail-description rule-desc markdown\">\n            {translateWithParameters('issue.external_issue_description', ruleDetails.name)}\n          </div>\n        )}\n\n        {!ruleDetails.templateKey && (\n          <div className=\"coding-rules-detail-description coding-rules-detail-description-extra\">\n            {!this.state.descriptionForm && this.renderDescription()}\n            {this.state.descriptionForm && this.props.canWrite && this.renderForm()}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { getRuleTags } from '../../../api/rules';\nimport TagsSelector from '../../../components/tags/TagsSelector';\n\nexport interface Props {\n  organization: string | undefined;\n  setTags: (tags: string[]) => void;\n  sysTags: string[];\n  tags: string[];\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class RuleDetailsTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return getRuleTags({\n      q: query,\n      ps: Math.min(this.props.tags.length + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      tags => {\n        if (this.mounted) {\n          // systems tags can not be unset, don't display them in the results\n          this.setState({ searchResult: without(tags, ...this.props.sysTags) });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags(uniq([...this.props.tags, tag]));\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.tags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.tags);\n    return (\n      <TagsSelector\n        listSize={LIST_SIZE}\n        onSearch={this.onSearch}\n        onSelect={this.onSelect}\n        onUnselect={this.onUnselect}\n        selectedTags={this.props.tags}\n        tags={availableTags}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport RuleScopeIcon from 'sonar-ui-common/components/icons/RuleScopeIcon';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Query } from '../query';\nimport RuleDetailsTagsPopup from './RuleDetailsTagsPopup';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  canWrite: boolean | undefined;\n  hideSimilarRulesFilter?: boolean;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onTagsChange: (tags: string[]) => void;\n  organization: string | undefined;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleDetails: T.RuleDetails;\n}\n\nconst EXTERNAL_RULE_REPO_PREFIX = 'external_';\n\nexport default class RuleDetailsMeta extends React.PureComponent<Props> {\n  renderType = () => {\n    const { ruleDetails } = this.props;\n    return (\n      <Tooltip overlay={translate('coding_rules.type.tooltip', ruleDetails.type)}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"type\">\n          <IssueTypeIcon className=\"little-spacer-right\" query={ruleDetails.type} />\n          {translate('issue.type', ruleDetails.type)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderSeverity = () => (\n    <Tooltip overlay={translate('default_severity')}>\n      <li className=\"coding-rules-detail-property\" data-meta=\"severity\">\n        <SeverityHelper\n          className=\"display-inline-flex-center\"\n          severity={this.props.ruleDetails.severity}\n        />\n      </li>\n    </Tooltip>\n  );\n\n  renderStatus = () => {\n    const { ruleDetails } = this.props;\n    if (ruleDetails.status === 'READY') {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('status')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"status\">\n          <span className=\"badge badge-error\">{translate('rules.status', ruleDetails.status)}</span>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTags = () => {\n    const { canWrite, ruleDetails } = this.props;\n    const { sysTags = [], tags = [] } = ruleDetails;\n    const allTags = [...sysTags, ...tags];\n\n    return (\n      <li className=\"coding-rules-detail-property\" data-meta=\"tags\">\n        {this.props.canWrite ? (\n          <Dropdown\n            closeOnClick={false}\n            closeOnClickOutside={true}\n            overlay={\n              <RuleDetailsTagsPopup\n                organization={this.props.organization}\n                setTags={this.props.onTagsChange}\n                sysTags={sysTags}\n                tags={tags}\n              />\n            }\n            overlayPlacement={PopupPlacement.BottomLeft}>\n            <ButtonLink>\n              <TagsList\n                allowUpdate={canWrite}\n                tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n              />\n            </ButtonLink>\n          </Dropdown>\n        ) : (\n          <TagsList\n            allowUpdate={canWrite}\n            className=\"display-flex-center\"\n            tags={allTags.length > 0 ? allTags : [translate('coding_rules.no_tags')]}\n          />\n        )}\n      </li>\n    );\n  };\n\n  renderCreationDate = () => (\n    <li className=\"coding-rules-detail-property\" data-meta=\"available-since\">\n      <span className=\"little-spacer-right\">{translate('coding_rules.available_since')}</span>\n      <DateFormatter date={this.props.ruleDetails.createdAt} />\n    </li>\n  );\n\n  renderRepository = () => {\n    const { referencedRepositories, ruleDetails } = this.props;\n    const repository = referencedRepositories[ruleDetails.repo];\n    if (!repository) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.repository_language')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"repository\">\n          {repository.name} ({ruleDetails.langName})\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderTemplate = () => {\n    if (!this.props.ruleDetails.isTemplate) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n        <li className=\"coding-rules-detail-property\">{translate('coding_rules.rule_template')}</li>\n      </Tooltip>\n    );\n  };\n\n  renderParentTemplate = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.templateKey) {\n      return null;\n    }\n    return (\n      <li className=\"coding-rules-detail-property\">\n        {translate('coding_rules.custom_rule')}\n        {' ('}\n        <Link to={getRuleUrl(ruleDetails.templateKey, this.props.organization)}>\n          {translate('coding_rules.show_template')}\n        </Link>\n        {')'}\n        <DocTooltip\n          className=\"little-spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rules.md')}\n        />\n      </li>\n    );\n  };\n\n  renderRemediation = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.debtRemFnType) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translate('coding_rules.remediation_function')}>\n        <li className=\"coding-rules-detail-property\" data-meta=\"remediation-function\">\n          {translate('coding_rules.remediation_function', ruleDetails.debtRemFnType)}\n          {':'}\n          {ruleDetails.debtRemFnOffset !== undefined && ` ${ruleDetails.debtRemFnOffset}`}\n          {ruleDetails.debtRemFnCoeff !== undefined && ` +${ruleDetails.debtRemFnCoeff}`}\n          {ruleDetails.effortToFixDescription !== undefined &&\n            ` ${ruleDetails.effortToFixDescription}`}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderScope = () => {\n    const scope = this.props.ruleDetails.scope || 'MAIN';\n    return (\n      <Tooltip overlay={translate('coding_rules.scope.title')}>\n        <li className=\"coding-rules-detail-property\">\n          <RuleScopeIcon className=\"little-spacer-right\" />\n          {translate('coding_rules.scope', scope)}\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderExternalBadge = () => {\n    const { ruleDetails } = this.props;\n    if (!ruleDetails.repo) {\n      return null;\n    }\n    const engine = ruleDetails.repo.replace(new RegExp(`^${EXTERNAL_RULE_REPO_PREFIX}`), '');\n    if (!engine) {\n      return null;\n    }\n    return (\n      <Tooltip overlay={translateWithParameters('coding_rules.external_rule.engine', engine)}>\n        <li className=\"coding-rules-detail-property\">\n          <div className=\"badge spacer-left text-text-top\">{engine}</div>\n        </li>\n      </Tooltip>\n    );\n  };\n\n  renderKey() {\n    const EXTERNAL_PREFIX = 'external_';\n    const { ruleDetails } = this.props;\n    const displayedKey = ruleDetails.key.startsWith(EXTERNAL_PREFIX)\n      ? ruleDetails.key.substr(EXTERNAL_PREFIX.length)\n      : ruleDetails.key;\n    return <span className=\"note text-middle\">{displayedKey}</span>;\n  }\n\n  render() {\n    const { ruleDetails } = this.props;\n    const hasTypeData = !ruleDetails.isExternal || ruleDetails.type !== 'UNKNOWN';\n    return (\n      <div className=\"js-rule-meta\">\n        <header className=\"page-header\">\n          <div className=\"pull-right\">\n            {this.renderKey()}\n            {!ruleDetails.isExternal && (\n              <Link\n                className=\"coding-rules-detail-permalink link-no-underline spacer-left text-middle\"\n                title={translate('permalink')}\n                to={getRuleUrl(ruleDetails.key, this.props.organization)}>\n                <LinkIcon />\n              </Link>\n            )}\n            {!this.props.hideSimilarRulesFilter && (\n              <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={ruleDetails} />\n            )}\n          </div>\n          <h3 className=\"page-title coding-rules-detail-header\">\n            <big>{ruleDetails.name}</big>\n          </h3>\n        </header>\n\n        {hasTypeData && (\n          <ul className=\"coding-rules-detail-properties\">\n            {this.renderType()}\n            {this.renderSeverity()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderStatus()}\n                {this.renderScope()}\n              </>\n            )}\n            {this.renderTags()}\n            {!ruleDetails.isExternal && this.renderCreationDate()}\n            {this.renderRepository()}\n            {!ruleDetails.isExternal && (\n              <>\n                {this.renderTemplate()}\n                {this.renderParentTemplate()}\n                {this.renderRemediation()}\n              </>\n            )}\n            {ruleDetails.isExternal && this.renderExternalBadge()}\n          </ul>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, Profile } from '../../../api/quality-profiles';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport { sortProfiles } from '../../quality-profiles/utils';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  modalHeader: string;\n  onClose: () => void;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: Profile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  params: T.Dict<string>;\n  profile: string;\n  severity: string;\n  submitting: boolean;\n}\n\nexport default class ActivationFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const profilesWithDepth = this.getQualityProfilesWithDepth(props);\n    this.state = {\n      params: this.getParams(props),\n      profile: profilesWithDepth.length > 0 ? profilesWithDepth[0].key : '',\n      severity: props.activation ? props.activation.severity : props.rule.severity,\n      submitting: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getParams = ({ activation, rule } = this.props) => {\n    const params: T.Dict<string> = {};\n    if (rule && rule.params) {\n      for (const param of rule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n      if (activation && activation.params) {\n        for (const param of activation.params) {\n          params[param.key] = param.value;\n        }\n      }\n    }\n    return params;\n  };\n\n  // Choose QP which a user can administrate, which are the same language and which are not built-in\n  getQualityProfilesWithDepth = ({ profiles } = this.props) => {\n    return sortProfiles(\n      profiles.filter(\n        profile =>\n          !profile.isBuiltIn &&\n          profile.actions &&\n          profile.actions.edit &&\n          profile.language === this.props.rule.lang\n      )\n    ).map(profile => ({\n      ...profile,\n      // Decrease depth by 1, so the top level starts at 0\n      depth: profile.depth - 1\n    }));\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    const data = {\n      key: this.state.profile,\n      organization: this.props.organization,\n      params: this.state.params,\n      rule: this.props.rule.key,\n      severity: this.state.severity\n    };\n    activateRule(data)\n      .then(() => this.props.onDone(data.severity))\n      .then(\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n            this.props.onClose();\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n  };\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  handleProfileChange = ({ value }: { value: string }) => {\n    this.setState({ profile: value });\n  };\n\n  handleSeverityChange = ({ value }: { value: string }) => {\n    this.setState({ severity: value });\n  };\n\n  renderSeverityOption = ({ value }: { value: string }) => {\n    return <SeverityHelper severity={value} />;\n  };\n\n  render() {\n    const { activation, rule } = this.props;\n    const { profile, severity, submitting } = this.state;\n    const { params = [] } = rule;\n    const profilesWithDepth = this.getQualityProfilesWithDepth();\n    const isCustomRule = !!(rule as T.RuleDetails).templateKey;\n    const activeInAllProfiles = profilesWithDepth.length <= 0;\n    const isUpdateMode = !!activation;\n\n    return (\n      <Modal contentLabel={this.props.modalHeader} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{this.props.modalHeader}</h2>\n          </div>\n\n          <div className={classNames('modal-body', { 'modal-container': params.length > 0 })}>\n            {!isUpdateMode && activeInAllProfiles && (\n              <Alert variant=\"info\">{translate('coding_rules.active_in_all_profiles')}</Alert>\n            )}\n\n            <div className=\"modal-field\">\n              <label>{translate('coding_rules.quality_profile')}</label>\n              <Select\n                className=\"js-profile\"\n                clearable={false}\n                disabled={submitting || profilesWithDepth.length === 1}\n                onChange={this.handleProfileChange}\n                options={profilesWithDepth.map(profile => ({\n                  label: '   '.repeat(profile.depth) + profile.name,\n                  value: profile.key\n                }))}\n                value={profile}\n              />\n            </div>\n            <div className=\"modal-field\">\n              <label>{translate('severity')}</label>\n              <Select\n                className=\"js-severity\"\n                clearable={false}\n                disabled={submitting}\n                onChange={this.handleSeverityChange}\n                optionRenderer={this.renderSeverityOption}\n                options={SEVERITIES.map(severity => ({\n                  label: translate('severity', severity),\n                  value: severity\n                }))}\n                searchable={false}\n                value={severity}\n                valueRenderer={this.renderSeverityOption}\n              />\n            </div>\n            {isCustomRule ? (\n              <div className=\"modal-field\">\n                <p className=\"note\">{translate('coding_rules.custom_rule.activation_notice')}</p>\n              </div>\n            ) : (\n              params.map(param => (\n                <div className=\"modal-field\" key={param.key}>\n                  <label title={param.key}>{param.key}</label>\n                  {param.type === 'TEXT' ? (\n                    <textarea\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      rows={3}\n                      value={this.state.params[param.key] || ''}\n                    />\n                  ) : (\n                    <input\n                      disabled={submitting}\n                      name={param.key}\n                      onChange={this.handleParameterChange}\n                      placeholder={param.defaultValue}\n                      type=\"text\"\n                      value={this.state.params[param.key] || ''}\n                    />\n                  )}\n                  <div\n                    className=\"note\"\n                    // Safe: defined by rule creator (instance admin?)\n                    dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n                  />\n                </div>\n              ))\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={submitting || activeInAllProfiles}>\n              {isUpdateMode ? translate('save') : translate('coding_rules.activate')}\n            </SubmitButton>\n            <ResetButtonLink disabled={submitting} onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","export default \"Quality Profiles are collections of Rules to apply during an analysis.\\n\\n---\\n\\nSee also: [Quality Profiles](/instance-administration/quality-profiles/)\\n\"","export default \"Rule Templates allow users to easily define their own rules. They are like cookie cutters from which you can stamp out new, \\\"custom rules\\\". The rules created from a template are listed on its rule detail page.\\n\"","export default \"Only custom rules may be deleted. When a custom rule is deleted, it is not removed from the SonarQube instance. Instead its status is set to \\\"REMOVED\\\", allowing relevant issues to continue to be displayed properly.\\n\"","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { bulkActivateRules, bulkDeactivateRules, Profile } from '../../../api/quality-profiles';\nimport { Query, serializeQuery } from '../query';\n\ninterface Props {\n  action: string;\n  languages: T.Languages;\n  onClose: () => void;\n  organization: string | undefined;\n  profile?: Profile;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface ActivationResult {\n  failed: number;\n  profile: string;\n  succeeded: number;\n}\n\ninterface State {\n  finished: boolean;\n  results: ActivationResult[];\n  selectedProfiles: any[];\n  submitting: boolean;\n}\n\nexport default class BulkChangeModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    // if there is only one possible option for profile, select it immediately\n    const selectedProfiles = [];\n    const availableProfiles = this.getAvailableQualityProfiles(props);\n    if (availableProfiles.length === 1) {\n      selectedProfiles.push(availableProfiles[0].key);\n    }\n\n    this.state = { finished: false, results: [], selectedProfiles, submitting: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleProfileSelect = (options: { value: string }[]) => {\n    const selectedProfiles = options.map(option => option.value);\n    this.setState({ selectedProfiles });\n  };\n\n  getAvailableQualityProfiles = ({ query, referencedProfiles } = this.props) => {\n    let profiles = Object.values(referencedProfiles);\n    if (query.languages.length > 0) {\n      profiles = profiles.filter(profile => query.languages.includes(profile.language));\n    }\n    return profiles\n      .filter(profile => profile.actions && profile.actions.edit)\n      .filter(profile => !profile.isBuiltIn);\n  };\n\n  processResponse = (profile: string, response: any) => {\n    if (this.mounted) {\n      const result: ActivationResult = {\n        failed: response.failed || 0,\n        profile,\n        succeeded: response.succeeded || 0\n      };\n      this.setState(state => ({ results: [...state.results, result] }));\n    }\n  };\n\n  sendRequests = () => {\n    let looper = Promise.resolve();\n\n    // serialize the query, but delete the `profile`\n    const data = serializeQuery(this.props.query);\n    delete data.profile;\n\n    const method = this.props.action === 'activate' ? bulkActivateRules : bulkDeactivateRules;\n\n    // if a profile is selected in the facet, pick it\n    // otherwise take all profiles selected in the dropdown\n    const profiles: string[] = this.props.profile\n      ? [this.props.profile.key]\n      : this.state.selectedProfiles;\n\n    for (const profile of profiles) {\n      looper = looper.then(() =>\n        method({\n          ...data,\n          organization: this.props.organization,\n          targetKey: profile\n        }).then(response => this.processResponse(profile, response))\n      );\n    }\n    return looper;\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.sendRequests().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ finished: true, submitting: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n        }\n      }\n    );\n  };\n\n  renderResult = (result: ActivationResult) => {\n    const { profile: profileKey } = result;\n    const profile = this.props.referencedProfiles[profileKey];\n    if (!profile) {\n      return null;\n    }\n    const { languages } = this.props;\n    const language = languages[profile.language]\n      ? languages[profile.language].name\n      : profile.language;\n    return (\n      <Alert key={result.profile} variant={result.failed === 0 ? 'success' : 'warning'}>\n        {result.failed\n          ? translateWithParameters(\n              'coding_rules.bulk_change.warning',\n              profile.name,\n              language,\n              result.succeeded,\n              result.failed\n            )\n          : translateWithParameters(\n              'coding_rules.bulk_change.success',\n              profile.name,\n              language,\n              result.succeeded\n            )}\n      </Alert>\n    );\n  };\n\n  renderProfileSelect = () => {\n    const profiles = this.getAvailableQualityProfiles();\n    const options = profiles.map(profile => ({\n      label: `${profile.name} - ${profile.languageName}`,\n      value: profile.key\n    }));\n    return (\n      <Select\n        multi={true}\n        onChange={this.handleProfileSelect}\n        options={options}\n        value={this.state.selectedProfiles}\n      />\n    );\n  };\n\n  render() {\n    const { action, profile, total } = this.props;\n    const header =\n      action === 'activate'\n        ? `${translate('coding_rules.activate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`\n        : `${translate('coding_rules.deactivate_in_quality_profile')} (${formatMeasure(\n            total,\n            'INT'\n          )} ${translate('coding_rules._rules')})`;\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            {this.state.results.map(this.renderResult)}\n\n            {!this.state.finished && !this.state.submitting && (\n              <div className=\"modal-field\">\n                <h3>\n                  <label htmlFor=\"coding-rules-bulk-change-profile\">\n                    {action === 'activate'\n                      ? translate('coding_rules.activate_in')\n                      : translate('coding_rules.deactivate_in')}\n                  </label>\n                </h3>\n                {profile ? (\n                  <span>\n                    {profile.name}\n                    {'  '}\n                    {translate('are_you_sure')}\n                  </span>\n                ) : (\n                  this.renderProfileSelect()\n                )}\n              </div>\n            )}\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.submitting && <i className=\"spinner spacer-right\" />}\n            {!this.state.finished && (\n              <SubmitButton disabled={this.state.submitting} id=\"coding-rules-submit-bulk-change\">\n                {translate('apply')}\n              </SubmitButton>\n            )}\n            <ResetButtonLink onClick={this.props.onClose}>\n              {this.state.finished ? translate('close') : translate('cancel')}\n            </ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { Query } from '../query';\nimport BulkChangeModal from './BulkChangeModal';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\n\ninterface Props {\n  languages: T.Languages;\n  organization: string | undefined;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  total: number;\n}\n\ninterface State {\n  action?: string;\n  modal: boolean;\n  profile?: Profile;\n}\n\nexport default class BulkChange extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  getSelectedProfile = () => {\n    const { profile } = this.props.query;\n    return (profile && this.props.referencedProfiles[profile]) || undefined;\n  };\n\n  closeModal = () => this.setState({ action: undefined, modal: false, profile: undefined });\n\n  handleActivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: undefined });\n  };\n\n  handleActivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'activate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  handleDeactivateClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: undefined });\n  };\n\n  handleDeactivateInProfileClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ action: 'deactivate', modal: true, profile: this.getSelectedProfile() });\n  };\n\n  render() {\n    // show \"Bulk Change\" button only if user has at least one QP which he administrates\n    const canBulkChange = Object.values(this.props.referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit)\n    );\n    if (!canBulkChange) {\n      return (\n        <Tooltip overlay={translate('coding_rules.can_not_bulk_change')}>\n          <Button className=\"js-bulk-change\" disabled={true}>\n            {translate('bulk_change')}\n          </Button>\n        </Tooltip>\n      );\n    }\n\n    const { activation } = this.props.query;\n    const profile = this.getSelectedProfile();\n    const canChangeProfile = Boolean(\n      profile && !profile.isBuiltIn && profile.actions && profile.actions.edit\n    );\n    const allowActivateOnProfile = canChangeProfile && activation === false;\n    const allowDeactivateOnProfile = canChangeProfile && activation === true;\n\n    return (\n      <>\n        <Dropdown\n          className=\"pull-left\"\n          overlayPlacement={PopupPlacement.BottomLeft}\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a href=\"#\" onClick={this.handleActivateClick}>\n                  {translate('coding_rules.activate_in')}\n                </a>\n              </li>\n              {allowActivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleActivateInProfileClick}>\n                    {translate('coding_rules.activate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n              <li>\n                <a href=\"#\" onClick={this.handleDeactivateClick}>\n                  {translate('coding_rules.deactivate_in')}\n                </a>\n              </li>\n              {allowDeactivateOnProfile && profile && (\n                <li>\n                  <a href=\"#\" onClick={this.handleDeactivateInProfileClick}>\n                    {translate('coding_rules.deactivate_in')} <strong>{profile.name}</strong>\n                  </a>\n                </li>\n              )}\n            </ul>\n          }>\n          <Button className=\"js-bulk-change\">{translate('bulk_change')}</Button>\n        </Dropdown>\n        {this.state.modal && this.state.action && (\n          <BulkChangeModal\n            action={this.state.action}\n            languages={this.props.languages}\n            onClose={this.closeModal}\n            organization={this.props.organization}\n            profile={this.state.profile}\n            query={this.props.query}\n            referencedProfiles={this.props.referencedProfiles}\n            total={this.props.total}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { orderBy, sortBy, without } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey } from '../query';\n\nexport interface BasicProps {\n  onChange: (changes: T.Dict<string | string[] | undefined>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  stats?: T.Dict<number>;\n  values: string[];\n}\n\ninterface Props extends BasicProps {\n  children?: React.ReactNode;\n  disabled?: boolean;\n  disabledHelper?: string;\n  halfWidth?: boolean;\n  options?: string[];\n  property: FacetKey;\n  renderFooter?: () => React.ReactNode;\n  renderName?: (value: string) => React.ReactNode;\n  renderTextName?: (value: string) => string;\n  singleSelection?: boolean;\n}\n\nexport default class Facet extends React.PureComponent<Props> {\n  handleItemClick = (itemValue: string, multiple: boolean) => {\n    const { values } = this.props;\n    let newValue;\n    if (this.props.singleSelection) {\n      const value = values.length ? values[0] : undefined;\n      newValue = itemValue === value ? undefined : itemValue;\n    } else if (multiple) {\n      newValue = orderBy(\n        values.includes(itemValue) ? without(values, itemValue) : [...values, itemValue]\n      );\n    } else {\n      newValue = values.includes(itemValue) && values.length < 2 ? [] : [itemValue];\n    }\n    this.props.onChange({ [this.props.property]: newValue });\n  };\n\n  handleHeaderClick = () => this.props.onToggle(this.props.property);\n\n  handleClear = () => this.props.onChange({ [this.props.property]: [] });\n\n  getStat = (value: string) => this.props.stats && this.props.stats[value];\n\n  renderItem = (value: string) => {\n    const active = this.props.values.includes(value);\n    const stat = this.getStat(value);\n    const { renderName = defaultRenderName, renderTextName = defaultRenderName } = this.props;\n\n    return (\n      <FacetItem\n        active={active}\n        disabled={stat === 0 && !active}\n        halfWidth={this.props.halfWidth}\n        key={value}\n        name={renderName(value)}\n        onClick={this.handleItemClick}\n        stat={stat && formatMeasure(stat, 'SHORT_INT')}\n        tooltip={renderTextName(value)}\n        value={value}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, renderTextName = defaultRenderName, stats } = this.props;\n    const values = this.props.values.map(renderTextName);\n    const items =\n      this.props.options ||\n      (stats &&\n        sortBy(\n          Object.keys(stats),\n          key => -stats[key],\n          key => renderTextName(key).toLowerCase()\n        ));\n\n    return (\n      <FacetBox\n        className={classNames({ 'search-navigator-facet-box-forbidden': disabled })}\n        property={this.props.property}>\n        <FacetHeader\n          name={\n            <Tooltip overlay={disabled ? this.props.disabledHelper : undefined}>\n              <span>{translate('coding_rules.facet', this.props.property)}</span>\n            </Tooltip>\n          }\n          onClear={this.handleClear}\n          onClick={disabled ? undefined : this.handleHeaderClick}\n          open={this.props.open && !disabled}\n          values={values}>\n          {this.props.children}\n        </FacetHeader>\n\n        {this.props.open && items !== undefined && (\n          <FacetItemsList>{items.map(this.renderItem)}</FacetItemsList>\n        )}\n\n        {this.props.open && this.props.renderFooter !== undefined && this.props.renderFooter()}\n      </FacetBox>\n    );\n  }\n}\n\nfunction defaultRenderName(value: string) {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  disabled: boolean;\n}\n\nexport default class ActivationSeverityFacet extends React.PureComponent<Props> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.active_severity.inactive')}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"activationSeverities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { longFormatterOption } from 'sonar-ui-common/components/intl/DateFormatter';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DateInput from '../../../components/controls/DateInput';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport { Query } from '../query';\n\ninterface Props {\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (property: keyof Query) => void;\n  open: boolean;\n  value?: Date;\n}\n\nclass AvailableSinceFacet extends React.PureComponent<Props & InjectedIntlProps> {\n  handleHeaderClick = () => {\n    this.props.onToggle('availableSince');\n  };\n\n  handleClear = () => {\n    this.props.onChange({ availableSince: undefined });\n  };\n\n  handlePeriodChange = (date: Date | undefined) => {\n    this.props.onChange({ availableSince: date });\n  };\n\n  getValues = () =>\n    this.props.value\n      ? [this.props.intl.formatDate(this.props.value, longFormatterOption)]\n      : undefined;\n\n  render() {\n    return (\n      <FacetBox property=\"availableSince\">\n        <FacetHeader\n          name={translate('coding_rules.facet.available_since')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getValues()}\n        />\n\n        {this.props.open && (\n          <DateInput\n            name=\"available-since\"\n            onChange={this.handlePeriodChange}\n            placeholder={translate('date')}\n            value={this.props.value}\n          />\n        )}\n      </FacetBox>\n    );\n  }\n}\n\nexport default injectIntl(AvailableSinceFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { SEVERITIES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class DefaultSeverityFacet extends React.PureComponent<BasicProps> {\n  renderName = (severity: string) => <SeverityHelper severity={severity} />;\n\n  renderTextName = (severity: string) => translate('severity', severity);\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        halfWidth={true}\n        options={SEVERITIES}\n        property=\"severities\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'values'> {\n  disabled: boolean;\n  value: T.RuleInheritance | undefined;\n}\n\nexport default class InheritanceFacet extends React.PureComponent<Props> {\n  renderName = (value: T.RuleInheritance) =>\n    translate('coding_rules.filters.inheritance', value.toLowerCase());\n\n  render() {\n    const { value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.inheritance.inactive')}\n        options={['NONE', 'INHERITED', 'OVERRIDES']}\n        property=\"inheritance\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value ? [value] : []}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport { BasicProps } from './Facet';\n\ninterface InstalledLanguage {\n  key: string;\n  name: string;\n}\n\ninterface Props extends BasicProps {\n  disabled?: boolean;\n  installedLanguages: InstalledLanguage[];\n}\n\nclass LanguageFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const language = this.props.installedLanguages.find(l => l.key === languageKey);\n    return language ? language.name : languageKey;\n  };\n\n  handleSearch = (query: string) => {\n    const options = this.getAllPossibleOptions();\n    const results = options.filter(language =>\n      language.name.toLowerCase().includes(query.toLowerCase())\n    );\n    const paging = { pageIndex: 1, pageSize: results.length, total: results.length };\n    return Promise.resolve({ paging, results });\n  };\n\n  getAllPossibleOptions = () => {\n    const { installedLanguages, stats = {} } = this.props;\n\n    // add any language that presents in the facet, but might not be installed\n    // for such language we don't know their display name, so let's just use their key\n    // and make sure we reference each language only once\n    return uniqBy(\n      [...installedLanguages, ...Object.keys(stats).map(key => ({ key, name: key }))],\n      language => language.key\n    );\n  };\n\n  renderSearchResult = ({ name }: InstalledLanguage, term: string) => {\n    return highlightTerm(name, term);\n  };\n\n  render() {\n    return (\n      <ListStyleFacet<InstalledLanguage>\n        disabled={this.props.disabled}\n        disabledHelper={translate('coding_rules.filters.language.inactive')}\n        facetHeader={translate('coding_rules.facet.languages')}\n        fetching={false}\n        getFacetItemText={this.getLanguageName}\n        getSearchResultKey={language => language.key}\n        getSearchResultText={language => language.name}\n        minSearchLength={1}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"languages\"\n        renderFacetItem={this.getLanguageName}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_languages')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  installedLanguages: Object.values(getLanguages(state))\n});\n\nexport default connect(mapStateToProps)(LanguageFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport FacetBox from '../../../components/facet/FacetBox';\nimport FacetHeader from '../../../components/facet/FacetHeader';\nimport FacetItem from '../../../components/facet/FacetItem';\nimport FacetItemsList from '../../../components/facet/FacetItemsList';\nimport { FacetKey, Query } from '../query';\n\ninterface Props {\n  activation: boolean | undefined;\n  compareToProfile: string | undefined;\n  languages: string[];\n  onChange: (changes: Partial<Query>) => void;\n  onToggle: (facet: FacetKey) => void;\n  open: boolean;\n  referencedProfiles: T.Dict<Profile>;\n  value: string | undefined;\n}\n\nexport default class ProfileFacet extends React.PureComponent<Props> {\n  handleItemClick = (selected: string) => {\n    const newValue = this.props.value === selected ? '' : selected;\n    this.props.onChange({\n      activation: this.props.activation === undefined ? true : this.props.activation,\n      compareToProfile: undefined,\n      profile: newValue\n    });\n  };\n\n  handleHeaderClick = () => this.props.onToggle('profile');\n\n  handleClear = () =>\n    this.props.onChange({\n      activation: undefined,\n      activationSeverities: [],\n      compareToProfile: undefined,\n      inheritance: undefined,\n      profile: undefined\n    });\n\n  handleActiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: true, compareToProfile: undefined });\n  };\n\n  handleInactiveClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.stopPropagation(event);\n    this.props.onChange({ activation: false, compareToProfile: undefined });\n  };\n\n  stopPropagation = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n  };\n\n  getTextValue = () => {\n    const { referencedProfiles, value } = this.props;\n    if (value) {\n      const profile = referencedProfiles[value];\n      const name = (profile && `${profile.name} ${profile.languageName}`) || value;\n      return [name];\n    } else {\n      return [];\n    }\n  };\n\n  getTooltip = (profile: Profile) => {\n    const base = `${profile.name} ${profile.languageName}`;\n    return profile.isBuiltIn ? `${base} (${translate('quality_profiles.built_in')})` : base;\n  };\n\n  renderName = (profile: Profile) => (\n    <>\n      {profile.name}\n      <span className=\"note little-spacer-left\">\n        {profile.languageName}\n        {profile.isBuiltIn && ` (${translate('quality_profiles.built_in')})`}\n      </span>\n    </>\n  );\n\n  renderActivation = (profile: Profile) => {\n    const isCompare = profile.key === this.props.compareToProfile;\n    const activation = isCompare ? true : this.props.activation;\n    return (\n      <>\n        <span\n          aria-checked={activation}\n          className={classNames('js-active', 'facet-toggle', 'facet-toggle-green', {\n            'facet-toggle-active': activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleActiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          active\n        </span>\n        <span\n          aria-checked={!activation}\n          className={classNames('js-inactive', 'facet-toggle', 'facet-toggle-red', {\n            'facet-toggle-active': !activation\n          })}\n          onClick={isCompare ? this.stopPropagation : this.handleInactiveClick}\n          role=\"radio\"\n          tabIndex={-1}>\n          inactive\n        </span>\n      </>\n    );\n  };\n\n  renderItem = (profile: Profile) => {\n    const active = [this.props.value, this.props.compareToProfile].includes(profile.key);\n\n    return (\n      <FacetItem\n        active={active}\n        className={this.props.compareToProfile === profile.key ? 'compare' : undefined}\n        key={profile.key}\n        name={this.renderName(profile)}\n        onClick={this.handleItemClick}\n        stat={this.renderActivation(profile)}\n        tooltip={this.getTooltip(profile)}\n        value={profile.key}\n      />\n    );\n  };\n\n  render() {\n    const { languages, referencedProfiles } = this.props;\n    let profiles = Object.values(referencedProfiles);\n    if (languages.length > 0) {\n      profiles = profiles.filter(profile => languages.includes(profile.language));\n    }\n    profiles = sortBy(\n      profiles,\n      profile => profile.name.toLowerCase(),\n      profile => profile.languageName\n    );\n\n    return (\n      <FacetBox property=\"profile\">\n        <FacetHeader\n          name={translate('coding_rules.facet.qprofile')}\n          onClear={this.handleClear}\n          onClick={this.handleHeaderClick}\n          open={this.props.open}\n          values={this.getTextValue()}>\n          <DocTooltip\n            className=\"spacer-left\"\n            doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rules-quality-profiles.md')}\n          />\n        </FacetHeader>\n\n        {this.props.open && <FacetItemsList>{profiles.map(this.renderItem)}</FacetItemsList>}\n      </FacetBox>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport Facet, { BasicProps } from './Facet';\n\ninterface StateProps {\n  referencedLanguages: T.Dict<{ key: string; name: string }>;\n}\n\ninterface Props extends BasicProps, StateProps {\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n}\n\nclass RepositoryFacet extends React.PureComponent<Props> {\n  getLanguageName = (languageKey: string) => {\n    const { referencedLanguages } = this.props;\n    const language = referencedLanguages[languageKey];\n    return (language && language.name) || languageKey;\n  };\n\n  renderName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return repository ? (\n      <>\n        {repository.name}\n        <span className=\"note little-spacer-left\">{this.getLanguageName(repository.language)}</span>\n      </>\n    ) : (\n      repositoryKey\n    );\n  };\n\n  renderTextName = (repositoryKey: string) => {\n    const { referencedRepositories } = this.props;\n    const repository = referencedRepositories[repositoryKey];\n    return (repository && repository.name) || repositoryKey;\n  };\n\n  render() {\n    const { referencedLanguages, referencedRepositories, ...facetProps } = this.props;\n    return (\n      <Facet\n        {...facetProps}\n        property=\"repositories\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  referencedLanguages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(RepositoryFacet);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { RULE_STATUSES } from '../../../helpers/constants';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class StatusFacet extends React.PureComponent<BasicProps> {\n  renderName = (status: string) => translate('rules.status', status.toLowerCase());\n\n  render() {\n    return (\n      <Facet\n        {...this.props}\n        options={RULE_STATUSES}\n        property=\"statuses\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport * as React from 'react';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { highlightTerm } from 'sonar-ui-common/helpers/search';\nimport { getRuleTags } from '../../../api/rules';\nimport { colors } from '../../../app/theme';\nimport ListStyleFacet from '../../../components/facet/ListStyleFacet';\nimport { BasicProps } from './Facet';\n\ninterface Props extends BasicProps {\n  organization: string | undefined;\n}\n\nexport default class TagFacet extends React.PureComponent<Props> {\n  handleSearch = (query: string) => {\n    return getRuleTags({ organization: this.props.organization, ps: 50, q: query }).then(tags => ({\n      paging: { pageIndex: 1, pageSize: tags.length, total: tags.length },\n      results: tags\n    }));\n  };\n\n  handleSelect = (option: { value: string }) => {\n    this.props.onChange({ tags: uniq([...this.props.values, option.value]) });\n  };\n\n  getTagName = (tag: string) => {\n    return tag;\n  };\n\n  renderTag = (tag: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {tag}\n    </>\n  );\n\n  renderSearchResult = (tag: string, term: string) => (\n    <>\n      <TagsIcon className=\"little-spacer-right\" fill={colors.gray60} />\n      {highlightTerm(tag, term)}\n    </>\n  );\n\n  render() {\n    return (\n      <ListStyleFacet<string>\n        facetHeader={translate('coding_rules.facet.tags')}\n        fetching={false}\n        getFacetItemText={this.getTagName}\n        getSearchResultKey={tag => tag}\n        getSearchResultText={tag => tag}\n        onChange={this.props.onChange}\n        onSearch={this.handleSearch}\n        onToggle={this.props.onToggle}\n        open={this.props.open}\n        property=\"tags\"\n        renderFacetItem={this.renderTag}\n        renderSearchResult={this.renderSearchResult}\n        searchPlaceholder={translate('search.search_for_tags')}\n        stats={this.props.stats}\n        values={this.props.values}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport Facet, { BasicProps } from './Facet';\n\ninterface Props extends T.Omit<BasicProps, 'onChange' | 'values'> {\n  onChange: (changes: { template: boolean | undefined }) => void;\n  value: boolean | undefined;\n}\n\nexport default class TemplateFacet extends React.PureComponent<Props> {\n  handleChange = (changes: { template: string | any[] }) => {\n    const template =\n      // empty array is returned when a user cleared the facet\n      // otherwise `\"true\"`, `\"false\"` or `undefined` can be returned\n      Array.isArray(changes.template) || changes.template === undefined\n        ? undefined\n        : changes.template === 'true';\n    this.props.onChange({ ...changes, template });\n  };\n\n  renderName = (template: string) =>\n    template === 'true'\n      ? translate('coding_rules.filters.template.is_template')\n      : translate('coding_rules.filters.template.is_not_template');\n\n  render() {\n    const { onChange, value, ...props } = this.props;\n\n    return (\n      <Facet\n        {...props}\n        onChange={this.handleChange}\n        options={['true', 'false']}\n        property=\"template\"\n        renderName={this.renderName}\n        renderTextName={this.renderName}\n        singleSelection={true}\n        values={value !== undefined ? [String(value)] : []}>\n        <DocTooltip\n          className=\"spacer-left\"\n          doc={import(/* webpackMode: \"eager\" */ 'Docs/tooltips/rules/rule-templates.md')}\n        />\n      </Facet>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Facet, { BasicProps } from './Facet';\n\nexport default class TypeFacet extends React.PureComponent<BasicProps> {\n  renderName = (type: string) => (\n    <>\n      <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n      {translate('issue.type', type)}\n    </>\n  );\n\n  renderTextName = (type: string) => translate('issue.type', type);\n\n  render() {\n    const options = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\n\n    return (\n      <Facet\n        {...this.props}\n        options={options}\n        property=\"types\"\n        renderName={this.renderName}\n        renderTextName={this.renderTextName}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../../api/quality-profiles';\nimport StandardFacet from '../../issues/sidebar/StandardFacet';\nimport { Facets, OpenFacets, Query } from '../query';\nimport ActivationSeverityFacet from './ActivationSeverityFacet';\nimport AvailableSinceFacet from './AvailableSinceFacet';\nimport DefaultSeverityFacet from './DefaultSeverityFacet';\nimport InheritanceFacet from './InheritanceFacet';\nimport LanguageFacet from './LanguageFacet';\nimport ProfileFacet from './ProfileFacet';\nimport RepositoryFacet from './RepositoryFacet';\nimport StatusFacet from './StatusFacet';\nimport TagFacet from './TagFacet';\nimport TemplateFacet from './TemplateFacet';\nimport TypeFacet from './TypeFacet';\n\ninterface Props {\n  facets?: Facets;\n  hideProfileFacet?: boolean;\n  onFacetToggle: (facet: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  openFacets: OpenFacets;\n  organization: string | undefined;\n  organizationsEnabled?: boolean;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  selectedProfile?: Profile;\n}\n\nexport default function FacetsList(props: Props) {\n  const languageDisabled = !props.hideProfileFacet && props.query.profile !== undefined;\n\n  const inheritanceDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.selectedProfile.isInherited;\n\n  const activationSeverityDisabled =\n    props.query.compareToProfile !== undefined ||\n    props.selectedProfile === undefined ||\n    !props.query.activation;\n  return (\n    <>\n      <LanguageFacet\n        disabled={languageDisabled}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.languages}\n        stats={props.facets && props.facets.languages}\n        values={props.query.languages}\n      />\n      <TypeFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.types}\n        stats={props.facets && props.facets.types}\n        values={props.query.types}\n      />\n      <TagFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.tags}\n        organization={props.organization}\n        stats={props.facets && props.facets.tags}\n        values={props.query.tags}\n      />\n      <RepositoryFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.repositories}\n        referencedRepositories={props.referencedRepositories}\n        stats={props.facets && props.facets.repositories}\n        values={props.query.repositories}\n      />\n      <DefaultSeverityFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.severities}\n        stats={props.facets && props.facets.severities}\n        values={props.query.severities}\n      />\n      <StatusFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.statuses}\n        stats={props.facets && props.facets.statuses}\n        values={props.query.statuses}\n      />\n      <StandardFacet\n        cwe={props.query.cwe}\n        cweOpen={!!props.openFacets.cwe}\n        cweStats={props.facets && props.facets.cwe}\n        fetchingCwe={false}\n        fetchingOwaspTop10={false}\n        fetchingSansTop25={false}\n        fetchingSonarSourceSecurity={false}\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.standards}\n        owaspTop10={props.query.owaspTop10}\n        owaspTop10Open={!!props.openFacets.owaspTop10}\n        owaspTop10Stats={props.facets && props.facets.owaspTop10}\n        query={props.query}\n        sansTop25={props.query.sansTop25}\n        sansTop25Open={!!props.openFacets.sansTop25}\n        sansTop25Stats={props.facets && props.facets.sansTop25}\n        sonarsourceSecurity={props.query.sonarsourceSecurity}\n        sonarsourceSecurityOpen={!!props.openFacets.sonarsourceSecurity}\n        sonarsourceSecurityStats={props.facets && props.facets.sonarsourceSecurity}\n      />\n      <AvailableSinceFacet\n        onChange={props.onFilterChange}\n        onToggle={props.onFacetToggle}\n        open={!!props.openFacets.availableSince}\n        value={props.query.availableSince}\n      />\n      {!props.organizationsEnabled && (\n        <TemplateFacet\n          onChange={props.onFilterChange}\n          onToggle={props.onFacetToggle}\n          open={!!props.openFacets.template}\n          value={props.query.template}\n        />\n      )}\n      {!props.hideProfileFacet && (\n        <>\n          <ProfileFacet\n            activation={props.query.activation}\n            compareToProfile={props.query.compareToProfile}\n            languages={props.query.languages}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.profile}\n            referencedProfiles={props.referencedProfiles}\n            value={props.query.profile}\n          />\n          <InheritanceFacet\n            disabled={inheritanceDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.inheritance}\n            value={props.query.inheritance}\n          />\n          <ActivationSeverityFacet\n            disabled={activationSeverityDisabled}\n            onChange={props.onFilterChange}\n            onToggle={props.onFacetToggle}\n            open={!!props.openFacets.activationSeverities}\n            stats={props.facets && props.facets.activationSeverities}\n            values={props.query.activationSeverities}\n          />\n        </>\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ReloadButton from 'sonar-ui-common/components/controls/ReloadButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport PageCounter from '../../../components/common/PageCounter';\n\ninterface Props {\n  loading: boolean;\n  onReload: () => void;\n  paging?: T.Paging;\n  selectedIndex?: number;\n}\n\nexport default function PageActions(props: Props) {\n  return (\n    <div className=\"pull-right\">\n      <Shortcuts />\n\n      <DeferredSpinner loading={props.loading}>\n        <ReloadButton onClick={props.onReload} />\n      </DeferredSpinner>\n\n      {props.paging && (\n        <PageCounter\n          className=\"spacer-left\"\n          current={props.selectedIndex}\n          label={translate('coding_rules._rules')}\n          total={props.paging.total}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction Shortcuts() {\n  return (\n    <span className=\"note big-spacer-right\">\n      <span className=\"big-spacer-right\">\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('coding_rules.to_select_rules')}\n      </span>\n\n      <span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        <span className=\"shortcut-button little-spacer-right\"></span>\n        {translate('issues.to_navigate')}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { latinize } from 'sonar-ui-common/helpers/strings';\nimport { createRule, updateRule } from '../../../api/rules';\nimport MarkdownTips from '../../../components/common/MarkdownTips';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport TypeHelper from '../../../components/shared/TypeHelper';\nimport { RULE_STATUSES, RULE_TYPES, SEVERITIES } from '../../../helpers/constants';\n\ninterface Props {\n  customRule?: T.RuleDetails;\n  onClose: () => void;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  description: string;\n  key: string;\n  keyModifiedByUser: boolean;\n  name: string;\n  params: T.Dict<string>;\n  reactivating: boolean;\n  severity: string;\n  status: string;\n  submitting: boolean;\n  type: string;\n}\n\nexport default class CustomRuleFormModal extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const params: T.Dict<string> = {};\n    if (props.customRule && props.customRule.params) {\n      for (const param of props.customRule.params) {\n        params[param.key] = param.defaultValue || '';\n      }\n    }\n    this.state = {\n      description: (props.customRule && props.customRule.mdDesc) || '',\n      key: '',\n      keyModifiedByUser: false,\n      name: (props.customRule && props.customRule.name) || '',\n      params,\n      reactivating: false,\n      severity: (props.customRule && props.customRule.severity) || props.templateRule.severity,\n      status: (props.customRule && props.customRule.status) || props.templateRule.status,\n      submitting: false,\n      type: (props.customRule && props.customRule.type) || props.templateRule.type\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  prepareRequest = () => {\n    const { customRule, organization, templateRule } = this.props;\n    const params = Object.keys(this.state.params)\n      .map(key => `${key}=${csvEscape(this.state.params[key])}`)\n      .join(';');\n    const ruleData = {\n      markdown_description: this.state.description,\n      name: this.state.name,\n      organization,\n      params,\n      severity: this.state.severity,\n      status: this.state.status\n    };\n    return customRule\n      ? updateRule({ ...ruleData, key: customRule.key })\n      : createRule({\n          ...ruleData,\n          custom_key: this.state.key,\n          prevent_reactivation: !this.state.reactivating,\n          template_key: templateRule.key,\n          type: this.state.type\n        });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ submitting: true });\n    this.prepareRequest().then(\n      newRuleDetails => {\n        if (this.mounted) {\n          this.setState({ submitting: false });\n          this.props.onDone(newRuleDetails);\n        }\n      },\n      (response: Response) => {\n        if (this.mounted) {\n          this.setState({ reactivating: response.status === 409, submitting: false });\n        }\n      }\n    );\n  };\n\n  handleNameChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value: name } = event.currentTarget;\n    this.setState(state => ({\n      name,\n      key: state.keyModifiedByUser ? state.key : latinize(name).replace(/[^A-Za-z0-9]/g, '_')\n    }));\n  };\n\n  handleKeyChange = (event: React.SyntheticEvent<HTMLInputElement>) =>\n    this.setState({ key: event.currentTarget.value, keyModifiedByUser: true });\n\n  handleDescriptionChange = (event: React.SyntheticEvent<HTMLTextAreaElement>) =>\n    this.setState({ description: event.currentTarget.value });\n\n  handleTypeChange = ({ value }: { value: string }) => this.setState({ type: value });\n\n  handleSeverityChange = ({ value }: { value: string }) => this.setState({ severity: value });\n\n  handleStatusChange = ({ value }: { value: string }) => this.setState({ status: value });\n\n  handleParameterChange = (event: React.SyntheticEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState((state: State) => ({ params: { ...state.params, [name]: value } }));\n  };\n\n  renderNameField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-name\">\n        {translate('name')} <em className=\"mandatory\">*</em>\n      </label>\n      <input\n        autoFocus={true}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-name\"\n        onChange={this.handleNameChange}\n        required={true}\n        type=\"text\"\n        value={this.state.name}\n      />\n    </div>\n  );\n\n  renderKeyField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-key\">\n        {translate('key')} {!this.props.customRule && <em className=\"mandatory\">*</em>}\n      </label>\n\n      {this.props.customRule ? (\n        <span className=\"coding-rules-detail-custom-rule-key\" title={this.props.customRule.key}>\n          {this.props.customRule.key}\n        </span>\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id=\"coding-rules-custom-rule-creation-key\"\n          onChange={this.handleKeyChange}\n          required={true}\n          type=\"text\"\n          value={this.state.key}\n        />\n      )}\n    </div>\n  );\n\n  renderDescriptionField = () => (\n    <div className=\"modal-field\">\n      <label htmlFor=\"coding-rules-custom-rule-creation-html-description\">\n        {translate('description')} <em className=\"mandatory\">*</em>\n      </label>\n      <textarea\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-creation-html-description\"\n        onChange={this.handleDescriptionChange}\n        required={true}\n        rows={5}\n        value={this.state.description}\n      />\n      <MarkdownTips className=\"modal-field-descriptor text-right\" />\n    </div>\n  );\n\n  renderTypeOption = ({ value }: { value: T.RuleType }) => {\n    return <TypeHelper type={value} />;\n  };\n\n  renderTypeField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-type\">{translate('type')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-type\"\n        onChange={this.handleTypeChange}\n        optionRenderer={this.renderTypeOption}\n        options={RULE_TYPES.map(type => ({\n          label: translate('issue.type', type),\n          value: type\n        }))}\n        searchable={false}\n        value={this.state.type}\n        valueRenderer={this.renderTypeOption}\n      />\n    </div>\n  );\n\n  renderSeverityOption = ({ value }: { value: string }) => <SeverityHelper severity={value} />;\n\n  renderSeverityField = () => (\n    <div className=\"modal-field flex-1 spacer-right\">\n      <label htmlFor=\"coding-rules-custom-rule-severity\">{translate('severity')}</label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-severity\"\n        onChange={this.handleSeverityChange}\n        optionRenderer={this.renderSeverityOption}\n        options={SEVERITIES.map(severity => ({\n          label: translate('severity', severity),\n          value: severity\n        }))}\n        searchable={false}\n        value={this.state.severity}\n        valueRenderer={this.renderSeverityOption}\n      />\n    </div>\n  );\n\n  renderStatusField = () => (\n    <div className=\"modal-field flex-1\">\n      <label htmlFor=\"coding-rules-custom-rule-status\">\n        {translate('coding_rules.filters.status')}\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        id=\"coding-rules-custom-rule-status\"\n        onChange={this.handleStatusChange}\n        options={RULE_STATUSES.map(status => ({\n          label: translate('rules.status', status),\n          value: status\n        }))}\n        searchable={false}\n        value={this.state.status}\n      />\n    </div>\n  );\n\n  renderParameterField = (param: T.RuleParameter) => (\n    <div className=\"modal-field\" key={param.key}>\n      <label className=\"capitalize\" htmlFor={param.key}>\n        {param.key}\n      </label>\n\n      {param.type === 'TEXT' ? (\n        <textarea\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          rows={3}\n          value={this.state.params[param.key] || ''}\n        />\n      ) : (\n        <input\n          disabled={this.state.submitting}\n          id={param.key}\n          name={param.key}\n          onChange={this.handleParameterChange}\n          placeholder={param.defaultValue}\n          type=\"text\"\n          value={this.state.params[param.key] || ''}\n        />\n      )}\n      <div\n        className=\"modal-field-description\"\n        // Safe: defined by rule creator (instance admin?)\n        dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n      />\n    </div>\n  );\n\n  render() {\n    const { customRule, templateRule } = this.props;\n    const { reactivating, submitting } = this.state;\n    const { params = [] } = templateRule;\n    const header = customRule\n      ? translate('coding_rules.update_custom_rule')\n      : translate('coding_rules.create_custom_rule');\n    let submit = this.props.customRule ? translate('save') : translate('create');\n    if (this.state.reactivating) {\n      submit = translate('coding_rules.reactivate');\n    }\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <div className=\"modal-head\">\n            <h2>{header}</h2>\n          </div>\n\n          <div className=\"modal-body modal-container\">\n            {reactivating && (\n              <Alert variant=\"warning\">{translate('coding_rules.reactivate.help')}</Alert>\n            )}\n\n            {this.renderNameField()}\n            {this.renderKeyField()}\n            <div className=\"display-flex-space-between\">\n              {/* do not allow to change the type of existing rule */}\n              {!customRule && this.renderTypeField()}\n              {this.renderSeverityField()}\n              {this.renderStatusField()}\n            </div>\n            {this.renderDescriptionField()}\n            {params.map(this.renderParameterField)}\n          </div>\n\n          <div className=\"modal-foot\">\n            {submitting && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.submitting}>{submit}</SubmitButton>\n            <ResetButtonLink\n              disabled={submitting}\n              id=\"coding-rules-custom-rule-creation-cancel\"\n              onClick={this.props.onClose}>\n              {translate('cancel')}\n            </ResetButtonLink>\n          </div>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CustomRuleFormModal from './CustomRuleFormModal';\n\ninterface Props {\n  children: (props: { onClick: () => void }) => React.ReactNode;\n  customRule?: T.RuleDetails;\n  onDone: (newRuleDetails: T.RuleDetails) => void;\n  organization: string | undefined;\n  templateRule: T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class CustomRuleButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleModalClose = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  handleDone = (newRuleDetails: T.RuleDetails) => {\n    this.handleModalClose();\n    this.props.onDone(newRuleDetails);\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({ onClick: this.handleClick })}\n        {this.state.modal && (\n          <CustomRuleFormModal\n            customRule={this.props.customRule}\n            onClose={this.handleModalClose}\n            onDone={this.handleDone}\n            organization={this.props.organization}\n            templateRule={this.props.templateRule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deleteRule, searchRules } from '../../../api/rules';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport CustomRuleButton from './CustomRuleButton';\n\ninterface Props {\n  canChange?: boolean;\n  organization: string | undefined;\n  ruleDetails: T.RuleDetails;\n}\n\ninterface State {\n  loading: boolean;\n  rules?: T.Rule[];\n}\n\nexport default class RuleDetailsCustomRules extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchRules();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails.key !== this.props.ruleDetails.key) {\n      this.fetchRules();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRules = () => {\n    this.setState({ loading: true });\n    searchRules({\n      f: 'name,severity,params',\n      organization: this.props.organization,\n      template_key: this.props.ruleDetails.key\n    }).then(\n      ({ rules }) => {\n        if (this.mounted) {\n          this.setState({ rules, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleCreate = (newRuleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState(({ rules = [] }: State) => ({\n        rules: [...rules, newRuleDetails]\n      }));\n    }\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    return deleteRule({ key: ruleKey, organization: this.props.organization }).then(() => {\n      if (this.mounted) {\n        this.setState(({ rules = [] }) => ({\n          rules: rules.filter(rule => rule.key !== ruleKey)\n        }));\n      }\n    });\n  };\n\n  renderRule = (rule: T.Rule) => (\n    <tr data-rule={rule.key} key={rule.key}>\n      <td className=\"coding-rules-detail-list-name\">\n        <Link to={getRuleUrl(rule.key, this.props.organization)}>{rule.name}</Link>\n      </td>\n\n      <td className=\"coding-rules-detail-list-severity\">\n        <SeverityHelper className=\"display-flex-center\" severity={rule.severity} />\n      </td>\n\n      <td className=\"coding-rules-detail-list-parameters\">\n        {rule.params &&\n          rule.params\n            .filter(param => param.defaultValue)\n            .map(param => (\n              <div className=\"coding-rules-detail-list-parameter\" key={param.key}>\n                <span className=\"key\">{param.key}</span>\n                <span className=\"sep\">:&nbsp;</span>\n                <span className=\"value\" title={param.defaultValue}>\n                  {param.defaultValue}\n                </span>\n              </div>\n            ))}\n      </td>\n\n      {this.props.canChange && (\n        <td className=\"coding-rules-detail-list-actions\">\n          <ConfirmButton\n            confirmButtonText={translate('delete')}\n            confirmData={rule.key}\n            isDestructive={true}\n            modalBody={translateWithParameters('coding_rules.delete.custom.confirm', rule.name)}\n            modalHeader={translate('coding_rules.delete_rule')}\n            onConfirm={this.handleRuleDelete}>\n            {({ onClick }) => (\n              <Button className=\"button-red js-delete-custom-rule\" onClick={onClick}>\n                {translate('delete')}\n              </Button>\n            )}\n          </ConfirmButton>\n        </td>\n      )}\n    </tr>\n  );\n\n  render() {\n    const { loading, rules = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-custom-rules coding-rule-section\">\n        <div className=\"coding-rules-detail-custom-rules-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.custom_rules')}</h3>\n\n          {this.props.canChange && (\n            <CustomRuleButton\n              onDone={this.handleRuleCreate}\n              organization={this.props.organization}\n              templateRule={this.props.ruleDetails}>\n              {({ onClick }) => (\n                <Button className=\"js-create-custom-rule spacer-left\" onClick={onClick}>\n                  {translate('coding_rules.create')}\n                </Button>\n              )}\n            </CustomRuleButton>\n          )}\n\n          <DeferredSpinner className=\"spacer-left\" loading={loading}>\n            {rules.length > 0 && (\n              <table className=\"coding-rules-detail-list\" id=\"coding-rules-detail-custom-rules\">\n                <tbody>{sortBy(rules, rule => rule.name).map(this.renderRule)}</tbody>\n              </table>\n            )}\n          </DeferredSpinner>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getFacet } from '../../../api/issues';\nimport { withAppState } from '../../../components/hoc/withAppState';\nimport { getIssuesUrl } from '../../../helpers/urls';\n\ninterface Props {\n  appState: Pick<T.AppState, 'branchesEnabled'>;\n  organization: string | undefined;\n  ruleDetails: Pick<T.RuleDetails, 'key' | 'type'>;\n}\n\ninterface Project {\n  count: number;\n  key: string;\n  name: string;\n}\n\ninterface State {\n  loading: boolean;\n  projects?: Project[];\n  total?: number;\n}\n\nexport class RuleDetailsIssues extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIssues();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleDetails !== this.props.ruleDetails) {\n      this.fetchIssues();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIssues = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    this.setState({ loading: true });\n    getFacet(\n      {\n        resolved: 'false',\n        rules: key,\n        organization\n      },\n      'projects'\n    ).then(\n      ({ facet, response }) => {\n        if (this.mounted) {\n          const { components = [], paging } = response;\n          const projects = [];\n          for (const item of facet) {\n            const project = components.find(component => component.key === item.val);\n            if (project) {\n              projects.push({ count: item.count, key: project.key, name: project.name });\n            }\n          }\n          this.setState({ projects, loading: false, total: paging.total });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderTotal = () => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const { total } = this.state;\n    if (total === undefined) {\n      return null;\n    }\n    const path = getIssuesUrl({ resolved: 'false', rules: key }, organization);\n\n    const totalItem = (\n      <span className=\"little-spacer-left\">\n        {'('}\n        <Link to={path}>{total}</Link>\n        {')'}\n      </span>\n    );\n\n    if (!this.props.appState.branchesEnabled) {\n      return totalItem;\n    }\n\n    return (\n      <Tooltip overlay={translate('coding_rules.issues.only_main_branches')}>{totalItem}</Tooltip>\n    );\n  };\n\n  renderProject = (project: Project) => {\n    const {\n      ruleDetails: { key },\n      organization\n    } = this.props;\n\n    const path = getIssuesUrl(\n      { resolved: 'false', rules: key, projects: project.key },\n      organization\n    );\n    return (\n      <tr key={project.key}>\n        <td className=\"coding-rules-detail-list-name\">{project.name}</td>\n        <td className=\"coding-rules-detail-list-parameters\">\n          <Link to={path}>{formatMeasure(project.count, 'INT')}</Link>\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    const { loading, projects = [] } = this.state;\n\n    return (\n      <div className=\"js-rule-issues coding-rule-section\">\n        <div className=\"coding-rule-section-separator\" />\n\n        <DeferredSpinner loading={loading}>\n          <h3 className=\"coding-rules-detail-title\">\n            {translate('coding_rules.issues')}\n            {this.renderTotal()}\n          </h3>\n\n          {projects.length > 0 && (\n            <table className=\"coding-rules-detail-list coding-rules-most-violated-projects\">\n              <tbody>\n                <tr>\n                  <td className=\"coding-rules-detail-list-name\" colSpan={2}>\n                    {translate('coding_rules.most_violating_projects')}\n                  </td>\n                </tr>\n                {projects.map(this.renderProject)}\n              </tbody>\n            </table>\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n\nexport default withAppState(RuleDetailsIssues);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  params: T.RuleParameter[];\n}\n\nexport default class RuleDetailsParameters extends React.PureComponent<Props> {\n  renderParameter = (param: T.RuleParameter) => (\n    <tr className=\"coding-rules-detail-parameter\" key={param.key}>\n      <td className=\"coding-rules-detail-parameter-name\">{param.key}</td>\n      <td className=\"coding-rules-detail-parameter-description\">\n        <p // Safe: defined by rule creator (instance admin?)\n          dangerouslySetInnerHTML={{ __html: param.htmlDesc || '' }}\n        />\n        {param.defaultValue !== undefined && (\n          <div className=\"note spacer-top\">\n            {translate('coding_rules.parameters.default_value')}\n            <br />\n            <span className=\"coding-rules-detail-parameter-value\">{param.defaultValue}</span>\n          </div>\n        )}\n      </td>\n    </tr>\n  );\n\n  render() {\n    return (\n      <div className=\"js-rule-parameters\">\n        <h3 className=\"coding-rules-detail-title\">{translate('coding_rules.parameters')}</h3>\n        <table className=\"coding-rules-detail-parameters\">\n          <tbody>{this.props.params.map(this.renderParameter)}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { Profile as BaseProfile } from '../../../api/quality-profiles';\nimport ActivationFormModal from './ActivationFormModal';\n\ninterface Props {\n  activation?: T.RuleActivation;\n  buttonText: string;\n  className?: string;\n  modalHeader: string;\n  onDone: (severity: string) => Promise<void>;\n  organization: string | undefined;\n  profiles: BaseProfile[];\n  rule: T.Rule | T.RuleDetails;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ActivationButton extends React.PureComponent<Props, State> {\n  state: State = { modal: false };\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ modal: false });\n  };\n\n  render() {\n    return (\n      <>\n        <Button\n          className={this.props.className}\n          id=\"coding-rules-quality-profile-activate\"\n          onClick={this.handleButtonClick}>\n          {this.props.buttonText}\n        </Button>\n\n        {this.state.modal && (\n          <ActivationFormModal\n            activation={this.props.activation}\n            modalHeader={this.props.modalHeader}\n            onClose={this.handleCloseModal}\n            onDone={this.props.onDone}\n            organization={this.props.organization}\n            profiles={this.props.profiles}\n            rule={this.props.rule}\n          />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { colors } from '../../../app/theme';\n\ninterface Props {\n  className?: string;\n  inheritance: T.RuleInheritance;\n}\n\nexport default function RuleInheritanceIcon({ className, inheritance, ...other }: Props) {\n  const fill = inheritance === 'OVERRIDES' ? colors.red : colors.baseFontColor;\n\n  return (\n    <svg\n      className={className}\n      height={16}\n      version=\"1.1\"\n      viewBox=\"0 0 16 16\"\n      width={16}\n      xmlSpace=\"preserve\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      {...other}>\n      <path\n        d=\"M6.25 12.5a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm0-9a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm5 1a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0zm.75 0a1.5 1.5 0 0 1-.75 1.297c-.023 2.82-2.023 3.445-3.352 3.867-1.242.39-1.648.578-1.648 1.336v.203A1.5 1.5 0 1 1 4 12.5a1.5 1.5 0 0 1 .75-1.297V4.797A1.5 1.5 0 1 1 7 3.5a1.5 1.5 0 0 1-.75 1.297V8.68c.398-.196.82-.328 1.203-.446 1.453-.46 2.281-.804 2.297-2.437A1.5 1.5 0 1 1 12 4.5z\"\n        style={{ fill, fillRule: 'nonzero' }}\n      />\n    </svg>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { filter } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { activateRule, deactivateRule, Profile } from '../../../api/quality-profiles';\nimport InstanceMessage from '../../../components/common/InstanceMessage';\nimport SeverityHelper from '../../../components/shared/SeverityHelper';\nimport { getQualityProfileUrl } from '../../../helpers/urls';\nimport BuiltInQualityProfileBadge from '../../quality-profiles/components/BuiltInQualityProfileBadge';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\n\ninterface Props {\n  activations: T.RuleActivation[] | undefined;\n  canWrite: boolean | undefined;\n  onActivate: () => Promise<void>;\n  onDeactivate: () => Promise<void>;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  ruleDetails: T.RuleDetails;\n}\n\nexport default class RuleDetailsProfiles extends React.PureComponent<Props> {\n  handleActivate = () => this.props.onActivate();\n\n  handleDeactivate = (key?: string) => {\n    if (key) {\n      deactivateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key\n      }).then(this.props.onDeactivate, () => {});\n    }\n  };\n\n  handleRevert = (key?: string) => {\n    if (key) {\n      activateRule({\n        key,\n        organization: this.props.organization,\n        rule: this.props.ruleDetails.key,\n        reset: true\n      }).then(this.props.onActivate, () => {});\n    }\n  };\n\n  renderInheritedProfile = (activation: T.RuleActivation, profile: Profile) => {\n    if (!profile.parentName) {\n      return null;\n    }\n    const profilePath = getQualityProfileUrl(\n      profile.parentName,\n      profile.language,\n      this.props.organization\n    );\n    return (\n      <div className=\"coding-rules-detail-quality-profile-inheritance\">\n        {(activation.inherit === 'OVERRIDES' || activation.inherit === 'INHERITED') && (\n          <>\n            <RuleInheritanceIcon className=\"text-middle\" inheritance={activation.inherit} />\n            <Link className=\"link-base-color little-spacer-left text-middle\" to={profilePath}>\n              {profile.parentName}\n            </Link>\n          </>\n        )}\n      </div>\n    );\n  };\n\n  renderSeverity = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-severity\">\n      <Tooltip overlay={translate('coding_rules.activation_severity')}>\n        <span>\n          <SeverityHelper className=\"display-inline-flex-center\" severity={activation.severity} />\n        </span>\n      </Tooltip>\n      {parentActivation !== undefined && activation.severity !== parentActivation.severity && (\n        <div className=\"coding-rules-detail-quality-profile-inheritance\">\n          {translate('coding_rules.original')} {translate('severity', parentActivation.severity)}\n        </div>\n      )}\n    </td>\n  );\n\n  renderParameter = (\n    param: { key: string; value: string },\n    parentActivation?: T.RuleActivation\n  ) => {\n    const originalParam =\n      parentActivation && parentActivation.params.find(p => p.key === param.key);\n    const originalValue = originalParam && originalParam.value;\n\n    return (\n      <div className=\"coding-rules-detail-quality-profile-parameter\" key={param.key}>\n        <span className=\"key\">{param.key}</span>\n        <span className=\"sep\">: </span>\n        <span className=\"value\" title={param.value}>\n          {param.value}\n        </span>\n        {parentActivation && param.value !== originalValue && (\n          <div className=\"coding-rules-detail-quality-profile-inheritance\">\n            {translate('coding_rules.original')} <span className=\"value\">{originalValue}</span>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderParameters = (activation: T.RuleActivation, parentActivation?: T.RuleActivation) => (\n    <td className=\"coding-rules-detail-quality-profile-parameters\">\n      {activation.params.map(param => this.renderParameter(param, parentActivation))}\n    </td>\n  );\n\n  renderActions = (activation: T.RuleActivation, profile: Profile) => {\n    const canEdit = profile.actions && profile.actions.edit && !profile.isBuiltIn;\n    const { ruleDetails } = this.props;\n    const hasParent = activation.inherit !== 'NONE' && profile.parentKey;\n    return (\n      <td className=\"coding-rules-detail-quality-profile-actions\">\n        {canEdit && (\n          <>\n            {!ruleDetails.isTemplate && (\n              <ActivationButton\n                activation={activation}\n                buttonText={translate('change_verb')}\n                className=\"coding-rules-detail-quality-profile-change\"\n                modalHeader={translate('coding_rules.change_details')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[profile]}\n                rule={ruleDetails}\n              />\n            )}\n            {hasParent ? (\n              activation.inherit === 'OVERRIDES' &&\n              profile.parentName && (\n                <ConfirmButton\n                  confirmButtonText={translate('yes')}\n                  confirmData={profile.key}\n                  modalBody={translateWithParameters(\n                    'coding_rules.revert_to_parent_definition.confirm',\n                    profile.parentName\n                  )}\n                  modalHeader={translate('coding_rules.revert_to_parent_definition')}\n                  onConfirm={this.handleRevert}>\n                  {({ onClick }) => (\n                    <Button\n                      className=\"coding-rules-detail-quality-profile-revert button-red spacer-left\"\n                      onClick={onClick}>\n                      {translate('coding_rules.revert_to_parent_definition')}\n                    </Button>\n                  )}\n                </ConfirmButton>\n              )\n            ) : (\n              <ConfirmButton\n                confirmButtonText={translate('yes')}\n                confirmData={profile.key}\n                modalBody={translate('coding_rules.deactivate.confirm')}\n                modalHeader={translate('coding_rules.deactivate')}\n                onConfirm={this.handleDeactivate}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"coding-rules-detail-quality-profile-deactivate button-red spacer-left\"\n                    onClick={onClick}>\n                    {translate('coding_rules.deactivate')}\n                  </Button>\n                )}\n              </ConfirmButton>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActivation = (activation: T.RuleActivation) => {\n    const { activations = [], ruleDetails } = this.props;\n    const profile = this.props.referencedProfiles[activation.qProfile];\n    if (!profile) {\n      return null;\n    }\n\n    const parentActivation = activations.find(x => x.qProfile === profile.parentKey);\n\n    return (\n      <tr data-profile={profile.key} key={profile.key}>\n        <td className=\"coding-rules-detail-quality-profile-name\">\n          <Link to={getQualityProfileUrl(profile.name, profile.language, this.props.organization)}>\n            {profile.name}\n          </Link>\n          {profile.isBuiltIn && <BuiltInQualityProfileBadge className=\"spacer-left\" />}\n          {this.renderInheritedProfile(activation, profile)}\n        </td>\n\n        {this.renderSeverity(activation, parentActivation)}\n        {!ruleDetails.templateKey && this.renderParameters(activation, parentActivation)}\n        {this.renderActions(activation, profile)}\n      </tr>\n    );\n  };\n\n  render() {\n    const { activations = [], referencedProfiles, ruleDetails } = this.props;\n    const canActivate = Object.values(referencedProfiles).some(profile =>\n      Boolean(profile.actions && profile.actions.edit && profile.language === ruleDetails.lang)\n    );\n\n    return (\n      <div className=\"js-rule-profiles coding-rule-section\">\n        <div className=\"coding-rules-detail-quality-profiles-section\">\n          <div className=\"coding-rule-section-separator\" />\n\n          <h3 className=\"coding-rules-detail-title\">\n            <InstanceMessage message={translate('coding_rules.quality_profiles')} />\n          </h3>\n\n          {canActivate && (\n            <ActivationButton\n              buttonText={translate('coding_rules.activate')}\n              className=\"coding-rules-quality-profile-activate spacer-left\"\n              modalHeader={translate('coding_rules.activate_in_quality_profile')}\n              onDone={this.handleActivate}\n              organization={this.props.organization}\n              profiles={filter(\n                this.props.referencedProfiles,\n                profile => !activations.find(activation => activation.qProfile === profile.key)\n              )}\n              rule={ruleDetails}\n            />\n          )}\n\n          {activations.length > 0 && (\n            <table\n              className=\"coding-rules-detail-quality-profiles width-100\"\n              id=\"coding-rules-detail-quality-profiles\">\n              <tbody>{activations.map(this.renderActivation)}</tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { Profile } from '../../../api/quality-profiles';\nimport { deleteRule, getRuleDetails, updateRule } from '../../../api/rules';\nimport DocTooltip from '../../../components/docs/DocTooltip';\nimport { Activation, Query } from '../query';\nimport CustomRuleButton from './CustomRuleButton';\nimport RuleDetailsCustomRules from './RuleDetailsCustomRules';\nimport RuleDetailsDescription from './RuleDetailsDescription';\nimport RuleDetailsIssues from './RuleDetailsIssues';\nimport RuleDetailsMeta from './RuleDetailsMeta';\nimport RuleDetailsParameters from './RuleDetailsParameters';\nimport RuleDetailsProfiles from './RuleDetailsProfiles';\n\ninterface Props {\n  allowCustomRules?: boolean;\n  canWrite?: boolean;\n  hideQualityProfiles?: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onDelete: (rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  organization: string | undefined;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  ruleKey: string;\n  selectedProfile?: Profile;\n}\n\ninterface State {\n  actives?: T.RuleActivation[];\n  loading: boolean;\n  ruleDetails?: T.RuleDetails;\n}\n\nexport default class RuleDetails extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.setState({ loading: true });\n    this.fetchRuleDetails();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.ruleKey !== this.props.ruleKey) {\n      this.setState({ loading: true });\n      this.fetchRuleDetails();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchRuleDetails = () => {\n    return getRuleDetails({\n      actives: true,\n      key: this.props.ruleKey,\n      organization: this.props.organization\n    }).then(\n      ({ actives, rule }) => {\n        if (this.mounted) {\n          this.setState({ actives, loading: false, ruleDetails: rule });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleRuleChange = (ruleDetails: T.RuleDetails) => {\n    if (this.mounted) {\n      this.setState({ ruleDetails });\n    }\n  };\n\n  handleTagsChange = (tags: string[]) => {\n    // optimistic update\n    const oldTags = this.state.ruleDetails && this.state.ruleDetails.tags;\n    this.setState(state =>\n      state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags } } : null\n    );\n    updateRule({\n      key: this.props.ruleKey,\n      organization: this.props.organization,\n      tags: tags.join()\n    }).catch(() => {\n      if (this.mounted) {\n        this.setState(state =>\n          state.ruleDetails ? { ruleDetails: { ...state.ruleDetails, tags: oldTags } } : null\n        );\n      }\n    });\n  };\n\n  handleActivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (selectedProfile && this.state.actives) {\n        const active = this.state.actives.find(active => active.qProfile === selectedProfile.key);\n        if (active) {\n          this.props.onActivate(selectedProfile.key, ruleKey, active);\n        }\n      }\n    });\n  };\n\n  handleDeactivate = () => {\n    return this.fetchRuleDetails().then(() => {\n      const { ruleKey, selectedProfile } = this.props;\n      if (\n        selectedProfile &&\n        this.state.actives &&\n        !this.state.actives.find(active => active.qProfile === selectedProfile.key)\n      ) {\n        this.props.onDeactivate(selectedProfile.key, ruleKey);\n      }\n    });\n  };\n\n  handleDelete = () => {\n    return deleteRule({ key: this.props.ruleKey, organization: this.props.organization }).then(() =>\n      this.props.onDelete(this.props.ruleKey)\n    );\n  };\n\n  render() {\n    const { ruleDetails } = this.state;\n\n    if (!ruleDetails) {\n      return <div className=\"coding-rule-details\" />;\n    }\n\n    const {\n      allowCustomRules,\n      canWrite,\n      hideQualityProfiles,\n      organization,\n      referencedProfiles\n    } = this.props;\n    const { params = [] } = ruleDetails;\n\n    const isCustom = !!ruleDetails.templateKey;\n    const isEditable = canWrite && !!this.props.allowCustomRules && isCustom;\n\n    return (\n      <div className=\"coding-rule-details\">\n        <DeferredSpinner loading={this.state.loading}>\n          <RuleDetailsMeta\n            canWrite={canWrite}\n            onFilterChange={this.props.onFilterChange}\n            onTagsChange={this.handleTagsChange}\n            organization={organization}\n            referencedRepositories={this.props.referencedRepositories}\n            ruleDetails={ruleDetails}\n          />\n\n          <RuleDetailsDescription\n            canWrite={canWrite}\n            onChange={this.handleRuleChange}\n            organization={organization}\n            ruleDetails={ruleDetails}\n          />\n\n          {params.length > 0 && <RuleDetailsParameters params={params} />}\n\n          {isEditable && (\n            <div className=\"coding-rules-detail-description display-flex-center\">\n              {/* `templateRule` is used to get rule meta data, `customRule` is used to get parameter values */}\n              {/* it's expected to pass the same rule to both parameters */}\n              <CustomRuleButton\n                customRule={ruleDetails}\n                onDone={this.handleRuleChange}\n                organization={organization}\n                templateRule={ruleDetails}>\n                {({ onClick }) => (\n                  <Button\n                    className=\"js-edit-custom\"\n                    id=\"coding-rules-detail-custom-rule-change\"\n                    onClick={onClick}>\n                    {translate('edit')}\n                  </Button>\n                )}\n              </CustomRuleButton>\n              <ConfirmButton\n                confirmButtonText={translate('delete')}\n                isDestructive={true}\n                modalBody={translateWithParameters(\n                  'coding_rules.delete.custom.confirm',\n                  ruleDetails.name\n                )}\n                modalHeader={translate('coding_rules.delete_rule')}\n                onConfirm={this.handleDelete}>\n                {({ onClick }) => (\n                  <>\n                    <Button\n                      className=\"button-red spacer-left js-delete\"\n                      id=\"coding-rules-detail-rule-delete\"\n                      onClick={onClick}>\n                      {translate('delete')}\n                    </Button>\n                    <DocTooltip\n                      className=\"spacer-left\"\n                      doc={import(\n                        /* webpackMode: \"eager\" */ 'Docs/tooltips/rules/custom-rule-removal.md'\n                      )}\n                    />\n                  </>\n                )}\n              </ConfirmButton>\n            </div>\n          )}\n\n          {ruleDetails.isTemplate && (\n            <RuleDetailsCustomRules\n              canChange={allowCustomRules && canWrite}\n              organization={organization}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && !hideQualityProfiles && (\n            <RuleDetailsProfiles\n              activations={this.state.actives}\n              canWrite={canWrite}\n              onActivate={this.handleActivate}\n              onDeactivate={this.handleDeactivate}\n              organization={organization}\n              referencedProfiles={referencedProfiles}\n              ruleDetails={ruleDetails}\n            />\n          )}\n\n          {!ruleDetails.isTemplate && ruleDetails.type !== 'SECURITY_HOTSPOT' && (\n            <RuleDetailsIssues organization={organization} ruleDetails={ruleDetails} />\n          )}\n        </DeferredSpinner>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport ConfirmButton from 'sonar-ui-common/components/controls/ConfirmButton';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { deactivateRule, Profile } from '../../../api/quality-profiles';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getRuleUrl } from '../../../helpers/urls';\nimport { Activation, Query } from '../query';\nimport ActivationButton from './ActivationButton';\nimport RuleInheritanceIcon from './RuleInheritanceIcon';\nimport SimilarRulesFilter from './SimilarRulesFilter';\n\ninterface Props {\n  activation?: Activation;\n  canWrite?: boolean;\n  isLoggedIn: boolean;\n  onActivate: (profile: string, rule: string, activation: Activation) => void;\n  onDeactivate: (profile: string, rule: string) => void;\n  onFilterChange: (changes: Partial<Query>) => void;\n  onOpen: (ruleKey: string) => void;\n  organization: string | undefined;\n  rule: T.Rule;\n  selected: boolean;\n  selectedProfile?: Profile;\n}\n\nexport default class RuleListItem extends React.PureComponent<Props> {\n  handleDeactivate = () => {\n    if (this.props.selectedProfile) {\n      const data = {\n        key: this.props.selectedProfile.key,\n        organization: this.props.organization,\n        rule: this.props.rule.key\n      };\n      deactivateRule(data).then(\n        () => this.props.onDeactivate(data.key, data.rule),\n        () => {}\n      );\n    }\n  };\n\n  handleActivate = (severity: string) => {\n    if (this.props.selectedProfile) {\n      this.props.onActivate(this.props.selectedProfile.key, this.props.rule.key, {\n        severity,\n        inherit: 'NONE'\n      });\n    }\n    return Promise.resolve();\n  };\n\n  handleNameClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    // cmd(ctrl) + click should open a rule permalink in a new tab\n    const isLeftClickEvent = event.button === 0;\n    const isModifiedEvent = !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n    if (isModifiedEvent || !isLeftClickEvent) {\n      return;\n    }\n\n    event.preventDefault();\n    this.props.onOpen(this.props.rule.key);\n  };\n\n  renderActivation = () => {\n    const { activation, selectedProfile } = this.props;\n    if (!activation) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation\">\n        <SeverityIcon severity={activation.severity} />\n        {selectedProfile && selectedProfile.parentName && (\n          <>\n            {activation.inherit === 'OVERRIDES' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.overrides',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n            {activation.inherit === 'INHERITED' && (\n              <Tooltip\n                overlay={translateWithParameters(\n                  'coding_rules.inherits',\n                  selectedProfile.name,\n                  selectedProfile.parentName\n                )}>\n                <RuleInheritanceIcon\n                  className=\"little-spacer-left\"\n                  inheritance={activation.inherit}\n                />\n              </Tooltip>\n            )}\n          </>\n        )}\n      </td>\n    );\n  };\n\n  renderActions = () => {\n    const { activation, isLoggedIn, rule, selectedProfile } = this.props;\n    if (!selectedProfile || !isLoggedIn) {\n      return null;\n    }\n\n    const canCopy = selectedProfile.actions && selectedProfile.actions.copy;\n    if (selectedProfile.isBuiltIn && canCopy) {\n      return (\n        <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n          {this.renderDeactivateButton('', 'coding_rules.need_extend_or_copy')}\n        </td>\n      );\n    }\n\n    const canEdit = selectedProfile.actions && selectedProfile.actions.edit;\n    if (!canEdit) {\n      return null;\n    }\n\n    return (\n      <td className=\"coding-rule-table-meta-cell coding-rule-activation-actions\">\n        {activation\n          ? this.renderDeactivateButton(activation.inherit)\n          : !rule.isTemplate && (\n              <ActivationButton\n                buttonText={translate('coding_rules.activate')}\n                className=\"coding-rules-detail-quality-profile-activate\"\n                modalHeader={translate('coding_rules.activate_in_quality_profile')}\n                onDone={this.handleActivate}\n                organization={this.props.organization}\n                profiles={[selectedProfile]}\n                rule={rule}\n              />\n            )}\n      </td>\n    );\n  };\n\n  renderDeactivateButton = (\n    inherit: string,\n    overlayTranslationKey = 'coding_rules.can_not_deactivate'\n  ) => {\n    return inherit === 'NONE' ? (\n      <ConfirmButton\n        confirmButtonText={translate('yes')}\n        modalBody={translate('coding_rules.deactivate.confirm')}\n        modalHeader={translate('coding_rules.deactivate')}\n        onConfirm={this.handleDeactivate}>\n        {({ onClick }) => (\n          <Button\n            className=\"coding-rules-detail-quality-profile-deactivate button-red\"\n            onClick={onClick}>\n            {translate('coding_rules.deactivate')}\n          </Button>\n        )}\n      </ConfirmButton>\n    ) : (\n      <Tooltip overlay={translate(overlayTranslationKey)}>\n        <Button className=\"coding-rules-detail-quality-profile-deactivate button-red disabled\">\n          {translate('coding_rules.deactivate')}\n        </Button>\n      </Tooltip>\n    );\n  };\n\n  render() {\n    const { rule, selected } = this.props;\n    const allTags = [...(rule.tags || []), ...(rule.sysTags || [])];\n    return (\n      <div className={classNames('coding-rule', { selected })} data-rule={rule.key}>\n        <table className=\"coding-rule-table\">\n          <tbody>\n            <tr>\n              {this.renderActivation()}\n\n              <td>\n                <div className=\"coding-rule-title\">\n                  <Link\n                    className=\"link-no-underline\"\n                    onClick={this.handleNameClick}\n                    to={getRuleUrl(rule.key, this.props.organization)}>\n                    {rule.name}\n                  </Link>\n                  {rule.isTemplate && (\n                    <Tooltip overlay={translate('coding_rules.rule_template.title')}>\n                      <span className=\"badge spacer-left\">\n                        {translate('coding_rules.rule_template')}\n                      </span>\n                    </Tooltip>\n                  )}\n                </div>\n              </td>\n\n              <td className=\"coding-rule-table-meta-cell\">\n                <div className=\"display-flex-center coding-rule-meta\">\n                  {rule.status !== 'READY' && (\n                    <span className=\"spacer-left badge badge-error\">\n                      {translate('rules.status', rule.status)}\n                    </span>\n                  )}\n                  <span className=\"display-inline-flex-center spacer-left note\">\n                    {rule.langName}\n                  </span>\n                  <Tooltip overlay={translate('coding_rules.type.tooltip', rule.type)}>\n                    <span className=\"display-inline-flex-center spacer-left note\">\n                      <IssueTypeIcon query={rule.type} />\n                      <span className=\"little-spacer-left text-middle\">\n                        {translate('issue.type', rule.type)}\n                      </span>\n                    </span>\n                  </Tooltip>\n                  {allTags.length > 0 && (\n                    <TagsList\n                      allowUpdate={false}\n                      className=\"display-inline-flex-center note spacer-left\"\n                      tags={allTags}\n                    />\n                  )}\n                  <SimilarRulesFilter onFilterChange={this.props.onFilterChange} rule={rule} />\n                </div>\n              </td>\n\n              {this.renderActions()}\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { keyBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport BackIcon from 'sonar-ui-common/components/icons/BackIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  addSideBarClass,\n  addWhitePageClass,\n  removeSideBarClass,\n  removeWhitePageClass\n} from 'sonar-ui-common/helpers/pages';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { Profile, searchQualityProfiles } from '../../../api/quality-profiles';\nimport { getRulesApp, searchRules } from '../../../api/rules';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport FiltersHeader from '../../../components/common/FiltersHeader';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport '../../../components/search-navigator.css';\nimport { hasPrivateAccess } from '../../../helpers/organizations';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport {\n  getAppState,\n  getCurrentUser,\n  getLanguages,\n  getMyOrganizations,\n  Store\n} from '../../../store/rootReducer';\nimport {\n  shouldOpenSonarSourceSecurityFacet,\n  shouldOpenStandardsChildFacet,\n  shouldOpenStandardsFacet,\n  STANDARDS\n} from '../../issues/utils';\nimport {\n  Activation,\n  Actives,\n  areQueriesEqual,\n  FacetKey,\n  Facets,\n  getAppFacet,\n  getOpen,\n  getServerFacet,\n  hasRuleKey,\n  OpenFacets,\n  parseQuery,\n  Query,\n  serializeQuery,\n  shouldRequestFacet\n} from '../query';\nimport '../styles.css';\nimport BulkChange from './BulkChange';\nimport FacetsList from './FacetsList';\nimport PageActions from './PageActions';\nimport RuleDetails from './RuleDetails';\nimport RuleListItem from './RuleListItem';\n\nconst PAGE_SIZE = 100;\nconst LIMIT_BEFORE_LOAD_MORE = 5;\n\ninterface StateToProps {\n  appState: T.AppState;\n  currentUser: T.CurrentUser;\n  languages: T.Languages;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps extends WithRouterProps {\n  organization: T.Organization | undefined;\n}\n\ntype Props = OwnProps & StateToProps;\n\ninterface State {\n  actives?: Actives;\n  canWrite?: boolean;\n  facets?: Facets;\n  loading: boolean;\n  openFacets: OpenFacets;\n  openRule?: T.Rule;\n  paging?: T.Paging;\n  query: Query;\n  referencedProfiles: T.Dict<Profile>;\n  referencedRepositories: T.Dict<{ key: string; language: string; name: string }>;\n  rules: T.Rule[];\n  selected?: string;\n  usingPermalink?: boolean;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    const query = parseQuery(props.location.query);\n    this.state = {\n      loading: true,\n      openFacets: {\n        languages: true,\n        owaspTop10: shouldOpenStandardsChildFacet({}, query, 'owaspTop10'),\n        sansTop25: shouldOpenStandardsChildFacet({}, query, 'sansTop25'),\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet({}, query),\n        standards: shouldOpenStandardsFacet({}, query),\n        types: true\n      },\n      query,\n      referencedProfiles: {},\n      referencedRepositories: {},\n      rules: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    addWhitePageClass();\n    addSideBarClass();\n    this.attachShortcuts();\n    this.fetchInitialData();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    this.setState(({ rules, selected }) => {\n      const openRule = this.getOpenRule(nextProps, rules);\n      return {\n        openRule,\n        usingPermalink: hasRuleKey(nextProps.location.query),\n        query: parseQuery(nextProps.location.query),\n        selected: openRule ? openRule.key : selected\n      };\n    });\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (!areQueriesEqual(prevProps.location.query, this.props.location.query)) {\n      this.fetchFirstRules();\n    }\n    if (\n      !this.state.openRule &&\n      (prevState.selected !== this.state.selected || prevState.openRule)\n    ) {\n      // if user simply selected another issue\n      // or if he went from the source code back to the list of issues\n      this.scrollToSelectedRule();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeWhitePageClass();\n    removeSideBarClass();\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    key.setScope('coding-rules');\n    key('up', 'coding-rules', () => {\n      this.selectPreviousRule();\n      return false;\n    });\n    key('down', 'coding-rules', () => {\n      this.selectNextRule();\n      return false;\n    });\n    key('right', 'coding-rules', () => {\n      this.openSelectedRule();\n      return false;\n    });\n    key('left', 'coding-rules', () => {\n      this.handleBack();\n      return false;\n    });\n  };\n\n  detachShortcuts = () => key.deleteScope('coding-rules');\n\n  getOpenRule = (props: Props, rules: T.Rule[]) => {\n    const open = getOpen(props.location.query);\n    return open && rules.find(rule => rule.key === open);\n  };\n\n  getFacetsToFetch = () => {\n    const { openFacets } = this.state;\n    return Object.keys(openFacets)\n      .filter((facet: FacetKey) => openFacets[facet])\n      .filter((facet: FacetKey) => shouldRequestFacet(facet))\n      .map((facet: FacetKey) => getServerFacet(facet));\n  };\n\n  getFieldsToFetch = () => {\n    const fields = [\n      'isTemplate',\n      'name',\n      'lang',\n      'langName',\n      'severity',\n      'status',\n      'sysTags',\n      'tags',\n      'templateKey'\n    ];\n    if (this.state.query.profile) {\n      fields.push('actives', 'params');\n    }\n    return fields;\n  };\n\n  getSearchParameters = () => ({\n    f: this.getFieldsToFetch().join(),\n    facets: this.getFacetsToFetch().join(),\n    organization: this.props.organization && this.props.organization.key,\n    ps: PAGE_SIZE,\n    s: 'name',\n    ...serializeQuery(this.state.query)\n  });\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  fetchInitialData = () => {\n    this.setState({ loading: true });\n    const organization = this.props.organization && this.props.organization.key;\n    Promise.all([getRulesApp({ organization }), this.fetchQualityProfiles()]).then(\n      ([{ canWrite, repositories }, { profiles }]) => {\n        this.setState({\n          canWrite,\n          referencedProfiles: keyBy(profiles, 'key'),\n          referencedRepositories: keyBy(repositories, 'key')\n        });\n        this.fetchFirstRules();\n      },\n      this.stopLoading\n    );\n  };\n\n  makeFetchRequest = (query?: T.RawQuery) =>\n    searchRules({ ...this.getSearchParameters(), ...query }).then(\n      ({ actives: rawActives, facets: rawFacets, p, ps, rules, total }) => {\n        const actives = rawActives && parseActives(rawActives);\n        const facets = rawFacets && parseFacets(rawFacets);\n        const paging = { pageIndex: p, pageSize: ps, total };\n        return { actives, facets, paging, rules };\n      }\n    );\n\n  fetchFirstRules = (query?: T.RawQuery) => {\n    this.setState({ loading: true });\n    this.makeFetchRequest(query).then(({ actives, facets, paging, rules }) => {\n      if (this.mounted) {\n        const openRule = this.getOpenRule(this.props, rules);\n        const usingPermalink = hasRuleKey(this.props.location.query);\n        const selected = rules.length > 0 ? (openRule && openRule.key) || rules[0].key : undefined;\n        this.setState({\n          actives,\n          facets,\n          loading: false,\n          openRule,\n          paging,\n          rules,\n          selected,\n          usingPermalink\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreRules = () => {\n    const { paging } = this.state;\n    if (paging) {\n      this.setState({ loading: true });\n      const nextPage = paging.pageIndex + 1;\n      this.makeFetchRequest({ p: nextPage, facets: undefined }).then(\n        ({ actives, paging, rules }) => {\n          if (this.mounted) {\n            this.setState((state: State) => ({\n              actives: { ...state.actives, ...actives },\n              loading: false,\n              paging,\n              rules: [...state.rules, ...rules]\n            }));\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  fetchFacet = (facet: FacetKey) => {\n    this.makeFetchRequest({ ps: 1, facets: getServerFacet(facet) }).then(({ facets }) => {\n      if (this.mounted) {\n        this.setState(state => ({ facets: { ...state.facets, ...facets }, loading: false }));\n      }\n    }, this.stopLoading);\n  };\n\n  fetchQualityProfiles = () => {\n    const { currentUser, organization, userOrganizations } = this.props;\n    if (hasPrivateAccess(currentUser, organization, userOrganizations)) {\n      return searchQualityProfiles({ organization: organization && organization.key });\n    }\n    return { profiles: [] };\n  };\n\n  getSelectedIndex = ({ selected, rules } = this.state) => {\n    const index = rules.findIndex(rule => rule.key === selected);\n    return index !== -1 ? index : undefined;\n  };\n\n  selectNextRule = () => {\n    const { rules, loading, paging } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (selectedIndex !== undefined) {\n      if (\n        selectedIndex > rules.length - LIMIT_BEFORE_LOAD_MORE &&\n        !loading &&\n        paging &&\n        rules.length < paging.total\n      ) {\n        this.fetchMoreRules();\n      }\n      if (rules && selectedIndex < rules.length - 1) {\n        if (this.state.openRule) {\n          this.openRule(rules[selectedIndex + 1].key);\n        } else {\n          this.setState({ selected: rules[selectedIndex + 1].key });\n        }\n      }\n    }\n  };\n\n  selectPreviousRule = () => {\n    const { rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    if (rules && selectedIndex !== undefined && selectedIndex > 0) {\n      if (this.state.openRule) {\n        this.openRule(rules[selectedIndex - 1].key);\n      } else {\n        this.setState({ selected: rules[selectedIndex - 1].key });\n      }\n    }\n  };\n\n  getRulePath = (rule: string) => ({\n    pathname: this.props.location.pathname,\n    query: { ...serializeQuery(this.state.query), open: rule }\n  });\n\n  openRule = (rule: string) => {\n    const path = this.getRulePath(rule);\n    if (this.state.openRule) {\n      this.props.router.replace(path);\n    } else {\n      this.props.router.push(path);\n    }\n  };\n\n  openSelectedRule = () => {\n    const { selected } = this.state;\n    if (selected) {\n      this.openRule(selected);\n    }\n  };\n\n  closeRule = () => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: {\n        ...serializeQuery(this.state.query),\n        open: undefined\n      }\n    });\n    this.scrollToSelectedRule(false);\n  };\n\n  scrollToSelectedRule = (smooth = true) => {\n    const { selected } = this.state;\n    if (selected) {\n      const element = document.querySelector(`[data-rule=\"${selected}\"]`);\n      if (element) {\n        scrollToElement(element, { topOffset: 150, bottomOffset: 100, smooth });\n      }\n    }\n  };\n\n  getRuleActivation = (rule: string) => {\n    const { actives, query } = this.state;\n    if (actives && actives[rule] && query.profile) {\n      return actives[rule][query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  getSelectedProfile = () => {\n    const { query, referencedProfiles } = this.state;\n    if (query.profile) {\n      return referencedProfiles[query.profile];\n    } else {\n      return undefined;\n    }\n  };\n\n  closeFacet = (facet: string) =>\n    this.setState(state => ({\n      openFacets: { ...state.openFacets, [facet]: false }\n    }));\n\n  handleRuleOpen = (ruleKey: string) => {\n    this.props.router.push(this.getRulePath(ruleKey));\n  };\n\n  handleBack = (event?: React.SyntheticEvent<HTMLAnchorElement>) => {\n    const { usingPermalink } = this.state;\n\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n\n    if (usingPermalink) {\n      this.handleReset();\n    } else {\n      this.closeRule();\n    }\n  };\n\n  handleFilterChange = (changes: Partial<Query>) => {\n    this.props.router.push({\n      pathname: this.props.location.pathname,\n      query: serializeQuery({ ...this.state.query, ...changes })\n    });\n\n    this.setState(({ openFacets }) => ({\n      openFacets: {\n        ...openFacets,\n        sonarsourceSecurity: shouldOpenSonarSourceSecurityFacet(openFacets, changes),\n        standards: shouldOpenStandardsFacet(openFacets, changes)\n      }\n    }));\n  };\n\n  handleFacetToggle = (property: string) => {\n    this.setState(state => {\n      const willOpenProperty = !state.openFacets[property];\n      const newState = {\n        loading: state.loading,\n        openFacets: { ...state.openFacets, [property]: willOpenProperty }\n      };\n\n      // Try to open sonarsource security \"subfacet\" by default if the standard facet is open\n      if (willOpenProperty && property === STANDARDS) {\n        newState.openFacets.sonarsourceSecurity = shouldOpenSonarSourceSecurityFacet(\n          newState.openFacets,\n          state.query\n        );\n        // Force loading of sonarsource security facet data\n        property = newState.openFacets.sonarsourceSecurity ? 'sonarsourceSecurity' : property;\n      }\n\n      if (shouldRequestFacet(property) && (!state.facets || !state.facets[property])) {\n        newState.loading = true;\n        this.fetchFacet(property);\n      }\n\n      return newState;\n    });\n  };\n\n  handleReload = () => this.fetchFirstRules();\n\n  handleReset = () => this.props.router.push({ pathname: this.props.location.pathname });\n\n  /** Tries to take rule by index, or takes the last one  */\n  pickRuleAround = (rules: T.Rule[], selectedIndex: number | undefined) => {\n    if (selectedIndex === undefined || rules.length === 0) {\n      return undefined;\n    }\n    if (selectedIndex >= 0 && selectedIndex < rules.length) {\n      return rules[selectedIndex].key;\n    }\n    return rules[rules.length - 1].key;\n  };\n\n  handleRuleDelete = (ruleKey: string) => {\n    if (this.state.query.ruleKey === ruleKey) {\n      this.handleReset();\n    } else {\n      this.setState(state => {\n        const rules = state.rules.filter(rule => rule.key !== ruleKey);\n        const selectedIndex = this.getSelectedIndex(state);\n        const selected = this.pickRuleAround(rules, selectedIndex);\n        return { rules, selected };\n      });\n      this.closeRule();\n    }\n  };\n\n  handleRuleActivate = (profile: string, rule: string, activation: Activation) =>\n    this.setState((state: State) => {\n      const { actives = {} } = state;\n      if (!actives[rule]) {\n        return { actives: { ...actives, [rule]: { [profile]: activation } } };\n      }\n\n      return { actives: { ...actives, [rule]: { ...actives[rule], [profile]: activation } } };\n    });\n\n  handleRuleDeactivate = (profile: string, rule: string) =>\n    this.setState(state => {\n      const { actives } = state;\n      if (actives && actives[rule]) {\n        const newRule = { ...actives[rule] };\n        delete newRule[profile];\n        return { actives: { ...actives, [rule]: newRule } };\n      }\n      return null;\n    });\n\n  handleSearch = (searchQuery: string) => this.handleFilterChange({ searchQuery });\n\n  isFiltered = () => Object.keys(serializeQuery(this.state.query)).length > 0;\n\n  renderBulkButton = () => {\n    const { currentUser, languages } = this.props;\n    const { canWrite, paging, query, referencedProfiles } = this.state;\n    const organization = this.props.organization && this.props.organization.key;\n\n    if (!isLoggedIn(currentUser) || (isSonarCloud() && !organization) || !canWrite) {\n      return null;\n    }\n\n    return (\n      paging && (\n        <BulkChange\n          languages={languages}\n          organization={organization}\n          query={query}\n          referencedProfiles={referencedProfiles}\n          total={paging.total}\n        />\n      )\n    );\n  };\n\n  render() {\n    const { paging, rules } = this.state;\n    const selectedIndex = this.getSelectedIndex();\n    const organization = this.props.organization && this.props.organization.key;\n    const hideQualityProfiles = !hasPrivateAccess(\n      this.props.currentUser,\n      this.props.organization,\n      this.props.userOrganizations\n    );\n\n    return (\n      <>\n        <Suggestions suggestions=\"coding_rules\" />\n        <Helmet defer={false} title={translate('coding_rules.page')}>\n          <meta content=\"noindex\" name=\"robots\" />\n        </Helmet>\n        <div className=\"layout-page\" id=\"coding-rules-page\">\n          <ScreenPositionHelper className=\"layout-page-side-outer\">\n            {({ top }) => (\n              <div className=\"layout-page-side\" style={{ top }}>\n                <div className=\"layout-page-side-inner\">\n                  <div className=\"layout-page-filters\">\n                    <A11ySkipTarget\n                      anchor=\"rules_filters\"\n                      label={translate('coding_rules.skip_to_filters')}\n                      weight={10}\n                    />\n                    <FiltersHeader displayReset={this.isFiltered()} onReset={this.handleReset} />\n                    <SearchBox\n                      className=\"spacer-bottom\"\n                      id=\"coding-rules-search\"\n                      minLength={2}\n                      onChange={this.handleSearch}\n                      placeholder={translate('search.search_for_rules')}\n                      value={this.state.query.searchQuery || ''}\n                    />\n                    <FacetsList\n                      facets={this.state.facets}\n                      hideProfileFacet={hideQualityProfiles}\n                      onFacetToggle={this.handleFacetToggle}\n                      onFilterChange={this.handleFilterChange}\n                      openFacets={this.state.openFacets}\n                      organization={organization}\n                      organizationsEnabled={this.props.appState.organizationsEnabled}\n                      query={this.state.query}\n                      referencedProfiles={this.state.referencedProfiles}\n                      referencedRepositories={this.state.referencedRepositories}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </ScreenPositionHelper>\n\n          <div className=\"layout-page-main\">\n            <div className=\"layout-page-header-panel layout-page-main-header\">\n              <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n                <div className=\"layout-page-main-inner\">\n                  <A11ySkipTarget anchor=\"rules_main\" />\n                  {this.state.openRule ? (\n                    <a\n                      className=\"js-back display-inline-flex-center link-no-underline\"\n                      href=\"#\"\n                      onClick={this.handleBack}>\n                      <BackIcon className=\"spacer-right\" />\n                      {this.state.usingPermalink\n                        ? translate('coding_rules.see_all')\n                        : translate('coding_rules.return_to_list')}\n                    </a>\n                  ) : (\n                    this.renderBulkButton()\n                  )}\n                  {!this.state.usingPermalink && (\n                    <PageActions\n                      loading={this.state.loading}\n                      onReload={this.handleReload}\n                      paging={paging}\n                      selectedIndex={selectedIndex}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"layout-page-main-inner\">\n              {this.state.openRule ? (\n                <RuleDetails\n                  allowCustomRules={!this.props.appState.organizationsEnabled}\n                  canWrite={this.state.canWrite}\n                  hideQualityProfiles={hideQualityProfiles}\n                  onActivate={this.handleRuleActivate}\n                  onDeactivate={this.handleRuleDeactivate}\n                  onDelete={this.handleRuleDelete}\n                  onFilterChange={this.handleFilterChange}\n                  organization={organization}\n                  referencedProfiles={this.state.referencedProfiles}\n                  referencedRepositories={this.state.referencedRepositories}\n                  ruleKey={this.state.openRule.key}\n                  selectedProfile={this.getSelectedProfile()}\n                />\n              ) : (\n                <>\n                  {rules.map(rule => (\n                    <RuleListItem\n                      activation={this.getRuleActivation(rule.key)}\n                      canWrite={this.state.canWrite}\n                      isLoggedIn={isLoggedIn(this.props.currentUser)}\n                      key={rule.key}\n                      onActivate={this.handleRuleActivate}\n                      onDeactivate={this.handleRuleDeactivate}\n                      onFilterChange={this.handleFilterChange}\n                      onOpen={this.handleRuleOpen}\n                      organization={organization}\n                      rule={rule}\n                      selected={rule.key === this.state.selected}\n                      selectedProfile={this.getSelectedProfile()}\n                    />\n                  ))}\n                  {paging !== undefined && (\n                    <ListFooter\n                      count={rules.length}\n                      loadMore={this.fetchMoreRules}\n                      ready={!this.state.loading}\n                      total={paging.total}\n                    />\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nfunction parseActives(rawActives: T.Dict<T.RuleActivation[]>) {\n  const actives: Actives = {};\n  for (const [rule, activations] of Object.entries(rawActives)) {\n    actives[rule] = {};\n    for (const { inherit, qProfile, severity } of activations) {\n      actives[rule][qProfile] = { inherit, severity };\n    }\n  }\n  return actives;\n}\n\nfunction parseFacets(rawFacets: { property: string; values: { count: number; val: string }[] }[]) {\n  const facets: Facets = {};\n  for (const rawFacet of rawFacets) {\n    const values: T.Dict<number> = {};\n    for (const rawValue of rawFacet.values) {\n      values[rawValue.val] = rawValue.count;\n    }\n    facets[getAppFacet(rawFacet.property)] = values;\n  }\n  return facets;\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state),\n  languages: getLanguages(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nexport default withRouter(connect(mapStateToProps)(App));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport { csvEscape } from 'sonar-ui-common/helpers/csv';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { Exporter, ProfileChangelogEvent } from '../apps/quality-profiles/types';\n\nexport interface ProfileActions {\n  associateProjects?: boolean;\n  copy?: boolean;\n  delete?: boolean;\n  edit?: boolean;\n  setAsDefault?: boolean;\n}\n\nexport interface Actions {\n  create?: boolean;\n}\n\nexport interface Profile {\n  actions?: ProfileActions;\n  key: string;\n  name: string;\n  language: string;\n  languageName: string;\n  isInherited?: boolean;\n  parentKey?: string;\n  parentName?: string;\n  isDefault?: boolean;\n  activeRuleCount: number;\n  activeDeprecatedRuleCount: number;\n  rulesUpdatedAt?: string;\n  lastUsed?: string;\n  userUpdatedAt?: string;\n  organization: string;\n  isBuiltIn?: boolean;\n  projectCount?: number;\n}\n\nexport interface SearchQualityProfilesParameters {\n  defaults?: boolean;\n  language?: string;\n  organization?: string;\n  project?: string;\n  qualityProfile?: string;\n}\n\nexport interface SearchQualityProfilesResponse {\n  actions?: Actions;\n  profiles: Profile[];\n}\n\nexport function searchQualityProfiles(\n  parameters: SearchQualityProfilesParameters\n): Promise<SearchQualityProfilesResponse> {\n  return getJSON('/api/qualityprofiles/search', parameters).catch(throwGlobalError);\n}\n\nexport function getQualityProfile({\n  compareToSonarWay,\n  profile: { key }\n}: {\n  compareToSonarWay?: boolean;\n  profile: Profile;\n}): Promise<any> {\n  return getJSON('/api/qualityprofiles/show', { compareToSonarWay, key });\n}\n\nexport function createQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/create', data).catch(throwGlobalError);\n}\n\nexport function restoreQualityProfile(data: RequestData): Promise<any> {\n  return postJSON('/api/qualityprofiles/restore', data).catch(throwGlobalError);\n}\n\nexport interface ProfileProject {\n  id: number;\n  key: string;\n  name: string;\n  selected: boolean;\n}\n\nexport function getProfileProjects(\n  data: RequestData\n): Promise<{ more: boolean; paging: T.Paging; results: ProfileProject[] }> {\n  return getJSON('/api/qualityprofiles/projects', data).catch(throwGlobalError);\n}\n\nexport function getProfileInheritance({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile): Promise<{\n  ancestors: T.ProfileInheritanceDetails[];\n  children: T.ProfileInheritanceDetails[];\n  profile: T.ProfileInheritanceDetails;\n}> {\n  return getJSON('/api/qualityprofiles/inheritance', {\n    language,\n    qualityProfile,\n    organization\n  }).catch(throwGlobalError);\n}\n\nexport function setDefaultProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/set_default', {\n    language,\n    qualityProfile,\n    organization\n  });\n}\n\nexport function renameProfile(key: string, name: string) {\n  return post('/api/qualityprofiles/rename', { key, name }).catch(throwGlobalError);\n}\n\nexport function copyProfile(fromKey: string, toName: string): Promise<any> {\n  return postJSON('/api/qualityprofiles/copy', { fromKey, toName }).catch(throwGlobalError);\n}\n\nexport function deleteProfile({ language, name: qualityProfile, organization }: Profile) {\n  return post('/api/qualityprofiles/delete', { language, qualityProfile, organization }).catch(\n    throwGlobalError\n  );\n}\n\nexport function changeProfileParent(\n  { language, name: qualityProfile, organization }: Profile,\n  parentProfile?: Profile\n) {\n  return post('/api/qualityprofiles/change_parent', {\n    language,\n    qualityProfile,\n    organization,\n    parentQualityProfile: parentProfile ? parentProfile.name : undefined\n  }).catch(throwGlobalError);\n}\n\nexport function getQualityProfileBackupUrl({\n  language,\n  name: qualityProfile,\n  organization\n}: Profile) {\n  const queryParams = Object.entries({ language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/backup?${queryParams}`;\n}\n\nexport function getQualityProfileExporterUrl(\n  { key: exporterKey }: Exporter,\n  { language, name: qualityProfile, organization }: Profile\n) {\n  const queryParams = Object.entries({ exporterKey, language, qualityProfile, organization })\n    .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n    .join('&');\n  return `/api/qualityprofiles/export?${queryParams}`;\n}\n\nexport function getImporters(): Promise<\n  Array<{ key: string; languages: Array<string>; name: string }>\n> {\n  return getJSON('/api/qualityprofiles/importers').then(r => r.importers, throwGlobalError);\n}\n\nexport function getExporters(): Promise<any> {\n  return getJSON('/api/qualityprofiles/exporters').then(r => r.exporters);\n}\n\nexport function getProfileChangelog(\n  since: any,\n  to: any,\n  { language, name: qualityProfile, organization }: Profile,\n  page?: number\n): Promise<{\n  events: ProfileChangelogEvent[];\n  p: number;\n  ps: number;\n  total: number;\n}> {\n  return getJSON('/api/qualityprofiles/changelog', {\n    since,\n    to,\n    language,\n    qualityProfile,\n    organization,\n    p: page\n  });\n}\n\nexport interface CompareResponse {\n  left: { name: string };\n  right: { name: string };\n  inLeft: Array<{ key: string; name: string; severity: string }>;\n  inRight: Array<{ key: string; name: string; severity: string }>;\n  modified: Array<{\n    key: string;\n    name: string;\n    left: { params: T.Dict<string>; severity: string };\n    right: { params: T.Dict<string>; severity: string };\n  }>;\n}\n\nexport function compareProfiles(leftKey: string, rightKey: string): Promise<CompareResponse> {\n  return getJSON('/api/qualityprofiles/compare', { leftKey, rightKey });\n}\n\nexport function associateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/add_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport function dissociateProject(\n  { language, name: qualityProfile, organization }: Profile,\n  project: string\n) {\n  return post('/api/qualityprofiles/remove_project', {\n    language,\n    qualityProfile,\n    organization,\n    project\n  }).catch(throwGlobalError);\n}\n\nexport interface SearchUsersGroupsParameters {\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n  q?: string;\n  selected?: 'all' | 'selected' | 'deselected';\n}\n\ninterface SearchUsersResponse {\n  users: T.UserSelected[];\n  paging: T.Paging;\n}\n\nexport function searchUsers(parameters: SearchUsersGroupsParameters): Promise<SearchUsersResponse> {\n  return getJSON('/api/qualityprofiles/search_users', parameters).catch(throwGlobalError);\n}\n\nexport interface SearchGroupsResponse {\n  groups: Array<{ name: string }>;\n  paging: T.Paging;\n}\n\nexport function searchGroups(\n  parameters: SearchUsersGroupsParameters\n): Promise<SearchGroupsResponse> {\n  return getJSON('/api/qualityprofiles/search_groups', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveUserParameters {\n  language: string;\n  login: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_user', parameters).catch(throwGlobalError);\n}\n\nexport function removeUser(parameters: AddRemoveUserParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_user', parameters).catch(throwGlobalError);\n}\n\nexport interface AddRemoveGroupParameters {\n  group: string;\n  language: string;\n  organization?: string;\n  qualityProfile: string;\n}\n\nexport function addGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/add_group', parameters).catch(throwGlobalError);\n}\n\nexport function removeGroup(parameters: AddRemoveGroupParameters): Promise<void | Response> {\n  return post('/api/qualityprofiles/remove_group', parameters).catch(throwGlobalError);\n}\n\nexport interface BulkActivateParameters {\n  activation?: boolean;\n  active_severities?: string;\n  asc?: boolean;\n  available_since?: string;\n  compareToProfile?: string;\n  inheritance?: string;\n  is_template?: string;\n  languages?: string;\n  organization: string | undefined;\n  q?: string;\n  qprofile?: string;\n  repositories?: string;\n  rule_key?: string;\n  s?: string;\n  severities?: string;\n  statuses?: string;\n  tags?: string;\n  targetKey: string;\n  targetSeverity?: string;\n  template_key?: string;\n  types?: string;\n}\n\nexport function bulkActivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/activate_rules', data);\n}\n\nexport function bulkDeactivateRules(data: BulkActivateParameters) {\n  return postJSON('/api/qualityprofiles/deactivate_rules', data);\n}\n\nexport function activateRule(data: {\n  key: string;\n  organization: string | undefined;\n  params?: T.Dict<string>;\n  reset?: boolean;\n  rule: string;\n  severity?: string;\n}) {\n  const params =\n    data.params && map(data.params, (value, key) => `${key}=${csvEscape(value)}`).join(';');\n  return post('/api/qualityprofiles/activate_rule', { ...data, params }).catch(throwGlobalError);\n}\n\nexport function deactivateRule(data: {\n  key: string;\n  organization: string | undefined;\n  rule: string;\n}) {\n  return post('/api/qualityprofiles/deactivate_rule', data).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface GetRulesAppResponse {\n  canWrite?: boolean;\n  repositories: { key: string; language: string; name: string }[];\n}\n\nexport function getRulesApp(data: {\n  organization: string | undefined;\n}): Promise<GetRulesAppResponse> {\n  return getJSON('/api/rules/app', data).catch(throwGlobalError);\n}\n\nexport interface SearchRulesResponse {\n  actives?: T.Dict<T.RuleActivation[]>;\n  facets?: { property: string; values: { count: number; val: string }[] }[];\n  p: number;\n  ps: number;\n  rules: T.Rule[];\n  total: number;\n}\n\nexport function searchRules(data: {\n  organization: string | undefined;\n  [x: string]: any;\n}): Promise<SearchRulesResponse> {\n  return getJSON('/api/rules/search', data).catch(throwGlobalError);\n}\n\nexport function takeFacet(response: any, property: string) {\n  const facet = response.facets.find((facet: any) => facet.property === property);\n  return facet ? facet.values : [];\n}\n\nexport function getRuleDetails(parameters: {\n  actives?: boolean;\n  key: string;\n  organization: string | undefined;\n}): Promise<{ actives?: T.RuleActivation[]; rule: T.RuleDetails }> {\n  return getJSON('/api/rules/show', parameters).catch(throwGlobalError);\n}\n\nexport function getRuleTags(parameters: {\n  organization: string | undefined;\n  ps?: number;\n  q: string;\n}): Promise<string[]> {\n  return getJSON('/api/rules/tags', parameters).then(r => r.tags, throwGlobalError);\n}\n\nexport function createRule(data: {\n  custom_key: string;\n  markdown_description: string;\n  name: string;\n  organization: string | undefined;\n  params?: string;\n  prevent_reactivation?: boolean;\n  severity?: string;\n  status?: string;\n  template_key: string;\n  type?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/create', data).then(\n    r => r.rule,\n    response => {\n      // do not show global error if the status code is 409\n      // this case should be handled inside a component\n      if (response && response.status === 409) {\n        return Promise.reject(response);\n      } else {\n        return throwGlobalError(response);\n      }\n    }\n  );\n}\n\nexport function deleteRule(parameters: { key: string; organization: string | undefined }) {\n  return post('/api/rules/delete', parameters).catch(throwGlobalError);\n}\n\nexport function updateRule(data: {\n  key: string;\n  markdown_description?: string;\n  markdown_note?: string;\n  name?: string;\n  organization: string | undefined;\n  params?: string;\n  remediation_fn_base_effort?: string;\n  remediation_fn_type?: string;\n  remediation_fy_gap_multiplier?: string;\n  severity?: string;\n  status?: string;\n  tags?: string;\n}): Promise<T.RuleDetails> {\n  return postJSON('/api/rules/update', data).then(r => r.rule, throwGlobalError);\n}\n"],"sourceRoot":""}