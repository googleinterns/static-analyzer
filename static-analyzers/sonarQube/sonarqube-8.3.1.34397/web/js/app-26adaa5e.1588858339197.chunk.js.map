{"version":3,"sources":["webpack:///./src/main/js/components/common/OrganizationAvatar.tsx","webpack:///./src/main/js/components/ui/OrganizationLink.tsx","webpack:///./src/main/js/apps/settings/store/values.ts","webpack:///./src/main/js/apps/projects/components/AllProjectsContainer.tsx","webpack:///./src/main/js/apps/account/organizations/actions.ts","webpack:///./src/main/js/helpers/editions.ts","webpack:///./src/main/js/app/components/RecentHistory.ts","webpack:///./src/main/js/apps/coding-rules/query.ts","webpack:///./src/main/js/apps/settings/store/settingsPage.ts","webpack:///./src/main/js/components/SourceViewer/helpers/getCoverageStatus.ts","webpack:///./src/main/js/apps/projects/query.ts","webpack:///./src/main/js/app/components/GlobalMessagesContainer.tsx","webpack:///./src/main/js/app/components/OnboardingContext.tsx","webpack:///./src/main/js/components/ui/OrganizationListItem.tsx","webpack:///./src/main/js/apps/issues/components/AppContainer.tsx","webpack:///./src/main/js/apps/settings/store/definitions.ts","webpack:///./src/main/js/helpers/qualityGates.ts","webpack:///./src/main/js/app/components/search/utils.ts","webpack:///./src/main/js/components/workspace/WorkspacePortal.tsx","webpack:///./src/main/js/components/workspace/Workspace.tsx","webpack:///./src/main/js/app/components/a11y/A11yProvider.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsProvider.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/EmbedDocsPopupHelper.tsx","webpack:///./src/main/js/app/components/search/Search.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavBranding.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavExplore.tsx","webpack:///./src/main/js/app/components/StartupModal.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavMenu.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavUser.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNavUserContainer.tsx","webpack:///./src/main/js/app/components/nav/global/GlobalNav.tsx","webpack:///./src/main/js/app/components/GlobalContainer.tsx","webpack:///./src/main/js/apps/settings/store/rootReducer.ts","webpack:///./src/main/js/components/workspace/styles.css?fbff","webpack:///./src/main/js/components/workspace/styles.css","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css?0925","webpack:///./src/main/js/app/components/a11y/A11ySkipLinks.css","webpack:///./src/main/js/app/components/search/Search.css?68ff","webpack:///./src/main/js/app/components/search/Search.css","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css?9f79","webpack:///./src/main/js/app/components/nav/global/GlobalNav.css","webpack:///./src/main/js/components/common/OrganizationAvatar.css?7318","webpack:///./src/main/js/components/common/OrganizationAvatar.css","webpack:///./src/main/js/apps/about/routes.ts","webpack:///./src/main/js/apps/account/routes.ts","webpack:///./src/main/js/apps/background-tasks/routes.ts","webpack:///./src/main/js/apps/code/routes.ts","webpack:///./src/main/js/apps/coding-rules/routes.ts","webpack:///./src/main/js/apps/component-measures/routes.ts","webpack:///./src/main/js/apps/custom-measures/routes.ts","webpack:///./src/main/js/apps/custom-metrics/routes.ts","webpack:///./src/main/js/apps/documentation/routes.ts","webpack:///./src/main/js/apps/explore/Explore.tsx","webpack:///./src/main/js/apps/explore/ExploreIssues.tsx","webpack:///./src/main/js/apps/explore/ExploreProjects.tsx","webpack:///./src/main/js/apps/groups/routes.ts","webpack:///./src/main/js/apps/maintenance/routes.tsx","webpack:///./src/main/js/apps/marketplace/routes.ts","webpack:///./src/main/js/apps/quality-gates/routes.ts","webpack:///./src/main/js/apps/quality-profiles/routes.ts","webpack:///./src/main/js/apps/webhooks/routes.ts","webpack:///./src/main/js/apps/organizations/routes.ts","webpack:///./src/main/js/apps/overview/routes.ts","webpack:///./src/main/js/apps/permission-templates/routes.ts","webpack:///./src/main/js/apps/permissions/routes.ts","webpack:///./src/main/js/apps/portfolio/routes.ts","webpack:///./src/main/js/apps/projectActivity/routes.ts","webpack:///./src/main/js/apps/projectBaseline/routes.ts","webpack:///./src/main/js/apps/projectBranches/routes.ts","webpack:///./src/main/js/apps/projectQualityGate/routes.ts","webpack:///./src/main/js/apps/projectQualityProfiles/routes.ts","webpack:///./src/main/js/apps/projects/components/DefaultPageSelector.tsx","webpack:///./src/main/js/apps/projects/components/DefaultPageSelectorContainer.tsx","webpack:///./src/main/js/apps/projects/routes.ts","webpack:///./src/main/js/apps/projects/components/FavoriteProjectsContainer.tsx","webpack:///./src/main/js/apps/projectsManagement/routes.ts","webpack:///./src/main/js/apps/sessions/routes.ts","webpack:///./src/main/js/apps/settings/routes.ts","webpack:///./src/main/js/apps/system/routes.ts","webpack:///./src/main/js/apps/tutorials/routes.ts","webpack:///./src/main/js/apps/users/routes.ts","webpack:///./src/main/js/apps/web-api/routes.ts","webpack:///./src/main/js/app/components/App.tsx","webpack:///./src/main/js/app/components/MigrationContainer.tsx","webpack:///./src/main/js/app/utils/startReactApp.tsx","webpack:///./src/main/js/helpers/urls.ts","webpack:///./src/main/js/app/utils/throwGlobalError.ts","webpack:///./src/main/js/helpers/branch-like.ts","webpack:///./src/main/js/app/theme.js","webpack:///./src/main/js/helpers/users.ts","webpack:///./src/main/js/helpers/measures.ts","webpack:///./src/main/js/app/components/embed-docs-modal/SuggestionsContext.ts","webpack:///./src/main/js/components/hoc/withRouter.tsx","webpack:///./src/main/js/components/ui/Avatar.tsx","webpack:///./src/main/js/app/utils/getStore.ts","webpack:///./src/main/js/app/components/a11y/A11yContext.tsx","webpack:///./src/main/js/components/common/InstanceMessage.tsx","webpack:///./src/main/js/apps/issues/utils.ts","webpack:///./src/main/js/helpers/constants.ts","webpack:///./src/main/js/apps/quality-profiles/utils.ts","webpack:///./src/main/js/app/components/GlobalFooterBranding.tsx","webpack:///./src/main/js/app/components/GlobalFooterSonarCloud.tsx","webpack:///./src/main/js/app/components/GlobalFooterContainer.tsx","webpack:///./src/main/js/app/components/GlobalFooter.tsx","webpack:///./src/main/js/apps/settings/utils.ts","webpack:///./src/main/js/apps/projects/utils.ts","webpack:///./src/main/js/helpers/issues.ts","webpack:///./src/main/js/components/workspace/context.ts"],"names":["state","imgLoadError","handleImgError","setState","render","className","organization","small","avatar","alt","name","onError","this","src","size","OrganizationLink","props","children","to","key","other","Actions","receiveValues","settings","component","type","getValue","components","global","action","settingsByKey","SetAppState","Object","keys","appState","forEach","value","currentUser","qualifiers","fetchMyOrganizations","dispatch","member","then","organizations","fetchIfAnyoneCanCreateOrganizations","values","EDITIONS","community","homeUrl","downloadProperty","developer","enterprise","datacenter","getEdition","editionKey","getAllEditionsAbove","currentEdition","editions","currentEditionIdx","findIndex","edition","slice","getEditionUrl","data","url","query","getEditionDownloadUrl","lastUpgrade","downloadUrl","getEditionDownloadFilename","replace","get","history","JSON","parse","set","newHistory","stringify","clear","add","componentKey","componentName","icon","sonarHistory","RecentHistory","newEntry","filter","entry","unshift","remove","parseQuery","activation","activationSeverities","active_severities","availableSince","available_since","compareToProfile","cwe","inheritance","parseAsInheritance","languages","owaspTop10","profile","qprofile","repositories","ruleKey","rule_key","sansTop25","searchQuery","q","severities","sonarsourceSecurity","statuses","tags","template","is_template","types","serializeQuery","areQueriesEqual","a","b","shouldRequestFacet","facet","includes","getServerFacet","getAppFacet","serverFacet","getOpen","open","hasRuleKey","Boolean","cancelChange","CancelChange","changeValue","ChangeValue","failValidation","message","FailValidation","passValidation","PassValidation","startLoading","StartLoading","stopLoading","StopLoading","getChangedValue","changedValues","getValidationMessage","validationMessages","isLoading","loading","getCoverageStatus","s","status","lineHits","conditions","coveredConditions","parseUrlQuery","urlQuery","gate","getAsLevel","reliability","getAsNumericRating","new_reliability","security","new_security","security_review_rating","new_security_review_rating","maintainability","new_maintainability","coverage","new_coverage","duplications","new_duplications","new_lines","getAsStringArray","qualifier","undefined","search","getAsString","sort","view","getView","visualization","getVisualization","convertToFilter","isFavorite","push","mapPropertyToMetric","property","pushMetricToArray","convertCoverage","convertDuplications","convertSize","convertArrayMetric","join","visualizationParams","hasFilterParams","some","hasVisualizationParams","isNaN","num","Number","split","convertIssuesRating","metric","rating","analysis_date","conditionsArray","convertFunction","items","Array","isArray","length","mapDispatchToProps","closeGlobalMessage","messages","OnboardingContext","OrganizationListItem","actions","admin","IssuesAppContainer","fetchBranchStatus","fetchIssues","requestOrganizations","getState","organizationsEnabled","additionalFields","response","parsedIssues","issues","map","issue","users","rules","organizationKeys","Promise","resolve","fetchIssueOrganizations","catch","userOrganizations","receiveDefinitions","definitions","ReceiveDefinitions","getDefinition","getAllDefinitions","getDefinitionsForCategory","category","definition","toLowerCase","getAllCategories","getDefaultCategory","categories","extractStatusConditionsFromProjectStatus","projectStatus","c","actual","actualValue","error","errorThreshold","level","metricKey","op","comparator","period","periodIndex","extractStatusConditionsFromApplicationStatusChildProject","ORDER","sortQualifiers","indexOf","el","document","createElement","classList","componentDidMount","body","appendChild","componentWillUnmount","removeChild","WorkspaceNav","lazyLoadComponent","WorkspaceRuleViewer","WorkspaceComponentViewer","mounted","loadWorkspace","x","saveWorkspace","openComponent","reopenComponent","openRule","rule","reopenRule","closeComponent","closeRule","handleComponentLoad","details","handleRuleLoad","collapse","maximize","maximized","minimize","resize","deltaY","minHeight","window","innerHeight","maxHeight","height","Math","min","max","componentDidUpdate","_","prevState","find","Provider","onComponentClose","onComponentOpen","onRuleClose","onRuleOpen","onClose","onCollapse","onLoad","onMaximize","onMinimize","onResize","links","addA11ySkipLink","link","weight","removeA11ySkipLink","l","A11yContext","Consumer","href","suggestions","fetchSuggestions","jsonList","suggestion","scope","addSuggestions","newKey","removeSuggestions","oldKey","SuggestionsContext","EmbedDocsPopup","helpOpen","onKeyPress","event","tagName","code","keyCode","which","toggleHelp","setHelpDisplay","handleClick","closeHelp","addEventListener","removeEventListener","onRequestClose","overlay","onClick","title","SearchResults","SearchResult","focusInput","input","focus","handleClickOutside","closeSearch","handleFocus","documentElement","click","openSearch","blur","more","projects","results","selected","shortQuery","getPlainComponentsList","reduce","next","findFile","findInResults","r","file","test","recentlyBrowsed","group","item","warning","searchMore","loadingMore","handleQueryChange","selectPrevious","list","index","selectNext","openSelected","startsWith","substr","router","project","scrollToSelected","node","nodes","topOffset","bottomOffset","parent","handleKeyDown","preventDefault","handleSelect","innerRef","searchInputRef","renderResult","onSelect","renderNoResults","componentWillUpdate","_prevProps","autoFocus","minLength","onChange","onFocus","onKeyDown","placeholder","Dropdown","noPadding","ref","allowMore","onMoreClick","defaultMessage","id","shortcut","onClickOutside","GlobalNavBranding","customLogoUrl","customLogoWidth","width","SonarCloudNavBranding","GlobalNavExplore","active","location","pathname","ModalKey","renderGlobalPageLink","renderProjects","renderPortfolios","activeClassName","renderIssuesLink","resolved","isLoggedIn","myIssues","renderRulesLink","renderProfilesLink","renderQualityGatesLink","renderAdministrationLink","canAdmin","renderMore","globalPages","withoutPortfolios","page","onToggleClick","governanceInstalled","handleLogin","returnTo","encodeURIComponent","hash","handleLogout","renderAuthenticated","hasOrganizations","email","role","org","Avatar","globalNavContentHeightRaw","renderAnonymous","withRouter","GlobalNavPlus","NotificationsSidebar","NavLatestNotification","loadingNews","loadingMoreNews","news","notificationSidebar","fetchFeatureNews","accessToken","newsRef","ps","paging","newsPaging","fetchMoreFeatureNews","p","pageIndex","handleOpenNotificationSidebar","handleCloseNotificationSidebar","lastNews","readDate","publicationDate","getTime","Date","now","setCurrentUserSetting","toString","globalNavHeightRaw","notificationsLastReadDate","notificationsOptOut","openProjectOnboarding","GlobalNavUserContainer","OnboardingModal","LicensePromptModal","LICENSE_PROMPT","closeOnboarding","modal","license","skipOnboarding","closeLicense","openOnboarding","onboarding","tab","alm","tryAutoOpenLicense","hasLicenseManager","lastPrompt","login","isValidEdition","reject","tryAutoOpenOnboarding","showOnboardingTutorial","path","onOpenProjectOnboarding","GlobalContainer","footer","GlobalMessagesContainer","getSettingsForCategory","settingsPage","globalMessages","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","indexRoute","childRoutes","onEnter","nextState","part","tokens","decodeURIComponent","parseHash","normalizedQuery","params","domainName","graph","custom_metrics","Explore","contextNavHeightRaw","ExploreIssues","AppContainer","hideAuthorFacet","multiOrganizations","ExploreProjects","AllProjectsContainer","storageOptionsSuffix","maintenanceRoutes","setupRoutes","OrganizationContainer","organizationKey","globalPermissionsRoutes","projectPermissionsRoutes","isFavoriteSet","isAllSet","defineIfShouldBeRedirected","prevProps","shouldBeRedirected","shouldForceSorting","total","DefaultPageSelectorContainer","PageTracker","setScrollbarWidth","outer","style","visibility","msOverflowStyle","widthNoScroll","offsetWidth","overflow","inner","widthWithScroll","parentNode","setProperty","renderPreconnectLink","parser","gravatarServerUrl","hostname","origin","rel","fetchLanguages","enableGravatar","return_to","handleUpdate","scrollTo","RouteWithChildRoutes","startReactApp","lang","getElementById","store","getStore","defaultLocale","locale","theme","onUpdate","from","assignedToMe","getProjectUrl","branch","getPortfolioUrl","getPortfolioAdminUrl","getComponentBackgroundTaskUrl","getBranchLikeUrl","branchLike","getPullRequestUrl","getBranchUrl","pullRequest","getIssuesUrl","getComponentIssuesUrl","getComponentSecurityHotspotsUrl","sinceLeakPeriod","hotspots","getComponentDrilldownUrl","selectionKey","treemapView","listView","getComponentDrilldownUrlWithSelection","getMeasureTreemapUrl","getActivityUrl","getMeasureHistoryUrl","getComponentPermissionsUrl","getQualityProfileUrl","language","getQualityGateUrl","getQualityGatesUrl","getRulesUrl","getDeprecatedActiveRulesUrl","getRuleUrl","getMarkdownHelpUrl","getCodeUrl","line","getOrganizationUrl","getHomePageUrl","homepage","throwGlobalError","param","Response","console","warn","isBranch","isMain","isMainBranch","sortBranches","branches","isPullRequest","sortPullRequests","pullRequests","pr","getPullRequestDisplayName","getBranchLikeDisplayName","getBranchLikeKey","isSameBranchLike","getBrancheLikesAsTree","branchLikes","mainBranch","parentlessPullRequests","isOrphan","orphanPullRequests","tree","branchTree","getPullRequests","mainBranchTree","base","getBranchLikeQuery","fillBranchLike","colors","blue","veryLightBlue","lightBlue","darkBlue","veryDarkBlue","green","lightGreen","veryLightGreen","yellow","orange","red","purple","gray94","gray80","gray71","gray67","gray60","gray40","transparentWhite","transparentGray","disableGrayText","disableGrayBorder","disableGrayBg","barBackgroundColor","barBackgroundColorHighlight","barBorderColor","globalNavBarBg","rowHoverHighlight","baseFontColor","secondFontColor","mandatoryFieldColor","leakPrimaryColor","leakSecondaryColor","snippetFontColor","issueBgColor","hotspotBgColor","issueLocationSelected","issueLocationHighlighted","conciseIssueRed","conciseIssueRedSelected","lineCoverageRed","lineCoverageGreen","warningIconColor","alertBorderError","alertBackgroundError","alertTextError","alertIconError","alertBorderWarning","alertBackgroundWarning","alertTextWarning","alertIconWarning","alertBorderSuccess","alertBackgroundSuccess","alertTextSuccess","alertIconSuccess","alertBorderInfo","alertBackgroundInfo","alertTextInfo","alertIconInfo","badgeBlueBackground","badgeBlueColor","azure","bitbucket","github","codeBackground","sonarcloudOrange500","sonarcloudOrange600","sonarcloudOrange700","sonarcloudBlack100","sonarcloudBlack200","sonarcloudBlack250","sonarcloudBlack300","sonarcloudBlack500","sonarcloudBlack700","sonarcloudBlack800","sonarcloudBlack900","sonarcloudBlue500","sonarcloudBlue600","sonarcloudBlue900","sonarcloudBorderGray","sizes","gridSize","grid","baseFontSize","verySmallFontSize","smallFontSize","mediumFontSize","bigFontSize","hugeFontSize","giganticFontSize","hugeControlHeight","largeControlHeight","controlHeight","smallControlHeight","tinyControlHeight","globalNavHeight","globalNavContentHeight","maxPageWidth","minPageWidth","pagePadding","rawSizes","fonts","baseFontFamily","systemFontFamily","sonarcloudFontFamily","zIndexes","aboveNormalZIndex","normalZIndex","belowNormalZIndex","pageMainZIndex","pageSideZIndex","tooltipZIndex","dropdownMenuZIndex","processContainerZIndex","modalZIndex","modalOverlayZIndex","popupZIndex","others","defaultShadow","hasGlobalPermission","user","permission","permissions","isUserActive","maintainabilityRatingGrid","localizeMetric","getShortType","enhanceMeasuresWithMetrics","measures","metrics","measure","enhanceConditionWithMeasure","condition","m","periods","getPeriodValue","isPeriodBestValue","bestValue","isDiffMetric","getMaintainabilityRatingGrid","settingValue","numbers","getGlobalSettingValue","parseFloat","n","getRatingTooltip","ratingLetter","finalMetricKey","maintainabilityGrid","maintainabilityRatingThreshold","floor","getMaintainabilityRatingTooltip","getDisplayMetrics","hidden","findMeasure","WrappedComponent","String","createStore","InstanceMessage","transformedMessage","STANDARDS","STANDARD_TYPES","assigned","assignees","authors","createdAfter","createdAt","createdBefore","createdInLast","directories","files","fileUuids","modules","moduleUuids","resolutions","areMyIssuesSelected","mapFacet","parseFacets","facets","propertyMapping","result","val","count","finalProperty","formatFacetStat","stat","searchAssignees","isMySet","saveMyIssues","getLocations","selectedFlowIndex","flows","secondaryLocations","getSelectedLocation","selectedLocationIndex","locations","allLocationsEmpty","every","scrollToIssue","smooth","element","querySelector","shouldOpenStandardsFacet","openFacets","isFilteredBySecurityIssueTypes","isOneStandardChildFacetOpen","shouldOpenStandardsChildFacet","standardType","shouldOpenSonarSourceSecurityFacet","SEVERITIES","ISSUE_TYPES","RULE_TYPES","RULE_STATUSES","RATING_COLORS","sortProfiles","profiles","sorted","putProfile","depth","parentKey","childrenCount","child","isStagnant","rulesUpdatedAt","updateDate","getProfilesPath","getProfilesForLanguagePath","getProfilePath","getProfileComparePath","withKey","assign","getProfileChangelogPath","since","GlobalFooterBranding","official","target","GlobalFooterSonarCloud","productionDatabase","sonarqubeEdition","sonarqubeVersion","version","hideLoggedInInfo","Alert","display","variant","DEFAULT_CATEGORY","sanitizeTranslation","html","ALLOWED_TAGS","getPropertyName","getPropertyDescription","description","getCategoryName","getSubCategoryName","subCategory","getSubCategoryDescription","getUniqueName","indexSuffix","getSettingValue","fieldValues","isCategoryDefinition","multiValues","isEmptyValue","fields","getEmptyValue","field","isDefaultOrInherited","setting","inherited","getDefaultValue","parentFieldValues","parentValue","parentValues","defaultValue","PROJECTS_DEFAULT_FILTER","PROJECTS_FAVORITE","PROJECTS_ALL","SORTING_METRICS","SORTING_LEAK_METRICS","class","SORTING_SWITCH","VIEWS","label","VISUALIZATIONS","METRICS","alert_status","bugs","reliability_rating","vulnerabilities","security_rating","security_hotspots_reviewed","code_smells","sqale_rating","duplicated_lines_density","ncloc","ncloc_language_distribution","LEAK_METRICS","new_bugs","new_reliability_rating","new_vulnerabilities","new_security_rating","new_security_hotspots_reviewed","new_code_smells","new_maintainability_rating","new_duplicated_lines_density","METRICS_BY_VISUALIZATION","risk","sqale_index","reliability_remediation_effort","security_remediation_effort","complexity","uncovered_lines","duplicated_blocks","FACETS","LEAK_FACETS","REVERSED_FACETS","localizeSorting","parseSorting","desc","sortValue","sortDesc","fetchProjects","defaultData","propertyToMetricMap","asc","convertToSorting","convertToQueryData","defineFacets","f","all","fetchProjectMeasures","fetchProjectOrganizations","getFacetsMap","componentMeasures","o","projectKeys","defineMetrics","metricToPropertyMap","reverse","mapFacetValues","formatDuration","ms","years","months","days","hours","lastId","format","sortByType","injectRelational","source","baseField","lookupField","newFields","baseValue","candidate","charAt","toUpperCase","reverseLocations","parseIssueFromResponse","parsedFlows","flow","textRange","comments","comment","commentWithAuthor","author","injectCommentsRelational","prepareClosed","startLine","endLine","startOffset","endOffset","ensureTextRange","WorkspaceContext"],"mappings":"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","file":"js/app-26adaa5e.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport GenericAvatar from 'sonar-ui-common/components/ui/GenericAvatar';\nimport './OrganizationAvatar.css';\n\ninterface Props {\n  className?: string;\n  organization: Pick<T.OrganizationBase, 'avatar' | 'name'>;\n  small?: boolean;\n}\n\ninterface State {\n  imgLoadError: boolean;\n}\n\nexport default class OrganizationAvatar extends React.PureComponent<Props, State> {\n  state = { imgLoadError: false };\n\n  handleImgError = () => {\n    this.setState({ imgLoadError: true });\n  };\n\n  render() {\n    const { className, organization, small } = this.props;\n    const { imgLoadError } = this.state;\n    return (\n      <div\n        className={classNames(\n          'navbar-context-avatar',\n          'rounded',\n          { 'no-border': !organization.avatar, 'is-small': small },\n          className\n        )}>\n        {organization.avatar && !imgLoadError ? (\n          <img\n            alt={organization.name}\n            className=\"rounded\"\n            onError={this.handleImgError}\n            src={organization.avatar}\n          />\n        ) : (\n          <GenericAvatar name={organization.name} size={small ? 15 : 30} />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\n\ninterface Props {\n  children?: React.ReactNode;\n  organization: { key: string };\n  [x: string]: any;\n}\n\nexport default function OrganizationLink(props: Props) {\n  const { children, organization, ...other } = props;\n\n  return (\n    <Link to={`/organizations/${organization.key}`} {...other}>\n      {children}\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { Action as AppStateAction, Actions as AppStateActions } from '../../../store/appState';\nimport { ActionType } from '../../../store/utils/actions';\n\nenum Actions {\n  receiveValues = 'RECEIVE_VALUES'\n}\n\ntype Action = ActionType<typeof receiveValues, Actions.receiveValues>;\n\ntype SettingsState = T.Dict<T.SettingValue>;\n\nexport interface State {\n  components: T.Dict<SettingsState>;\n  global: SettingsState;\n}\n\nexport function receiveValues(\n  settings: Array<{ key: string; value?: string }>,\n  component?: string\n) {\n  return { type: Actions.receiveValues, settings, component };\n}\n\nfunction components(state: State['components'] = {}, action: Action) {\n  const { component: key } = action;\n  if (!key) {\n    return state;\n  }\n  if (action.type === Actions.receiveValues) {\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, [key]: { ...(state[key] || {}), ...settingsByKey } };\n  }\n  return state;\n}\n\nfunction global(state: State['components'] = {}, action: Action | AppStateAction) {\n  if (action.type === Actions.receiveValues) {\n    if (action.component) {\n      return state;\n    }\n    const settingsByKey = keyBy(action.settings, 'key');\n    return { ...state, ...settingsByKey };\n  }\n  if (action.type === AppStateActions.SetAppState) {\n    const settingsByKey: SettingsState = {};\n    Object.keys(action.appState.settings).forEach(\n      key => (settingsByKey[key] = { key, value: action.appState.settings[key] })\n    );\n    return { ...state, ...settingsByKey };\n  }\n  return state;\n}\n\nexport default combineReducers({ components, global });\n\nexport function getValue(\n  state: State,\n  key: string,\n  component?: string\n): T.SettingValue | undefined {\n  if (component) {\n    return state.components[component] && state.components[component][key];\n  }\n  return state.global[key];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { getAppState, getCurrentUser, Store } from '../../../store/rootReducer';\nimport { ComponentQualifier } from '../../../types/component';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state),\n  qualifiers: getAppState(state).qualifiers as ComponentQualifier[]\n});\n\nexport default connect(stateToProps)(lazyLoadComponent(() => import('./AllProjects')));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Dispatch } from 'redux';\nimport { getOrganizations } from '../../../api/organizations';\nimport { getValues } from '../../../api/settings';\nimport { receiveMyOrganizations } from '../../../store/organizations';\nimport { receiveValues } from '../../settings/store/values';\n\nexport const fetchMyOrganizations = () => (dispatch: Dispatch) => {\n  return getOrganizations({ member: true }).then(({ organizations }) => {\n    return dispatch(receiveMyOrganizations(organizations));\n  });\n};\n\nexport const fetchIfAnyoneCanCreateOrganizations = () => (dispatch: Dispatch) => {\n  return getValues({ keys: 'sonar.organizations.anyoneCanCreate' }).then(values => {\n    dispatch(receiveValues(values));\n  });\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport { omitNil } from 'sonar-ui-common/helpers/request';\nimport { Edition, EditionKey } from '../types/editions';\nimport { SystemUpgrade } from '../types/system';\n\nconst EDITIONS: { [x in EditionKey]: Edition } = {\n  community: {\n    key: EditionKey.community,\n    name: 'Community Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/community.html',\n    downloadProperty: 'downloadUrl'\n  },\n  developer: {\n    key: EditionKey.developer,\n    name: 'Developer Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/developer.html',\n    downloadProperty: 'downloadDeveloperUrl'\n  },\n  enterprise: {\n    key: EditionKey.enterprise,\n    name: 'Enterprise Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/enterprise.html',\n    downloadProperty: 'downloadEnterpriseUrl'\n  },\n  datacenter: {\n    key: EditionKey.datacenter,\n    name: 'Data Center Edition',\n    homeUrl: 'https://redirect.sonarsource.com/editions/datacenter.html',\n    downloadProperty: 'downloadDatacenterUrl'\n  }\n};\n\nexport function getEdition(editionKey: EditionKey) {\n  return EDITIONS[editionKey];\n}\n\nexport function getAllEditionsAbove(currentEdition?: EditionKey) {\n  const editions = Object.values(EDITIONS);\n  const currentEditionIdx = editions.findIndex(edition => edition.key === currentEdition);\n  return editions.slice(currentEditionIdx + 1);\n}\n\nexport function getEditionUrl(\n  edition: Edition,\n  data: { serverId?: string; ncloc?: number; sourceEdition?: EditionKey }\n) {\n  let url = edition.homeUrl;\n  const query = stringify(omitNil(data));\n  if (query) {\n    url += '?' + query;\n  }\n  return url;\n}\n\nexport function getEditionDownloadUrl(edition: Edition, lastUpgrade: SystemUpgrade) {\n  return lastUpgrade[edition.downloadProperty] || lastUpgrade.downloadUrl;\n}\n\nexport function getEditionDownloadFilename(url: string) {\n  return url.replace(/^.+\\/(sonarqube-[\\w\\-.]+\\.zip)$/, '$1');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { get, remove, save } from 'sonar-ui-common/helpers/storage';\n\nconst RECENT_HISTORY = 'sonar_recent_history';\nconst HISTORY_LIMIT = 10;\n\nexport type History = Array<{\n  key: string;\n  name: string;\n  icon: string;\n  organization?: string;\n}>;\n\nexport default class RecentHistory {\n  static get(): History {\n    const history = get(RECENT_HISTORY);\n    if (history == null) {\n      return [];\n    } else {\n      try {\n        return JSON.parse(history);\n      } catch {\n        remove(RECENT_HISTORY);\n        return [];\n      }\n    }\n  }\n\n  static set(newHistory: History) {\n    save(RECENT_HISTORY, JSON.stringify(newHistory));\n  }\n\n  static clear() {\n    remove(RECENT_HISTORY);\n  }\n\n  static add(\n    componentKey: string,\n    componentName: string,\n    icon: string,\n    organization: string | undefined\n  ) {\n    const sonarHistory = RecentHistory.get();\n    const newEntry = { key: componentKey, name: componentName, icon, organization };\n    let newHistory = sonarHistory.filter(entry => entry.key !== newEntry.key);\n    newHistory.unshift(newEntry);\n    newHistory = newHistory.slice(0, HISTORY_LIMIT);\n    RecentHistory.set(newHistory);\n  }\n\n  static remove(componentKey: string) {\n    const history = RecentHistory.get();\n    const newHistory = history.filter(entry => entry.key !== componentKey);\n    RecentHistory.set(newHistory);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsOptionalBoolean,\n  parseAsOptionalString,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeOptionalBoolean,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\n\nexport interface Query {\n  activation: boolean | undefined;\n  activationSeverities: string[];\n  availableSince: Date | undefined;\n  compareToProfile: string | undefined;\n  cwe: string[];\n  inheritance: T.RuleInheritance | undefined;\n  languages: string[];\n  owaspTop10: string[];\n  profile: string | undefined;\n  repositories: string[];\n  ruleKey: string | undefined;\n  sansTop25: string[];\n  searchQuery: string | undefined;\n  severities: string[];\n  sonarsourceSecurity: string[];\n  statuses: string[];\n  tags: string[];\n  template: boolean | undefined;\n  types: string[];\n}\n\nexport type FacetKey = keyof Query;\n\nexport interface Facet {\n  [value: string]: number;\n}\n\nexport type Facets = { [F in FacetKey]?: Facet };\n\nexport type OpenFacets = T.Dict<boolean>;\n\nexport interface Activation {\n  inherit: T.RuleInheritance;\n  severity: string;\n}\n\nexport interface Actives {\n  [rule: string]: {\n    [profile: string]: Activation;\n  };\n}\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    activation: parseAsOptionalBoolean(query.activation),\n    activationSeverities: parseAsArray(query.active_severities, parseAsString),\n    availableSince: parseAsDate(query.available_since),\n    compareToProfile: parseAsOptionalString(query.compareToProfile),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    inheritance: parseAsInheritance(query.inheritance),\n    languages: parseAsArray(query.languages, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    profile: parseAsOptionalString(query.qprofile),\n    repositories: parseAsArray(query.repositories, parseAsString),\n    ruleKey: parseAsOptionalString(query.rule_key),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    searchQuery: parseAsOptionalString(query.q),\n    severities: parseAsArray(query.severities, parseAsString),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    template: parseAsOptionalBoolean(query.is_template),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  return cleanQuery({\n    activation: serializeOptionalBoolean(query.activation),\n    active_severities: serializeStringArray(query.activationSeverities),\n    available_since: serializeDateShort(query.availableSince),\n    compareToProfile: serializeString(query.compareToProfile),\n    cwe: serializeStringArray(query.cwe),\n    inheritance: serializeInheritance(query.inheritance),\n    is_template: serializeOptionalBoolean(query.template),\n    languages: serializeStringArray(query.languages),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    q: serializeString(query.searchQuery),\n    qprofile: serializeString(query.profile),\n    repositories: serializeStringArray(query.repositories),\n    rule_key: serializeString(query.ruleKey),\n    sansTop25: serializeStringArray(query.sansTop25),\n    severities: serializeStringArray(query.severities),\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  });\n}\n\nexport function areQueriesEqual(a: T.RawQuery, b: T.RawQuery) {\n  return queriesEqual(parseQuery(a), parseQuery(b));\n}\n\nexport function shouldRequestFacet(facet: string): facet is FacetKey {\n  const facetsToRequest = [\n    'activationSeverities',\n    'cwe',\n    'languages',\n    'owaspTop10',\n    'repositories',\n    'sansTop25',\n    'severities',\n    'sonarsourceSecurity',\n    'standard',\n    'statuses',\n    'tags',\n    'types'\n  ];\n  return facetsToRequest.includes(facet);\n}\n\nexport function getServerFacet(facet: FacetKey) {\n  return facet === 'activationSeverities' ? 'active_severities' : facet;\n}\n\nexport function getAppFacet(serverFacet: string): FacetKey {\n  return serverFacet === 'active_severities' ? 'activationSeverities' : (serverFacet as FacetKey);\n}\n\nexport function getOpen(query: T.RawQuery) {\n  return query.open;\n}\n\nexport function hasRuleKey(query: T.RawQuery) {\n  return Boolean(query.rule_key);\n}\n\nfunction parseAsInheritance(value?: string): T.RuleInheritance | undefined {\n  if (value === 'INHERITED' || value === 'NONE' || value === 'OVERRIDES') {\n    return value;\n  } else {\n    return undefined;\n  }\n}\n\nfunction serializeInheritance(value: T.RuleInheritance | undefined): string | undefined {\n  return value;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit } from 'lodash';\nimport { combineReducers } from 'redux';\nimport { ActionType } from '../../../store/utils/actions';\n\nconst enum Actions {\n  CancelChange = 'settingsPage/CANCEL_CHANGE',\n  ChangeValue = 'settingsPage/CHANGE_VALUE',\n  FailValidation = 'settingsPage/FAIL_VALIDATION',\n  PassValidation = 'settingsPage/PASS_VALIDATION',\n  StartLoading = 'settingsPage/START_LOADING',\n  StopLoading = 'settingsPage/STOP_LOADING'\n}\n\ntype Action =\n  | ActionType<typeof cancelChange, Actions.CancelChange>\n  | ActionType<typeof changeValue, Actions.ChangeValue>\n  | ActionType<typeof failValidation, Actions.FailValidation>\n  | ActionType<typeof passValidation, Actions.PassValidation>\n  | ActionType<typeof startLoading, Actions.StartLoading>\n  | ActionType<typeof stopLoading, Actions.StopLoading>;\n\nexport interface State {\n  changedValues: T.Dict<any>;\n  loading: T.Dict<boolean>;\n  validationMessages: T.Dict<string>;\n}\n\nexport function cancelChange(key: string) {\n  return { type: Actions.CancelChange, key };\n}\n\nexport function changeValue(key: string, value: any) {\n  return { type: Actions.ChangeValue, key, value };\n}\n\nfunction changedValues(state: State['changedValues'] = {}, action: Action) {\n  if (action.type === Actions.ChangeValue) {\n    return { ...state, [action.key]: action.value };\n  }\n  if (action.type === Actions.CancelChange) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function failValidation(key: string, message: string) {\n  return { type: Actions.FailValidation, key, message };\n}\n\nexport function passValidation(key: string) {\n  return { type: Actions.PassValidation, key };\n}\n\nfunction validationMessages(state: State['validationMessages'] = {}, action: Action) {\n  if (action.type === Actions.FailValidation) {\n    return { ...state, [action.key]: action.message };\n  }\n  if (action.type === Actions.PassValidation) {\n    return omit(state, action.key);\n  }\n  return state;\n}\n\nexport function startLoading(key: string) {\n  return { type: Actions.StartLoading, key };\n}\n\nexport function stopLoading(key: string) {\n  return { type: Actions.StopLoading, key };\n}\n\nfunction loading(state: State['loading'] = {}, action: Action) {\n  if (action.type === Actions.StartLoading) {\n    return { ...state, [action.key]: true };\n  }\n  if (action.type === Actions.StopLoading) {\n    return { ...state, [action.key]: false };\n  }\n  return state;\n}\n\nexport default combineReducers({ changedValues, loading, validationMessages });\n\nexport function getChangedValue(state: State, key: string) {\n  return state.changedValues[key];\n}\n\nexport function getValidationMessage(state: State, key: string): string | undefined {\n  return state.validationMessages[key];\n}\n\nexport function isLoading(state: State, key: string) {\n  return Boolean(state.loading[key]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport default function getCoverageStatus(s: T.SourceLine): T.SourceLineCoverageStatus | undefined {\n  let status: T.SourceLineCoverageStatus | undefined;\n  if (s.lineHits != null && s.lineHits > 0) {\n    status = 'partially-covered';\n  }\n  if (s.lineHits != null && s.lineHits > 0 && s.conditions === s.coveredConditions) {\n    status = 'covered';\n  }\n  if (s.lineHits === 0 || s.coveredConditions === 0) {\n    status = 'uncovered';\n  }\n  return status;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { ComponentQualifier } from '../../types/component';\nimport { VISUALIZATIONS } from './utils';\n\ntype Level = 'ERROR' | 'WARN' | 'OK';\n\nexport interface Query {\n  gate?: Level;\n  reliability?: number;\n  new_reliability?: number;\n  security?: number;\n  new_security?: number;\n  security_review_rating?: number;\n  new_security_review_rating?: number;\n  maintainability?: number;\n  new_maintainability?: number;\n  coverage?: number;\n  new_coverage?: number;\n  duplications?: number;\n  new_duplications?: number;\n  size?: number;\n  new_lines?: number;\n  languages?: string[];\n  qualifier?: ComponentQualifier;\n  tags?: string[];\n  search?: string;\n  sort?: string;\n  view?: string;\n  visualization?: string;\n  [x: string]: string | number | string[] | undefined;\n}\n\nexport function parseUrlQuery(urlQuery: T.RawQuery): Query {\n  return {\n    gate: getAsLevel(urlQuery['gate']),\n    reliability: getAsNumericRating(urlQuery['reliability']),\n    new_reliability: getAsNumericRating(urlQuery['new_reliability']),\n    security: getAsNumericRating(urlQuery['security']),\n    new_security: getAsNumericRating(urlQuery['new_security']),\n    security_review_rating: getAsNumericRating(urlQuery['security_review']),\n    new_security_review_rating: getAsNumericRating(urlQuery['new_security_review']),\n    maintainability: getAsNumericRating(urlQuery['maintainability']),\n    new_maintainability: getAsNumericRating(urlQuery['new_maintainability']),\n    coverage: getAsNumericRating(urlQuery['coverage']),\n    new_coverage: getAsNumericRating(urlQuery['new_coverage']),\n    duplications: getAsNumericRating(urlQuery['duplications']),\n    new_duplications: getAsNumericRating(urlQuery['new_duplications']),\n    size: getAsNumericRating(urlQuery['size']),\n    new_lines: getAsNumericRating(urlQuery['new_lines']),\n    languages: getAsStringArray(urlQuery['languages']),\n    tags: getAsStringArray(urlQuery['tags']),\n    qualifier: getAsQualifier(urlQuery['qualifier']),\n    search: getAsString(urlQuery['search']),\n    sort: getAsString(urlQuery['sort']),\n    view: getView(urlQuery['view']),\n    visualization: getVisualization(urlQuery['visualization'])\n  };\n}\n\nexport function convertToFilter(query: Query, isFavorite: boolean): string {\n  const conditions: string[] = [];\n\n  if (isFavorite) {\n    conditions.push('isFavorite');\n  }\n\n  if (query['gate'] != null) {\n    conditions.push(mapPropertyToMetric('gate') + ' = ' + query['gate']);\n  }\n\n  ['coverage', 'new_coverage'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertCoverage)\n  );\n\n  ['duplications', 'new_duplications'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertDuplications)\n  );\n\n  ['size', 'new_lines'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertSize)\n  );\n\n  [\n    'reliability',\n    'security',\n    'security_review_rating',\n    'maintainability',\n    'new_reliability',\n    'new_security',\n    'new_security_review_rating',\n    'new_maintainability'\n  ].forEach(property => pushMetricToArray(query, property, conditions, convertIssuesRating));\n\n  ['languages', 'tags', 'qualifier'].forEach(property =>\n    pushMetricToArray(query, property, conditions, convertArrayMetric)\n  );\n\n  if (query['search'] != null) {\n    conditions.push(`${mapPropertyToMetric('search')} = \"${query['search']}\"`);\n  }\n\n  return conditions.join(' and ');\n}\n\nconst visualizationParams = ['sort', 'view', 'visualization'];\n\nexport function hasFilterParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => !visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nexport function hasVisualizationParams(query: Query) {\n  return Object.keys(query)\n    .filter(key => visualizationParams.includes(key))\n    .some(key => query[key] !== undefined);\n}\n\nfunction getAsNumericRating(value: any): number | undefined {\n  if (value === '' || value == null || isNaN(value)) {\n    return undefined;\n  }\n  const num = Number(value);\n  return num > 0 && num < 7 ? num : undefined;\n}\n\nfunction getAsLevel(value: any): Level | undefined {\n  if (value === 'ERROR' || value === 'WARN' || value === 'OK') {\n    return value;\n  }\n  return undefined;\n}\n\nfunction getAsString(value: any): string | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value;\n}\n\nfunction getAsStringArray(value: any): string[] | undefined {\n  if (typeof value !== 'string' || !value) {\n    return undefined;\n  }\n  return value.split(',');\n}\n\nfunction getAsQualifier(value: string | undefined): ComponentQualifier | undefined {\n  return value ? (value as ComponentQualifier) : undefined;\n}\n\nfunction getView(value: any): string | undefined {\n  return typeof value !== 'string' || value === 'overall' ? undefined : value;\n}\n\nfunction getVisualization(value: string): string | undefined {\n  return VISUALIZATIONS.includes(value) ? value : undefined;\n}\n\nfunction convertIssuesRating(metric: string, rating: number): string {\n  if (rating > 1 && rating < 5) {\n    return `${metric} >= ${rating}`;\n  } else {\n    return `${metric} = ${rating}`;\n  }\n}\n\nfunction convertCoverage(metric: string, coverage: number): string {\n  switch (coverage) {\n    case 1:\n      return metric + ' >= 80';\n    case 2:\n      return metric + ' < 80';\n    case 3:\n      return metric + ' < 70';\n    case 4:\n      return metric + ' < 50';\n    case 5:\n      return metric + ' < 30';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertDuplications(metric: string, duplications: number): string {\n  switch (duplications) {\n    case 1:\n      return metric + ' < 3';\n    case 2:\n      return metric + ' >= 3';\n    case 3:\n      return metric + ' >= 5';\n    case 4:\n      return metric + ' >= 10';\n    case 5:\n      return metric + ' >= 20';\n    case 6:\n      return metric + '= NO_DATA';\n    default:\n      return '';\n  }\n}\n\nfunction convertSize(metric: string, size: number): string {\n  switch (size) {\n    case 1:\n      return metric + ' < 1000';\n    case 2:\n      return metric + ' >= 1000';\n    case 3:\n      return metric + ' >= 10000';\n    case 4:\n      return metric + ' >= 100000';\n    case 5:\n      return metric + ' >= 500000';\n    default:\n      return '';\n  }\n}\n\nfunction mapPropertyToMetric(property?: string): string | undefined {\n  const map: T.Dict<string> = {\n    analysis_date: 'analysisDate',\n    reliability: 'reliability_rating',\n    new_reliability: 'new_reliability_rating',\n    security: 'security_rating',\n    new_security: 'new_security_rating',\n    security_review_rating: 'security_review_rating',\n    new_security_review_rating: 'new_security_review_rating',\n    maintainability: 'sqale_rating',\n    new_maintainability: 'new_maintainability_rating',\n    coverage: 'coverage',\n    new_coverage: 'new_coverage',\n    duplications: 'duplicated_lines_density',\n    new_duplications: 'new_duplicated_lines_density',\n    size: 'ncloc',\n    new_lines: 'new_lines',\n    gate: 'alert_status',\n    languages: 'languages',\n    tags: 'tags',\n    search: 'query',\n    qualifier: 'qualifier'\n  };\n  return property && map[property];\n}\n\nfunction pushMetricToArray(\n  query: Query,\n  property: string,\n  conditionsArray: string[],\n  convertFunction: (metric: string, value: any) => string\n): void {\n  const metric = mapPropertyToMetric(property);\n  if (query[property] != null && metric) {\n    conditionsArray.push(convertFunction(metric, query[property]));\n  }\n}\n\nfunction convertArrayMetric(metric: string, items: string | string[]): string {\n  if (!Array.isArray(items) || items.length < 2) {\n    return metric + ' = ' + items;\n  }\n  return `${metric} IN (${items.join(', ')})`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport GlobalMessages from 'sonar-ui-common/components/controls/GlobalMessages';\nimport { closeGlobalMessage } from '../../store/globalMessages';\nimport { getGlobalMessages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  messages: getGlobalMessages(state)\n});\n\nconst mapDispatchToProps = { closeGlobalMessage };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalMessages);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\nexport type OnboardingContextShape = (organization?: T.Organization) => void;\n\nexport const OnboardingContext = createContext<OnboardingContextShape>(() => {});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport OrganizationAvatar from '../common/OrganizationAvatar';\nimport OrganizationLink from './OrganizationLink';\n\ninterface Props {\n  organization: T.Organization;\n}\n\nexport default function OrganizationListItem({ organization }: Props) {\n  const { actions = {} } = organization;\n  return (\n    <li>\n      <OrganizationLink className=\"display-flex-center\" organization={organization}>\n        <div>\n          <OrganizationAvatar organization={organization} small={true} />\n          <span className=\"spacer-left\">{organization.name}</span>\n        </div>\n        {actions.admin && <span className=\"badge spacer-left\">{translate('admin')}</span>}\n      </OrganizationLink>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { searchIssues } from '../../../api/issues';\nimport { getOrganizations } from '../../../api/organizations';\nimport throwGlobalError from '../../../app/utils/throwGlobalError';\nimport { withRouter } from '../../../components/hoc/withRouter';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { receiveOrganizations } from '../../../store/organizations';\nimport { fetchBranchStatus } from '../../../store/rootActions';\nimport {\n  areThereCustomOrganizations,\n  getCurrentUser,\n  getMyOrganizations,\n  Store\n} from '../../../store/rootReducer';\n\nconst IssuesAppContainer = lazyLoadComponent(() => import('./App'), 'IssuesAppContainer');\n\ninterface StateProps {\n  currentUser: T.CurrentUser;\n  userOrganizations: T.Organization[];\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  currentUser: getCurrentUser(state),\n  userOrganizations: getMyOrganizations(state)\n});\n\nconst fetchIssueOrganizations = (organizationKeys: string[]) => (dispatch: Dispatch) => {\n  if (!organizationKeys.length) {\n    return Promise.resolve();\n  }\n\n  return getOrganizations({ organizations: organizationKeys.join() }).then(\n    response => dispatch(receiveOrganizations(response.organizations)),\n    throwGlobalError\n  );\n};\n\nconst fetchIssues = (query: T.RawQuery, requestOrganizations = true) => (\n  // use `Function` to be able to do `dispatch(...).then(...)`\n  dispatch: Function,\n  getState: () => Store\n) => {\n  const organizationsEnabled = areThereCustomOrganizations(getState());\n  return searchIssues({ ...query, additionalFields: '_all' })\n    .then(response => {\n      const parsedIssues = response.issues.map(issue =>\n        parseIssueFromResponse(issue, response.components, response.users, response.rules)\n      );\n      return { ...response, issues: parsedIssues };\n    })\n    .then(response => {\n      const organizationKeys = uniq([\n        ...response.issues.map(issue => issue.organization),\n        ...(response.components || []).map(component => component.organization)\n      ]);\n      return organizationsEnabled && requestOrganizations\n        ? dispatch(fetchIssueOrganizations(organizationKeys)).then(() => response)\n        : response;\n    })\n    .catch(throwGlobalError);\n};\n\n// have to type cast this, because of async action\nconst mapDispatchToProps = {\n  fetchBranchStatus: fetchBranchStatus as any,\n  fetchIssues: fetchIssues as any\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(IssuesAppContainer));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { keyBy, sortBy, uniqBy } from 'lodash';\nimport { ActionType } from '../../../store/utils/actions';\nimport { DEFAULT_CATEGORY, getCategoryName } from '../utils';\n\nconst enum Actions {\n  ReceiveDefinitions = 'RECEIVE_DEFINITIONS'\n}\n\ntype Action = ActionType<typeof receiveDefinitions, Actions.ReceiveDefinitions>;\n\nexport type State = T.Dict<T.SettingCategoryDefinition>;\n\nexport function receiveDefinitions(definitions: T.SettingCategoryDefinition[]) {\n  return { type: Actions.ReceiveDefinitions, definitions };\n}\n\nexport default function components(state: State = {}, action: Action) {\n  if (action.type === Actions.ReceiveDefinitions) {\n    return keyBy(action.definitions, 'key');\n  }\n  return state;\n}\n\nexport function getDefinition(state: State, key: string) {\n  return state[key];\n}\n\nexport function getAllDefinitions(state: State) {\n  return Object.keys(state).map(key => state[key]);\n}\n\nexport function getDefinitionsForCategory(state: State, category: string) {\n  return getAllDefinitions(state).filter(\n    definition => definition.category.toLowerCase() === category.toLowerCase()\n  );\n}\n\nexport function getAllCategories(state: State) {\n  return uniqBy(\n    getAllDefinitions(state).map(definition => definition.category),\n    category => category.toLowerCase()\n  );\n}\n\nexport function getDefaultCategory(state: State) {\n  const categories = getAllCategories(state);\n  if (categories.includes(DEFAULT_CATEGORY)) {\n    return DEFAULT_CATEGORY;\n  } else {\n    const sortedCategories = sortBy(categories, category =>\n      getCategoryName(category).toLowerCase()\n    );\n    return sortedCategories[0];\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport {\n  QualityGateApplicationStatusChildProject,\n  QualityGateProjectStatus,\n  QualityGateStatusCondition\n} from '../types/quality-gates';\n\nexport function extractStatusConditionsFromProjectStatus(\n  projectStatus: QualityGateProjectStatus\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.actualValue,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metricKey,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n\nexport function extractStatusConditionsFromApplicationStatusChildProject(\n  projectStatus: QualityGateApplicationStatusChildProject\n): QualityGateStatusCondition[] {\n  const { conditions } = projectStatus;\n  return conditions\n    ? conditions.map(c => ({\n        actual: c.value,\n        error: c.errorThreshold,\n        level: c.status,\n        metric: c.metric,\n        op: c.comparator,\n        period: c.periodIndex\n      }))\n    : [];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\n\nconst ORDER = ['DEV', 'VW', 'SVW', 'APP', 'TRK', 'BRC', 'FIL', 'UTS'];\n\nexport function sortQualifiers(qualifiers: string[]) {\n  return sortBy(qualifiers, qualifier => ORDER.indexOf(qualifier));\n}\n\nexport interface ComponentResult {\n  isFavorite?: boolean;\n  isRecentlyBrowsed?: boolean;\n  key: string;\n  match?: string;\n  name: string;\n  organization?: string;\n  project?: string;\n  qualifier: string;\n}\n\nexport interface Results {\n  [qualifier: string]: ComponentResult[];\n}\n\nexport interface More {\n  [qualifier: string]: number;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\n\nexport default class WorkspacePortal extends React.PureComponent {\n  el: HTMLElement;\n\n  constructor(props: {}) {\n    super(props);\n    this.el = document.createElement('div');\n    this.el.classList.add('workspace');\n  }\n\n  componentDidMount() {\n    document.body.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.el);\n  }\n\n  render() {\n    return createPortal(this.props.children, this.el);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omit, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { ComponentDescriptor, RuleDescriptor, WorkspaceContext } from './context';\nimport './styles.css';\nimport WorkspacePortal from './WorkspacePortal';\n\nconst WORKSPACE = 'sonarqube-workspace';\nconst WorkspaceNav = lazyLoadComponent(() => import('./WorkspaceNav'), 'WorkspaceNav');\nconst WorkspaceRuleViewer = lazyLoadComponent(\n  () => import('./WorkspaceRuleViewer'),\n  'WorkspaceRuleViewer'\n);\nconst WorkspaceComponentViewer = lazyLoadComponent(\n  () => import('./WorkspaceComponentViewer'),\n  'WorkspaceComponentViewer'\n);\n\ninterface State {\n  components: ComponentDescriptor[];\n  height: number;\n  maximized?: boolean;\n  open: { component?: string; rule?: string };\n  rules: RuleDescriptor[];\n}\n\nconst MIN_HEIGHT = 0.05;\nconst MAX_HEIGHT = 0.85;\nconst INITIAL_HEIGHT = 300;\n\nconst TYPE_KEY = '__type__';\n\nexport default class Workspace extends React.PureComponent<{}, State> {\n  mounted = false;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = { height: INITIAL_HEIGHT, open: {}, ...this.loadWorkspace() };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_: {}, prevState: State) {\n    if (prevState.components !== this.state.components || prevState.rules !== this.state.rules) {\n      this.saveWorkspace();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadWorkspace = () => {\n    try {\n      const data: any[] = JSON.parse(get(WORKSPACE) || '');\n      const components: ComponentDescriptor[] = data.filter(x => x[TYPE_KEY] === 'component');\n      const rules: RuleDescriptor[] = data.filter(x => x[TYPE_KEY] === 'rule');\n      return { components, rules };\n    } catch {\n      // fail silently\n      return { components: [], rules: [] };\n    }\n  };\n\n  saveWorkspace = () => {\n    const data = [\n      // do not save line number, next time the file is open, it should be open on the first line\n      ...this.state.components.map(x => omit({ ...x, [TYPE_KEY]: 'component' }, 'line')),\n      ...this.state.rules.map(x => ({ ...x, [TYPE_KEY]: 'rule' }))\n    ];\n    save(WORKSPACE, JSON.stringify(data));\n  };\n\n  openComponent = (component: ComponentDescriptor) => {\n    this.setState((state: State) => ({\n      components: uniqBy([...state.components, component], component => component.key),\n      open: { component: component.key }\n    }));\n  };\n\n  reopenComponent = (componentKey: string) => {\n    this.setState({ open: { component: componentKey } });\n  };\n\n  openRule = (rule: RuleDescriptor) => {\n    this.setState((state: State) => ({\n      open: { rule: rule.key },\n      rules: uniqBy([...state.rules, rule], rule => rule.key)\n    }));\n  };\n\n  reopenRule = (ruleKey: string) => {\n    this.setState({ open: { rule: ruleKey } });\n  };\n\n  closeComponent = (componentKey: string) => {\n    this.setState((state: State) => ({\n      components: state.components.filter(x => x.key !== componentKey),\n      open: {\n        ...state.open,\n        component: state.open.component === componentKey ? undefined : state.open.component\n      }\n    }));\n  };\n\n  closeRule = (ruleKey: string) => {\n    this.setState((state: State) => ({\n      rules: state.rules.filter(x => x.key !== ruleKey),\n      open: {\n        ...state.open,\n        rule: state.open.rule === ruleKey ? undefined : state.open.rule\n      }\n    }));\n  };\n\n  handleComponentLoad = (details: { key: string; name: string; qualifier: string }) => {\n    if (this.mounted) {\n      const { key, name, qualifier } = details;\n      this.setState((state: State) => ({\n        components: state.components.map(component =>\n          component.key === key ? { ...component, name, qualifier } : component\n        )\n      }));\n    }\n  };\n\n  handleRuleLoad = (details: { key: string; name: string }) => {\n    if (this.mounted) {\n      const { key, name } = details;\n      this.setState((state: State) => ({\n        rules: state.rules.map(rule => (rule.key === key ? { ...rule, name } : rule))\n      }));\n    }\n  };\n\n  collapse = () => {\n    this.setState({ open: {} });\n  };\n\n  maximize = () => {\n    this.setState({ maximized: true });\n  };\n\n  minimize = () => {\n    this.setState({ maximized: false });\n  };\n\n  resize = (deltaY: number) => {\n    const minHeight = window.innerHeight * MIN_HEIGHT;\n    const maxHeight = window.innerHeight * MAX_HEIGHT;\n    this.setState((state: State) => ({\n      height: Math.min(maxHeight, Math.max(minHeight, state.height - deltaY))\n    }));\n  };\n\n  render() {\n    const { components, open, rules } = this.state;\n\n    const openComponent = open.component && components.find(x => x.key === open.component);\n    const openRule = open.rule && rules.find(x => x.key === open.rule);\n\n    const height = this.state.maximized ? window.innerHeight * MAX_HEIGHT : this.state.height;\n\n    return (\n      <WorkspaceContext.Provider\n        value={{ openComponent: this.openComponent, openRule: this.openRule }}>\n        {this.props.children}\n        <WorkspacePortal>\n          {(components.length > 0 || rules.length > 0) && (\n            <WorkspaceNav\n              components={components}\n              onComponentClose={this.closeComponent}\n              onComponentOpen={this.reopenComponent}\n              onRuleClose={this.closeRule}\n              onRuleOpen={this.reopenRule}\n              open={this.state.open}\n              rules={rules}\n            />\n          )}\n          {openComponent && (\n            <WorkspaceComponentViewer\n              component={openComponent}\n              height={height}\n              maximized={this.state.maximized}\n              onClose={this.closeComponent}\n              onCollapse={this.collapse}\n              onLoad={this.handleComponentLoad}\n              onMaximize={this.maximize}\n              onMinimize={this.minimize}\n              onResize={this.resize}\n            />\n          )}\n          {openRule && (\n            <WorkspaceRuleViewer\n              height={height}\n              maximized={this.state.maximized}\n              onClose={this.closeRule}\n              onCollapse={this.collapse}\n              onLoad={this.handleRuleLoad}\n              onMaximize={this.maximize}\n              onMinimize={this.minimize}\n              onResize={this.resize}\n              rule={openRule}\n            />\n          )}\n        </WorkspacePortal>\n      </WorkspaceContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\n\ninterface State {\n  links: T.A11ySkipLink[];\n}\n\nexport default class A11yProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { links: [] };\n\n  addA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = [...prevState.links];\n      links.push({ ...link, weight: link.weight || 0 });\n      return { links };\n    });\n  };\n\n  removeA11ySkipLink = (link: T.A11ySkipLink) => {\n    this.setState(prevState => {\n      const links = prevState.links.filter(l => l.key !== link.key);\n      return { links };\n    });\n  };\n\n  render() {\n    const links = sortBy(this.state.links, 'weight');\n    return (\n      <A11yContext.Provider\n        value={{\n          addA11ySkipLink: this.addA11ySkipLink,\n          links,\n          removeA11ySkipLink: this.removeA11ySkipLink\n        }}>\n        {this.props.children}\n      </A11yContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { A11yContext } from './A11yContext';\nimport './A11ySkipLinks.css';\n\nexport default function A11ySkipLinks() {\n  return (\n    <A11yContext.Consumer>\n      {({ links }) =>\n        links.map(link => (\n          <a className=\"a11y-skip-link\" href={`#a11y_target__${link.key}`} key={link.key}>\n            {link.label}\n          </a>\n        ))\n      }\n    </A11yContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport suggestionsJson from 'Docs/EmbedDocsSuggestions.json';\nimport * as React from 'react';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ntype SuggestionsJson = T.Dict<T.SuggestionLink[]>;\n\ninterface State {\n  suggestions: T.SuggestionLink[];\n}\n\nexport default class SuggestionsProvider extends React.Component<{}, State> {\n  keys: string[] = [];\n  state: State = { suggestions: [] };\n\n  fetchSuggestions = () => {\n    const jsonList = suggestionsJson as SuggestionsJson;\n    let suggestions: T.SuggestionLink[] = [];\n    this.keys.forEach(key => {\n      if (jsonList[key]) {\n        suggestions = [...jsonList[key], ...suggestions];\n      }\n    });\n    if (!isSonarCloud()) {\n      suggestions = suggestions.filter(suggestion => suggestion.scope !== 'sonarcloud');\n    }\n    this.setState({ suggestions });\n  };\n\n  addSuggestions = (newKey: string) => {\n    this.keys = [...this.keys, newKey];\n    this.fetchSuggestions();\n  };\n\n  removeSuggestions = (oldKey: string) => {\n    this.keys = this.keys.filter(key => key !== oldKey);\n    this.fetchSuggestions();\n  };\n\n  render() {\n    return (\n      <SuggestionsContext.Provider\n        value={{\n          addSuggestions: this.addSuggestions,\n          removeSuggestions: this.removeSuggestions,\n          suggestions: this.state.suggestions\n        }}>\n        {this.props.children}\n      </SuggestionsContext.Provider>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport HelpIcon from 'sonar-ui-common/components/icons/HelpIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nconst EmbedDocsPopup = lazyLoadComponent(() => import('./EmbedDocsPopup'));\n\ninterface State {\n  helpOpen: boolean;\n}\n\nexport default class EmbedDocsPopupHelper extends React.PureComponent<{}, State> {\n  mounted = false;\n  state: State = { helpOpen: false };\n\n  componentDidMount() {\n    window.addEventListener('keypress', this.onKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keypress', this.onKeyPress);\n  }\n\n  onKeyPress = (event: KeyboardEvent) => {\n    const { tagName } = event.target as HTMLElement;\n    const code = event.keyCode || event.which;\n    const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n    const isTriggerKey = code === 63;\n    if (!isInput && isTriggerKey) {\n      this.toggleHelp();\n    }\n  };\n\n  setHelpDisplay = (helpOpen: boolean) => {\n    this.setState({ helpOpen });\n  };\n\n  handleClick = () => {\n    this.toggleHelp();\n  };\n\n  toggleHelp = () => {\n    this.setState(state => {\n      return { helpOpen: !state.helpOpen };\n    });\n  };\n\n  closeHelp = () => {\n    this.setState({ helpOpen: false });\n  };\n\n  render() {\n    return (\n      <li className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.closeHelp}\n          open={this.state.helpOpen}\n          overlay={<EmbedDocsPopup onClose={this.closeHelp} />}>\n          <ButtonLink\n            aria-expanded={this.state.helpOpen}\n            aria-haspopup={true}\n            className=\"navbar-help navbar-icon\"\n            onClick={this.handleClick}\n            title={translate('help')}>\n            <HelpIcon />\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport { debounce, keyBy, uniqBy } from 'lodash';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport ClockIcon from 'sonar-ui-common/components/icons/ClockIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { getSuggestions } from '../../../api/components';\nimport { getCodeUrl, getProjectUrl } from '../../../helpers/urls';\nimport RecentHistory from '../RecentHistory';\nimport './Search.css';\nimport { ComponentResult, More, Results, sortQualifiers } from './utils';\n\nconst SearchResults = lazyLoadComponent(() => import('./SearchResults'));\nconst SearchResult = lazyLoadComponent(() => import('./SearchResult'));\n\ninterface OwnProps {\n  appState: Pick<T.AppState, 'organizationsEnabled'>;\n  currentUser: T.CurrentUser;\n}\n\ntype Props = OwnProps & WithRouterProps;\n\ninterface State {\n  loading: boolean;\n  loadingMore?: string;\n  more: More;\n  open: boolean;\n  organizations: T.Dict<{ name: string }>;\n  projects: T.Dict<{ name: string }>;\n  query: string;\n  results: Results;\n  selected?: string;\n  shortQuery: boolean;\n}\n\nexport class Search extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n  node?: HTMLElement | null;\n  nodes: T.Dict<HTMLElement>;\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.nodes = {};\n    this.search = debounce(this.search, 250);\n    this.state = {\n      loading: false,\n      more: {},\n      open: false,\n      organizations: {},\n      projects: {},\n      query: '',\n      results: {},\n      shortQuery: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    key('s', () => {\n      this.focusInput();\n      this.openSearch();\n      return false;\n    });\n  }\n\n  componentWillUpdate() {\n    this.nodes = {};\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.selected !== this.state.selected) {\n      this.scrollToSelected();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    key.unbind('s');\n  }\n\n  focusInput = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n  };\n\n  handleClickOutside = () => {\n    this.closeSearch(false);\n  };\n\n  handleFocus = () => {\n    if (!this.state.open) {\n      // simulate click to close any other dropdowns\n      const body = document.documentElement;\n      if (body) {\n        body.click();\n      }\n    }\n    this.openSearch();\n  };\n\n  openSearch = () => {\n    if (!this.state.open && !this.state.query) {\n      this.search('');\n    }\n    this.setState({ open: true });\n  };\n\n  closeSearch = (clear = true) => {\n    if (this.input) {\n      this.input.blur();\n    }\n    if (clear) {\n      this.setState({\n        more: {},\n        open: false,\n        organizations: {},\n        projects: {},\n        query: '',\n        results: {},\n        selected: undefined,\n        shortQuery: false\n      });\n    } else {\n      this.setState({ open: false });\n    }\n  };\n\n  getPlainComponentsList = (results: Results, more: More) =>\n    sortQualifiers(Object.keys(results)).reduce((components, qualifier) => {\n      const next = [...components, ...results[qualifier].map(component => component.key)];\n      if (more[qualifier]) {\n        next.push('qualifier###' + qualifier);\n      }\n      return next;\n    }, []);\n\n  findFile = (key: string) => {\n    const findInResults = (results: ComponentResult[] | undefined) =>\n      results && results.find(r => r.key === key);\n\n    const file = findInResults(this.state.results['FIL']);\n    if (file) {\n      return file;\n    }\n\n    const test = findInResults(this.state.results['UTS']);\n    if (test) {\n      return test;\n    }\n\n    return undefined;\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  search = (query: string) => {\n    if (query.length === 0 || query.length >= 2) {\n      this.setState({ loading: true });\n      const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n      getSuggestions(query, recentlyBrowsed).then(response => {\n        // compare `this.state.query` and `query` to handle two request done almost at the same time\n        // in this case only the request that matches the current query should be taken\n        if (this.mounted && this.state.query === query) {\n          const results: Results = {};\n          const more: More = {};\n          response.results.forEach(group => {\n            results[group.q] = group.items.map(item => ({ ...item, qualifier: group.q }));\n            more[group.q] = group.more;\n          });\n          const list = this.getPlainComponentsList(results, more);\n          this.setState(state => ({\n            loading: false,\n            more,\n            organizations: { ...state.organizations, ...keyBy(response.organizations, 'key') },\n            projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n            results,\n            selected: list.length > 0 ? list[0] : undefined,\n            shortQuery: query.length > 2 && response.warning === 'short_input'\n          }));\n        }\n      }, this.stopLoading);\n    } else {\n      this.setState({ loading: false });\n    }\n  };\n\n  searchMore = (qualifier: string) => {\n    const { query } = this.state;\n    if (query.length === 1) {\n      return;\n    }\n\n    this.setState({ loading: true, loadingMore: qualifier });\n    const recentlyBrowsed = RecentHistory.get().map(component => component.key);\n    getSuggestions(query, recentlyBrowsed, qualifier).then(response => {\n      if (this.mounted) {\n        const group = response.results.find(group => group.q === qualifier);\n        const moreResults = (group ? group.items : []).map(item => ({ ...item, qualifier }));\n        this.setState(state => ({\n          loading: false,\n          loadingMore: undefined,\n          more: { ...state.more, [qualifier]: 0 },\n          organizations: { ...state.organizations, ...keyBy(response.organizations, 'key') },\n          projects: { ...state.projects, ...keyBy(response.projects, 'key') },\n          results: {\n            ...state.results,\n            [qualifier]: uniqBy([...state.results[qualifier], ...moreResults], 'key')\n          },\n          selected: moreResults.length > 0 ? moreResults[0].key : state.selected\n        }));\n        this.focusInput();\n      }\n    }, this.stopLoading);\n  };\n\n  handleQueryChange = (query: string) => {\n    this.setState({ query, shortQuery: query.length === 1 });\n    this.search(query);\n  };\n\n  selectPrevious = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index > 0 ? { selected: list[index - 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  selectNext = () => {\n    this.setState(({ more, results, selected }) => {\n      if (selected) {\n        const list = this.getPlainComponentsList(results, more);\n        const index = list.indexOf(selected);\n        return index >= 0 && index < list.length - 1 ? { selected: list[index + 1] } : null;\n      } else {\n        return null;\n      }\n    });\n  };\n\n  openSelected = () => {\n    const { selected } = this.state;\n\n    if (selected) {\n      if (selected.startsWith('qualifier###')) {\n        this.searchMore(selected.substr(12));\n      } else {\n        const file = this.findFile(selected);\n        if (file) {\n          this.props.router.push(getCodeUrl(file.project!, undefined, file.key));\n        } else {\n          this.props.router.push(getProjectUrl(selected));\n        }\n        this.closeSearch();\n      }\n    }\n  };\n\n  scrollToSelected = () => {\n    if (this.state.selected) {\n      const node = this.nodes[this.state.selected];\n      if (node && this.node) {\n        scrollToElement(node, { topOffset: 30, bottomOffset: 30, parent: this.node });\n      }\n    }\n  };\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    switch (event.keyCode) {\n      case 13:\n        event.preventDefault();\n        this.openSelected();\n        return;\n      case 38:\n        event.preventDefault();\n        this.selectPrevious();\n        return;\n      case 40:\n        event.preventDefault();\n        this.selectNext();\n        // keep this return to prevent fall-through in case more cases will be adder later\n        // eslint-disable-next-line no-useless-return\n        return;\n    }\n  };\n\n  handleSelect = (selected: string) => {\n    this.setState({ selected });\n  };\n\n  innerRef = (component: string, node: HTMLElement | null) => {\n    if (node) {\n      this.nodes[component] = node;\n    }\n  };\n\n  searchInputRef = (node: HTMLInputElement | null) => {\n    this.input = node;\n  };\n\n  renderResult = (component: ComponentResult) => (\n    <SearchResult\n      appState={this.props.appState}\n      component={component}\n      innerRef={this.innerRef}\n      key={component.key}\n      onClose={this.closeSearch}\n      onSelect={this.handleSelect}\n      organizations={this.state.organizations}\n      projects={this.state.projects}\n      selected={this.state.selected === component.key}\n    />\n  );\n\n  renderNoResults = () => (\n    <div className=\"navbar-search-no-results\">\n      {translateWithParameters('no_results_for_x', this.state.query)}\n    </div>\n  );\n\n  render() {\n    const search = (\n      <li className=\"navbar-search dropdown\">\n        <DeferredSpinner className=\"navbar-search-icon\" loading={this.state.loading} />\n\n        <SearchBox\n          autoFocus={this.state.open}\n          innerRef={this.searchInputRef}\n          minLength={2}\n          onChange={this.handleQueryChange}\n          onFocus={this.handleFocus}\n          onKeyDown={this.handleKeyDown}\n          placeholder={translate('search.placeholder')}\n          value={this.state.query}\n        />\n\n        {this.state.shortQuery && (\n          <span className=\"navbar-search-input-hint\">\n            {translateWithParameters('select2.tooShort', 2)}\n          </span>\n        )}\n\n        {this.state.open && Object.keys(this.state.results).length > 0 && (\n          <DropdownOverlay noPadding={true}>\n            <div className=\"global-navbar-search-dropdown\" ref={node => (this.node = node)}>\n              <SearchResults\n                allowMore={this.state.query.length !== 1}\n                loadingMore={this.state.loadingMore}\n                more={this.state.more}\n                onMoreClick={this.searchMore}\n                onSelect={this.handleSelect}\n                renderNoResults={this.renderNoResults}\n                renderResult={this.renderResult}\n                results={this.state.results}\n                selected={this.state.selected}\n              />\n              <div className=\"dropdown-bottom-hint\">\n                <div className=\"pull-right\">\n                  <ClockIcon className=\"little-spacer-right\" size={12} />\n                  {translate('recently_browsed')}\n                </div>\n                <FormattedMessage\n                  defaultMessage={translate('search.shortcut_hint')}\n                  id=\"search.shortcut_hint\"\n                  values={{\n                    shortcut: <span className=\"shortcut-button shortcut-button-small\">s</span>\n                  }}\n                />\n              </div>\n            </div>\n          </DropdownOverlay>\n        )}\n      </li>\n    );\n\n    return this.state.open ? (\n      <OutsideClickHandler onClickOutside={this.handleClickOutside}>{search}</OutsideClickHandler>\n    ) : (\n      search\n    );\n  }\n}\n\nexport default withRouter<OwnProps>(Search);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getGlobalSettingValue, Store } from '../../../../store/rootReducer';\n\ninterface StateProps {\n  customLogoUrl?: string;\n  customLogoWidth?: string | number;\n}\n\nexport function GlobalNavBranding({ customLogoUrl, customLogoWidth }: StateProps) {\n  const title = translate('layout.sonar.slogan');\n  const url = customLogoUrl || `${getBaseUrl()}/images/logo.svg?v=6.6`;\n  const width = customLogoUrl ? customLogoWidth || 100 : 83;\n\n  return (\n    <Link className=\"navbar-brand\" to=\"/\">\n      <img alt={title} height={30} src={url} title={title} width={width} />\n    </Link>\n  );\n}\n\nexport function SonarCloudNavBranding() {\n  return (\n    <GlobalNavBranding\n      customLogoUrl={`${getBaseUrl()}/images/sonarcloud-logo.svg`}\n      customLogoWidth={105}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const customLogoUrl = getGlobalSettingValue(state, 'sonar.lf.logoUrl');\n  const customLogoWidth = getGlobalSettingValue(state, 'sonar.lf.logoWidthPx');\n  return {\n    customLogoUrl: customLogoUrl && customLogoUrl.value,\n    customLogoWidth: customLogoWidth && customLogoWidth.value\n  };\n};\n\nexport default connect(mapStateToProps)(GlobalNavBranding);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  location: { pathname: string };\n}\n\nexport default function GlobalNavExplore({ location }: Props) {\n  const active = location.pathname.startsWith('/explore');\n  return (\n    <li>\n      <Link\n        className={active ? 'active' : undefined}\n        to={{ pathname: '/explore/projects', query: { sort: '-analysis_date' } }}>\n        {translate('explore')}\n      </Link>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInDays from 'date-fns/difference_in_days';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseDate, toShortNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { hasMessage } from 'sonar-ui-common/helpers/l10n';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { showLicense } from '../../api/marketplace';\nimport { Location, Router, withRouter } from '../../components/hoc/withRouter';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getAppState, getCurrentUser, Store } from '../../store/rootReducer';\nimport { skipOnboarding } from '../../store/users';\nimport { EditionKey } from '../../types/editions';\nimport { OnboardingContext } from './OnboardingContext';\n\nconst OnboardingModal = lazyLoadComponent(() =>\n  import('../../apps/tutorials/onboarding/OnboardingModal')\n);\nconst LicensePromptModal = lazyLoadComponent(\n  () => import('../../apps/marketplace/components/LicensePromptModal'),\n  'LicensePromptModal'\n);\n\ninterface StateProps {\n  canAdmin?: boolean;\n  currentEdition?: EditionKey;\n  currentUser: T.CurrentUser;\n}\n\ninterface DispatchProps {\n  skipOnboarding: () => void;\n}\n\ninterface OwnProps {\n  children?: React.ReactNode;\n}\n\ninterface WithRouterProps {\n  location: Pick<Location, 'pathname'>;\n  router: Pick<Router, 'push'>;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps & WithRouterProps;\n\nexport enum ModalKey {\n  license,\n  onboarding\n}\n\ninterface State {\n  modal?: ModalKey;\n}\n\nconst LICENSE_PROMPT = 'sonarqube.license.prompt';\n\nexport class StartupModal extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    this.tryAutoOpenLicense().catch(this.tryAutoOpenOnboarding);\n  }\n\n  closeOnboarding = () => {\n    this.setState(state => {\n      if (state.modal !== ModalKey.license) {\n        this.props.skipOnboarding();\n        return { modal: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLicense = () => {\n    this.setState(state => {\n      if (state.modal === ModalKey.license) {\n        return { modal: undefined };\n      }\n      return null;\n    });\n  };\n\n  openOnboarding = () => {\n    this.setState({ modal: ModalKey.onboarding });\n  };\n\n  openProjectOnboarding = (organization?: T.Organization) => {\n    this.setState({ modal: undefined });\n    const state: { organization?: string; tab?: string } = {};\n    if (organization) {\n      state.organization = organization.key;\n      state.tab = organization.alm ? 'auto' : 'manual';\n    }\n    this.props.router.push({ pathname: `/projects/create`, state });\n  };\n\n  tryAutoOpenLicense = () => {\n    const { canAdmin, currentEdition, currentUser } = this.props;\n    const hasLicenseManager = hasMessage('license.prompt.title');\n    const hasLicensedEdition = currentEdition && currentEdition !== 'community';\n\n    if (canAdmin && hasLicensedEdition && isLoggedIn(currentUser) && hasLicenseManager) {\n      const lastPrompt = get(LICENSE_PROMPT, currentUser.login);\n\n      if (!lastPrompt || differenceInDays(new Date(), parseDate(lastPrompt)) >= 1) {\n        return showLicense().then(license => {\n          if (!license || !license.isValidEdition) {\n            save(LICENSE_PROMPT, toShortNotSoISOString(new Date()), currentUser.login);\n            this.setState({ modal: ModalKey.license });\n          }\n          return Promise.reject();\n        });\n      }\n    }\n    return Promise.reject();\n  };\n\n  tryAutoOpenOnboarding = () => {\n    if (\n      isSonarCloud() &&\n      this.props.currentUser.showOnboardingTutorial &&\n      ![\n        '/about',\n        '/documentation',\n        '/onboarding',\n        '/projects/create',\n        '/create-organization'\n      ].some(path => this.props.location.pathname.startsWith(path))\n    ) {\n      this.openOnboarding();\n    }\n  };\n\n  render() {\n    const { modal } = this.state;\n    return (\n      <OnboardingContext.Provider value={this.openProjectOnboarding}>\n        {this.props.children}\n        {modal === ModalKey.license && <LicensePromptModal onClose={this.closeLicense} />}\n        {modal === ModalKey.onboarding && (\n          <OnboardingModal\n            onClose={this.closeOnboarding}\n            onOpenProjectOnboarding={this.openProjectOnboarding}\n          />\n        )}\n      </OnboardingContext.Provider>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  canAdmin: getAppState(state).canAdmin,\n  currentEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps: DispatchProps = { skipOnboarding };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(StartupModal));\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isMySet } from '../../../../apps/issues/utils';\nimport { isSonarCloud } from '../../../../helpers/system';\nimport { getQualityGatesUrl } from '../../../../helpers/urls';\nimport { isLoggedIn } from '../../../../helpers/users';\n\ninterface Props {\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'organizationsEnabled' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n}\n\nexport default class GlobalNavMenu extends React.PureComponent<Props> {\n  renderProjects() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      return null;\n    }\n\n    const active =\n      this.props.location.pathname.startsWith('/projects') &&\n      this.props.location.pathname !== '/projects/create';\n\n    return (\n      <li>\n        <Link className={classNames({ active })} to=\"/projects\">\n          {isSonarCloud() ? translate('my_projects') : translate('projects.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderPortfolios() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/portfolios\">\n          {translate('portfolios.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderIssuesLink() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      return null;\n    }\n\n    const active = this.props.location.pathname.startsWith('/issues');\n\n    if (isSonarCloud()) {\n      return (\n        <li>\n          <Link\n            className={classNames({ active })}\n            to={{ pathname: '/issues', query: { resolved: 'false' } }}>\n            {translate('my_issues')}\n          </Link>\n        </li>\n      );\n    }\n\n    const query =\n      this.props.currentUser.isLoggedIn && isMySet()\n        ? { resolved: 'false', myIssues: 'true' }\n        : { resolved: 'false' };\n    return (\n      <li>\n        <Link className={classNames({ active })} to={{ pathname: '/issues', query }}>\n          {translate('issues.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderRulesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/coding_rules\">\n          {translate('coding_rules.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderProfilesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/profiles\">\n          {translate('quality_profiles.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderQualityGatesLink() {\n    return (\n      <li>\n        <Link activeClassName=\"active\" to={getQualityGatesUrl()}>\n          {translate('quality_gates.page')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderAdministrationLink() {\n    if (!this.props.appState.canAdmin) {\n      return null;\n    }\n\n    return (\n      <li>\n        <Link activeClassName=\"active\" to=\"/admin\">\n          {translate('layout.settings')}\n        </Link>\n      </li>\n    );\n  }\n\n  renderGlobalPageLink = ({ key, name }: T.Extension) => {\n    return (\n      <li key={key}>\n        <Link to={`/extension/${key}`}>{name}</Link>\n      </li>\n    );\n  };\n\n  renderMore() {\n    const { globalPages = [] } = this.props.appState;\n    const withoutPortfolios = globalPages.filter(page => page.key !== 'governance/portfolios');\n    if (withoutPortfolios.length === 0) {\n      return null;\n    }\n    return (\n      <Dropdown\n        overlay={<ul className=\"menu\">{withoutPortfolios.map(this.renderGlobalPageLink)}</ul>}\n        tagName=\"li\">\n        {({ onToggleClick, open }) => (\n          <a\n            aria-expanded={open}\n            aria-haspopup=\"true\"\n            className={classNames('dropdown-toggle', { active: open })}\n            href=\"#\"\n            id=\"global-navigation-more\"\n            onClick={onToggleClick}>\n            {translate('more')}\n            <DropdownIcon className=\"little-spacer-left text-middle\" />\n          </a>\n        )}\n      </Dropdown>\n    );\n  }\n\n  render() {\n    const governanceInstalled = this.props.appState.qualifiers.includes('VW');\n    const { organizationsEnabled } = this.props.appState;\n\n    return (\n      <ul className=\"global-navbar-menu\">\n        {this.renderProjects()}\n        {governanceInstalled && this.renderPortfolios()}\n        {this.renderIssuesLink()}\n        {!organizationsEnabled && this.renderRulesLink()}\n        {!organizationsEnabled && this.renderProfilesLink()}\n        {!organizationsEnabled && this.renderQualityGatesLink()}\n        {this.renderAdministrationLink()}\n        {this.renderMore()}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { Router, withRouter } from '../../../../components/hoc/withRouter';\nimport Avatar from '../../../../components/ui/Avatar';\nimport OrganizationListItem from '../../../../components/ui/OrganizationListItem';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport { rawSizes } from '../../../theme';\n\ninterface Props {\n  appState: { organizationsEnabled?: boolean };\n  currentUser: T.CurrentUser;\n  organizations: T.Organization[];\n  router: Pick<Router, 'push'>;\n}\n\nexport class GlobalNavUser extends React.PureComponent<Props> {\n  handleLogin = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const shouldReturnToCurrentPage = window.location.pathname !== `${getBaseUrl()}/about`;\n    if (shouldReturnToCurrentPage) {\n      const returnTo = encodeURIComponent(window.location.pathname + window.location.search);\n      window.location.href =\n        getBaseUrl() + `/sessions/new?return_to=${returnTo}${window.location.hash}`;\n    } else {\n      window.location.href = `${getBaseUrl()}/sessions/new`;\n    }\n  };\n\n  handleLogout = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.props.router.push('/sessions/logout');\n  };\n\n  renderAuthenticated() {\n    const { organizations } = this.props;\n    const currentUser = this.props.currentUser as T.LoggedInUser;\n    const hasOrganizations = this.props.appState.organizationsEnabled && organizations.length > 0;\n    return (\n      <Dropdown\n        className=\"js-user-authenticated\"\n        overlay={\n          <ul className=\"menu\">\n            <li className=\"menu-item\">\n              <div className=\"text-ellipsis text-muted\" title={currentUser.name}>\n                <strong>{currentUser.name}</strong>\n              </div>\n              {currentUser.email != null && (\n                <div\n                  className=\"little-spacer-top text-ellipsis text-muted\"\n                  title={currentUser.email}>\n                  {currentUser.email}\n                </div>\n              )}\n            </li>\n            <li className=\"divider\" />\n            <li>\n              <Link to=\"/account\">{translate('my_account.page')}</Link>\n            </li>\n            {hasOrganizations && <li className=\"divider\" role=\"separator\" />}\n            {hasOrganizations && (\n              <li>\n                <Link to=\"/account/organizations\">{translate('my_organizations')}</Link>\n              </li>\n            )}\n            {hasOrganizations &&\n              sortBy(organizations, org => org.name.toLowerCase()).map(organization => (\n                <OrganizationListItem key={organization.key} organization={organization} />\n              ))}\n            {hasOrganizations && <li className=\"divider\" role=\"separator\" />}\n            <li>\n              <a href=\"#\" onClick={this.handleLogout}>\n                {translate('layout.logout')}\n              </a>\n            </li>\n          </ul>\n        }\n        tagName=\"li\">\n        <a className=\"dropdown-toggle navbar-avatar\" href=\"#\" title={currentUser.name}>\n          <Avatar\n            hash={currentUser.avatar}\n            name={currentUser.name}\n            size={rawSizes.globalNavContentHeightRaw}\n          />\n        </a>\n      </Dropdown>\n    );\n  }\n\n  renderAnonymous() {\n    return (\n      <li>\n        <a className=\"navbar-login\" href=\"/sessions/new\" onClick={this.handleLogin}>\n          {translate('layout.login')}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return isLoggedIn(this.props.currentUser) ? this.renderAuthenticated() : this.renderAnonymous();\n  }\n}\n\nexport default withRouter(GlobalNavUser);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getMyOrganizations, Store } from '../../../../store/rootReducer';\nimport GlobalNavUser from './GlobalNavUser';\n\ninterface StateProps {\n  organizations: T.Organization[];\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  organizations: getMyOrganizations(state)\n});\n\nexport default connect(mapStateToProps)(GlobalNavUser);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport NavBar from 'sonar-ui-common/components/ui/NavBar';\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport {\n  fetchPrismicFeatureNews,\n  fetchPrismicRefs,\n  PrismicFeatureNews\n} from '../../../../api/news';\nimport { isSonarCloud } from '../../../../helpers/system';\nimport { isLoggedIn } from '../../../../helpers/users';\nimport {\n  getAppState,\n  getCurrentUser,\n  getCurrentUserSetting,\n  getGlobalSettingValue,\n  Store\n} from '../../../../store/rootReducer';\nimport { setCurrentUserSetting } from '../../../../store/users';\nimport { rawSizes } from '../../../theme';\nimport EmbedDocsPopupHelper from '../../embed-docs-modal/EmbedDocsPopupHelper';\nimport { OnboardingContext } from '../../OnboardingContext';\nimport Search from '../../search/Search';\nimport './GlobalNav.css';\nimport GlobalNavBranding, { SonarCloudNavBranding } from './GlobalNavBranding';\nimport GlobalNavExplore from './GlobalNavExplore';\nimport GlobalNavMenu from './GlobalNavMenu';\nimport GlobalNavUserContainer from './GlobalNavUserContainer';\n\nconst GlobalNavPlus = lazyLoadComponent(() => import('./GlobalNavPlus'), 'GlobalNavPlus');\nconst NotificationsSidebar = lazyLoadComponent(\n  () => import('../../notifications/NotificationsSidebar'),\n  'NotificationsSidebar'\n);\nconst NavLatestNotification = lazyLoadComponent(\n  () => import('../../notifications/NavLatestNotification'),\n  'NavLatestNotification'\n);\n\ninterface Props {\n  accessToken?: string;\n  appState: Pick<T.AppState, 'canAdmin' | 'globalPages' | 'organizationsEnabled' | 'qualifiers'>;\n  currentUser: T.CurrentUser;\n  location: { pathname: string };\n  notificationsLastReadDate?: Date;\n  notificationsOptOut?: boolean;\n  setCurrentUserSetting: (setting: T.CurrentUserSetting) => void;\n}\n\ninterface State {\n  notificationSidebar?: boolean;\n  loadingNews: boolean;\n  loadingMoreNews: boolean;\n  news: PrismicFeatureNews[];\n  newsPaging?: T.Paging;\n  newsRef?: string;\n}\n\nconst PAGE_SIZE = 5;\n\nexport class GlobalNav extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loadingNews: false,\n    loadingMoreNews: false,\n    news: [],\n    notificationSidebar: false\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (isSonarCloud()) {\n      this.fetchFeatureNews();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchFeatureNews = () => {\n    const { accessToken } = this.props;\n    if (accessToken) {\n      this.setState({ loadingNews: true });\n      fetchPrismicRefs()\n        .then(({ ref }) => {\n          if (this.mounted) {\n            this.setState({ newsRef: ref });\n          }\n          return ref;\n        })\n        .then(ref => fetchPrismicFeatureNews({ accessToken, ref, ps: PAGE_SIZE }))\n        .then(\n          ({ news, paging }) => {\n            if (this.mounted) {\n              this.setState({\n                loadingNews: false,\n                news,\n                newsPaging: paging\n              });\n            }\n          },\n          () => {\n            if (this.mounted) {\n              this.setState({ loadingNews: false });\n            }\n          }\n        );\n    }\n  };\n\n  fetchMoreFeatureNews = () => {\n    const { accessToken } = this.props;\n    const { newsPaging, newsRef } = this.state;\n    if (accessToken && newsPaging && newsRef) {\n      this.setState({ loadingMoreNews: true });\n      fetchPrismicFeatureNews({\n        accessToken,\n        ref: newsRef,\n        p: newsPaging.pageIndex + 1,\n        ps: PAGE_SIZE\n      }).then(\n        ({ news, paging }) => {\n          if (this.mounted) {\n            this.setState(state => ({\n              loadingMoreNews: false,\n              news: [...state.news, ...news],\n              newsPaging: paging\n            }));\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ loadingMoreNews: false });\n          }\n        }\n      );\n    }\n  };\n\n  handleOpenNotificationSidebar = () => {\n    this.setState({ notificationSidebar: true });\n    this.fetchFeatureNews();\n  };\n\n  handleCloseNotificationSidebar = () => {\n    this.setState({ notificationSidebar: false });\n    const lastNews = this.state.news[0];\n    const readDate = lastNews ? parseDate(lastNews.publicationDate).getTime() : Date.now();\n    this.props.setCurrentUserSetting({ key: 'notifications.readDate', value: readDate.toString() });\n  };\n\n  render() {\n    const { appState, currentUser } = this.props;\n    const { news } = this.state;\n    return (\n      <NavBar className=\"navbar-global\" height={rawSizes.globalNavHeightRaw} id=\"global-navigation\">\n        {isSonarCloud() ? <SonarCloudNavBranding /> : <GlobalNavBranding />}\n\n        <GlobalNavMenu {...this.props} />\n\n        <ul className=\"global-navbar-menu global-navbar-menu-right\">\n          {isSonarCloud() && isLoggedIn(currentUser) && news.length > 0 && (\n            <NavLatestNotification\n              lastNews={news[0]}\n              notificationsLastReadDate={this.props.notificationsLastReadDate}\n              notificationsOptOut={this.props.notificationsOptOut}\n              onClick={this.handleOpenNotificationSidebar}\n              setCurrentUserSetting={this.props.setCurrentUserSetting}\n            />\n          )}\n          {isSonarCloud() && <GlobalNavExplore location={this.props.location} />}\n          <EmbedDocsPopupHelper />\n          <Search appState={appState} currentUser={currentUser} />\n          {isLoggedIn(currentUser) && (\n            <OnboardingContext.Consumer data-test=\"global-nav-plus\">\n              {openProjectOnboarding => (\n                <GlobalNavPlus\n                  appState={appState}\n                  currentUser={currentUser}\n                  openProjectOnboarding={openProjectOnboarding}\n                />\n              )}\n            </OnboardingContext.Consumer>\n          )}\n          <GlobalNavUserContainer appState={appState} currentUser={currentUser} />\n        </ul>\n        {isSonarCloud() && isLoggedIn(currentUser) && this.state.notificationSidebar && (\n          <NotificationsSidebar\n            fetchMoreFeatureNews={this.fetchMoreFeatureNews}\n            loading={this.state.loadingNews}\n            loadingMore={this.state.loadingMoreNews}\n            news={news}\n            notificationsLastReadDate={this.props.notificationsLastReadDate}\n            onClose={this.handleCloseNotificationSidebar}\n            paging={this.state.newsPaging}\n          />\n        )}\n      </NavBar>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => {\n  const accessToken = getGlobalSettingValue(state, 'sonar.prismic.accessToken');\n  const notificationsLastReadDate = getCurrentUserSetting(state, 'notifications.readDate');\n  const notificationsOptOut = getCurrentUserSetting(state, 'notifications.optOut') === 'true';\n\n  return {\n    currentUser: getCurrentUser(state),\n    appState: getAppState(state),\n    accessToken: accessToken && accessToken.value,\n    notificationsLastReadDate: notificationsLastReadDate\n      ? parseDate(Number(notificationsLastReadDate))\n      : undefined,\n    notificationsOptOut\n  };\n};\n\nconst mapDispatchToProps = {\n  setCurrentUserSetting\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalNav);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Workspace from '../../components/workspace/Workspace';\nimport A11yProvider from './a11y/A11yProvider';\nimport A11ySkipLinks from './a11y/A11ySkipLinks';\nimport SuggestionsProvider from './embed-docs-modal/SuggestionsProvider';\nimport GlobalFooterContainer from './GlobalFooterContainer';\nimport GlobalMessagesContainer from './GlobalMessagesContainer';\nimport GlobalNav from './nav/global/GlobalNav';\nimport StartupModal from './StartupModal';\n\nexport interface Props {\n  children: React.ReactNode;\n  footer?: React.ReactNode;\n  location: { pathname: string };\n}\n\nexport default function GlobalContainer(props: Props) {\n  // it is important to pass `location` down to `GlobalNav` to trigger render on url change\n  const { footer = <GlobalFooterContainer /> } = props;\n  return (\n    <SuggestionsProvider>\n      <A11yProvider>\n        <StartupModal>\n          <A11ySkipLinks />\n\n          <div className=\"global-container\">\n            <div className=\"page-wrapper\" id=\"container\">\n              <div className=\"page-container\">\n                <Workspace>\n                  <GlobalNav location={props.location} />\n                  <GlobalMessagesContainer />\n                  {props.children}\n                </Workspace>\n              </div>\n            </div>\n            {footer}\n          </div>\n        </StartupModal>\n      </A11yProvider>\n    </SuggestionsProvider>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { combineReducers } from 'redux';\nimport globalMessages, * as fromGlobalMessages from '../../../store/globalMessages';\nimport definitions, * as fromDefinitions from './definitions';\nimport settingsPage, * as fromSettingsPage from './settingsPage';\nimport values, * as fromValues from './values';\n\ninterface State {\n  definitions: fromDefinitions.State;\n  globalMessages: fromGlobalMessages.State;\n  settingsPage: fromSettingsPage.State;\n  values: fromValues.State;\n}\n\nexport default combineReducers({ definitions, values, settingsPage, globalMessages });\n\nexport function getDefinition(state: State, key: string) {\n  return fromDefinitions.getDefinition(state.definitions, key);\n}\n\nexport function getAllCategories(state: State) {\n  return fromDefinitions.getAllCategories(state.definitions);\n}\n\nexport function getDefaultCategory(state: State) {\n  return fromDefinitions.getDefaultCategory(state.definitions);\n}\n\nexport function getValue(state: State, key: string, component?: string) {\n  return fromValues.getValue(state.values, key, component);\n}\n\nexport function getSettingsForCategory(state: State, category: string, component?: string) {\n  return fromDefinitions.getDefinitionsForCategory(state.definitions, category).map(definition => ({\n    key: definition.key,\n    ...getValue(state, definition.key, component),\n    definition\n  }));\n}\n\nexport function getChangedValue(state: State, key: string) {\n  return fromSettingsPage.getChangedValue(state.settingsPage, key);\n}\n\nexport function isLoading(state: State, key: string) {\n  return fromSettingsPage.isLoading(state.settingsPage, key);\n}\n\nexport function getValidationMessage(state: State, key: string) {\n  return fromSettingsPage.getValidationMessage(state.settingsPage, key);\n}\n\nexport function getGlobalMessages(state: State) {\n  return fromGlobalMessages.getGlobalMessages(state.globalMessages);\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".workspace-nav{position:fixed;z-index:451;bottom:0;right:0;height:28px}.workspace-nav-list{float:right}.workspace-nav-item{position:relative;display:inline-flex;align-items:center;margin-right:8px}.workspace-nav-item-link{display:inline-flex;align-items:center;height:28px;padding:0 28px 0 8px;border:none;background-color:#404040;color:#fff;font-size:12px}.workspace-nav-item-link:focus,.workspace-nav-item-link:hover{color:#fff;opacity:.9}.workspace-nav-item-close{position:absolute;right:4px;top:4px}.workspace-viewer{position:fixed;z-index:450;bottom:0;left:0;right:0;box-sizing:border-box;background-color:#fff;box-shadow:0 -6px 12px rgba(0,0,0,.175)}.workspace-viewer-header{position:relative;height:30px;padding:3px 10px;box-sizing:border-box;background-color:#404040;color:#fff;font-weight:300}.workspace-viewer-name{float:left;line-height:24px;color:#fff;font-weight:400}.workspace-viewer-name i{margin-top:3px}.workspace-viewer-resize{position:absolute;top:3px;left:50%;width:30px;height:5px;margin-left:-15px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEuNDE0Ij48cGF0aCBmaWxsPSIjNzc3IiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMCAwaDJ2Mkgwek00IDBoMnYySDR6TTggMGgydjJIOHpNMTIgMGgydjJoLTJ6TTE2IDBoMnYyaC0yek0yMCAwaDJ2MmgtMnpNMjQgMGgydjJoLTJ6TTI4IDBoMnYyaC0yek0wIDNoMnYySDB6TTQgM2gydjJINHpNOCAzaDJ2Mkg4ek0xMiAzaDJ2MmgtMnpNMTYgM2gydjJoLTJ6TTIwIDNoMnYyaC0yek0yNCAzaDJ2MmgtMnpNMjggM2gydjJoLTJ6Ii8+PHBhdGggZmlsbD0iIzc3NyIgZmlsbC1vcGFjaXR5PSIuNSIgZD0iTTAgMGgydjJIMHpNNCAwaDJ2Mkg0ek04IDBoMnYySDh6TTEyIDBoMnYyaC0yek0xNiAwaDJ2MmgtMnpNMjAgMGgydjJoLTJ6TTI0IDBoMnYyaC0yek0yOCAwaDJ2MmgtMnoiLz48L3N2Zz4=);cursor:ns-resize}.workspace-viewer-actions{float:right}.workspace-viewer-actions a{color:inherit}.workspace-header-icon:focus path,.workspace-header-icon:hover path{color:#404040}.workspace-viewer-container{height:calc(40vh - 30px);min-height:100px;max-height:calc(95vh - 30px);padding:5px 10px;overflow-y:scroll;overflow-x:auto;box-sizing:border-box}.with-workspace .source-viewer{padding-bottom:40vh}.with-workspace .workspace-viewer .source-viewer{padding-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./A11ySkipLinks.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".a11y-skip-link{width:0;height:0;padding:8px;position:absolute;left:-9999px;top:-9999px;border:0;font-size:1rem;text-align:center;z-index:999}.a11y-skip-link:focus{width:auto;height:auto;left:6px;top:6px;color:#fff;background-color:#262626;text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Search.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-search{position:relative;padding:8px 0}.navbar-search .search-box,.navbar-search .search-box-input{width:26vw;max-width:310px;min-width:260px;height:32px}.navbar-search .search-box-input{border-color:#fff}.navbar-search .search-box-note{line-height:30px}.navbar-search .search-box-clear,.navbar-search .search-box-magnifier{top:8px}.navbar-search-input{vertical-align:middle;width:310px;margin-top:3px;margin-bottom:3px;padding-left:26px!important}.navbar-search-input-hint{position:absolute;top:1px;right:27px;line-height:24px;font-size:12px;color:#777}.navbar-search-icon{position:relative;z-index:3;vertical-align:middle;width:16px;margin-left:4px;margin-right:-20px;background-color:#fff;color:#777}.navbar-search-icon:before{font-size:14px}.navbar-search-item-link{display:flex!important}.navbar-search-item-match{flex-grow:5;overflow:hidden;text-overflow:ellipsis}.navbar-search-item-right{flex-grow:1;padding-left:10px;text-align:right}.navbar-search-item-icons{position:relative;flex-shrink:0;width:16px;height:16px}.navbar-search-item-icons>*{position:absolute;z-index:5;top:0;left:0}.navbar-search-item-icons>.icon-clock,.navbar-search-item-icons>.icon-outline{z-index:6;top:-4px;left:-5px}.navbar-search-no-results{margin-top:4px;padding:5px 10px}.global-navbar-search-dropdown{top:100%!important;max-height:80vh;width:440px;padding:0!important;overflow-y:auto;overflow-x:hidden}.global-navbar-search-dropdown .dropdown-bottom-hint{margin-bottom:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!./GlobalNav.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-global,.navbar-global .navbar-inner{background-color:#262626;z-index:421}.navbar-global .navbar-limited{display:flex}.navbar-brand{display:flex;justify-content:center;align-items:center;height:48px;margin-left:-8px;padding-top:4px;padding-left:8px;padding-right:8px;border-bottom:4px solid transparent}.navbar-login{margin-right:-10px;white-space:nowrap}.navbar-avatar{margin-right:-8px;padding:8px!important;border:none!important}.navbar-icon{display:inline-block;height:48px;padding:16px 12px!important;border-bottom:none!important;color:#fff!important}.navbar-plus{margin-right:-8px}.global-navbar-menu{display:flex;align-items:center;height:48px}.global-navbar-menu>li>a{display:block;height:48px;padding:8px 10px;line-height:32px;border-bottom:4px solid transparent;box-sizing:border-box;color:#ccc;font-size:13px;letter-spacing:.05em;white-space:nowrap}.global-navbar-menu>.dropdown.open>a,.global-navbar-menu>li>a.active,.global-navbar-menu>li>a:focus,.global-navbar-menu>li>a:hover,.navbar-brand:focus,.navbar-brand:hover{background-color:#020202}.global-navbar-menu>li>a.active{border-bottom-color:#646464}.global-navbar-menu-right{flex:1;justify-content:flex-end;margin-left:40px}.global-navbar-menu-right .navbar-search{flex:0 1 240px;min-width:0}.global-navbar-menu-right .navbar-search .search-box,.global-navbar-menu-right .navbar-search .search-box-input{min-width:0;width:100%}@media print{.navbar-global{display:none!important}}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./OrganizationAvatar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".navbar-context-avatar{display:inline-flex;vertical-align:top;justify-content:center;align-items:center;width:32px;height:32px;border:1px solid #e6e6e6}.navbar-context-avatar.no-border{border:none}.navbar-context-avatar.is-small{width:16px;height:16px}.navbar-context-avatar img{vertical-align:top;max-width:100%;max-height:100%}.navbar-context-avatar img,.navbar-context-avatar svg{transform:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  { indexRoute: { component: lazyLoadComponent(() => import('./components/AboutApp')) } }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/Account')),\n    childRoutes: [\n      {\n        indexRoute: { component: lazyLoadComponent(() => import('./profile/Profile')) }\n      },\n      {\n        path: 'security',\n        component: lazyLoadComponent(() => import('./components/Security'))\n      },\n      {\n        path: 'projects',\n        component: lazyLoadComponent(() => import('./projects/ProjectsContainer'))\n      },\n      {\n        path: 'notifications',\n        component: lazyLoadComponent(() => import('./notifications/Notifications'))\n      },\n      {\n        path: 'organizations',\n        component: lazyLoadComponent(() => import('./organizations/UserOrganizations'))\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/BackgroundTasksApp')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { parseQuery, serializeQuery } from './query';\n\nfunction parseHash(hash: string): T.RawQuery {\n  const query: T.RawQuery = {};\n  const parts = hash.split('|');\n  parts.forEach(part => {\n    const tokens = part.split('=');\n    if (tokens.length === 2) {\n      query[decodeURIComponent(tokens[0])] = decodeURIComponent(tokens[1]);\n    }\n  });\n  return query;\n}\n\nconst routes = [\n  {\n    indexRoute: {\n      onEnter: (nextState: RouterState, replace: RedirectFunction) => {\n        const { hash } = window.location;\n        if (hash.length > 1) {\n          const query = parseHash(hash.substr(1));\n          const normalizedQuery = {\n            ...serializeQuery(parseQuery(query)),\n            open: query.open\n          };\n          replace({ pathname: nextState.location.pathname, query: normalizedQuery });\n        }\n      },\n      component: lazyLoadComponent(() => import('./components/App'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  },\n  {\n    path: 'domain/:domainName',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      replace({\n        pathname: '/component_measures',\n        query: {\n          ...nextState.location.query,\n          metric: nextState.params.domainName\n        }\n      });\n    }\n  },\n  {\n    path: 'metric/:metricKey(/:view)',\n    onEnter(nextState: RouterState, replace: RedirectFunction) {\n      if (nextState.params.view === 'history') {\n        replace({\n          pathname: '/project/activity',\n          query: {\n            id: nextState.location.query.id,\n            graph: 'custom',\n            custom_metrics: nextState.params.metricKey\n          }\n        });\n      } else {\n        replace({\n          pathname: '/component_measures',\n          query: {\n            ...nextState.location.query,\n            metric: nextState.params.metricKey,\n            view: nextState.params.view\n          }\n        });\n      }\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import(/* webpackChunkName: \"docs\" */ './components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: '**', indexRoute: { component: App } }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport ContextNavBar from 'sonar-ui-common/components/ui/ContextNavBar';\nimport NavBarTabs from 'sonar-ui-common/components/ui/NavBarTabs';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { rawSizes } from '../../app/theme';\n\ninterface Props {\n  children: JSX.Element;\n}\n\nexport default function Explore(props: Props) {\n  return (\n    <div id=\"explore\">\n      <ContextNavBar height={rawSizes.contextNavHeightRaw} id=\"explore-navigation\">\n        <header className=\"navbar-context-header\">\n          <h1>{translate('explore')}</h1>\n        </header>\n\n        <NavBarTabs>\n          <li>\n            <Link activeClassName=\"active\" to=\"/explore/projects\">\n              {translate('projects.page')}\n            </Link>\n          </li>\n          <li>\n            <Link\n              activeClassName=\"active\"\n              to={{ pathname: '/explore/issues', query: { resolved: 'false' } }}>\n              {translate('issues.page')}\n            </Link>\n          </li>\n        </NavBarTabs>\n      </ContextNavBar>\n\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AppContainer from '../issues/components/AppContainer';\n\ninterface Props {\n  location: { pathname: string; query: T.RawQuery };\n}\n\nexport default function ExploreIssues(props: Props) {\n  return (\n    <AppContainer hideAuthorFacet={true} multiOrganizations={true} myIssues={false} {...props} />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AllProjectsContainer from '../projects/components/AllProjectsContainer';\n\ninterface Props {\n  location: { pathname: string; query: T.RawQuery };\n}\n\nexport default function ExploreProjects(props: Props) {\n  return (\n    <AllProjectsContainer\n      isFavorite={false}\n      organization={undefined}\n      storageOptionsSuffix=\"explore\"\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexRoute } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const maintenanceRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/MaintenanceAppContainer'))} />\n);\n\nexport const setupRoutes = (\n  <IndexRoute component={lazyLoadComponent(() => import('./components/SetupAppContainer'))} />\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst App = lazyLoadComponent(() => import('./components/App'));\n\nconst routes = [{ indexRoute: { component: App } }, { path: 'show/:id', component: App }];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    component: lazyLoadComponent(() => import('./components/AppContainer')),\n    indexRoute: { component: lazyLoadComponent(() => import('./home/HomeContainer')) },\n    childRoutes: [\n      {\n        component: lazyLoadComponent(() => import('./components/ProfileContainer')),\n        childRoutes: [\n          {\n            path: 'show',\n            component: lazyLoadComponent(() => import('./details/ProfileDetails'))\n          },\n          {\n            path: 'changelog',\n            component: lazyLoadComponent(() => import('./changelog/ChangelogContainer'))\n          },\n          {\n            path: 'compare',\n            component: lazyLoadComponent(() => import('./compare/ComparisonContainer'))\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport codingRulesRoutes from '../coding-rules/routes';\nimport qualityGatesRoutes from '../quality-gates/routes';\nimport qualityProfilesRoutes from '../quality-profiles/routes';\nimport webhooksRoutes from '../webhooks/routes';\n\nconst OrganizationContainer = lazyLoadComponent(() => import('./components/OrganizationContainer'));\n\nconst routes = [\n  {\n    path: ':organizationKey',\n    component: lazyLoadComponent(() => import('./components/OrganizationPage')),\n    childRoutes: [\n      {\n        indexRoute: {\n          onEnter(nextState: RouterState, replace: RedirectFunction) {\n            const { params } = nextState;\n            replace(`/organizations/${params.organizationKey}/projects`);\n          }\n        }\n      },\n      {\n        path: 'projects',\n        component: OrganizationContainer,\n        childRoutes: [\n          {\n            indexRoute: {\n              component: lazyLoadComponent(() => import('./components/OrganizationProjects'))\n            }\n          }\n        ]\n      },\n      {\n        path: 'issues',\n        component: OrganizationContainer,\n        childRoutes: [\n          {\n            indexRoute: {\n              component: lazyLoadComponent(() => import('../issues/components/AppContainer'))\n            }\n          }\n        ]\n      },\n      {\n        path: 'rules',\n        component: OrganizationContainer,\n        childRoutes: codingRulesRoutes\n      },\n      {\n        path: 'members',\n        component: lazyLoadComponent(() =>\n          import('../organizationMembers/OrganizationMembersContainer')\n        )\n      },\n      {\n        path: 'quality_profiles',\n        childRoutes: qualityProfilesRoutes\n      },\n      {\n        path: 'quality_gates',\n        component: OrganizationContainer,\n        childRoutes: qualityGatesRoutes\n      },\n      {\n        component: lazyLoadComponent(() => import('./components/OrganizationAccessContainer')),\n        childRoutes: [\n          {\n            path: 'edit',\n            component: lazyLoadComponent(() => import('./components/OrganizationEdit'))\n          },\n          {\n            path: 'groups',\n            component: lazyLoadComponent(() => import('../groups/components/App'))\n          },\n          {\n            path: 'permissions',\n            component: lazyLoadComponent(() => import('../permissions/global/components/App'))\n          },\n          {\n            path: 'permission_templates',\n            component: lazyLoadComponent(() => import('../permission-templates/components/App'))\n          },\n          {\n            path: 'projects_management',\n            component: lazyLoadComponent(() => import('../projectsManagement/AppContainer'))\n          },\n          { path: 'webhooks', childRoutes: webhooksRoutes },\n          {\n            path: 'extension/:pluginKey/:extensionKey',\n            component: lazyLoadComponent(() =>\n              import('../../app/components/extensions/OrganizationPageExtension')\n            )\n          }\n        ]\n      }\n    ]\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nexport const globalPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./global/components/App')) }\n  }\n];\n\nexport const projectPermissionsRoutes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./project/components/AppContainer')) }\n  }\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./components/ProjectActivityAppContainer'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { get } from 'sonar-ui-common/helpers/storage';\nimport { searchProjects } from '../../../api/components';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER, PROJECTS_FAVORITE } from '../utils';\nimport AllProjectsContainer from './AllProjectsContainer';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  location: Pick<Location, 'pathname' | 'query'>;\n  router: Pick<Router, 'replace'>;\n}\n\ninterface State {\n  shouldBeRedirected?: boolean;\n  shouldForceSorting?: string;\n}\n\nexport class DefaultPageSelector extends React.PureComponent<Props, State> {\n  state: State = {};\n\n  componentDidMount() {\n    if (isSonarCloud() && !isLoggedIn(this.props.currentUser)) {\n      this.props.router.replace('/explore/projects');\n    }\n\n    if (!isSonarCloud()) {\n      this.defineIfShouldBeRedirected();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!isSonarCloud()) {\n      if (prevProps.location !== this.props.location) {\n        this.defineIfShouldBeRedirected();\n      } else if (this.state.shouldBeRedirected === true) {\n        this.props.router.replace({ ...this.props.location, pathname: '/projects/favorite' });\n      } else if (this.state.shouldForceSorting != null) {\n        this.props.router.replace({\n          ...this.props.location,\n          query: {\n            ...this.props.location.query,\n            sort: this.state.shouldForceSorting\n          }\n        });\n      }\n    }\n  }\n\n  isFavoriteSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_FAVORITE;\n  };\n\n  isAllSet = (): boolean => {\n    const setting = get(PROJECTS_DEFAULT_FILTER);\n    return setting === PROJECTS_ALL;\n  };\n\n  defineIfShouldBeRedirected() {\n    if (Object.keys(this.props.location.query).length > 0) {\n      // show ALL projects when there are some filters\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else if (!isLoggedIn(this.props.currentUser)) {\n      // show ALL projects if user is anonymous\n      if (!this.props.location.query || !this.props.location.query.sort) {\n        // force default sorting to last analysis date\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: '-analysis_date' });\n      } else {\n        this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n      }\n    } else if (this.isFavoriteSet()) {\n      // show FAVORITE projects if \"favorite\" setting is explicitly set\n      this.setState({ shouldBeRedirected: true, shouldForceSorting: undefined });\n    } else if (this.isAllSet()) {\n      // show ALL projects if \"all\" setting is explicitly set\n      this.setState({ shouldBeRedirected: false, shouldForceSorting: undefined });\n    } else {\n      // otherwise, request favorites\n      this.setState({ shouldBeRedirected: undefined, shouldForceSorting: undefined });\n      searchProjects({ filter: 'isFavorite', ps: 1 }).then(r => {\n        // show FAVORITE projects if there are any\n        this.setState({ shouldBeRedirected: r.paging.total > 0, shouldForceSorting: undefined });\n      });\n    }\n  }\n\n  render() {\n    if (isSonarCloud() && isLoggedIn(this.props.currentUser)) {\n      return <AllProjectsContainer isFavorite={true} organization={undefined} />;\n    }\n\n    const { shouldBeRedirected, shouldForceSorting } = this.state;\n\n    if (\n      shouldBeRedirected !== undefined &&\n      shouldBeRedirected !== true &&\n      shouldForceSorting === undefined\n    ) {\n      return <AllProjectsContainer isFavorite={false} organization={undefined} />;\n    }\n\n    return null;\n  }\n}\n\nexport default withRouter(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport DefaultPageSelector from './DefaultPageSelector';\n\nconst stateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(stateToProps)(DefaultPageSelector);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { RedirectFunction, RouterState } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { save } from 'sonar-ui-common/helpers/storage';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport DefaultPageSelectorContainer from './components/DefaultPageSelectorContainer';\nimport FavoriteProjectsContainer from './components/FavoriteProjectsContainer';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER } from './utils';\n\nconst routes = [\n  { indexRoute: { component: DefaultPageSelectorContainer } },\n  {\n    path: 'all',\n    onEnter(_: RouterState, replace: RedirectFunction) {\n      save(PROJECTS_DEFAULT_FILTER, PROJECTS_ALL);\n      replace('/projects');\n    }\n  },\n  { path: 'favorite', component: FavoriteProjectsContainer },\n  {\n    path: 'create',\n    component: lazyLoadComponent(() => import('../create/project/CreateProjectPage'))\n  }\n].filter(isDefined);\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AllProjectsContainer from './AllProjectsContainer';\n\nexport default function FavoriteProjectsContainer(props: any) {\n  return <AllProjectsContainer isFavorite={true} {...props} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./AppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    path: 'new',\n    component: lazyLoadComponent(() => import('./components/LoginContainer'))\n  },\n  {\n    path: 'logout',\n    component: lazyLoadComponent(() => import('./components/Logout'))\n  },\n  {\n    path: 'unauthorized',\n    component: lazyLoadComponent(() => import('./components/Unauthorized'))\n  },\n  {\n    path: 'email_already_exists',\n    component: lazyLoadComponent(() => import('./components/EmailAlreadyExists'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/AppContainer')) }\n  },\n  {\n    path: 'encryption',\n    component: lazyLoadComponent(() => import('./encryption/EncryptionApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/App')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: {\n      component: lazyLoadComponent(() => import('./ProjectOnboardingPage'))\n    }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./UsersAppContainer')) }\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\n\nconst routes = [\n  {\n    indexRoute: { component: lazyLoadComponent(() => import('./components/WebApiApp')) }\n  },\n  {\n    path: '**',\n    component: lazyLoadComponent(() => import('./components/WebApiApp'))\n  }\n];\n\nexport default routes;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { fetchMyOrganizations } from '../../apps/account/organizations/actions';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isLoggedIn } from '../../helpers/users';\nimport { fetchLanguages } from '../../store/rootActions';\nimport { getAppState, getCurrentUser, getGlobalSettingValue, Store } from '../../store/rootReducer';\n\nconst PageTracker = lazyLoadComponent(() => import('./PageTracker'));\n\ninterface StateProps {\n  appState: T.AppState | undefined;\n  currentUser: T.CurrentUser | undefined;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n}\n\ninterface DispatchProps {\n  fetchLanguages: () => Promise<void>;\n  fetchMyOrganizations: () => Promise<void>;\n}\n\ninterface OwnProps {\n  children: JSX.Element;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps;\n\nclass App extends React.PureComponent<Props> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchLanguages();\n    this.setScrollbarWidth();\n    const { appState, currentUser } = this.props;\n    if (appState && isSonarCloud() && currentUser && isLoggedIn(currentUser)) {\n      this.props.fetchMyOrganizations();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  setScrollbarWidth = () => {\n    // See https://stackoverflow.com/questions/13382516/getting-scroll-bar-width-using-javascript\n    const outer = document.createElement('div');\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.msOverflowStyle = 'scrollbar';\n\n    document.body.appendChild(outer);\n\n    const widthNoScroll = outer.offsetWidth;\n    outer.style.overflow = 'scroll';\n\n    const inner = document.createElement('div');\n    inner.style.width = '100%';\n    outer.appendChild(inner);\n\n    const widthWithScroll = inner.offsetWidth;\n\n    if (outer.parentNode) {\n      outer.parentNode.removeChild(outer);\n    }\n\n    document.body.style.setProperty('--sbw', `${widthNoScroll - widthWithScroll}px`);\n  };\n\n  renderPreconnectLink = () => {\n    const parser = document.createElement('a');\n    parser.href = this.props.gravatarServerUrl;\n    if (parser.hostname !== window.location.hostname) {\n      return <link href={parser.origin} rel=\"preconnect\" />;\n    } else {\n      return null;\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <PageTracker>{this.props.enableGravatar && this.renderPreconnectLink()}</PageTracker>\n        {this.props.children}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    appState: getAppState(state),\n    currentUser: getCurrentUser(state),\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nconst mapDispatchToProps = ({\n  fetchLanguages,\n  fetchMyOrganizations\n} as any) as DispatchProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport { getSystemStatus } from '../../helpers/system';\n\nexport default class MigrationContainer extends React.PureComponent<WithRouterProps> {\n  componentDidMount() {\n    if (getSystemStatus() !== 'UP') {\n      this.props.router.push({\n        pathname: '/maintenance',\n        query: {\n          return_to: window.location.pathname + window.location.search + window.location.hash\n        }\n      });\n    }\n  }\n\n  render() {\n    if (getSystemStatus() !== 'UP') {\n      return null;\n    }\n    return this.props.children;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n/* eslint-disable react/jsx-sort-props */\nimport { Location } from 'history';\nimport { pick } from 'lodash';\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport { HelmetProvider } from 'react-helmet-async';\nimport { IntlProvider } from 'react-intl';\nimport { Provider } from 'react-redux';\nimport { IndexRoute, Redirect, Route, RouteConfig, RouteProps, Router } from 'react-router';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { ThemeProvider } from 'sonar-ui-common/components/theme';\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport aboutRoutes from '../../apps/about/routes';\nimport accountRoutes from '../../apps/account/routes';\nimport backgroundTasksRoutes from '../../apps/background-tasks/routes';\nimport codeRoutes from '../../apps/code/routes';\nimport codingRulesRoutes from '../../apps/coding-rules/routes';\nimport componentMeasuresRoutes from '../../apps/component-measures/routes';\nimport customMeasuresRoutes from '../../apps/custom-measures/routes';\nimport customMetricsRoutes from '../../apps/custom-metrics/routes';\nimport documentationRoutes from '../../apps/documentation/routes';\nimport Explore from '../../apps/explore/Explore';\nimport ExploreIssues from '../../apps/explore/ExploreIssues';\nimport ExploreProjects from '../../apps/explore/ExploreProjects';\nimport groupsRoutes from '../../apps/groups/routes';\nimport Issues from '../../apps/issues/components/AppContainer';\nimport { maintenanceRoutes, setupRoutes } from '../../apps/maintenance/routes';\nimport marketplaceRoutes from '../../apps/marketplace/routes';\nimport organizationsRoutes from '../../apps/organizations/routes';\nimport overviewRoutes from '../../apps/overview/routes';\nimport permissionTemplatesRoutes from '../../apps/permission-templates/routes';\nimport { globalPermissionsRoutes, projectPermissionsRoutes } from '../../apps/permissions/routes';\nimport portfolioRoutes from '../../apps/portfolio/routes';\nimport projectActivityRoutes from '../../apps/projectActivity/routes';\nimport projectBaselineRoutes from '../../apps/projectBaseline/routes';\nimport projectBranchesRoutes from '../../apps/projectBranches/routes';\nimport projectQualityGateRoutes from '../../apps/projectQualityGate/routes';\nimport projectQualityProfilesRoutes from '../../apps/projectQualityProfiles/routes';\nimport projectsRoutes from '../../apps/projects/routes';\nimport projectsManagementRoutes from '../../apps/projectsManagement/routes';\nimport qualityGatesRoutes from '../../apps/quality-gates/routes';\nimport qualityProfilesRoutes from '../../apps/quality-profiles/routes';\nimport sessionsRoutes from '../../apps/sessions/routes';\nimport settingsRoutes from '../../apps/settings/routes';\nimport systemRoutes from '../../apps/system/routes';\nimport onboardingRoutes from '../../apps/tutorials/routes';\nimport usersRoutes from '../../apps/users/routes';\nimport webAPIRoutes from '../../apps/web-api/routes';\nimport webhooksRoutes from '../../apps/webhooks/routes';\nimport App from '../components/App';\nimport GlobalContainer from '../components/GlobalContainer';\nimport MigrationContainer from '../components/MigrationContainer';\nimport * as theme from '../theme';\nimport getStore from './getStore';\n\nfunction handleUpdate(this: { state: { location: Location } }) {\n  const { action } = this.state.location;\n\n  if (action === 'PUSH') {\n    window.scrollTo(0, 0);\n  }\n}\n\n// this is not an official api\nconst RouteWithChildRoutes = Route as React.ComponentClass<\n  RouteProps & { childRoutes: RouteConfig }\n>;\n\nfunction renderRedirects() {\n  return (\n    <>\n      <Route\n        path=\"/account/issues\"\n        onEnter={(_, replace) => {\n          replace({ pathname: '/issues', query: { myIssues: 'true', resolved: 'false' } });\n        }}\n      />\n\n      <Route\n        path=\"/codingrules\"\n        onEnter={(_, replace) => {\n          replace(`/coding_rules${window.location.hash}`);\n        }}\n      />\n\n      <Route\n        path=\"/dashboard/index/:key\"\n        onEnter={(nextState, replace) => {\n          replace({ pathname: '/dashboard', query: { id: nextState.params.key } });\n        }}\n      />\n\n      <Route\n        path=\"/issues/search\"\n        onEnter={(_, replace) => {\n          replace(`/issues${window.location.hash}`);\n        }}\n      />\n\n      <Redirect from=\"/admin\" to=\"/admin/settings\" />\n      <Redirect from=\"/background_tasks\" to=\"/admin/background_tasks\" />\n      <Redirect from=\"/component/index\" to=\"/component\" />\n      <Redirect from=\"/component_issues\" to=\"/project/issues\" />\n      <Redirect from=\"/dashboard/index\" to=\"/dashboard\" />\n      <Redirect\n        from=\"/documentation/analysis/languages/vb\"\n        to=\"/documentation/analysis/languages/vbnet/\"\n      />\n      <Redirect from=\"/governance\" to=\"/portfolio\" />\n      <Redirect from=\"/groups\" to=\"/admin/groups\" />\n      <Redirect from=\"/extension/governance/portfolios\" to=\"/portfolios\" />\n      <Redirect from=\"/metrics\" to=\"/admin/custom_metrics\" />\n      <Redirect from=\"/permission_templates\" to=\"/admin/permission_templates\" />\n      <Redirect from=\"/profiles/index\" to=\"/profiles\" />\n      <Redirect from=\"/projects_admin\" to=\"/admin/projects_management\" />\n      <Redirect from=\"/quality_gates/index\" to=\"/quality_gates\" />\n      <Redirect from=\"/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/admin/roles/global\" to=\"/admin/permissions\" />\n      <Redirect from=\"/settings\" to=\"/admin/settings\" />\n      <Redirect from=\"/settings/encryption\" to=\"/admin/settings/encryption\" />\n      <Redirect from=\"/settings/index\" to=\"/admin/settings\" />\n      <Redirect from=\"/sessions/login\" to=\"/sessions/new\" />\n      <Redirect from=\"/system\" to=\"/admin/system\" />\n      <Redirect from=\"/system/index\" to=\"/admin/system\" />\n      <Redirect from=\"/view\" to=\"/portfolio\" />\n      <Redirect from=\"/users\" to=\"/admin/users\" />\n    </>\n  );\n}\n\nfunction renderComponentRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/ComponentContainer'))}>\n      <RouteWithChildRoutes path=\"code\" childRoutes={codeRoutes} />\n      <RouteWithChildRoutes path=\"component_measures\" childRoutes={componentMeasuresRoutes} />\n      <RouteWithChildRoutes path=\"dashboard\" childRoutes={overviewRoutes} />\n      <RouteWithChildRoutes path=\"portfolio\" childRoutes={portfolioRoutes} />\n      <RouteWithChildRoutes path=\"project/activity\" childRoutes={projectActivityRoutes} />\n      <Route\n        path=\"project/extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() => import('../components/extensions/ProjectPageExtension'))}\n      />\n      <Route\n        path=\"project/issues\"\n        component={Issues}\n        onEnter={({ location: { query } }, replace) => {\n          if (query.types) {\n            if (query.types === 'SECURITY_HOTSPOT') {\n              replace({\n                pathname: '/security_hotspots',\n                query: { ...pick(query, ['id', 'branch', 'pullRequest']), assignedToMe: false }\n              });\n            } else {\n              query.types = query.types\n                .split(',')\n                .filter((type: string) => type !== 'SECURITY_HOTSPOT')\n                .join(',');\n            }\n          }\n        }}\n      />\n      <Route\n        path=\"security_hotspots\"\n        component={lazyLoadComponent(() =>\n          import('../../apps/security-hotspots/SecurityHotspotsApp')\n        )}\n      />\n      <RouteWithChildRoutes path=\"project/quality_gate\" childRoutes={projectQualityGateRoutes} />\n      <RouteWithChildRoutes\n        path=\"project/quality_profiles\"\n        childRoutes={projectQualityProfilesRoutes}\n      />\n      <Route component={lazyLoadComponent(() => import('../components/ProjectAdminContainer'))}>\n        <RouteWithChildRoutes path=\"custom_measures\" childRoutes={customMeasuresRoutes} />\n        <Route\n          path=\"project/admin/extension/:pluginKey/:extensionKey\"\n          component={lazyLoadComponent(() =>\n            import('../components/extensions/ProjectAdminPageExtension')\n          )}\n        />\n        <RouteWithChildRoutes path=\"project/background_tasks\" childRoutes={backgroundTasksRoutes} />\n        <RouteWithChildRoutes path=\"project/baseline\" childRoutes={projectBaselineRoutes} />\n        <RouteWithChildRoutes path=\"project/branches\" childRoutes={projectBranchesRoutes} />\n        <RouteWithChildRoutes path=\"project/settings\" childRoutes={settingsRoutes} />\n        <RouteWithChildRoutes path=\"project_roles\" childRoutes={projectPermissionsRoutes} />\n        <RouteWithChildRoutes path=\"project/webhooks\" childRoutes={webhooksRoutes} />\n        <Route\n          path=\"project/deletion\"\n          component={lazyLoadComponent(() => import('../../apps/projectDeletion/App'))}\n        />\n        <Route\n          path=\"project/links\"\n          component={lazyLoadComponent(() => import('../../apps/projectLinks/App'))}\n        />\n        <Route\n          path=\"project/key\"\n          component={lazyLoadComponent(() => import('../../apps/projectKey/Key'))}\n        />\n      </Route>\n    </Route>\n  );\n}\n\nfunction renderAdminRoutes() {\n  return (\n    <Route component={lazyLoadComponent(() => import('../components/AdminContainer'))} path=\"admin\">\n      <Route\n        path=\"extension/:pluginKey/:extensionKey\"\n        component={lazyLoadComponent(() =>\n          import('../components/extensions/GlobalAdminPageExtension')\n        )}\n      />\n      <RouteWithChildRoutes path=\"background_tasks\" childRoutes={backgroundTasksRoutes} />\n      <RouteWithChildRoutes path=\"custom_metrics\" childRoutes={customMetricsRoutes} />\n      <RouteWithChildRoutes path=\"groups\" childRoutes={groupsRoutes} />\n      <RouteWithChildRoutes path=\"permission_templates\" childRoutes={permissionTemplatesRoutes} />\n      <RouteWithChildRoutes path=\"permissions\" childRoutes={globalPermissionsRoutes} />\n      <RouteWithChildRoutes path=\"projects_management\" childRoutes={projectsManagementRoutes} />\n      <RouteWithChildRoutes path=\"settings\" childRoutes={settingsRoutes} />\n      <RouteWithChildRoutes path=\"system\" childRoutes={systemRoutes} />\n      <RouteWithChildRoutes path=\"marketplace\" childRoutes={marketplaceRoutes} />\n      <RouteWithChildRoutes path=\"users\" childRoutes={usersRoutes} />\n      <RouteWithChildRoutes path=\"webhooks\" childRoutes={webhooksRoutes} />\n    </Route>\n  );\n}\n\nexport default function startReactApp(\n  lang: string,\n  currentUser?: T.CurrentUser,\n  appState?: T.AppState\n) {\n  const el = document.getElementById('content');\n\n  const history = getHistory();\n  const store = getStore(currentUser, appState);\n\n  render(\n    <HelmetProvider>\n      <Provider store={store}>\n        <IntlProvider defaultLocale={lang} locale={lang}>\n          <ThemeProvider theme={theme}>\n            <Router history={history} onUpdate={handleUpdate}>\n              {renderRedirects()}\n\n              <Route\n                path=\"markdown/help\"\n                component={lazyLoadComponent(() => import('../components/MarkdownHelp'))}\n              />\n\n              <Route component={lazyLoadComponent(() => import('../components/SimpleContainer'))}>\n                <Route path=\"maintenance\">{maintenanceRoutes}</Route>\n                <Route path=\"setup\">{setupRoutes}</Route>\n              </Route>\n\n              <Route component={MigrationContainer}>\n                <Route\n                  component={lazyLoadComponent(() =>\n                    import('../components/SimpleSessionsContainer')\n                  )}>\n                  <RouteWithChildRoutes path=\"/sessions\" childRoutes={sessionsRoutes} />\n                </Route>\n\n                <Route path=\"/\" component={App}>\n                  <IndexRoute\n                    component={lazyLoadComponent(() => import('../components/Landing'))}\n                  />\n                  <RouteWithChildRoutes path=\"about\" childRoutes={aboutRoutes} />\n\n                  <Route component={GlobalContainer}>\n                    <RouteWithChildRoutes path=\"account\" childRoutes={accountRoutes} />\n                    <RouteWithChildRoutes path=\"coding_rules\" childRoutes={codingRulesRoutes} />\n                    <RouteWithChildRoutes path=\"documentation\" childRoutes={documentationRoutes} />\n                    <Route path=\"explore\" component={Explore}>\n                      <Route path=\"issues\" component={ExploreIssues} />\n                      <Route path=\"projects\" component={ExploreProjects} />\n                    </Route>\n                    <Route\n                      path=\"extension/:pluginKey/:extensionKey\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/GlobalPageExtension')\n                      )}\n                    />\n                    <Route path=\"issues\" component={Issues} />\n                    <RouteWithChildRoutes path=\"onboarding\" childRoutes={onboardingRoutes} />\n                    <RouteWithChildRoutes path=\"organizations\" childRoutes={organizationsRoutes} />\n                    <RouteWithChildRoutes path=\"projects\" childRoutes={projectsRoutes} />\n                    <RouteWithChildRoutes path=\"quality_gates\" childRoutes={qualityGatesRoutes} />\n                    <Route\n                      path=\"portfolios\"\n                      component={lazyLoadComponent(() =>\n                        import('../components/extensions/PortfoliosPage')\n                      )}\n                    />\n                    <RouteWithChildRoutes path=\"profiles\" childRoutes={qualityProfilesRoutes} />\n                    <RouteWithChildRoutes path=\"web_api\" childRoutes={webAPIRoutes} />\n\n                    {renderComponentRoutes()}\n\n                    {renderAdminRoutes()}\n                  </Route>\n                  <Route\n                    path=\"not_found\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                  <Route\n                    path=\"*\"\n                    component={lazyLoadComponent(() => import('../components/NotFound'))}\n                  />\n                </Route>\n              </Route>\n            </Router>\n          </ThemeProvider>\n        </IntlProvider>\n      </Provider>\n    </HelmetProvider>,\n    el\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getBaseUrl, Location } from 'sonar-ui-common/helpers/urls';\nimport { getProfilePath } from '../apps/quality-profiles/utils';\nimport { BranchLike } from '../types/branch-like';\nimport { GraphType } from '../types/project-activity';\nimport { getBranchLikeQuery, isBranch, isMainBranch, isPullRequest } from './branch-like';\n\ntype Query = Location['query'];\n\nexport function getProjectUrl(project: string, branch?: string): Location {\n  return { pathname: '/dashboard', query: { id: project, branch } };\n}\n\nexport function getPortfolioUrl(key: string): Location {\n  return { pathname: '/portfolio', query: { id: key } };\n}\n\nexport function getPortfolioAdminUrl(key: string, qualifier: string) {\n  return { pathname: '/project/admin/extension/governance/console', query: { id: key, qualifier } };\n}\n\nexport function getComponentBackgroundTaskUrl(componentKey: string, status?: string): Location {\n  return { pathname: '/project/background_tasks', query: { id: componentKey, status } };\n}\n\nexport function getBranchLikeUrl(project: string, branchLike?: BranchLike): Location {\n  if (isPullRequest(branchLike)) {\n    return getPullRequestUrl(project, branchLike.key);\n  } else if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return getBranchUrl(project, branchLike.name);\n  } else {\n    return getProjectUrl(project);\n  }\n}\n\nexport function getBranchUrl(project: string, branch: string): Location {\n  return { pathname: '/dashboard', query: { branch, id: project } };\n}\n\nexport function getPullRequestUrl(project: string, pullRequest: string): Location {\n  return { pathname: '/dashboard', query: { id: project, pullRequest } };\n}\n\n/**\n * Generate URL for a global issues page\n */\nexport function getIssuesUrl(query: Query, organization?: string): Location {\n  const pathname = organization ? `/organizations/${organization}/issues` : '/issues';\n  return { pathname, query };\n}\n\n/**\n * Generate URL for a component's issues page\n */\nexport function getComponentIssuesUrl(componentKey: string, query?: Query): Location {\n  return { pathname: '/project/issues', query: { ...(query || {}), id: componentKey } };\n}\n\n/**\n * Generate URL for a component's security hotspot page\n */\nexport function getComponentSecurityHotspotsUrl(componentKey: string, query: Query = {}): Location {\n  const { branch, pullRequest, sinceLeakPeriod, hotspots, assignedToMe } = query;\n  return {\n    pathname: '/security_hotspots',\n    query: { id: componentKey, branch, pullRequest, sinceLeakPeriod, hotspots, assignedToMe }\n  };\n}\n\n/**\n * Generate URL for a component's drilldown page\n */\nexport function getComponentDrilldownUrl(options: {\n  componentKey: string;\n  metric: string;\n  branchLike?: BranchLike;\n  selectionKey?: string;\n  treemapView?: boolean;\n  listView?: boolean;\n}): Location {\n  const { componentKey, metric, branchLike, selectionKey, treemapView, listView } = options;\n  const query: Query = { id: componentKey, metric, ...getBranchLikeQuery(branchLike) };\n  if (treemapView) {\n    query.view = 'treemap';\n  }\n  if (listView) {\n    query.view = 'list';\n  }\n  if (selectionKey) {\n    query.selected = selectionKey;\n  }\n  return { pathname: '/component_measures', query };\n}\n\nexport function getComponentDrilldownUrlWithSelection(\n  componentKey: string,\n  selectionKey: string,\n  metric: string,\n  branchLike?: BranchLike\n): Location {\n  return getComponentDrilldownUrl({ componentKey, selectionKey, metric, branchLike });\n}\n\nexport function getMeasureTreemapUrl(componentKey: string, metric: string) {\n  return getComponentDrilldownUrl({ componentKey, metric, treemapView: true });\n}\n\nexport function getActivityUrl(component: string, branchLike?: BranchLike, graph?: GraphType) {\n  return {\n    pathname: '/project/activity',\n    query: { id: component, graph, ...getBranchLikeQuery(branchLike) }\n  };\n}\n\n/**\n * Generate URL for a component's measure history\n */\nexport function getMeasureHistoryUrl(component: string, metric: string, branchLike?: BranchLike) {\n  return {\n    pathname: '/project/activity',\n    query: {\n      id: component,\n      graph: 'custom',\n      custom_metrics: metric,\n      ...getBranchLikeQuery(branchLike)\n    }\n  };\n}\n\n/**\n * Generate URL for a component's permissions page\n */\nexport function getComponentPermissionsUrl(componentKey: string): Location {\n  return { pathname: '/project_roles', query: { id: componentKey } };\n}\n\n/**\n * Generate URL for a quality profile\n */\nexport function getQualityProfileUrl(\n  name: string,\n  language: string,\n  organization?: string | null\n): Location {\n  return getProfilePath(name, language, organization);\n}\n\nexport function getQualityGateUrl(key: string, organization?: string | null): Location {\n  return {\n    pathname: getQualityGatesUrl(organization).pathname + '/show/' + encodeURIComponent(key)\n  };\n}\n\nexport function getQualityGatesUrl(organization?: string | null): Location {\n  return {\n    pathname:\n      (organization ? '/organizations/' + encodeURIComponent(organization) : '') + '/quality_gates'\n  };\n}\n\n/**\n * Generate URL for the rules page\n */\nexport function getRulesUrl(query: Query, organization: string | null | undefined): Location {\n  const pathname = organization ? `/organizations/${organization}/rules` : '/coding_rules';\n  return { pathname, query };\n}\n\n/**\n * Generate URL for the rules page filtering only active deprecated rules\n */\nexport function getDeprecatedActiveRulesUrl(\n  query: Query = {},\n  organization: string | null | undefined\n): Location {\n  const baseQuery = { activation: 'true', statuses: 'DEPRECATED' };\n  return getRulesUrl({ ...query, ...baseQuery }, organization);\n}\n\nexport function getRuleUrl(rule: string, organization: string | undefined) {\n  return getRulesUrl({ open: rule, rule_key: rule }, organization);\n}\n\nexport function getMarkdownHelpUrl(): string {\n  return getBaseUrl() + '/markdown/help';\n}\n\nexport function getCodeUrl(\n  project: string,\n  branchLike?: BranchLike,\n  selected?: string,\n  line?: number\n) {\n  return {\n    pathname: '/code',\n    query: { id: project, ...getBranchLikeQuery(branchLike), selected, line }\n  };\n}\n\nexport function getOrganizationUrl(organization: string) {\n  return `/organizations/${organization}`;\n}\n\nexport function getHomePageUrl(homepage: T.HomePage) {\n  switch (homepage.type) {\n    case 'APPLICATION':\n      return homepage.branch\n        ? getProjectUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'PROJECT':\n      return homepage.branch\n        ? getBranchUrl(homepage.component, homepage.branch)\n        : getProjectUrl(homepage.component);\n    case 'ORGANIZATION':\n      return getOrganizationUrl(homepage.organization);\n    case 'PORTFOLIO':\n      return getPortfolioUrl(homepage.component);\n    case 'PORTFOLIOS':\n      return '/portfolios';\n    case 'MY_PROJECTS':\n      return '/projects';\n    case 'ISSUES':\n    case 'MY_ISSUES':\n      return { pathname: '/issues', query: { resolved: 'false' } };\n  }\n\n  // should never happen, but just in case...\n  return '/projects';\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseError } from 'sonar-ui-common/helpers/request';\nimport { addGlobalErrorMessage } from '../../store/globalMessages';\nimport getStore from './getStore';\n\nexport default function throwGlobalError(param: Response | any): Promise<Response | any> {\n  const store = getStore();\n\n  if (param.response instanceof Response) {\n    /* eslint-disable-next-line no-console */\n    console.warn('DEPRECATED: response should not be wrapped, pass it directly.');\n    param = param.response;\n  }\n\n  if (param instanceof Response) {\n    return parseError(param)\n      .then(\n        message => {\n          store.dispatch(addGlobalErrorMessage(message));\n        },\n        () => {}\n      )\n      .then(() => Promise.reject(param));\n  }\n\n  return Promise.reject(param);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { orderBy } from 'lodash';\nimport {\n  Branch,\n  BranchLike,\n  BranchLikeTree,\n  BranchParameters,\n  MainBranch,\n  PullRequest\n} from '../types/branch-like';\n\nexport function isBranch(branchLike?: BranchLike): branchLike is Branch {\n  return branchLike !== undefined && (branchLike as Branch).isMain !== undefined;\n}\n\nexport function isMainBranch(branchLike?: BranchLike): branchLike is MainBranch {\n  return isBranch(branchLike) && branchLike.isMain;\n}\n\nexport function sortBranches(branches: Branch[]) {\n  return orderBy(branches, [b => b.isMain, b => b.name], ['desc', 'asc']);\n}\n\nexport function isPullRequest(branchLike?: BranchLike): branchLike is PullRequest {\n  return branchLike !== undefined && (branchLike as PullRequest).key !== undefined;\n}\n\nexport function sortPullRequests(pullRequests: PullRequest[]) {\n  return orderBy(pullRequests, pr => getPullRequestDisplayName(pr));\n}\n\nexport function getPullRequestDisplayName(pullRequest: PullRequest) {\n  return `${pullRequest.key}  ${pullRequest.title}`;\n}\n\nexport function getBranchLikeDisplayName(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? getPullRequestDisplayName(branchLike) : branchLike.name;\n}\n\nexport function getBranchLikeKey(branchLike: BranchLike) {\n  return isPullRequest(branchLike) ? `pull-request-${branchLike.key}` : `branch-${branchLike.name}`;\n}\n\nexport function getBranchQualityGateColor(status: string) {\n  let indicatorColor = 'gray';\n  if (status === 'ERROR') {\n    indicatorColor = 'red';\n  } else if (status === 'WARN') {\n    indicatorColor = 'orange';\n  } else if (status === 'OK') {\n    indicatorColor = 'green';\n  }\n  return indicatorColor;\n}\n\nexport function isSameBranchLike(a: BranchLike | undefined, b: BranchLike | undefined) {\n  // main branches are always equal\n  if (isMainBranch(a) && isMainBranch(b)) {\n    return true;\n  }\n\n  // Branches are compared by name\n  if (isBranch(a) && isBranch(b)) {\n    return a.name === b.name;\n  }\n\n  // pull requests are compared by id\n  if (isPullRequest(a) && isPullRequest(b)) {\n    return a.key === b.key;\n  }\n\n  // finally if both parameters are `undefined`, consider them equal\n  return a === b;\n}\n\nexport function getBrancheLikesAsTree(branchLikes: BranchLike[]): BranchLikeTree {\n  const mainBranch = branchLikes.find(isMainBranch);\n  const branches = orderBy(\n    branchLikes.filter(isBranch).filter(b => !isMainBranch(b)),\n    b => b.name\n  );\n  const pullRequests = orderBy(branchLikes.filter(isPullRequest), b => b.key);\n  const parentlessPullRequests = pullRequests.filter(\n    pr => !pr.isOrphan && ![mainBranch, ...branches].find(b => !!b && b.name === pr.base)\n  );\n  const orphanPullRequests = pullRequests.filter(pr => pr.isOrphan);\n\n  const tree: BranchLikeTree = {\n    branchTree: branches.map(b => ({ branch: b, pullRequests: getPullRequests(b) })),\n    parentlessPullRequests,\n    orphanPullRequests\n  };\n\n  if (mainBranch) {\n    tree.mainBranchTree = {\n      branch: mainBranch,\n      pullRequests: getPullRequests(mainBranch)\n    };\n  }\n\n  return tree;\n\n  function getPullRequests(branch: Branch) {\n    return pullRequests.filter(pr => !pr.isOrphan && pr.base === branch.name);\n  }\n}\n\nexport function getBranchLikeQuery(branchLike?: BranchLike): BranchParameters {\n  if (isBranch(branchLike) && !isMainBranch(branchLike)) {\n    return { branch: branchLike.name };\n  } else if (isPullRequest(branchLike)) {\n    return { pullRequest: branchLike.key };\n  } else {\n    return {};\n  }\n}\n\n// Create branch object from branch name or pull request key\nexport function fillBranchLike(\n  branch?: string,\n  pullRequest?: string\n): Branch | PullRequest | undefined {\n  if (branch) {\n    return {\n      isMain: false,\n      name: branch\n    } as Branch;\n  } else if (pullRequest) {\n    return { base: '', branch: '', key: pullRequest, title: '' } as PullRequest;\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// IMPORTANT: any change in this file requires restart of the dev server\nconst grid = 8;\n\nmodule.exports = {\n  colors: {\n    blue: '#4b9fd5',\n    veryLightBlue: '#f2faff',\n    lightBlue: '#cae3f2',\n    darkBlue: '#236a97',\n    veryDarkBlue: '#0E516F',\n    green: '#00aa00',\n    lightGreen: '#b0d513',\n    veryLightGreen: '#f5f9fc',\n    yellow: '#eabe06',\n    orange: '#ed7d20',\n    red: '#d4333f',\n    purple: '#9139d4',\n\n    gray94: '#efefef',\n    gray80: '#cdcdcd',\n    gray71: '#b4b4b4',\n    gray67: '#aaa',\n    gray60: '#999',\n    gray40: '#404040',\n\n    transparentWhite: 'rgba(255,255,255,0.62)',\n    transparentGray: 'rgba(200, 200, 200, 0.5)',\n\n    disableGrayText: '#bbb',\n    disableGrayBorder: '#ddd',\n    disableGrayBg: '#ebebeb',\n\n    barBackgroundColor: '#f3f3f3',\n    barBackgroundColorHighlight: '#f8f8f8',\n    barBorderColor: '#e6e6e6',\n\n    globalNavBarBg: '#262626',\n\n    // table\n    rowHoverHighlight: '#ecf6fe',\n\n    // fonts\n    baseFontColor: '#444',\n    secondFontColor: '#777',\n\n    // forms\n    mandatoryFieldColor: '#a4030f',\n\n    // leak\n    leakPrimaryColor: '#fbf3d5',\n    leakSecondaryColor: '#f1e8cb',\n\n    snippetFontColor: '#f0f0f0',\n\n    // issues\n    issueBgColor: '#f2dede',\n    hotspotBgColor: '#eeeff4',\n    issueLocationSelected: '#f4b1b0',\n    issueLocationHighlighted: '#e1e1f2',\n    conciseIssueRed: '#d18582',\n    conciseIssueRedSelected: '#a4030f',\n\n    // coverage\n    lineCoverageRed: '#a4030f',\n    lineCoverageGreen: '#b4dd78',\n\n    // alerts\n    warningIconColor: '#eabe06',\n\n    alertBorderError: '#f4b1b0',\n    alertBackgroundError: '#f2dede',\n    alertTextError: '#862422',\n    alertIconError: '#a4030f',\n\n    alertBorderWarning: '#faebcc',\n    alertBackgroundWarning: '#fcf8e3',\n    alertTextWarning: '#6f4f17',\n    alertIconWarning: '#db781a',\n\n    alertBorderSuccess: '#d6e9c6',\n    alertBackgroundSuccess: '#dff0d8',\n    alertTextSuccess: '#215821',\n    alertIconSuccess: '#6d9867',\n\n    alertBorderInfo: '#b1dff3',\n    alertBackgroundInfo: '#d9edf7',\n    alertTextInfo: '#0e516f',\n    alertIconInfo: '#0271b9',\n\n    // badge\n    badgeBlueBackground: '#2E7CB5',\n    badgeBlueColor: '#FFFFFF',\n\n    // alm\n    azure: '#0078d7',\n    bitbucket: '#0052CC',\n    github: '#e1e4e8',\n\n    // code/pre\n    codeBackground: '#e6e6e6',\n\n    // sonarcloud\n    sonarcloudOrange500: '#fd6a00',\n    sonarcloudOrange600: '#e26003',\n    sonarcloudOrange700: '#db5700',\n\n    sonarcloudBlack100: '#ffffff',\n    sonarcloudBlack200: '#f9f9fb',\n    sonarcloudBlack250: '#e6e8ea',\n    sonarcloudBlack300: '#cfd3d7',\n    sonarcloudBlack500: '#8a8c8f',\n    sonarcloudBlack700: '#434447',\n    sonarcloudBlack800: '#2d3032',\n    sonarcloudBlack900: '#070706',\n\n    sonarcloudBlue500: '#4c9bd6',\n    sonarcloudBlue600: '#327bb3',\n    sonarcloudBlue900: '#0b3c62',\n\n    sonarcloudBorderGray: 'rgba(207, 211, 215, 0.5)'\n  },\n\n  sizes: {\n    gridSize: `${grid}px`,\n\n    baseFontSize: '13px',\n    verySmallFontSize: '10px',\n    smallFontSize: '12px',\n    mediumFontSize: '14px',\n    bigFontSize: '16px',\n    hugeFontSize: '24px',\n    giganticFontSize: '36px',\n\n    hugeControlHeight: `${5 * grid}px`,\n    largeControlHeight: `${4 * grid}px`,\n    controlHeight: `${3 * grid}px`,\n    smallControlHeight: `${2.5 * grid}px`,\n    tinyControlHeight: `${2 * grid}px`,\n\n    globalNavHeight: `${6 * grid}px`,\n\n    globalNavContentHeight: `${4 * grid}px`,\n\n    maxPageWidth: '1320px',\n    minPageWidth: '1080px',\n    pagePadding: '20px'\n  },\n\n  rawSizes: {\n    grid,\n    globalNavHeightRaw: 6 * grid,\n    globalNavContentHeightRaw: 4 * grid,\n    contextNavHeightRaw: 9 * grid\n  },\n\n  fonts: {\n    baseFontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    systemFontFamily: \"-apple-system,'BlinkMacSystemFont','Helvetica','Arial',sans-serif\",\n    sonarcloudFontFamily:\n      \"Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif\"\n  },\n\n  // z-index\n  // =======\n  //    1 -  100  for page elements (e.g. sidebars, panels)\n  //  101 -  500  for generic page fixed elements (e.g. navigation, workspace)\n  //  501 - 3000  for page ui elements\n  // 3001 - 8000  for generic ui elements (e.g. dropdowns, tooltips)\n  zIndexes: {\n    // common\n    aboveNormalZIndex: '3',\n    normalZIndex: '2',\n    belowNormalZIndex: '1',\n\n    // ui elements\n    pageMainZIndex: '50',\n    pageSideZIndex: '51',\n\n    tooltipZIndex: '8000',\n\n    dropdownMenuZIndex: '7500',\n\n    processContainerZIndex: '7000',\n\n    modalZIndex: '6001',\n    modalOverlayZIndex: '6000',\n\n    popupZIndex: '5000'\n  },\n\n  others: {\n    defaultShadow: '0 6px 12px rgba(0, 0, 0, 0.175)'\n  }\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function hasGlobalPermission(user: T.CurrentUser, permission: string): boolean {\n  if (!user.permissions) {\n    return false;\n  }\n  return user.permissions.global.includes(permission);\n}\n\nexport function isLoggedIn(user: T.CurrentUser): user is T.LoggedInUser {\n  return user.isLoggedIn;\n}\n\nexport function isUserActive(user: T.UserBase): user is T.UserActive {\n  return user.active !== false && Boolean(user.name);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { isDefined } from 'sonar-ui-common/helpers/types';\nimport { MetricKey } from '../types/metrics';\nimport {\n  QualityGateStatusCondition,\n  QualityGateStatusConditionEnhanced\n} from '../types/quality-gates';\n\n/** Return a localized metric name */\nexport function localizeMetric(metricKey: MetricKey | string): string {\n  return translate('metric', metricKey, 'name');\n}\n\n/** Return corresponding \"short\" for better display in UI */\nexport function getShortType(type: string): string {\n  if (type === 'INT') {\n    return 'SHORT_INT';\n  } else if (type === 'WORK_DUR') {\n    return 'SHORT_WORK_DUR';\n  }\n  return type;\n}\n\nexport function enhanceMeasuresWithMetrics(\n  measures: T.Measure[],\n  metrics: T.Metric[]\n): T.MeasureEnhanced[] {\n  return measures\n    .map(measure => {\n      const metric = metrics.find(metric => metric.key === measure.metric);\n      return metric && { ...measure, metric };\n    })\n    .filter(isDefined);\n}\n\nexport function enhanceConditionWithMeasure(\n  condition: QualityGateStatusCondition,\n  measures: T.MeasureEnhanced[]\n): QualityGateStatusConditionEnhanced | undefined {\n  const measure = measures.find(m => m.metric.key === condition.metric);\n\n  // Make sure we have a period index. This is necessary when dealing with\n  // applications.\n  let { period } = condition;\n  if (measure && measure.periods && !period) {\n    period = measure.periods[0].index;\n  }\n\n  return measure && { ...condition, period, measure };\n}\n\n/** Get period value of a measure */\nexport function getPeriodValue(\n  measure: T.Measure | T.MeasureEnhanced,\n  periodIndex: number\n): string | undefined {\n  const { periods } = measure;\n  const period = periods && periods.find(period => period.index === periodIndex);\n  return period ? period.value : undefined;\n}\n\nexport function isPeriodBestValue(\n  measure: T.Measure | T.MeasureEnhanced,\n  periodIndex: number\n): boolean {\n  const { periods } = measure;\n  const period = periods && periods.find(period => period.index === periodIndex);\n  return (period && period.bestValue) || false;\n}\n\n/** Check if metric is differential */\nexport function isDiffMetric(metricKey: MetricKey | string): boolean {\n  return metricKey.indexOf('new_') === 0;\n}\n\nfunction getRatingGrid(): string {\n  // workaround cyclic dependencies\n  const getStore = require('../app/utils/getStore').default;\n  const { getGlobalSettingValue } = require('../store/rootReducer');\n\n  const store = getStore();\n  const settingValue = getGlobalSettingValue(store.getState(), 'sonar.technicalDebt.ratingGrid');\n  return settingValue ? settingValue.value : '';\n}\n\nlet maintainabilityRatingGrid: number[];\n\nfunction getMaintainabilityRatingGrid(): number[] {\n  if (maintainabilityRatingGrid) {\n    return maintainabilityRatingGrid;\n  }\n\n  const str = getRatingGrid();\n  const numbers = str\n    .split(',')\n    .map(s => parseFloat(s))\n    .filter(n => !isNaN(n));\n\n  if (numbers.length === 4) {\n    maintainabilityRatingGrid = numbers;\n  } else {\n    maintainabilityRatingGrid = [0, 0, 0, 0];\n  }\n\n  return maintainabilityRatingGrid;\n}\n\nfunction getMaintainabilityRatingTooltip(rating: number): string {\n  const maintainabilityGrid = getMaintainabilityRatingGrid();\n  const maintainabilityRatingThreshold = maintainabilityGrid[Math.floor(rating) - 2];\n\n  if (rating < 2) {\n    return translateWithParameters(\n      'metric.sqale_rating.tooltip.A',\n      formatMeasure(maintainabilityGrid[0] * 100, 'PERCENT')\n    );\n  }\n\n  const ratingLetter = formatMeasure(rating, 'RATING');\n\n  return translateWithParameters(\n    'metric.sqale_rating.tooltip',\n    ratingLetter,\n    formatMeasure(maintainabilityRatingThreshold * 100, 'PERCENT')\n  );\n}\n\nexport function getRatingTooltip(metricKey: MetricKey | string, value: number | string): string {\n  const ratingLetter = formatMeasure(value, 'RATING');\n\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n\n  return finalMetricKey === 'sqale_rating' || finalMetricKey === 'maintainability_rating'\n    ? getMaintainabilityRatingTooltip(Number(value))\n    : translate('metric', finalMetricKey, 'tooltip', ratingLetter);\n}\n\nexport function getDisplayMetrics(metrics: T.Metric[]) {\n  return metrics.filter(metric => !metric.hidden && !['DATA', 'DISTRIB'].includes(metric.type));\n}\n\nexport function findMeasure(measures: T.MeasureEnhanced[], metric: MetricKey | string) {\n  return measures.find(measure => measure.metric.key === metric);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\ninterface SuggestionsContextShape {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: T.SuggestionLink[];\n}\n\nexport const SuggestionsContext = createContext<SuggestionsContextShape>({\n  addSuggestions: () => {},\n  removeSuggestions: () => {},\n  suggestions: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { withRouter as originalWithRouter, WithRouterProps } from 'react-router';\n\nexport type Location = WithRouterProps['location'];\nexport type Router = WithRouterProps['router'];\n\ninterface InjectedProps {\n  location?: Partial<Location>;\n  router?: Partial<Router>;\n}\n\nexport function withRouter<P extends InjectedProps>(\n  WrappedComponent: React.ComponentType<P & InjectedProps>\n): React.ComponentType<T.Omit<P, keyof InjectedProps>> {\n  return originalWithRouter(WrappedComponent as any);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport GenericAvatar from 'sonar-ui-common/components/ui/GenericAvatar';\nimport { getGlobalSettingValue, Store } from '../../store/rootReducer';\n\ninterface Props {\n  className?: string;\n  enableGravatar: boolean;\n  gravatarServerUrl: string;\n  hash?: string;\n  name?: string;\n  size: number;\n}\n\nfunction Avatar(props: Props) {\n  if (!props.enableGravatar || !props.hash) {\n    if (!props.name) {\n      return null;\n    }\n    return <GenericAvatar className={props.className} name={props.name} size={props.size} />;\n  }\n\n  const url = props.gravatarServerUrl\n    .replace('{EMAIL_MD5}', props.hash)\n    .replace('{SIZE}', String(props.size * 2));\n\n  return (\n    <img\n      alt={props.name}\n      className={classNames(props.className, 'rounded')}\n      height={props.size}\n      src={url}\n      width={props.size}\n    />\n  );\n}\n\nconst mapStateToProps = (state: Store) => {\n  const enableGravatar = getGlobalSettingValue(state, 'sonar.lf.enableGravatar');\n  const gravatarServerUrl = getGlobalSettingValue(state, 'sonar.lf.gravatarServerUrl');\n  return {\n    enableGravatar: Boolean(enableGravatar && enableGravatar.value === 'true'),\n    gravatarServerUrl: (gravatarServerUrl && gravatarServerUrl.value) || ''\n  };\n};\n\nexport default connect(mapStateToProps)(Avatar);\n\nexport const unconnectedAvatar = Avatar;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { Store } from 'redux';\nimport { setAppState } from '../../store/appState';\nimport rootReducer, { Store as State } from '../../store/rootReducer';\nimport { receiveCurrentUser } from '../../store/users';\nimport configureStore from '../../store/utils/configureStore';\n\nlet store: Store<State, any>;\n\nconst createStore = (currentUser?: T.CurrentUser, appState?: T.AppState) => {\n  store = configureStore(rootReducer);\n  if (currentUser) {\n    store.dispatch(receiveCurrentUser(currentUser));\n  }\n  if (appState) {\n    store.dispatch(setAppState(appState));\n  }\n  return store;\n};\n\nexport default (currentUser?: T.CurrentUser, appState?: T.AppState) =>\n  store ? store : createStore(currentUser, appState);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\n\nexport interface A11yContextShape {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n  links: T.A11ySkipLink[];\n}\n\nexport const A11yContext = createContext<A11yContextShape>({\n  addA11ySkipLink: () => {},\n  removeA11ySkipLink: () => {},\n  links: []\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getInstance } from '../../helpers/system';\n\ninterface Props {\n  children?: (transformedMessage: string) => React.ReactChild;\n  message: string;\n}\n\nexport default function InstanceMessage({ children, message }: Props): any {\n  const transformedMessage = message.replace(/\\{instance\\}/gim, getInstance());\n\n  if (children) {\n    return children(transformedMessage);\n  }\n\n  return transformedMessage;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsBoolean,\n  parseAsDate,\n  parseAsString,\n  queriesEqual,\n  serializeDateShort,\n  serializeString,\n  serializeStringArray\n} from 'sonar-ui-common/helpers/query';\nimport { scrollToElement } from 'sonar-ui-common/helpers/scrolling';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport { searchMembers } from '../../api/organizations';\nimport { searchUsers } from '../../api/users';\n\nexport interface Query {\n  assigned: boolean;\n  assignees: string[];\n  authors: string[];\n  createdAfter: Date | undefined;\n  createdAt: string;\n  createdBefore: Date | undefined;\n  createdInLast: string;\n  cwe: string[];\n  directories: string[];\n  files: string[];\n  issues: string[];\n  languages: string[];\n  modules: string[];\n  owaspTop10: string[];\n  projects: string[];\n  resolutions: string[];\n  resolved: boolean;\n  rules: string[];\n  sansTop25: string[];\n  severities: string[];\n  sinceLeakPeriod: boolean;\n  sonarsourceSecurity: string[];\n  sort: string;\n  statuses: string[];\n  tags: string[];\n  types: string[];\n}\n\nexport const STANDARDS = 'standards';\nexport const STANDARD_TYPES: T.StandardType[] = [\n  'owaspTop10',\n  'sansTop25',\n  'cwe',\n  'sonarsourceSecurity'\n];\n\n// allow sorting by CREATION_DATE only\nconst parseAsSort = (sort: string) => (sort === 'CREATION_DATE' ? 'CREATION_DATE' : '');\nconst ISSUES_DEFAULT = 'sonarqube.issues.default';\n\nexport function parseQuery(query: T.RawQuery): Query {\n  return {\n    assigned: parseAsBoolean(query.assigned),\n    assignees: parseAsArray(query.assignees, parseAsString),\n    authors: parseAsArray(query.authors, parseAsString),\n    createdAfter: parseAsDate(query.createdAfter),\n    createdAt: parseAsString(query.createdAt),\n    createdBefore: parseAsDate(query.createdBefore),\n    createdInLast: parseAsString(query.createdInLast),\n    cwe: parseAsArray(query.cwe, parseAsString),\n    directories: parseAsArray(query.directories, parseAsString),\n    files: parseAsArray(query.fileUuids, parseAsString),\n    issues: parseAsArray(query.issues, parseAsString),\n    languages: parseAsArray(query.languages, parseAsString),\n    modules: parseAsArray(query.moduleUuids, parseAsString),\n    owaspTop10: parseAsArray(query.owaspTop10, parseAsString),\n    projects: parseAsArray(query.projects, parseAsString),\n    resolutions: parseAsArray(query.resolutions, parseAsString),\n    resolved: parseAsBoolean(query.resolved),\n    rules: parseAsArray(query.rules, parseAsString),\n    sansTop25: parseAsArray(query.sansTop25, parseAsString),\n    severities: parseAsArray(query.severities, parseAsString),\n    sinceLeakPeriod: parseAsBoolean(query.sinceLeakPeriod, false),\n    sonarsourceSecurity: parseAsArray(query.sonarsourceSecurity, parseAsString),\n    sort: parseAsSort(query.s),\n    statuses: parseAsArray(query.statuses, parseAsString),\n    tags: parseAsArray(query.tags, parseAsString),\n    types: parseAsArray(query.types, parseAsString)\n  };\n}\n\nexport function getOpen(query: T.RawQuery): string | undefined {\n  return query.open;\n}\n\nexport const areMyIssuesSelected = (query: T.RawQuery) => query.myIssues === 'true';\n\nexport function serializeQuery(query: Query): T.RawQuery {\n  const filter = {\n    assigned: query.assigned ? undefined : 'false',\n    assignees: serializeStringArray(query.assignees),\n    authors: serializeStringArray(query.authors),\n    createdAfter: serializeDateShort(query.createdAfter),\n    createdAt: serializeString(query.createdAt),\n    createdBefore: serializeDateShort(query.createdBefore),\n    createdInLast: serializeString(query.createdInLast),\n    cwe: serializeStringArray(query.cwe),\n    directories: serializeStringArray(query.directories),\n    fileUuids: serializeStringArray(query.files),\n    issues: serializeStringArray(query.issues),\n    languages: serializeStringArray(query.languages),\n    moduleUuids: serializeStringArray(query.modules),\n    owaspTop10: serializeStringArray(query.owaspTop10),\n    projects: serializeStringArray(query.projects),\n    resolutions: serializeStringArray(query.resolutions),\n    resolved: query.resolved ? undefined : 'false',\n    rules: serializeStringArray(query.rules),\n    s: serializeString(query.sort),\n    sansTop25: serializeStringArray(query.sansTop25),\n    severities: serializeStringArray(query.severities),\n    sinceLeakPeriod: query.sinceLeakPeriod ? 'true' : undefined,\n    sonarsourceSecurity: serializeStringArray(query.sonarsourceSecurity),\n    statuses: serializeStringArray(query.statuses),\n    tags: serializeStringArray(query.tags),\n    types: serializeStringArray(query.types)\n  };\n  return cleanQuery(filter);\n}\n\nexport const areQueriesEqual = (a: T.RawQuery, b: T.RawQuery) =>\n  queriesEqual(parseQuery(a), parseQuery(b));\n\nexport interface RawFacet {\n  property: string;\n  values: Array<{ val: string; count: number }>;\n}\n\nexport interface Facet {\n  [value: string]: number;\n}\n\nexport function mapFacet(facet: string) {\n  const propertyMapping: T.Dict<string> = {\n    files: 'fileUuids',\n    modules: 'moduleUuids'\n  };\n  return propertyMapping[facet] || facet;\n}\n\nexport function parseFacets(facets: RawFacet[]): T.Dict<Facet> {\n  if (!facets) {\n    return {};\n  }\n\n  // for readability purpose\n  const propertyMapping: T.Dict<string> = {\n    fileUuids: 'files',\n    moduleUuids: 'modules'\n  };\n\n  const result: T.Dict<Facet> = {};\n  facets.forEach(facet => {\n    const values: Facet = {};\n    facet.values.forEach(value => {\n      values[value.val] = value.count;\n    });\n    const finalProperty = propertyMapping[facet.property] || facet.property;\n    result[finalProperty] = values;\n  });\n  return result;\n}\n\nexport function formatFacetStat(stat: number | undefined) {\n  return stat && formatMeasure(stat, 'SHORT_INT');\n}\n\nexport interface ReferencedComponent {\n  key: string;\n  name: string;\n  organization: string;\n  path?: string;\n  uuid: string;\n}\n\nexport interface ReferencedLanguage {\n  name: string;\n}\n\nexport interface ReferencedRule {\n  langName?: string;\n  name: string;\n}\n\nexport const searchAssignees = (\n  query: string,\n  organization: string | undefined,\n  page = 1\n): Promise<{ paging: T.Paging; results: T.UserBase[] }> => {\n  return organization\n    ? searchMembers({ organization, p: page, ps: 50, q: query }).then(({ paging, users }) => ({\n        paging,\n        results: users\n      }))\n    : searchUsers({ p: page, q: query }).then(({ paging, users }) => ({ paging, results: users }));\n};\n\nconst LOCALSTORAGE_MY = 'my';\nconst LOCALSTORAGE_ALL = 'all';\n\nexport const isMySet = () => {\n  return get(ISSUES_DEFAULT) === LOCALSTORAGE_MY;\n};\n\nexport const saveMyIssues = (myIssues: boolean) =>\n  save(ISSUES_DEFAULT, myIssues ? LOCALSTORAGE_MY : LOCALSTORAGE_ALL);\n\nexport function getLocations(\n  { flows, secondaryLocations }: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  if (selectedFlowIndex !== undefined) {\n    return flows[selectedFlowIndex] || [];\n  } else {\n    return flows.length > 0 ? flows[0] : secondaryLocations;\n  }\n}\n\nexport function getSelectedLocation(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined,\n  selectedLocationIndex: number | undefined\n) {\n  const locations = getLocations(issue, selectedFlowIndex);\n  if (\n    selectedLocationIndex !== undefined &&\n    selectedLocationIndex >= 0 &&\n    locations.length >= selectedLocationIndex\n  ) {\n    return locations[selectedLocationIndex];\n  } else {\n    return undefined;\n  }\n}\n\nexport function allLocationsEmpty(\n  issue: Pick<T.Issue, 'flows' | 'secondaryLocations'>,\n  selectedFlowIndex: number | undefined\n) {\n  return getLocations(issue, selectedFlowIndex).every(location => !location.msg);\n}\n\nexport function scrollToIssue(issue: string, smooth = true) {\n  const element = document.querySelector(`[data-issue=\"${issue}\"]`);\n  if (element) {\n    scrollToElement(element, { topOffset: 250, bottomOffset: 100, smooth });\n  }\n}\n\nexport function shouldOpenStandardsFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  return (\n    openFacets[STANDARDS] ||\n    isFilteredBySecurityIssueTypes(query) ||\n    isOneStandardChildFacetOpen(openFacets, query)\n  );\n}\n\nexport function shouldOpenStandardsChildFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>,\n  standardType: T.StandardType\n): boolean {\n  const filter = query[standardType];\n  return (\n    openFacets[STANDARDS] !== false &&\n    (openFacets[standardType] ||\n      (standardType !== 'cwe' && filter !== undefined && filter.length > 0))\n  );\n}\n\nexport function shouldOpenSonarSourceSecurityFacet(\n  openFacets: T.Dict<boolean>,\n  query: Partial<Query>\n): boolean {\n  // Open it by default if the parent is open, and no other standard is open.\n  return (\n    shouldOpenStandardsChildFacet(openFacets, query, 'sonarsourceSecurity') ||\n    (shouldOpenStandardsFacet(openFacets, query) && !isOneStandardChildFacetOpen(openFacets, query))\n  );\n}\n\nfunction isFilteredBySecurityIssueTypes(query: Partial<Query>): boolean {\n  return query.types !== undefined && query.types.includes('VULNERABILITY');\n}\n\nfunction isOneStandardChildFacetOpen(openFacets: T.Dict<boolean>, query: Partial<Query>): boolean {\n  return STANDARD_TYPES.some(standardType =>\n    shouldOpenStandardsChildFacet(openFacets, query, standardType)\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { colors } from '../app/theme';\n\nexport const SEVERITIES = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\nexport const STATUSES = ['OPEN', 'REOPENED', 'CONFIRMED', 'RESOLVED', 'CLOSED'];\nexport const ISSUE_TYPES: T.IssueType[] = [\n  'BUG',\n  'VULNERABILITY',\n  'CODE_SMELL',\n  'SECURITY_HOTSPOT'\n];\nexport const RULE_TYPES: T.RuleType[] = ['BUG', 'VULNERABILITY', 'CODE_SMELL', 'SECURITY_HOTSPOT'];\nexport const RULE_STATUSES = ['READY', 'BETA', 'DEPRECATED'];\n\nexport const CHART_COLORS_RANGE_PERCENT = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n\nexport const CHART_REVERSED_COLORS_RANGE_PERCENT = [\n  colors.red,\n  colors.orange,\n  colors.yellow,\n  colors.lightGreen,\n  colors.green\n];\n\nexport const RATING_COLORS = [\n  colors.green,\n  colors.lightGreen,\n  colors.yellow,\n  colors.orange,\n  colors.red\n];\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as differenceInYears from 'date-fns/difference_in_years';\nimport { sortBy } from 'lodash';\nimport { isValidDate, parseDate } from 'sonar-ui-common/helpers/dates';\nimport { Profile as BaseProfile } from '../../api/quality-profiles';\nimport { Profile } from './types';\n\nexport function sortProfiles(profiles: BaseProfile[]): Profile[] {\n  const result: Profile[] = [];\n  const sorted = sortBy(profiles, 'name');\n\n  function retrieveChildren(parent: BaseProfile | null) {\n    return sorted.filter(\n      p => (parent == null && p.parentKey == null) || (parent != null && p.parentKey === parent.key)\n    );\n  }\n\n  function putProfile(profile: BaseProfile | null = null, depth: number = 1) {\n    const children = retrieveChildren(profile);\n\n    if (profile != null) {\n      result.push({ ...profile, childrenCount: children.length, depth });\n    }\n\n    children.forEach(child => putProfile(child, depth + 1));\n  }\n\n  sorted\n    .filter(\n      profile => profile.parentKey == null || sorted.find(p => p.key === profile.parentKey) == null\n    )\n    .forEach(profile => putProfile(profile));\n\n  return result;\n}\n\nexport function isStagnant(profile: Profile): boolean {\n  if (profile.rulesUpdatedAt) {\n    const updateDate = parseDate(profile.rulesUpdatedAt);\n    if (isValidDate(updateDate)) {\n      return differenceInYears(new Date(), updateDate) >= 1;\n    }\n  }\n  return false;\n}\n\nexport const getProfilesPath = (organization: string | null | undefined) =>\n  organization ? `/organizations/${organization}/quality_profiles` : '/profiles';\n\nexport const getProfilesForLanguagePath = (\n  language: string,\n  organization: string | null | undefined\n) => ({\n  pathname: getProfilesPath(organization),\n  query: { language }\n});\n\nexport const getProfilePath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined\n) => ({\n  pathname: getProfilesPath(organization) + '/show',\n  query: { name, language }\n});\n\nexport const getProfileComparePath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined,\n  withKey?: string\n) => {\n  const query = { language, name };\n  if (withKey) {\n    Object.assign(query, { withKey });\n  }\n  return {\n    pathname: getProfilesPath(organization) + '/compare',\n    query\n  };\n};\n\nexport const getProfileChangelogPath = (\n  name: string,\n  language: string,\n  organization: string | null | undefined,\n  filter?: { since?: string; to?: string }\n) => {\n  const query = { language, name };\n  if (filter) {\n    if (filter.since) {\n      Object.assign(query, { since: filter.since });\n    }\n    if (filter.to) {\n      Object.assign(query, { to: filter.to });\n    }\n  }\n  return {\n    pathname: getProfilesPath(organization) + '/changelog',\n    query\n  };\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport default function GlobalFooterBranding() {\n  const { official } = window as any;\n  return official ? (\n    <div>\n      SonarQube&trade; technology is powered by{' '}\n      <a href=\"http://www.sonarsource.com\" rel=\"noopener noreferrer\" target=\"_blank\">\n        SonarSource SA\n      </a>\n    </div>\n  ) : (\n    <div>\n      This application is based on{' '}\n      <a\n        href=\"http://www.sonarqube.org/\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarQube\">\n        SonarQube\n      </a>{' '}\n      but is <strong>not</strong> an official version provided by{' '}\n      <a\n        href=\"http://www.sonarsource.com\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        title=\"SonarSource SA\">\n        SonarSource SA\n      </a>\n      .\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as getYear from 'date-fns/get_year';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport default function GlobalFooterSonarCloud() {\n  return (\n    <div className=\"page-footer page-container\" id=\"footer\">\n      <div>\n        {` 2008-${getYear(new Date())}, SonarCloud by `}\n        <a\n          href=\"http://www.sonarsource.com\"\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          title=\"SonarSource SA\">\n          SonarSource SA\n        </a>\n        . All rights reserved.\n      </div>\n\n      <ul className=\"page-footer-menu\">\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://blog.sonarsource.com/product/SonarCloud\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.news')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://twitter.com/sonarcloud\" rel=\"noopener noreferrer\" target=\"_blank\">\n            {translate('footer.twitter')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link rel=\"noopener noreferrer\" target=\"_blank\" to=\"/terms.pdf\">\n            {translate('footer.terms')}\n          </Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about/pricing/\">{translate('footer.pricing')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation/privacy/\">{translate('footer.privacy')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation/security/\">{translate('footer.security')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a\n            href=\"https://community.sonarsource.com/c/help/sc\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\">\n            {translate('footer.help')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about/contact\">{translate('footer.contact_us')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://sonarcloud.statuspage.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n            {translate('footer.status')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/about\">{translate('footer.about')}</Link>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getAppState, Store } from '../../store/rootReducer';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooter from './GlobalFooter';\n\ninterface StateProps {\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  productionDatabase: getAppState(state).productionDatabase,\n  sonarqubeEdition: getAppState(state).edition as EditionKey, // TODO: Fix once AppState is no longer ambiant.\n  sonarqubeVersion: getAppState(state).version\n});\n\nexport default connect(mapStateToProps)(GlobalFooter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../components/common/InstanceMessage';\nimport { getEdition } from '../../helpers/editions';\nimport { isSonarCloud } from '../../helpers/system';\nimport { EditionKey } from '../../types/editions';\nimport GlobalFooterBranding from './GlobalFooterBranding';\nimport GlobalFooterSonarCloud from './GlobalFooterSonarCloud';\n\ninterface Props {\n  hideLoggedInInfo?: boolean;\n  productionDatabase: boolean;\n  sonarqubeEdition?: EditionKey;\n  sonarqubeVersion?: string;\n}\n\nexport default function GlobalFooter({\n  hideLoggedInInfo,\n  productionDatabase,\n  sonarqubeEdition,\n  sonarqubeVersion\n}: Props) {\n  if (isSonarCloud()) {\n    return <GlobalFooterSonarCloud />;\n  }\n\n  const currentEdition = sonarqubeEdition && getEdition(sonarqubeEdition);\n\n  return (\n    <div className=\"page-footer page-container\" id=\"footer\">\n      {productionDatabase === false && (\n        <Alert display=\"inline\" id=\"evaluation_warning\" variant=\"warning\">\n          <p className=\"big\">{translate('footer.production_database_warning')}</p>\n          <p>\n            <InstanceMessage message={translate('footer.production_database_explanation')} />\n          </p>\n        </Alert>\n      )}\n\n      <GlobalFooterBranding />\n\n      <ul className=\"page-footer-menu\">\n        {!hideLoggedInInfo && currentEdition && (\n          <li className=\"page-footer-menu-item\">{currentEdition.name}</li>\n        )}\n        {!hideLoggedInInfo && sonarqubeVersion && (\n          <li className=\"page-footer-menu-item\">\n            {translateWithParameters('footer.version_x', sonarqubeVersion)}\n          </li>\n        )}\n        <li className=\"page-footer-menu-item\">\n          <a href=\"http://www.gnu.org/licenses/lgpl-3.0.txt\">{translate('footer.license')}</a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"http://www.sonarqube.org\">{translate('footer.community')}</a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <Link to=\"/documentation\">{translate('footer.documentation')}</Link>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://redirect.sonarsource.com/doc/community.html\">\n            {translate('footer.support')}\n          </a>\n        </li>\n        <li className=\"page-footer-menu-item\">\n          <a href=\"https://redirect.sonarsource.com/doc/plugin-library.html\">\n            {translate('footer.plugins')}\n          </a>\n        </li>\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/web_api\">{translate('footer.web_api')}</Link>\n          </li>\n        )}\n        {!hideLoggedInInfo && (\n          <li className=\"page-footer-menu-item\">\n            <Link to=\"/about\">{translate('footer.about')}</Link>\n          </li>\n        )}\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\n\nexport const DEFAULT_CATEGORY = 'general';\n\nexport type DefaultSpecializedInputProps = T.Omit<DefaultInputProps, 'setting'> & {\n  isDefault: boolean;\n  name: string;\n};\n\nexport interface DefaultInputProps {\n  hasValueChanged?: boolean;\n  onCancel?: () => void;\n  onChange: (value: any) => void;\n  onSave?: () => void;\n  setting: T.Setting;\n  value: any;\n}\n\nexport function sanitizeTranslation(html: string) {\n  return sanitize(html, {\n    ALLOWED_TAGS: ['b', 'br', 'code', 'i', 'li', 'p', 'strong', 'ul']\n  });\n}\n\nexport function getPropertyName(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.name`;\n  return hasMessage(key) ? translate(key) : definition.name;\n}\n\nexport function getPropertyDescription(definition: T.SettingDefinition) {\n  const key = `property.${definition.key}.description`;\n  return hasMessage(key) ? translate(key) : definition.description;\n}\n\nexport function getCategoryName(category: string) {\n  const key = `property.category.${category}`;\n  return hasMessage(key) ? translate(key) : category;\n}\n\nexport function getSubCategoryName(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}`;\n  return hasMessage(key) ? translate(key) : getCategoryName(subCategory);\n}\n\nexport function getSubCategoryDescription(category: string, subCategory: string) {\n  const key = `property.category.${category}.${subCategory}.description`;\n  return hasMessage(key) ? translate(key) : null;\n}\n\nexport function getUniqueName(definition: T.SettingDefinition, index?: string) {\n  const indexSuffix = index ? `[${index}]` : '';\n  return `settings[${definition.key}]${indexSuffix}`;\n}\n\nexport function getSettingValue({ definition, fieldValues, value, values }: T.Setting) {\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    return values;\n  } else if (definition.type === 'PROPERTY_SET') {\n    return fieldValues;\n  } else {\n    return value;\n  }\n}\n\nexport function isEmptyValue(definition: T.SettingDefinition, value: any) {\n  if (value == null) {\n    return true;\n  } else if (definition.type === 'BOOLEAN') {\n    return false;\n  } else {\n    return value.length === 0;\n  }\n}\n\nexport function isCategoryDefinition(\n  item: T.SettingDefinition\n): item is T.SettingCategoryDefinition {\n  return Boolean((item as any).fields);\n}\n\nexport function getEmptyValue(item: T.SettingDefinition | T.SettingCategoryDefinition): any {\n  if (isCategoryDefinition(item)) {\n    if (item.multiValues) {\n      return [getEmptyValue({ ...item, multiValues: false })];\n    }\n\n    if (item.type === 'PROPERTY_SET') {\n      const value: T.Dict<string> = {};\n      item.fields.forEach(field => (value[field.key] = getEmptyValue(field)));\n      return [value];\n    }\n  }\n\n  if (item.type === 'BOOLEAN' || item.type === 'SINGLE_SELECT_LIST') {\n    return null;\n  }\n  return '';\n}\n\nexport function isDefaultOrInherited(setting: T.Setting) {\n  return Boolean(setting.inherited);\n}\n\nexport function getDefaultValue(setting: T.Setting) {\n  const { definition, parentFieldValues, parentValue, parentValues } = setting;\n\n  if (definition.type === 'PASSWORD') {\n    return translate('settings.default.password');\n  }\n\n  if (definition.type === 'BOOLEAN' && parentValue) {\n    const isTrue = parentValue === 'true';\n    return isTrue ? translate('settings.boolean.true') : translate('settings.boolean.false');\n  }\n\n  if (\n    isCategoryDefinition(definition) &&\n    definition.multiValues &&\n    parentValues &&\n    parentValues.length > 0\n  ) {\n    return parentValues.join(', ');\n  }\n\n  if (definition.type === 'PROPERTY_SET' && parentFieldValues && parentFieldValues.length > 0) {\n    return translate('settings.default.complex_value');\n  }\n\n  if (parentValue == null) {\n    return isCategoryDefinition(definition) && definition.defaultValue\n      ? definition.defaultValue\n      : translate('settings.default.no_value');\n  }\n\n  return parentValue;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { invert, uniq } from 'lodash';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { RequestData } from 'sonar-ui-common/helpers/request';\nimport { Facet, searchProjects } from '../../api/components';\nimport { getMeasuresForProjects } from '../../api/measures';\nimport { getOrganizations } from '../../api/organizations';\nimport { getPeriodValue, isDiffMetric } from '../../helpers/measures';\nimport { MetricKey } from '../../types/metrics';\nimport { convertToFilter, Query } from './query';\n\ninterface SortingOption {\n  class?: string;\n  value: string;\n}\n\nexport const PROJECTS_DEFAULT_FILTER = 'sonarqube.projects.default';\nexport const PROJECTS_FAVORITE = 'favorite';\nexport const PROJECTS_ALL = 'all';\n\nexport const SORTING_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'reliability' },\n  { value: 'security' },\n  { value: 'maintainability' },\n  { value: 'coverage' },\n  { value: 'duplications' },\n  { value: 'size' }\n];\n\nexport const SORTING_LEAK_METRICS: SortingOption[] = [\n  { value: 'name' },\n  { value: 'analysis_date' },\n  { value: 'new_reliability', class: 'projects-leak-sorting-option' },\n  { value: 'new_security', class: 'projects-leak-sorting-option' },\n  { value: 'new_maintainability', class: 'projects-leak-sorting-option' },\n  { value: 'new_coverage', class: 'projects-leak-sorting-option' },\n  { value: 'new_duplications', class: 'projects-leak-sorting-option' },\n  { value: 'new_lines', class: 'projects-leak-sorting-option' }\n];\n\nexport const SORTING_SWITCH: T.Dict<string> = {\n  analysis_date: 'analysis_date',\n  name: 'name',\n  reliability: 'new_reliability',\n  security: 'new_security',\n  maintainability: 'new_maintainability',\n  coverage: 'new_coverage',\n  duplications: 'new_duplications',\n  size: 'new_lines',\n  new_reliability: 'reliability',\n  new_security: 'security',\n  new_maintainability: 'maintainability',\n  new_coverage: 'coverage',\n  new_duplications: 'duplications',\n  new_lines: 'size'\n};\n\nexport const VIEWS = [\n  { value: 'overall', label: 'overall' },\n  { value: 'leak', label: 'new_code' }\n];\n\nexport const VISUALIZATIONS = [\n  'risk',\n  'reliability',\n  'security',\n  'maintainability',\n  'coverage',\n  'duplications'\n];\n\nconst PAGE_SIZE = 50;\nconst PAGE_SIZE_VISUALIZATIONS = 99;\n\nconst METRICS = [\n  MetricKey.alert_status,\n  MetricKey.bugs,\n  MetricKey.reliability_rating,\n  MetricKey.vulnerabilities,\n  MetricKey.security_rating,\n  MetricKey.security_hotspots_reviewed,\n  MetricKey.security_review_rating,\n  MetricKey.code_smells,\n  MetricKey.sqale_rating,\n  MetricKey.duplicated_lines_density,\n  MetricKey.coverage,\n  MetricKey.ncloc,\n  MetricKey.ncloc_language_distribution,\n  MetricKey.projects\n];\n\nconst LEAK_METRICS = [\n  MetricKey.alert_status,\n  MetricKey.new_bugs,\n  MetricKey.new_reliability_rating,\n  MetricKey.new_vulnerabilities,\n  MetricKey.new_security_rating,\n  MetricKey.new_security_hotspots_reviewed,\n  MetricKey.new_security_review_rating,\n  MetricKey.new_code_smells,\n  MetricKey.new_maintainability_rating,\n  MetricKey.new_coverage,\n  MetricKey.new_duplicated_lines_density,\n  MetricKey.new_lines,\n  MetricKey.projects\n];\n\nconst METRICS_BY_VISUALIZATION: T.Dict<string[]> = {\n  risk: [\n    MetricKey.reliability_rating,\n    MetricKey.security_rating,\n    MetricKey.coverage,\n    MetricKey.ncloc,\n    MetricKey.sqale_index\n  ],\n  // x, y, size, color\n  reliability: [\n    MetricKey.ncloc,\n    MetricKey.reliability_remediation_effort,\n    MetricKey.bugs,\n    MetricKey.reliability_rating\n  ],\n  security: [\n    MetricKey.ncloc,\n    MetricKey.security_remediation_effort,\n    MetricKey.vulnerabilities,\n    MetricKey.security_rating\n  ],\n  maintainability: [\n    MetricKey.ncloc,\n    MetricKey.sqale_index,\n    MetricKey.code_smells,\n    MetricKey.sqale_rating\n  ],\n  coverage: [MetricKey.complexity, MetricKey.coverage, MetricKey.uncovered_lines],\n  duplications: [MetricKey.ncloc, MetricKey.duplicated_lines_density, MetricKey.duplicated_blocks]\n};\n\nexport const FACETS = [\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating',\n  'sqale_rating',\n  'coverage',\n  'duplicated_lines_density',\n  'ncloc',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nexport const LEAK_FACETS = [\n  'new_reliability_rating',\n  'new_security_rating',\n  'new_security_review_rating',\n  'new_maintainability_rating',\n  'new_coverage',\n  'new_duplicated_lines_density',\n  'new_lines',\n  'alert_status',\n  'languages',\n  'tags',\n  'qualifier'\n];\n\nconst REVERSED_FACETS = ['coverage', 'new_coverage'];\n\nexport function localizeSorting(sort?: string): string {\n  return translate('projects.sort', sort || 'name');\n}\n\nexport function parseSorting(sort: string): { sortValue: string; sortDesc: boolean } {\n  const desc = sort[0] === '-';\n  return { sortValue: desc ? sort.substr(1) : sort, sortDesc: desc };\n}\n\nexport function fetchProjects(\n  query: Query,\n  isFavorite: boolean,\n  organization: T.Organization | undefined,\n  pageIndex = 1\n) {\n  const ps = query.view === 'visualizations' ? PAGE_SIZE_VISUALIZATIONS : PAGE_SIZE;\n  const data = convertToQueryData(query, isFavorite, organization && organization.key, {\n    p: pageIndex > 1 ? pageIndex : undefined,\n    ps,\n    facets: defineFacets(query).join(),\n    f: 'analysisDate,leakPeriodDate'\n  });\n  return searchProjects(data)\n    .then(response =>\n      Promise.all([\n        fetchProjectMeasures(response.components, query),\n        fetchProjectOrganizations(response.components, organization),\n        Promise.resolve(response)\n      ])\n    )\n    .then(([measures, organizations, { components, facets, paging }]) => {\n      return {\n        facets: getFacetsMap(facets),\n        projects: components\n          .map(component => {\n            const componentMeasures: T.Dict<string> = {};\n            measures\n              .filter(measure => measure.component === component.key)\n              .forEach(measure => {\n                const value = isDiffMetric(measure.metric)\n                  ? getPeriodValue(measure, 1)\n                  : measure.value;\n                if (value !== undefined) {\n                  componentMeasures[measure.metric] = value;\n                }\n              });\n            return { ...component, measures: componentMeasures };\n          })\n          .map(component => {\n            const organization = organizations.find(o => o.key === component.organization);\n            return { ...component, organization };\n          }),\n        total: paging.total\n      };\n    });\n}\n\nfunction defineMetrics(query: Query): string[] {\n  switch (query.view) {\n    case 'visualizations':\n      return METRICS_BY_VISUALIZATION[query.visualization || 'risk'];\n    case 'leak':\n      return LEAK_METRICS;\n    default:\n      return METRICS;\n  }\n}\n\nfunction defineFacets(query: Query): string[] {\n  if (query.view === 'leak') {\n    return LEAK_FACETS;\n  }\n  return FACETS;\n}\n\nfunction convertToQueryData(\n  query: Query,\n  isFavorite: boolean,\n  organization?: string,\n  defaultData = {}\n) {\n  const data: RequestData = { ...defaultData, organization };\n  const filter = convertToFilter(query, isFavorite);\n  const sort = convertToSorting(query);\n\n  if (filter) {\n    data.filter = filter;\n  }\n  if (sort.s) {\n    data.s = sort.s;\n  }\n  if (sort.asc !== undefined) {\n    data.asc = sort.asc;\n  }\n  return data;\n}\n\nexport function fetchProjectMeasures(projects: Array<{ key: string }>, query: Query) {\n  if (!projects.length) {\n    return Promise.resolve([]);\n  }\n\n  const projectKeys = projects.map(project => project.key);\n  const metrics = defineMetrics(query);\n  return getMeasuresForProjects(projectKeys, metrics);\n}\n\nexport function fetchProjectOrganizations(\n  projects: Array<{ organization: string }>,\n  organization: T.Organization | undefined\n) {\n  if (organization) {\n    return Promise.resolve([organization]);\n  }\n  if (!projects.length) {\n    return Promise.resolve([]);\n  }\n\n  const organizations = uniq(projects.map(project => project.organization));\n  return getOrganizations({ organizations: organizations.join() }).then(r => r.organizations);\n}\n\nfunction mapFacetValues(values: Array<{ val: string; count: number }>) {\n  const map: T.Dict<number> = {};\n  values.forEach(value => {\n    map[value.val] = value.count;\n  });\n  return map;\n}\n\nconst propertyToMetricMap: T.Dict<string | undefined> = {\n  analysis_date: 'analysisDate',\n  reliability: 'reliability_rating',\n  new_reliability: 'new_reliability_rating',\n  security: 'security_rating',\n  new_security: 'new_security_rating',\n  security_review_rating: 'security_review_rating',\n  new_security_review_rating: 'new_security_review_rating',\n  maintainability: 'sqale_rating',\n  new_maintainability: 'new_maintainability_rating',\n  coverage: 'coverage',\n  new_coverage: 'new_coverage',\n  duplications: 'duplicated_lines_density',\n  new_duplications: 'new_duplicated_lines_density',\n  size: 'ncloc',\n  new_lines: 'new_lines',\n  gate: 'alert_status',\n  languages: 'languages',\n  tags: 'tags',\n  search: 'query',\n  qualifier: 'qualifier'\n};\n\nconst metricToPropertyMap = invert(propertyToMetricMap);\n\nfunction getFacetsMap(facets: Facet[]) {\n  const map: T.Dict<T.Dict<number>> = {};\n  facets.forEach(facet => {\n    const property = metricToPropertyMap[facet.property];\n    const { values } = facet;\n    if (REVERSED_FACETS.includes(property)) {\n      values.reverse();\n    }\n    map[property] = mapFacetValues(values);\n  });\n  return map;\n}\n\nfunction convertToSorting({ sort }: Query): { s?: string; asc?: boolean } {\n  if (sort && sort[0] === '-') {\n    return { s: propertyToMetricMap[sort.substr(1)], asc: false };\n  }\n  return { s: propertyToMetricMap[sort || ''] };\n}\n\nconst ONE_MINUTE = 60000;\nconst ONE_HOUR = 60 * ONE_MINUTE;\nconst ONE_DAY = 24 * ONE_HOUR;\nconst ONE_MONTH = 30 * ONE_DAY;\nconst ONE_YEAR = 12 * ONE_MONTH;\n\nfunction format(periods: Array<{ value: number; label: string }>) {\n  let result = '';\n  let count = 0;\n  let lastId = -1;\n  for (let i = 0; i < periods.length && count < 2; i++) {\n    if (periods[i].value > 0) {\n      count++;\n      if (lastId < 0 || lastId + 1 === i) {\n        lastId = i;\n        result += translateWithParameters(periods[i].label, periods[i].value) + ' ';\n      }\n    }\n  }\n  return result;\n}\n\nexport function formatDuration(ms: number) {\n  if (ms < ONE_MINUTE) {\n    return translate('duration.seconds');\n  }\n  const years = Math.floor(ms / ONE_YEAR);\n  ms -= years * ONE_YEAR;\n  const months = Math.floor(ms / ONE_MONTH);\n  ms -= months * ONE_MONTH;\n  const days = Math.floor(ms / ONE_DAY);\n  ms -= days * ONE_DAY;\n  const hours = Math.floor(ms / ONE_HOUR);\n  ms -= hours * ONE_HOUR;\n  const minutes = Math.floor(ms / ONE_MINUTE);\n  return format([\n    { value: years, label: 'duration.years' },\n    { value: months, label: 'duration.months' },\n    { value: days, label: 'duration.days' },\n    { value: hours, label: 'duration.hours' },\n    { value: minutes, label: 'duration.minutes' }\n  ]);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten, sortBy } from 'lodash';\nimport { ISSUE_TYPES } from './constants';\n\ninterface Comment {\n  login: string;\n  [x: string]: any;\n}\n\ninterface Rule {}\n\ninterface Component {\n  key: string;\n  name: string;\n}\n\ninterface IssueBase {\n  severity: string;\n  [x: string]: any;\n}\n\nexport interface RawIssue extends IssueBase {\n  assignee?: string;\n  author?: string;\n  comments?: Array<Comment>;\n  component: string;\n  flows?: Array<{\n    // `componentName` is not available in RawIssue\n    locations?: Array<T.Omit<T.FlowLocation, 'componentName'>>;\n  }>;\n  key: string;\n  line?: number;\n  project: string;\n  rule: string;\n  status: string;\n  subProject?: string;\n  textRange?: T.TextRange;\n}\n\nexport function sortByType<T extends Pick<T.Issue, 'type'>>(issues: T[]): T[] {\n  return sortBy(issues, issue => ISSUE_TYPES.indexOf(issue.type));\n}\n\nfunction injectRelational(\n  issue: T.Dict<any>,\n  source: any[] | undefined,\n  baseField: string,\n  lookupField: string\n) {\n  const newFields: T.Dict<any> = {};\n  const baseValue = issue[baseField];\n  if (baseValue !== undefined && source !== undefined) {\n    const lookupValue = source.find(candidate => candidate[lookupField] === baseValue);\n    if (lookupValue != null) {\n      Object.keys(lookupValue).forEach(key => {\n        const newKey = baseField + key.charAt(0).toUpperCase() + key.slice(1);\n        newFields[newKey] = lookupValue[key];\n      });\n    }\n  }\n  return newFields;\n}\n\nfunction injectCommentsRelational(issue: RawIssue, users?: T.UserBase[]) {\n  if (!issue.comments) {\n    return {};\n  }\n  const comments = issue.comments.map(comment => {\n    const commentWithAuthor = { ...comment, author: comment.login, login: undefined };\n    return {\n      ...commentWithAuthor,\n      ...injectRelational(commentWithAuthor, users, 'author', 'login')\n    };\n  });\n  return { comments };\n}\n\nfunction prepareClosed(\n  issue: RawIssue,\n  secondaryLocations: T.FlowLocation[],\n  flows: T.FlowLocation[][]\n) {\n  return issue.status === 'CLOSED'\n    ? { flows: [], line: undefined, textRange: undefined, secondaryLocations: [] }\n    : { flows, secondaryLocations };\n}\n\nfunction ensureTextRange(issue: RawIssue): { textRange?: T.TextRange } {\n  return issue.line && !issue.textRange\n    ? {\n        textRange: {\n          startLine: issue.line,\n          endLine: issue.line,\n          startOffset: 0,\n          endOffset: 999999\n        }\n      }\n    : {};\n}\n\nfunction reverseLocations(locations: T.FlowLocation[]): T.FlowLocation[] {\n  const x = [...locations];\n  x.reverse();\n  return x;\n}\n\nfunction splitFlows(\n  issue: RawIssue,\n  components: Component[] = []\n): { secondaryLocations: T.FlowLocation[]; flows: T.FlowLocation[][] } {\n  const parsedFlows: T.FlowLocation[][] = (issue.flows || [])\n    .filter(flow => flow.locations !== undefined)\n    .map(flow => flow.locations!.filter(location => location.textRange != null))\n    .map(flow =>\n      flow.map(location => {\n        const component = components.find(component => component.key === location.component);\n        return { ...location, componentName: component && component.name };\n      })\n    );\n\n  const onlySecondaryLocations = parsedFlows.every(flow => flow.length === 1);\n\n  return onlySecondaryLocations\n    ? { secondaryLocations: orderLocations(flatten(parsedFlows)), flows: [] }\n    : { secondaryLocations: [], flows: parsedFlows.map(reverseLocations) };\n}\n\nfunction orderLocations(locations: T.FlowLocation[]) {\n  return sortBy(\n    locations,\n    location => location.textRange && location.textRange.startLine,\n    location => location.textRange && location.textRange.startOffset\n  );\n}\n\nexport function parseIssueFromResponse(\n  issue: RawIssue,\n  components?: Component[],\n  users?: T.UserBase[],\n  rules?: Rule[]\n): T.Issue {\n  const { secondaryLocations, flows } = splitFlows(issue, components);\n  return {\n    ...issue,\n    ...injectRelational(issue, components, 'component', 'key'),\n    ...injectRelational(issue, components, 'project', 'key'),\n    ...injectRelational(issue, components, 'subProject', 'key'),\n    ...injectRelational(issue, rules, 'rule', 'key'),\n    ...injectRelational(issue, users, 'assignee', 'login'),\n    ...injectCommentsRelational(issue, users),\n    ...prepareClosed(issue, secondaryLocations, flows),\n    ...ensureTextRange(issue)\n  } as T.Issue;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { createContext } from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\nexport interface ComponentDescriptor {\n  branchLike: BranchLike | undefined;\n  key: string;\n  line?: number;\n  name?: string;\n  qualifier?: string;\n}\n\nexport interface RuleDescriptor {\n  key: string;\n  name?: string;\n  organization: string;\n}\n\nexport interface WorkspaceContextShape {\n  openComponent: (component: ComponentDescriptor) => void;\n  openRule: (rule: RuleDescriptor) => void;\n}\n\nexport const WorkspaceContext = createContext<WorkspaceContextShape>({\n  openComponent: () => {},\n  openRule: () => {}\n});\n"],"sourceRoot":""}