{"version":3,"sources":["webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/common/LocationIndex.css?e012","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?8760","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/Issue.css?a142","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/lines.ts","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css?94e1","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeaderSlim.css","webpack:///./src/main/js/components/SourceViewer/components/Line.css?69c4","webpack:///./src/main/js/components/SourceViewer/components/Line.css","webpack:///./src/main/js/components/hoc/utils.ts","webpack:///./src/main/js/types/component.ts","webpack:///./src/main/js/components/hoc/withCurrentUser.tsx","webpack:///./src/main/js/components/shared/SeverityHelper.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/common/MultiSelectOption.tsx","webpack:///./src/main/js/components/common/MultiSelect.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/common/MarkdownTips.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/components/tags/TagsSelector.tsx","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/helpers/security-standard.ts","webpack:///./src/main/js/types/security-hotspots.ts","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts"],"names":["IssueChangelogDiff","message","diff","key","oldValue","newValue","includes","getLinearLocations","textRange","locations","line","startLine","endLine","from","startOffset","to","endOffset","push","getSecondaryIssueLocationsForLine","highlightedLocations","reduce","location","linearLocations","filter","l","map","index","text","SourceViewerContext","branchLike","file","splitByTokens","code","rootClassName","container","document","createElement","tokens","innerHTML","forEach","call","childNodes","node","nodeType","fullClassName","className","innerTokens","concat","nodeValue","markers","highlightSymbol","symbol","symbolRegExp","RegExp","token","test","part","str","acc","substr","highlightIssueLocations","issueLocations","nextTokens","markerAdded","s1","e1","s2","e2","x","length","Math","max","min","p1","p2","p3","newClassName","indexOf","slice","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","LocationMessage","props","selected","children","onChange","resultPromise","oldIssue","newIssue","optimisticUpdate","undefined","then","response","issue","components","users","rules","handleSelect","event","preventDefault","onSelect","item","handleHover","onHover","renderLink","this","active","href","onClick","onFocus","onMouseOver","render","overlay","title","placement","attachShortcuts","previousKeyScope","previousFilter","currentKeyScope","tagName","isInput","keyCode","setState","selectNextElement","selectPreviousElement","state","detachShortcuts","idx","items","renderChild","child","type","currentItem","componentDidMount","componentDidUpdate","prevProps","componentWillUnmount","hasChildren","count","searchMembers","query","organization","projectOrganization","q","ps","handleSearchResult","searchUsers","activeUsers","currentUser","login","handleSearchChange","defaultUsersArray","name","Dropdown","noPadding","autoFocus","minLength","placeholder","value","user","Avatar","hash","avatar","size","style","marginLeft","withCurrentUser","toggleAssign","open","togglePopup","handleClose","renderAssignee","assigneeName","assignee","assigneeAvatar","assigneeActive","canAssign","closeOnEscape","onRequestClose","isOpen","onAssign","handleCommentChange","textComment","target","handleCommentClick","trim","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","stopPropagation","comment","markdown","autoTriggered","onKeyDown","rows","disabled","MarkdownTips","addComment","issueKey","closeOnClickOutside","currentPopup","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","severity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SeverityHelper","mounted","searchResult","onSearch","selectedTags","tags","tag","setTags","onUnselect","availableTags","BottomRight","TagsSelector","listSize","toggleSetTags","join","canSetTags","TagsList","allowUpdate","SetTransitionPopup","fromHotspot","transitions","isManualVulnerability","transition","description","setTransition","toggleSetTransition","hasTransitions","StatusHelper","resolution","status","TYPES","SetTypePopup","toggleSetType","setType","canSetType","fill","baseFontColor","property","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","openPopup","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","popupName","force","prevState","closePopups","author","authorName","displayName","authorActive","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","date","createdAt","updatable","changelog","loadChangelog","creationDate","userName","isUserActive","diffs","toggleChangelog","handleClick","mouseEnterDelay","IssueMessage","engine","manualVulnerability","ruleKey","onOpenRule","onFilter","subProject","ruleName","qualifier","projectName","subProjectName","componentQualifier","componentLongName","handleFilter","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","LocationIndex","displayLocations","displayLocationsCount","issueUrl","project","issues","types","Consumer","openRule","externalRuleEngine","rule","displayLocationsLink","handleCheck","onCheck","isClickable","editComment","deleteComment","hasCheckbox","issueClass","hotspot","role","tabIndex","comments","checked","toUpperCase","parentElement","onPopupToggle","handleAssignement","bindShortcuts","componentWillUpdate","nextProps","unbindShortcuts","defaultProps","SourceViewerHeaderSlim","expandable","displayProjectName","linkToProject","loading","onExpand","sourceViewerFile","measures","path","projectNameLabel","Project","SubProject","copyValue","canMarkAsFavorite","component","favorite","fav","fileUuids","uuid","resolved","optimizeHighlightedSymbols","symbolsForLine","highlightedSymbols","symbols","optimizeLocationMessage","highlightedLocationMessage","optimizedSecondaryIssueLocations","some","optimizeSelectedIssue","selectedIssue","issuesForLine","find","LineIssuesList","issuePopup","Issue","displayIssueLocationsCount","displayIssueLocationsLink","onIssueChange","onIssueClick","onIssuePopupToggle","handleSymbolClick","keys","currentTarget","match","onSymbolClick","attachEvents","activeMarkerNode","scroll","componentWillReceiveProps","detachEvents","codeNode","querySelectorAll","addEventListener","renderMarker","leading","onLocationSelect","ref","onIssueSelect","padding","secondaryIssueLocations","showIssues","highlight","renderedTokens","leadingMarker","displayLocationMarkers","marker","loc","paddingBottom","filteredSelectedIssues","LineCoverage","coverageStatus","getStatusTooltip","conditions","coveredConditions","blur","handleTogglePopup","closePopup","duplicated","popupOpen","renderDuplicationPopup","cell","hasIssues","mostImportantIssue","LineOptionsPopup","RightTop","rel","lineNumber","SCMPopup","hasAuthor","scmAuthor","scmDate","scmRevision","previousLine","hasPopup","s","p","changed","isSCMChanged","isPopupOpen","linePopup","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","displayCoverage","displaySCM","duplications","duplicationsCount","highlighted","isNew","last","bottomPadding","verticalBuffer","onLinePopupToggle","displayIssues","displayAllIssues","displayDuplications","loadDuplications","getWrappedDisplayName","WrappedComponent","hocName","ComponentQualifier","Visibility","isPortfolioLike","Portfolio","toString","SubPortfolio","Wrapper","KNOWN_RATINGS","enhanceMeasure","measure","metrics","metric","leak","getLeakValue","periods","period","getRatingTooltip","metricKey","finalMetricKey","Measure","decimals","metricType","small","level","formattedValue","omitExtraDecimalZeros","tooltip","Number","rating","getLeakPeriod","Array","isArray","getPeriod","getPeriodLabel","dateFormatter","parameter","modeParam","mode","toLowerCase","getPeriodDate","isApplicationPeriod","getPosition","containerPos","getBoundingClientRect","top","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","removeEventListener","MultiSelectOption","custom","element","label","renderLabel","Boolean","id","onSelectChange","handleSelectChange","onSelectItem","onUnselectItem","onSearchQuery","validateSearchInput","handleElementHover","activeIdx","getAllElements","evt","toggleSelect","stopLoading","isNewElement","elem","selectedElements","elements","updateSelectedElements","filterSelected","updateUnselectedElements","unselectedElements","setElementActive","allElements","totalElements","searchInput","focus","allowSelection","allowNewElements","footerNode","activeElement","showNewElement","infiniteList","listClasses","div","validateTag","replace","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","CoverageRating","muted","data","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","width","thickness","height","toggleFavorite","newFavorite","handleFavorite","_prevProps","clickAttributes","other","getStandards","renderCWECategory","standards","category","record","cwe","renderOwaspTop10Category","withPrefix","owaspTop10","addPrefix","renderSansTop25Category","sansTop25","renderSonarSourceSecurityCategory","sonarsourceSecurity","prefix","RiskExposure","HotspotStatus","HotspotResolution","HotspotStatusFilter","HotspotStatusOption","ReviewHistoryType","issuesByLine","issuesByComponentAndLine","mapping","locationsByLine","duplicationsByLine","duplicationIndex","blocks","block","_ref","symbolsByLine","sources"],"mappings":"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","file":"js/304.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  diff: T.IssueChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (['from_long_branch', 'from_branch'].includes(diff.key)) {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    // Applies to both legacy short lived branch and pull request\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_non_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'line') {\n    return <p>{translateWithParameters('issue.changelog.line_removed_X', diff.oldValue || '')}</p>;\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n\nexport function getSecondaryIssueLocationsForLine(\n  line: T.SourceLine,\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined\n): T.LinearIssueLocation[] {\n  if (!highlightedLocations) {\n    return [];\n  }\n  return highlightedLocations.reduce((locations, location) => {\n    const linearLocations: T.LinearIssueLocation[] = location\n      ? getLinearLocations(location.textRange)\n          .filter(l => l.line === line.line)\n          .map(l => ({\n            ...l,\n            startLine: location.textRange.startLine,\n            index: location.index,\n            text: location.msg\n          }))\n      : [];\n    return [...locations, ...linearLocations];\n  }, []);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\n\ninterface SourceViewerContextShape {\n  branchLike?: BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext<SourceViewerContextShape>({\n  branchLike: {} as BranchLike,\n  file: {} as T.SourceViewerFile\n});\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(token =>\n    symbolRegExp.test(token.className)\n      ? { ...token, className: `${token.className} highlighted` }\n      : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-index{position:relative;display:inline-block;vertical-align:top;line-height:16px;padding-left:6px;padding-right:6px;border-radius:2px;background-color:#d18582;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;transition:background-color .3s ease;-webkit-user-select:none;-ms-user-select:none;user-select:none}.location-index.selected{background-color:#a4030f}.location-index.muted{background-color:#cdcdcd}.location-index.is-leading:first-child{margin-left:0}.location-index.is-leading:not(:first-child){margin-left:-22px}.location-index[tabindex]{cursor:pointer}.location-index[tabindex]:hover,a:hover>.location-index{background-color:#a4030f}.location-index[tabindex]:focus{outline:none}.source-line-code-inner .location-index{line-height:16px;margin:1px 4px}.source-line-code-inner .location-index+.location-index{margin-left:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".location-message{display:inline-block;vertical-align:top;line-height:16px;padding:0 6px;border-radius:2px;background-color:#9e9e9e;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;text-overflow:ellipsis;overflow:hidden;transition:background-color .3s ease}.location-message.selected{background-color:#475760}.location-index+.location-message{margin-left:4px}.location-index>.location-message{display:none;position:absolute;bottom:calc(100% + 4px);left:0}.location-index:hover>.location-message{display:block}.location-index>.location-message:after{position:absolute;bottom:-5px;left:4px;width:0;height:0;border-top:5px solid #475760;border-left:5px solid transparent;border-right:5px solid transparent;content:\\\"\\\"}.source-line-code .location-message{padding-top:2px;padding-bottom:2px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".issue{position:relative;padding-top:8px;padding-bottom:8px;background-color:#f2dede;transition:all .3s ease,border 0s ease}.issue.hotspot{background-color:#eeeff4}.issue.selected{box-shadow:none;outline:none;border:2px solid #4b9fd5!important}.issue+.issue,.issue-container+.issue-container{margin-top:5px}.issue.selected+.issue{border-top-color:transparent}.issue-row{display:flex;margin-bottom:5px}.issue-row-meta{flex-grow:0;padding-right:5px;white-space:nowrap}.issue-message{flex-grow:1;padding-left:8px;padding-right:8px;line-height:18px;font-size:13px;font-weight:600;text-overflow:ellipsis}.issue-actions{justify-content:space-between;flex-wrap:wrap;padding-left:8px}.issue-actions,.issue-meta-list{display:flex;align-items:center}.issue-meta{line-height:16px;font-size:12px}.issue-meta+.issue-meta{margin-left:8px}.issue-meta-label{display:inline-block;vertical-align:top;max-width:180px;line-height:16px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.issue-see-rule{border-bottom:none;font-size:12px}.issue-changelog{width:450px;max-height:320px;overflow:auto;white-space:normal}.issue-comments{margin-top:5px;padding-left:8px;font-size:12px}.issue-comment{display:flex}.issue-comment+.issue-comment{margin-top:4px}.issue-comment-author{max-width:130px;font-weight:600;overflow:hidden;text-overflow:ellipsis}.issue-comment-age,.issue-comment-author{flex-shrink:0;line-height:18px;color:#777;white-space:nowrap}.issue-comment-text{flex:1;min-width:0;margin-left:5px;margin-right:5px;line-height:18px;line-height:1.5;overflow:hidden;outline:none;word-break:break-all}.issue-comment-text.markdown pre{float:none;height:auto;margin:0;padding:8px;background-color:#e6e6e6;border:none;border-radius:3px}.issue-comment-text.markdown br~pre{margin-top:8px}.issue-comment-actions{flex-shrink:0;padding-left:5px;line-height:18px;white-space:nowrap}.issue-comment-bubble-popup{width:440px;font-size:12px}.issue-comment-form-text textarea{width:100%;max-width:100%}.issue-comment-form-footer{margin-top:5px;line-height:22px}.issue-comment-form-footer:after,.issue-comment-form-footer:before{display:table;content:\\\"\\\";line-height:0}.issue-comment-form-footer:after{clear:both}.issue-comment-form-actions{float:right}.issue-comment-form-tips{float:left}.issue-with-checkbox{padding-left:24px}.issue-with-checkbox .issue-checkbox-container{display:flex;justify-content:center;align-items:center}.issue-checkbox-container{display:none;position:absolute;width:28px;top:0;bottom:0;left:0;border:none}.issue-checkbox-container:hover{background-color:rgba(0,0,0,.05)}.issue:not(.selected) .location-index{background-color:#999}.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog){max-height:120px;overflow:auto}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { IssueResponse } from '../../api/issues';\nimport { parseIssueFromResponse } from '../../helpers/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  className?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames(\n            { active: this.props.active === this.props.item },\n            this.props.className\n          )}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport * as React from 'react';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { map } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn, isUserActive } from '../../../helpers/users';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { withCurrentUser } from '../../hoc/withCurrentUser';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: T.UserActive[];\n}\n\nconst LIST_SIZE = 10;\n\nexport class SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: T.UserActive[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = ({ users }: { users: T.UserBase[] }) => {\n    const activeUsers = users.filter(isUserActive);\n    this.setState({\n      users: activeUsers,\n      currentUser: activeUsers.length > 0 ? activeUsers[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span className=\"text-middle\" style={{ marginLeft: user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nexport default withCurrentUser(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<\n    T.Issue,\n    'assignee' | 'assigneeActive' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'\n  >;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    const assigneeName = issue.assigneeName || issue.assignee;\n\n    if (assigneeName) {\n      return (\n        <>\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n          <span className=\"issue-meta-label\">\n            {issue.assigneeActive === false\n              ? translateWithParameters('user.x_deleted', assigneeName)\n              : assigneeName}\n          </span>\n        </>\n      );\n    }\n\n    return <span className=\"issue-meta-label\">{translate('unassigned')}</span>;\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MarkdownTips from '../../common/MarkdownTips';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addIssueComment } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem className=\"display-flex-center\" item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { IssueResponse, setIssueSeverity } from '../../../api/issues';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, without } from 'lodash';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { searchIssueTags } from '../../../api/issues';\nimport TagsSelector from '../../tags/TagsSelector';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { setIssueTags } from '../../../api/issues';\nimport TagsList from '../../tags/TagsList';\nimport { updateIssue } from '../actions';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\nexport interface Props {\n  fromHotspot: boolean;\n  onSelect: (transition: string) => void;\n  transitions: string[];\n  type: T.IssueType;\n}\n\nexport default function SetTransitionPopup({ fromHotspot, onSelect, transitions, type }: Props) {\n  const isManualVulnerability = fromHotspot && type === 'VULNERABILITY';\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          const [name, description] = translateTransition(transition, isManualVulnerability);\n          return (\n            <SelectListItem item={transition} key={transition} title={description}>\n              {name}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n\nfunction translateTransition(transition: string, isManualVulnerability: boolean) {\n  return isManualVulnerability && hasMessage('vulnerability.transition', transition)\n    ? [\n        translate('vulnerability.transition', transition),\n        translate('vulnerability.transition', transition, 'description')\n      ]\n    : [\n        translate('issue.transition', transition),\n        translate('issue.transition', transition, 'description')\n      ];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { setIssueTransition } from '../../../api/issues';\nimport StatusHelper from '../../shared/StatusHelper';\nimport { updateIssue } from '../actions';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'fromHotspot' | 'key' | 'resolution' | 'status' | 'transitions' | 'type'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup\n                fromHotspot={issue.fromHotspot}\n                onSelect={this.setTransition}\n                transitions={issue.transitions}\n                type={issue.type}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem className=\"display-flex-center\" item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse, setIssueType } from '../../../api/issues';\nimport { colors } from '../../../app/theme';\nimport SetTypePopup from '../popups/SetTypePopup';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon\n                className=\"little-spacer-right\"\n                fill={colors.baseFontColor}\n                query={issue.type}\n              />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { IssueResponse } from '../../../api/issues';\nimport { updateIssue } from '../actions';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: T.RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          <li className=\"issue-meta\">\n            <IssueAssign\n              canAssign={canAssign}\n              isOpen={this.props.currentPopup === 'assign' && canAssign}\n              issue={issue}\n              onAssign={this.props.onAssign}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && issue.effort && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\">\n                {translateWithParameters('issue.x_effort', issue.effort)}\n              </span>\n            </li>\n          )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sanitize } from 'dompurify';\nimport * as React from 'react';\nimport { DeleteButton, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    const author = comment.authorName || comment.author;\n    const displayName =\n      comment.authorActive === false && author\n        ? translateWithParameters('user.x_deleted', author)\n        : author;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={displayName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={author}\n            size={16}\n          />\n          {displayName}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: sanitize(comment.htmlText) }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { getIssueChangelog } from '../../../api/issues';\nimport Avatar from '../../ui/Avatar';\nimport IssueChangelogDiff from '../components/IssueChangelogDiff';\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelog: T.IssueChangelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { changelog: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      ({ changelog }) => {\n        if (this.mounted) {\n          this.setState({ changelog });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelog.map((item, idx) => {\n                const userName = item.userName || item.user;\n\n                return (\n                  <tr key={idx}>\n                    <td className=\"thin text-left text-top nowrap\">\n                      <DateTimeFormatter date={item.creationDate} />\n                    </td>\n                    <td className=\"text-left text-top\">\n                      {userName && (\n                        <p>\n                          <Avatar\n                            className=\"little-spacer-right\"\n                            hash={item.avatar}\n                            name={userName}\n                            size={16}\n                          />\n                          {item.isUserActive\n                            ? userName\n                            : translateWithParameters('user.x_deleted', userName)}\n                        </p>\n                      )}\n                      {item.diffs.map(diff => (\n                        <IssueChangelogDiff diff={diff} key={diff.key} />\n                      ))}\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport DateFromNow from 'sonar-ui-common/components/intl/DateFromNow';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport ChangelogPopup from '../popups/ChangelogPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { WorkspaceContextShape } from '../../workspace/context';\n\nexport interface IssueMessageProps {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  onOpenRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  ruleKey: string;\n}\n\nexport default function IssueMessage(props: IssueMessageProps) {\n  const { engine, manualVulnerability, message, organization, ruleKey } = props;\n\n  return (\n    <div className=\"issue-message\">\n      <span className=\"spacer-right\">{message}</span>\n      <ButtonLink\n        aria-label={translate('issue.why_this_issue.long')}\n        className=\"issue-see-rule spacer-right\"\n        onClick={() => props.onOpenRule({ key: ruleKey, organization })}>\n        {translate('issue.why_this_issue')}\n      </ButtonLink>\n\n      {engine && (\n        <Tooltip overlay={translateWithParameters('issue.from_external_rule_engine', engine)}>\n          <div className=\"badge spacer-right text-top\">{engine}</div>\n        </Tooltip>\n      )}\n      {manualVulnerability && (\n        <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n          <div className=\"badge spacer-right text-top\">\n            {translate('issue.manual_vulnerability')}\n          </div>\n        </Tooltip>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { fileFromPath, limitComponentName } from 'sonar-ui-common/helpers/path';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Avatar from '../../ui/Avatar';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    const assignee = issue.assigneeName || issue.assignee;\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem className=\"display-flex-center\" item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper className=\"display-flex-center\" severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper\n              className=\"display-flex-center\"\n              resolution={undefined}\n              status={issue.status}\n            />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {assignee ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={assignee}\n                  size={16}\n                />\n                {issue.assigneeActive === false\n                  ? translateWithParameters('user.x_deleted', assignee)\n                  : assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport FilterIcon from 'sonar-ui-common/components/icons/FilterIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport LinkIcon from 'sonar-ui-common/components/icons/LinkIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getBranchLikeQuery } from '../../../helpers/branch-like';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport { WorkspaceContext } from '../../workspace/context';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\n\ninterface Props {\n  branchLike?: BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            onOpenRule={openRule}\n            organization={issue.organization}\n            ruleKey={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport IssueTitleBar from './components/IssueTitleBar';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = () => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      hotspot: issue.type === 'SECURITY_HOTSPOT',\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments && issue.comments.length > 0 && (\n          <div className=\"issue-comments\">\n            {issue.comments.map(comment => (\n              <IssueCommentLine\n                comment={comment}\n                key={comment.key}\n                onDelete={this.deleteComment}\n                onEdit={this.editComment}\n              />\n            ))}\n          </div>\n        )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as key from 'keymaster';\nimport * as React from 'react';\nimport { setIssueAssignee } from '../../api/issues';\nimport { BranchLike } from '../../types/branch-like';\nimport { updateIssue } from './actions';\nimport './Issue.css';\nimport IssueView from './IssueView';\n\ninterface Props {\n  branchLike?: BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport { ClipboardIconButton } from 'sonar-ui-common/components/controls/clipboard';\nimport ExpandSnippetIcon from 'sonar-ui-common/components/icons/ExpandSnippetIcon';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from 'sonar-ui-common/helpers/path';\nimport { getPathUrlAsString } from 'sonar-ui-common/helpers/urls';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branch-like';\nimport { getBranchLikeUrl, getComponentIssuesUrl } from '../../helpers/urls';\nimport { BranchLike } from '../../types/branch-like';\nimport { ComponentQualifier } from '../../types/component';\nimport Favorite from '../controls/Favorite';\nimport './SourceViewerHeaderSlim.css';\n\nexport interface Props {\n  branchLike: BranchLike | undefined;\n  expandable?: boolean;\n  displayProjectName?: boolean;\n  linkToProject?: boolean;\n  loading?: boolean;\n  onExpand?: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default function SourceViewerHeaderSlim(props: Props) {\n  const {\n    branchLike,\n    expandable,\n    displayProjectName = true,\n    linkToProject = true,\n    loading,\n    onExpand,\n    sourceViewerFile\n  } = props;\n  const {\n    key,\n    measures,\n    path,\n    project,\n    projectName,\n    q,\n    subProject,\n    subProjectName\n  } = sourceViewerFile;\n\n  const projectNameLabel = (\n    <>\n      <QualifierIcon qualifier={ComponentQualifier.Project} /> <span>{projectName}</span>\n    </>\n  );\n\n  return (\n    <div className=\"source-viewer-header-slim display-flex-row display-flex-space-between\">\n      <div className=\"display-flex-center flex-1\">\n        {displayProjectName && (\n          <div className=\"spacer-right\">\n            {linkToProject ? (\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, branchLike))}>\n                {projectNameLabel}\n              </a>\n            ) : (\n              projectNameLabel\n            )}\n          </div>\n        )}\n\n        {subProject !== undefined && (\n          <>\n            <QualifierIcon qualifier={ComponentQualifier.SubProject} />{' '}\n            <span className=\"spacer-right\">{subProjectName}</span>\n          </>\n        )}\n\n        <div className=\"spacer-right\">\n          <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n          <span className=\"component-name-file\">{fileFromPath(path)}</span>\n        </div>\n\n        <div className=\"spacer-right\">\n          <ClipboardIconButton className=\"button-link link-no-underline\" copyValue={path} />\n        </div>\n\n        {sourceViewerFile.canMarkAsFavorite && (!branchLike || isMainBranch(branchLike)) && (\n          <div className=\"nudged-up\">\n            <Favorite\n              className=\"component-name-favorite\"\n              component={key}\n              favorite={sourceViewerFile.fav || false}\n              qualifier={sourceViewerFile.q}\n            />\n          </div>\n        )}\n      </div>\n\n      {measures.issues !== undefined && (\n        <div\n          className={classNames('flex-0 big-spacer-left', {\n            'little-spacer-right': !expandable || loading\n          })}>\n          <Link\n            to={getComponentIssuesUrl(project, {\n              ...getBranchLikeQuery(branchLike),\n              fileUuids: sourceViewerFile.uuid,\n              resolved: 'false'\n            })}>\n            {translate('source_viewer.view_all_issues')}\n          </Link>\n        </div>\n      )}\n\n      {expandable && (\n        <DeferredSpinner className=\"little-spacer-right\" loading={loading}>\n          <div className=\"flex-0 big-spacer-left\">\n            <ButtonIcon className=\"js-actions\" onClick={onExpand}>\n              <ExpandSnippetIcon />\n            </ButtonIcon>\n          </div>\n        </DeferredSpinner>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { intersection } from 'lodash';\n\nexport function optimizeHighlightedSymbols(\n  symbolsForLine: string[] = [],\n  highlightedSymbols: string[] = []\n): string[] | undefined {\n  const symbols = intersection(symbolsForLine, highlightedSymbols);\n\n  return symbols.length ? symbols : undefined;\n}\n\nexport function optimizeLocationMessage(\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined,\n  optimizedSecondaryIssueLocations: T.LinearIssueLocation[]\n) {\n  return highlightedLocationMessage != null &&\n    optimizedSecondaryIssueLocations.some(\n      location => location.index === highlightedLocationMessage.index\n    )\n    ? highlightedLocationMessage\n    : undefined;\n}\n\nexport function optimizeSelectedIssue(selectedIssue: string | undefined, issuesForLine: T.Issue[]) {\n  return selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n    ? selectedIssue\n    : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\nimport LineIssuesList from './LineIssuesList';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  padding?: number;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      (!prevProps.highlightedLocationMessage ||\n        prevProps.highlightedLocationMessage.index !==\n          this.props.highlightedLocationMessage.index) &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      padding,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const loc = secondaryIssueLocations.find(loc => loc.index === marker);\n          const message = loc && loc.text;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    const style = padding ? { paddingBottom: `${padding}px` } : undefined;\n    const filteredSelectedIssues = issues.filter(i => i.key === selectedIssue);\n\n    return (\n      <td className={className} data-line-number={line.line} style={style}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues && issues.length > 0 && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n            displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n            issuePopup={this.props.issuePopup}\n            issues={issues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n        {selectedIssue && !showIssues && (\n          <LineIssuesList\n            branchLike={this.props.branchLike}\n            issuePopup={this.props.issuePopup}\n            issues={filteredSelectedIssues}\n            onIssueChange={this.props.onIssueChange}\n            onIssueClick={onIssueSelect}\n            onIssuePopupToggle={this.props.onIssuePopupToggle}\n            selectedIssue={selectedIssue}\n          />\n        )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineCoverage({ line }: Props) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={getStatusTooltip(line)} placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    return duplicated ? (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip\n            overlay={popupOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n            placement=\"right\">\n            <div\n              className=\"source-line-bar\"\n              onClick={this.handleClick}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n  onClick: (line: T.SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport IssueIcon from 'sonar-ui-common/components/icons/IssueIcon';\nimport { sortByType } from '../../../helpers/issues';\n\ninterface Props {\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortByType(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <IssueIcon type={mostImportantIssue.type} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineOptionsPopup({ line }: Props) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <DropdownOverlay placement={PopupPlacement.RightTop}>\n          <div className=\"source-viewer-bubble-popup nowrap\">\n            <Link\n              className=\"js-get-permalink\"\n              onClick={event => {\n                event.stopPropagation();\n              }}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n              {translate('component_viewer.get_permalink')}\n            </Link>\n          </div>\n        </DropdownOverlay>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport LineOptionsPopup from './LineOptionsPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<LineOptionsPopup line={line} />}\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { DropdownOverlay } from 'sonar-ui-common/components/controls/Dropdown';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { PopupPlacement } from 'sonar-ui-common/components/ui/popups';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  const hasAuthor = line.scmAuthor !== '';\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {hasAuthor && <div>{line.scmAuthor}</div>}\n        {line.scmDate && (\n          <div className={classNames({ 'spacer-top': hasAuthor })}>\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Toggler from 'sonar-ui-common/components/controls/Toggler';\nimport SCMPopup from './SCMPopup';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (linePopup: T.LinePopup) => void;\n  popupOpen: boolean;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor || '…'} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport * as React from 'react';\nimport { BranchLike } from '../../../types/branch-like';\nimport './Line.css';\nimport LineCode from './LineCode';\nimport LineCoverage from './LineCoverage';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineDuplications from './LineDuplications';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\n\ninterface Props {\n  branchLike: BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  displaySCM?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  linePopup: T.LinePopup | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  onLinePopupToggle: (linePopup: T.LinePopup) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => React.ReactNode;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: T.LinearIssueLocation[];\n  selectedIssue: string | undefined;\n  verticalBuffer?: number;\n}\n\nconst LINE_HEIGHT = 18;\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const {\n      displayCoverage,\n      displaySCM = true,\n      duplications,\n      duplicationsCount,\n      issuePopup,\n      line\n    } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last === true\n    });\n\n    const bottomPadding = this.props.verticalBuffer\n      ? this.props.verticalBuffer * LINE_HEIGHT\n      : undefined;\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        {displaySCM && (\n          <LineSCM\n            line={line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('scm')}\n            previousLine={this.props.previousLine}\n          />\n        )}\n        {this.props.displayIssues && !this.props.displayAllIssues ? (\n          <LineIssuesIndicator\n            issues={this.props.issues}\n            line={line}\n            onClick={this.handleIssuesIndicatorClick}\n          />\n        ) : (\n          <td className=\"source-meta source-line-issues\" />\n        )}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayCoverage && <LineCoverage line={line} />}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n          displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          padding={bottomPadding}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./SourceViewerHeaderSlim.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./Line.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-viewer pre{height:18px;padding:0}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:\\\"\\\";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-meta[role=button]{cursor:pointer}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#777;text-align:right}.source-line-number:before{content:attr(data-line-number)}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-duplications-expanded .source-line-duplications,.source-line-duplications-extra{display:none}.source-duplications-expanded .source-line-duplications-extra{display:table-cell}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-scm-inner:before{content:attr(data-author)}.source-line-bar{width:5px;height:18px}.source-line-bar[role=button]{cursor:pointer}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getWrappedDisplayName<P>(\n  WrappedComponent: React.ComponentType<P>,\n  hocName: string\n) {\n  const wrappedDisplayName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  return `${hocName}(${wrappedDisplayName})`;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nexport enum ComponentQualifier {\n  Application = 'APP',\n  Directory = 'DIR',\n  Developper = 'DEV',\n  File = 'FIL',\n  Portfolio = 'VW',\n  Project = 'TRK',\n  SubPortfolio = 'SVW',\n  SubProject = 'BRC',\n  TestFile = 'UTS'\n}\n\nexport function isPortfolioLike(componentQualifier?: string | ComponentQualifier) {\n  return (\n    !!componentQualifier &&\n    [ComponentQualifier.Portfolio.toString(), ComponentQualifier.SubPortfolio.toString()].includes(\n      componentQualifier\n    )\n  );\n}\n\nexport enum Visibility {\n  Public = 'public',\n  Private = 'private'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../store/rootReducer';\nimport { getWrappedDisplayName } from './utils';\n\nexport function withCurrentUser<P>(\n  WrappedComponent: React.ComponentType<P & { currentUser: T.CurrentUser }>\n) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'withCurrentUser');\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  function mapStateToProps(state: Store) {\n    return { currentUser: getCurrentUser(state) };\n  }\n\n  return connect(mapStateToProps)(Wrapper);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SeverityIcon from 'sonar-ui-common/components/icons/SeverityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  severity: string;\n}\n\nexport default function SeverityHelper({ className, severity }: Props) {\n  if (!severity) {\n    return null;\n  }\n  return (\n    <span className={className}>\n      <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n      {translate('severity', severity)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface MultiSelectOptionProps {\n  active?: boolean;\n  custom?: boolean;\n  disabled?: boolean;\n  element: string;\n  onHover: (element: string) => void;\n  onSelectChange: (selected: boolean, element: string) => void;\n  renderLabel: (element: string) => React.ReactNode;\n  selected?: boolean;\n}\n\nexport default function MultiSelectOption(props: MultiSelectOptionProps) {\n  const { active, custom, disabled, element, selected } = props;\n  const onHover = () => props.onHover(element);\n  const className = classNames({ active, disabled });\n  const label = props.renderLabel(element);\n\n  return (\n    <li onFocus={onHover} onMouseOver={onHover}>\n      <Checkbox\n        checked={Boolean(selected)}\n        className={className}\n        disabled={disabled}\n        id={element}\n        onCheck={props.onSelectChange}>\n        {custom ? (\n          <span\n            aria-label={`${translate('create_new_element')}: ${label}`}\n            className=\"little-spacer-left\">\n            <span aria-hidden={true} className=\"little-spacer-right\">\n              +\n            </span>\n            {label}\n          </span>\n        ) : (\n          <span className=\"little-spacer-left\">{label}</span>\n        )}\n      </Checkbox>\n    </li>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport { difference } from 'lodash';\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelectOption from './MultiSelectOption';\n\ninterface Props {\n  allowNewElements?: boolean;\n  allowSelection?: boolean;\n  elements: string[];\n  filterSelected?: (query: string, selectedElements: string[]) => string[];\n  footerNode?: React.ReactNode;\n  listSize?: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  placeholder: string;\n  renderLabel?: (element: string) => React.ReactNode;\n  selectedElements: string[];\n  validateSearchInput?: (value: string) => string;\n}\n\ninterface State {\n  activeIdx: number;\n  loading: boolean;\n  query: string;\n  selectedElements: string[];\n  unselectedElements: string[];\n}\n\ninterface DefaultProps {\n  filterSelected: (query: string, selectedElements: string[]) => string[];\n  listSize: number;\n  renderLabel: (element: string) => React.ReactNode;\n  validateSearchInput: (value: string) => string;\n}\n\ntype PropsWithDefault = Props & DefaultProps;\n\nexport default class MultiSelect extends React.PureComponent<Props, State> {\n  container?: HTMLDivElement | null;\n  searchInput?: HTMLInputElement | null;\n  mounted = false;\n\n  static defaultProps: DefaultProps = {\n    filterSelected: (query: string, selectedElements: string[]) =>\n      selectedElements.filter(elem => elem.includes(query)),\n    listSize: 0,\n    renderLabel: (element: string) => element,\n    validateSearchInput: (value: string) => value\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      activeIdx: 0,\n      loading: true,\n      query: '',\n      selectedElements: [],\n      unselectedElements: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.onSearchQuery('');\n    this.updateSelectedElements(this.props as PropsWithDefault);\n    this.updateUnselectedElements(this.props as PropsWithDefault);\n    if (this.container) {\n      this.container.addEventListener('keydown', this.handleKeyboard, true);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: PropsWithDefault) {\n    if (\n      this.props.elements !== nextProps.elements ||\n      this.props.selectedElements !== nextProps.selectedElements\n    ) {\n      this.updateSelectedElements(nextProps);\n      this.updateUnselectedElements(nextProps);\n\n      const totalElements = this.getAllElements(nextProps, this.state).length;\n      if (this.state.activeIdx >= totalElements) {\n        this.setState({ activeIdx: totalElements - 1 });\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.searchInput) {\n      this.searchInput.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.container) {\n      this.container.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  handleSelectChange = (selected: boolean, item: string) => {\n    if (selected) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  handleSearchChange = (value: string) => {\n    this.onSearchQuery((this.props as PropsWithDefault).validateSearchInput(value));\n  };\n\n  handleElementHover = (element: string) => {\n    this.setState((prevState, props) => {\n      return { activeIdx: this.getAllElements(props, prevState).indexOf(element) };\n    });\n  };\n\n  handleKeyboard = (evt: KeyboardEvent) => {\n    switch (evt.keyCode) {\n      case 40: // down\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectNextElement);\n        break;\n      case 38: // up\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.setState(this.selectPreviousElement);\n        break;\n      case 37: // left\n      case 39: // right\n        evt.stopPropagation();\n        break;\n      case 13: // enter\n        if (this.state.activeIdx >= 0) {\n          this.toggleSelect(this.getAllElements(this.props, this.state)[this.state.activeIdx]);\n        }\n        break;\n    }\n  };\n\n  onSearchQuery = (query: string) => {\n    this.setState({ activeIdx: 0, loading: true, query });\n    this.props.onSearch(query).then(this.stopLoading, this.stopLoading);\n  };\n\n  onSelectItem = (item: string) => {\n    if (this.isNewElement(item, this.props)) {\n      this.onSearchQuery('');\n    }\n    this.props.onSelect(item);\n  };\n\n  onUnselectItem = (item: string) => this.props.onUnselect(item);\n\n  isNewElement = (elem: string, { selectedElements, elements }: Props) =>\n    elem.length > 0 && selectedElements.indexOf(elem) === -1 && elements.indexOf(elem) === -1;\n\n  updateSelectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (state.query) {\n        return {\n          selectedElements: props.filterSelected(state.query, props.selectedElements)\n        };\n      } else {\n        return { selectedElements: [...props.selectedElements] };\n      }\n    });\n  };\n\n  updateUnselectedElements = (props: PropsWithDefault) => {\n    this.setState((state: State) => {\n      if (props.listSize === 0) {\n        return { unselectedElements: difference(props.elements, props.selectedElements) };\n      } else if (props.listSize < state.selectedElements.length) {\n        return { unselectedElements: [] };\n      } else {\n        return {\n          unselectedElements: difference(props.elements, props.selectedElements).slice(\n            0,\n            props.listSize - state.selectedElements.length\n          )\n        };\n      }\n    });\n  };\n\n  getAllElements = (props: Props, state: State) => {\n    if (this.isNewElement(state.query, props)) {\n      return [...state.selectedElements, ...state.unselectedElements, state.query];\n    } else {\n      return [...state.selectedElements, ...state.unselectedElements];\n    }\n  };\n\n  setElementActive = (idx: number) => this.setState({ activeIdx: idx });\n\n  selectNextElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx < 0 || activeIdx >= allElements.length - 1) {\n      return { activeIdx: 0 };\n    } else {\n      return { activeIdx: activeIdx + 1 };\n    }\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const { activeIdx } = state;\n    const allElements = this.getAllElements(props, state);\n    if (activeIdx <= 0) {\n      const lastIdx = allElements.length - 1;\n      return { activeIdx: lastIdx };\n    } else {\n      return { activeIdx: activeIdx - 1 };\n    }\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  toggleSelect = (item: string) => {\n    if (this.props.selectedElements.indexOf(item) === -1) {\n      this.onSelectItem(item);\n    } else {\n      this.onUnselectItem(item);\n    }\n  };\n\n  render() {\n    const { allowSelection = true, allowNewElements = true, footerNode = '' } = this.props;\n    const { renderLabel } = this.props as PropsWithDefault;\n    const { query, activeIdx, selectedElements, unselectedElements } = this.state;\n    const activeElement = this.getAllElements(this.props, this.state)[activeIdx];\n    const showNewElement = allowNewElements && this.isNewElement(query, this.props);\n    const infiniteList = this.props.listSize === 0;\n    const listClasses = classNames('menu', {\n      'menu-vertically-limited': infiniteList,\n      'spacer-top': infiniteList,\n      'with-top-separator': infiniteList,\n      'with-bottom-separator': Boolean(footerNode)\n    });\n\n    return (\n      <div className=\"multi-select\" ref={div => (this.container = div)}>\n        <div className=\"menu-search\">\n          <SearchBox\n            autoFocus={true}\n            className=\"little-spacer-top\"\n            loading={this.state.loading}\n            onChange={this.handleSearchChange}\n            placeholder={this.props.placeholder}\n            value={query}\n          />\n        </div>\n        <ul className={listClasses}>\n          {selectedElements.length > 0 &&\n            selectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n                selected={true}\n              />\n            ))}\n          {unselectedElements.length > 0 &&\n            unselectedElements.map(element => (\n              <MultiSelectOption\n                active={activeElement === element}\n                disabled={!allowSelection}\n                element={element}\n                key={element}\n                onHover={this.handleElementHover}\n                onSelectChange={this.handleSelectChange}\n                renderLabel={renderLabel}\n              />\n            ))}\n          {showNewElement && (\n            <MultiSelectOption\n              active={activeElement === query}\n              custom={true}\n              element={query}\n              key={query}\n              onHover={this.handleElementHover}\n              onSelectChange={this.handleSelectChange}\n              renderLabel={renderLabel}\n            />\n          )}\n          {!showNewElement && selectedElements.length < 1 && unselectedElements.length < 1 && (\n            <li className=\"spacer-left\">{translateWithParameters('no_results_for_x', query)}</li>\n          )}\n        </ul>\n        {footerNode}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getMarkdownHelpUrl } from '../../helpers/urls';\n\ninterface Props {\n  className?: string;\n}\n\nexport default class MarkdownTips extends React.PureComponent<Props> {\n  handleClick(evt: React.SyntheticEvent<HTMLAnchorElement>) {\n    evt.preventDefault();\n    window.open(getMarkdownHelpUrl(), 'Markdown', 'height=300,width=600,scrollbars=1,resizable=1');\n  }\n\n  render() {\n    return (\n      <div className={classNames('markdown-tips', this.props.className)}>\n        <a className=\"little-spacer-right\" href=\"#\" onClick={this.handleClick}>\n          {translate('markdown.helplink')}\n        </a>\n        {':'}\n        <span className=\"spacer-left\">*{translate('bold')}*</span>\n        <span className=\"spacer-left\">\n          ``\n          {translate('code')}\n          ``\n        </span>\n        <span className=\"spacer-left\">* {translate('bulleted_point')}</span>\n      </div>\n    );\n  }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport MultiSelect from '../common/MultiSelect';\nimport './TagsList.css';\n\ninterface Props {\n  listSize: number;\n  onSearch: (query: string) => Promise<void>;\n  onSelect: (item: string) => void;\n  onUnselect: (item: string) => void;\n  selectedTags: string[];\n  tags: string[];\n}\n\nexport default function TagsSelector(props: Props) {\n  return (\n    <MultiSelect\n      elements={props.tags}\n      listSize={props.listSize}\n      onSearch={props.onSearch}\n      onSelect={props.onSelect}\n      onUnselect={props.onUnselect}\n      placeholder={translate('search.search_for_tags')}\n      selectedElements={props.selectedTags}\n      validateSearchInput={validateTag}\n    />\n  );\n}\n\nexport function validateTag(value: string) {\n  // Allow only a-z, 0-9, '+', '-', '#', '.'\n  return value.toLowerCase().replace(/[^-a-z0-9+#.]/gi, '');\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteButton from 'sonar-ui-common/components/controls/FavoriteButton';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n  handleFavorite?: (component: string, isFavorite: boolean) => void;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class Favorite extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      favorite: props.favorite\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.favorite !== this.props.favorite) {\n      this.setState({ favorite: this.props.favorite });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite;\n    const apiMethod = newFavorite ? addFavorite : removeFavorite;\n\n    return apiMethod(this.props.component).then(() => {\n      if (this.mounted) {\n        this.setState({ favorite: newFavorite }, () => {\n          if (this.props.handleFavorite) {\n            this.props.handleFavorite(this.props.component, newFavorite);\n          }\n        });\n      }\n    });\n  };\n\n  render() {\n    const { className, qualifier } = this.props;\n    const { favorite } = this.state;\n\n    return (\n      <FavoriteButton\n        className={className}\n        favorite={favorite}\n        qualifier={qualifier}\n        toggleFavorite={this.toggleFavorite}\n      />\n    );\n  }\n}\n/*  */\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from 'sonar-ui-common/components/icons/StatusIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getStandards(): Promise<T.Standards> {\n  return import('./standards.json').then(x => x.default);\n}\n\nexport function renderCWECategory(standards: T.Standards, category: string): string {\n  const record = standards.cwe[category];\n  if (!record) {\n    return `CWE-${category}`;\n  } else if (category === 'unknown') {\n    return record.title;\n  } else {\n    return `CWE-${category} - ${record.title}`;\n  }\n}\n\nexport function renderOwaspTop10Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.owaspTop10[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'OWASP', withPrefix);\n  } else {\n    return addPrefix(`${category.toUpperCase()} - ${record.title}`, 'OWASP', withPrefix);\n  }\n}\n\nexport function renderSansTop25Category(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sansTop25[category];\n  return addPrefix(record ? record.title : category, 'SANS', withPrefix);\n}\n\nexport function renderSonarSourceSecurityCategory(\n  standards: T.Standards,\n  category: string,\n  withPrefix = false\n): string {\n  const record = standards.sonarsourceSecurity[category];\n  if (!record) {\n    return addPrefix(category.toUpperCase(), 'SONAR', withPrefix);\n  } else if (category === 'others') {\n    return record.title;\n  } else {\n    return addPrefix(record.title, 'SONAR', withPrefix);\n  }\n}\n\nfunction addPrefix(title: string, prefix: string, withPrefix: boolean) {\n  return withPrefix ? `${prefix} ${title}` : title;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport enum RiskExposure {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH'\n}\n\nexport enum HotspotStatus {\n  TO_REVIEW = 'TO_REVIEW',\n  REVIEWED = 'REVIEWED'\n}\n\nexport enum HotspotResolution {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE'\n}\n\nexport enum HotspotStatusFilter {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport enum HotspotStatusOption {\n  FIXED = 'FIXED',\n  SAFE = 'SAFE',\n  TO_REVIEW = 'TO_REVIEW'\n}\n\nexport interface HotspotFilters {\n  assignedToMe: boolean;\n  sinceLeakPeriod: boolean;\n  status: HotspotStatusFilter;\n}\n\nexport interface RawHotspot {\n  assignee?: string;\n  author?: string;\n  component: string;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: string;\n  resolution?: HotspotResolution;\n  rule: string;\n  securityCategory: string;\n  status: HotspotStatus;\n  subProject?: string;\n  updateDate: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface Hotspot {\n  assignee?: string;\n  assigneeUser?: T.UserBase;\n  author: string;\n  authorUser: T.UserBase;\n  canChangeStatus: boolean;\n  changelog: T.IssueChangelog[];\n  comment: HotspotComment[];\n  component: T.Component;\n  creationDate: string;\n  key: string;\n  line?: number;\n  message: string;\n  project: T.Component;\n  resolution?: HotspotResolution;\n  rule: HotspotRule;\n  status: HotspotStatus;\n  textRange: T.TextRange;\n  updateDate: string;\n  users: T.UserBase[];\n}\n\nexport interface HotspotUpdateFields {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n}\n\nexport interface HotspotUpdate extends HotspotUpdateFields {\n  key: string;\n}\n\nexport interface HotspotRule {\n  fixRecommendations?: string;\n  key: string;\n  name: string;\n  riskDescription?: string;\n  securityCategory: string;\n  vulnerabilityDescription?: string;\n  vulnerabilityProbability: RiskExposure;\n}\n\nexport interface HotspotComment {\n  key: string;\n  htmlText: string;\n  markdown: string;\n  updatable: boolean;\n  createdAt: string;\n  login: string;\n  user: T.UserBase;\n}\n\nexport interface ReviewHistoryElement {\n  type: ReviewHistoryType;\n  date: string;\n  user: Pick<T.UserBase, 'active' | 'avatar' | 'name'>;\n  diffs?: T.IssueChangelogDiff[];\n  html?: string;\n  key?: string;\n  updatable?: boolean;\n  markdown?: string;\n}\n\nexport enum ReviewHistoryType {\n  Creation,\n  Diff,\n  Comment\n}\n\nexport interface HotspotSearchResponse {\n  components?: { key: string; qualifier: string; name: string }[];\n  hotspots: RawHotspot[];\n  paging: T.Paging;\n}\n\nexport interface HotspotSetStatusRequest {\n  status: HotspotStatus;\n  resolution?: HotspotResolution;\n  comment?: string;\n}\n\nexport interface HotspotAssignRequest {\n  assignee: string;\n  comment?: string;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function issuesByComponentAndLine(\n  issues: T.Issue[] = []\n): { [component: string]: { [line: number]: T.Issue[] } } {\n  return issues.reduce((mapping: { [component: string]: { [line: number]: T.Issue[] } }, issue) => {\n    mapping[issue.component] = mapping[issue.component] || {};\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    mapping[issue.component][line] = mapping[issue.component][line] || [];\n    mapping[issue.component][line].push(issue);\n    return mapping;\n  }, {});\n}\n\nexport function locationsByLine(issues: Pick<T.Issue, 'textRange'>[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n"],"sourceRoot":""}