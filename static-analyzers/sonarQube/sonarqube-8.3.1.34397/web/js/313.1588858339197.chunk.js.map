{"version":3,"sources":["webpack:///./src/main/js/components/common/EmptySearch.css?d1ee","webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/charts/ColorBoxLegend.css?a720","webpack:///./src/main/js/components/charts/ColorRatingsLegend.tsx","webpack:///./src/main/js/components/charts/ColorBoxLegend.css","webpack:///./src/main/js/components/common/EmptySearch.tsx","webpack:///./src/main/js/components/common/EmptySearch.css","webpack:///./src/main/js/apps/projects/styles.css?6cb4","webpack:///./src/main/js/apps/projects/styles.css","webpack:///./src/main/js/apps/projects/visualizations/SimpleBubbleChart.tsx","webpack:///./src/main/js/apps/projects/visualizations/Coverage.tsx","webpack:///./src/main/js/apps/projects/visualizations/Duplications.tsx","webpack:///./src/main/js/apps/projects/visualizations/Maintainability.tsx","webpack:///./src/main/js/apps/projects/visualizations/Reliability.tsx","webpack:///./src/main/js/apps/projects/visualizations/Risk.tsx","webpack:///./src/main/js/apps/projects/visualizations/Security.tsx","webpack:///./src/main/js/apps/projects/visualizations/Visualizations.tsx","webpack:///./src/main/js/apps/projects/filters/SearchFilterContainer.tsx","webpack:///./src/main/js/apps/projects/components/PerspectiveSelectOption.tsx","webpack:///./src/main/js/apps/projects/components/PerspectiveSelect.tsx","webpack:///./src/main/js/apps/projects/components/ProjectsSortingSelectOption.tsx","webpack:///./src/main/js/apps/projects/components/ProjectsSortingSelect.tsx","webpack:///./src/main/js/apps/projects/components/PageHeader.tsx","webpack:///./src/main/js/apps/projects/filters/Filter.tsx","webpack:///./src/main/js/apps/projects/filters/FilterHeader.tsx","webpack:///./src/main/js/apps/projects/filters/CoverageFilter.tsx","webpack:///./src/main/js/apps/projects/filters/DuplicationsFilter.tsx","webpack:///./src/main/js/apps/projects/filters/SearchableFilterFooter.tsx","webpack:///./src/main/js/apps/projects/filters/SearchableFilterOption.tsx","webpack:///./src/main/js/apps/projects/filters/LanguagesFilter.tsx","webpack:///./src/main/js/apps/projects/filters/LanguagesFilterContainer.tsx","webpack:///./src/main/js/apps/projects/filters/IssuesFilter.tsx","webpack:///./src/main/js/apps/projects/filters/MaintainabilityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewCoverageFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewDuplicationsFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewLinesFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewMaintainabilityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewReliabilityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/NewSecurityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/QualifierFilter.tsx","webpack:///./src/main/js/apps/projects/filters/QualityGateFilter.tsx","webpack:///./src/main/js/apps/projects/filters/ReliabilityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/SecurityFilter.tsx","webpack:///./src/main/js/apps/projects/filters/SecurityReviewFilter.tsx","webpack:///./src/main/js/apps/projects/filters/SizeFilter.tsx","webpack:///./src/main/js/apps/projects/filters/TagsFilter.tsx","webpack:///./src/main/js/apps/projects/components/ClearAll.tsx","webpack:///./src/main/js/apps/projects/components/FavoriteFilter.tsx","webpack:///./src/main/js/apps/projects/components/FavoriteFilterContainer.tsx","webpack:///./src/main/js/apps/projects/components/PageSidebar.tsx","webpack:///./src/main/js/apps/projects/components/EmptyFavoriteSearch.tsx","webpack:///./src/main/js/apps/projects/components/EmptyInstance.tsx","webpack:///./src/main/js/apps/projects/components/NoFavoriteProjects.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardRatingMeasure.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardLeakMeasures.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardOrganizationContainer.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardOrganization.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardLanguagesContainer.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardLanguages.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardOverallMeasures.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCardQualityGate.tsx","webpack:///./src/main/js/apps/projects/components/ProjectCard.tsx","webpack:///./src/main/js/apps/projects/components/ProjectsList.tsx","webpack:///./src/main/js/apps/projects/components/AllProjects.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/types/component.ts","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/helpers/markdown.js","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/tags/TagsList.css?d861","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/common/ScreenPositionHelper.tsx","webpack:///./src/main/js/components/tags/TagsList.tsx","webpack:///./src/main/js/components/tags/TagsList.css","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/api/favorites.ts","webpack:///./src/main/js/components/controls/HomePageSelect.tsx","webpack:///./src/main/js/components/search-navigator.css?9a2e","webpack:///./src/main/js/components/search-navigator.css"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","getDoc","visibility","icon","organization","actions","admin","state","currentUser","userOrganizations","className","qualifier","tooltipProps","onSonarCloud","fill","blue","badge","Boolean","doc","overlayProps","key","overlay","ColorRatingsLegend","map","rating","style","borderColor","backgroundColor","___CSS_LOADER_API_IMPORT___","push","EmptySearch","getMetricTooltip","metric","value","name","formattedValue","type","getTooltip","project","x","y","size","color","fullProjectName","this","props","displayOrganizations","Application","xMetric","yMetric","sizeMetric","colorMetric","render","items","projects","filter","measures","Number","undefined","tooltip","link","formatXTick","tick","formatYTick","height","padding","yDomain","title","helpText","Coverage","Duplications","Maintainability","Reliability","color1","color2","Math","max","Security","renderVisualization","Component","risk","reliability","security","maintainability","coverage","duplications","visualization","renderFooter","total","sort","length","handleSearch","search","onQueryChange","minLength","onChange","placeholder","query","handleMouseDown","event","preventDefault","stopPropagation","onSelect","option","handleMouseEnter","onFocus","handleMouseMove","isFocused","onMouseDown","onMouseEnter","onMouseMove","label","children","handleChange","view","perspective","opt","clearable","optionComponent","searchable","class","short","getSorting","getOptions","sortMetrics","defaultOption","handleDescToggle","sorting","sortValue","sortDesc","handleSortChange","gray60","onClick","PageHeader","loading","limitReached","showHomePageSelect","isFavorite","onPerspectiveChange","onSortChange","selectedSort","id","HomePageSelect","currentPage","defaultGetFacetValueForOption","facet","handleClick","currentTarget","blur","urlOption","property","Array","isArray","ctrlKey","metaKey","isSelected","val","join","concat","renderOptions","highlightUnder","highlightUnderMax","beforeHighlight","slice","insideHighlight","afterHighlight","renderOption","includes","String","renderOptionBar","facetValue","maxFacetValue","width","getFacetValueForOption","active","halfWidth","optionClassName","isUnderSelectedOption","href","header","footer","FilterHeader","CoverageFilter","selected","CoverageRating","muted","DuplicationsFilter","handleOptionChange","urlOptions","isLoading","onInputChange","onOpen","SearchableFilterOption","optionName","optionKey","getSearchOptions","languages","languageKeys","Object","keys","getSortedOptions","IssuesFilter","headerDetail","small","MaintainabilityFilter","NewCoverageFilter","NewDuplicationsFilter","NewLinesFilter","NewMaintainabilityFilter","NewReliabilityFilter","NewSecurityFilter","Project","QualifierFilter","QualityGateFilter","level","ReliabilityFilter","SecurityFilter","labels","1","2","3","4","5","SecurityReviewFilter","SizeFilter","mounted","tagsCopy","tags","tag","setState","q","ps","then","result","componentDidMount","componentWillUnmount","ClearAll","onClearAll","handleSaveFavorite","handleSaveAll","pathnameForFavorite","pathnameForAll","activeClassName","to","pathname","PageSidebar","applicationsEnabled","facets","isFiltered","isLeakView","facetProps","values","getMaxFacetValue","linkQuery","FavoriteFilterContainer","getFacet","gate","security_review_rating","new_reliability","new_security","new_security_review_rating","new_maintainability","new_coverage","new_duplications","new_lines","LanguagesFilterContainer","EmptyFavoriteSearch","defaultMessage","url","analyzeNewProject","openProjectOnboarding","showNewProjectButton","provision","organizations","org","OrganizationListItem","ProjectCardRatingMeasure","iconKey","iconLabel","metricKey","metricRatingKey","metricType","Measure","ProjectCardLeakMeasures","organizationsEnabled","OrganizationLink","distribution","parsedLanguages","split","item","finalLanguages","l","language","getLanguageName","languagesText","ProjectCardOverallMeasures","componentQualifier","ncloc","ProjectCardLanguagesContainer","ProjectCardQualityGate","status","renderDateRow","dates","analysisDate","leakPeriodDate","periodMs","Date","now","date","formattedDate","renderDates","ProjectCard","getDates","hasTags","Favorite","component","favorite","handleFavorite","ProjectCardOrganizationContainer","PrivacyBadgeContainer","projectKey","TagsList","renderHeader","renderMeasures","getCardHeight","cardType","renderRow","index","role","renderNoProjects","OnboardingContext","Consumer","renderList","cardHeight","WindowScroller","isScrolling","onChildScroll","scrollTop","AutoSizer","disableHeight","List","autoHeight","onScroll","overscanRowCount","rowCount","rowHeight","rowRenderer","outline","PROJECTS_SORT","fetchProjects","response","pageIndex","stopLoading","fetchMoreProjects","getSort","getStorageOptions","storageOptionsSuffix","getView","getVisualization","handleClearAll","router","location","p","handlePerspectiveChange","updateLocationQuery","desc","asString","newQuery","renderSide","ScreenPositionHelper","top","A11ySkipTarget","anchor","weight","qualifiers","renderMain","count","loadMore","ready","handleQueryChange","componentDidUpdate","prevProps","initialMount","savedOptions","savedOptionsSet","replace","Suggestions","suggestions","defer","withRouter","addSuggestions","removeSuggestions","SuggestionsInner","DocMarkdownBlock","childProps","isTooltip","ComponentQualifier","Visibility","isPortfolioLike","Portfolio","toString","SubPortfolio","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","getFrontMatterPosition","lines","firstLine","lastLine","trim","parseFrontMatter","data","tokens","cutConditionalContent","beginning","ending","newContent","start","indexOf","end","substring","console","error","Error","getFrontMatter","position","separateFrontMatter","frontmatter","filterContent","regexBase","isSonarCloud","getInstance","contentWithoutStatic","RegExp","KNOWN_RATINGS","enhanceMeasure","measure","metrics","leak","getLeakValue","periods","period","getRatingTooltip","finalMetricKey","substr","decimals","omitExtraDecimalZeros","getLeakPeriod","find","getPeriod","getPeriodLabel","dateFormatter","parameter","modeParam","mode","toLowerCase","getPeriodDate","isApplicationPeriod","getPosition","containerPos","container","getBoundingClientRect","window","pageYOffset","left","pageXOffset","debouncedOnResize","forceUpdate","addEventListener","removeEventListener","ref","allowUpdate","isPaidOrganization","subscription","hasPrivateAccess","isCurrentUserMemberOf","some","DonutChart","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","padAngle","numberValue","gray71","green","barBackgroundColor","lineCoverageRed","thickness","toggleFavorite","newFavorite","_prevProps","prevState","addFavorite","removeFavorite","setHomePage","a","b","homepage","checked","branch","filled","mapDispatchToProps"],"mappings":"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","file":"js/313.1588858339197.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./EmptySearch.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport VisibleIcon from 'sonar-ui-common/components/icons/VisibleIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { colors } from '../../app/theme';\nimport { isCurrentUserMemberOf, isPaidOrganization } from '../../helpers/organizations';\nimport { isSonarCloud } from '../../helpers/system';\nimport {\n  getCurrentUser,\n  getMyOrganizations,\n  getOrganizationByKey,\n  Store\n} from '../../store/rootReducer';\nimport DocTooltip from '../docs/DocTooltip';\n\ninterface StateToProps {\n  currentUser: T.CurrentUser;\n  organization?: T.Organization;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps {\n  className?: string;\n  organization: T.Organization | string | undefined;\n  qualifier: string;\n  tooltipProps?: { projectKey: string };\n  visibility: T.Visibility;\n}\n\ninterface Props extends OwnProps, StateToProps {\n  organization: T.Organization | undefined;\n}\n\nexport function PrivacyBadge({\n  className,\n  currentUser,\n  organization,\n  qualifier,\n  userOrganizations,\n  tooltipProps,\n  visibility\n}: Props) {\n  const onSonarCloud = isSonarCloud();\n  if (\n    visibility !== 'private' &&\n    (!onSonarCloud || !isCurrentUserMemberOf(currentUser, organization, userOrganizations))\n  ) {\n    return null;\n  }\n\n  let icon = null;\n  if (isPaidOrganization(organization) && visibility === 'public') {\n    icon = <VisibleIcon className=\"little-spacer-right\" fill={colors.blue} />;\n  }\n\n  const badge = (\n    <div\n      className={classNames('badge', className, {\n        'badge-info': Boolean(icon)\n      })}>\n      {icon}\n      {translate('visibility', visibility)}\n    </div>\n  );\n\n  if (onSonarCloud && organization) {\n    return (\n      <DocTooltip\n        className={className}\n        doc={getDoc(visibility, icon, organization)}\n        overlayProps={{ ...tooltipProps, organization: organization.key }}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      {badge}\n    </Tooltip>\n  );\n}\n\nconst mapStateToProps = (state: Store, { organization }: OwnProps) => {\n  if (typeof organization === 'string') {\n    organization = getOrganizationByKey(state, organization);\n  }\n  return {\n    currentUser: getCurrentUser(state),\n    organization,\n    userOrganizations: getMyOrganizations(state)\n  };\n};\n\nexport default connect(mapStateToProps)(PrivacyBadge);\n\nfunction getDoc(visibility: T.Visibility, icon: JSX.Element | null, organization: T.Organization) {\n  let doc;\n  const { actions = {} } = organization;\n  if (visibility === 'private') {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-private.md');\n  } else if (icon) {\n    if (actions.admin) {\n      doc = import(\n        /* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org-admin.md'\n      );\n    } else {\n      doc = import(\n        /* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org.md'\n      );\n    }\n  } else if (actions.admin) {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-admin.md');\n  } else {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public.md');\n  }\n  return doc;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ColorBoxLegend.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { RATING_COLORS } from '../../helpers/constants';\nimport './ColorBoxLegend.css';\n\ninterface Props {\n  className?: string;\n}\n\nexport default function ColorRatingsLegend({ className }: Props) {\n  return (\n    <div className={classNames('color-box-legend', className)}>\n      {[1, 2, 3, 4, 5].map(rating => (\n        <div key={rating}>\n          <span\n            className=\"color-box-legend-rect\"\n            style={{ borderColor: RATING_COLORS[rating - 1] }}>\n            <span\n              className=\"color-box-legend-rect-inner\"\n              style={{ backgroundColor: RATING_COLORS[rating - 1] }}\n            />\n          </span>\n          {formatMeasure(rating, 'RATING')}\n        </div>\n      ))}\n    </div>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".color-box-legend{display:flex;justify-content:center}.color-box-legend>:not(:first-child){margin-left:24px}.color-box-legend .color-box-legend-rect{display:inline-block;margin-top:1px;margin-right:4px;border:1px solid}.color-box-legend .color-box-legend-rect-inner{display:block;width:8px;height:8px;opacity:.2}.color-box-legend.color-box-full .color-box-legend-rect-inner{opacity:1}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport './EmptySearch.css';\n\nexport default function EmptySearch() {\n  return (\n    <div className=\"empty-search\">\n      <h3>{translate('no_results_search')}</h3>\n      <p className=\"big-spacer-top\">{translate('no_results_search.2')}</p>\n    </div>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".empty-search{padding:60px 0;border:1px solid #e6e6e6;border-radius:2px;color:#777;text-align:center}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".projects-topbar-items{display:flex;align-items:center;flex-grow:1}.projects-topbar-item+.projects-topbar-item{padding-left:24px}.projects-topbar-item .spinner{top:-1px}.projects-topbar-item.is-last{margin-left:auto;padding-left:32px}.projects-topbar-item.disabled{cursor:not-allowed;opacity:.4}.projects-topbar-item.disabled *{pointer-events:none!important}.projects-topbar-item-search{position:relative;flex:1;height:24px}.projects-list .page-actions{margin-bottom:0}.project-card{position:relative;min-height:114px;box-sizing:border-box}.project-card-header{display:flex;align-items:center}.project-card-header-right{margin-left:auto}.project-card-name{font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-card-leak-date{padding:4px 8px;margin:-5px -4px -5px 24px;background-color:#fbf3d5;border:1px solid #f1e8cb}.project-card-measures{display:flex;padding-top:8px;margin:0 -15px 0 -30px}.project-card-leak-measures{display:flex;padding:8px 0;margin:4px -4px;background-color:#fbf3d5;border:1px solid #f1e8cb}.projects-leak-sorting-option{background-color:#fbf3d5;margin-bottom:2px}.projects-leak-sorting-option.is-focused{background-color:#f1e8cb}.project-card-measure{flex:0 1 15%;position:relative;display:inline-block;vertical-align:top;text-align:center;box-sizing:border-box;padding:0 8px}.project-card-measure+.project-card-measure:before{position:absolute;top:50%;left:0;width:0;height:24px;margin-top:-12px;border-left:1px solid #e6e6e6;content:\\\"\\\"}.project-card-measure .level{margin-top:0;margin-bottom:0}.project-card-measure-inner{display:inline-block;vertical-align:top;text-align:center}.project-card-measure-number{line-height:25px;font-size:18px;white-space:nowrap}.project-card-measure-label{margin-top:4px;font-size:12px}.project-card-measure-label-with-icon{margin-top:2px;font-size:12px;white-space:nowrap}.project-card-ncloc{margin-left:auto;text-align:right}.project-card-ncloc:before{display:none}.project-card-ncloc .project-card-measure-inner{text-align:right}.project-card-languages{display:inline-block;max-width:120px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-card-quality-gate{line-height:24px}.project-card-not-analyzed{padding:14px 0}.projects-facet-header{padding:10px;transition:none}.projects-facet-list{padding-left:10px;padding-right:10px}.projects-facets-header{margin-bottom:10px;padding:10px 0;border-bottom:1px solid #e6e6e6}.projects-facets-reset{float:right}.projects-facet-bar{display:inline-block;width:60px;margin-left:8px}.projects-facet-bar-inner{min-width:1px;height:10px;background-color:#b4b4b4;transition:width .3s ease}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .projects-facet-bar-inner,.search-navigator-facet.active .projects-facet-bar-inner{background-color:#4b9fd5}.projects-visualization{position:relative;height:600px}.projects-visualization .measure-details-bubble-chart-axis.y{width:300px;left:15px;margin-top:150px;transform-origin:0 0;text-align:center}.projects-visualizations-footer{margin-top:8px;padding:15px 60px;border-top:1px solid #e6e6e6;font-size:12px;line-height:1.4;text-align:center}.projects-visualizations-footer .note{font-style:italic}.measure-details-bubble-chart-title{position:absolute;left:20px}.measure-details-bubble-chart-axis{position:absolute;color:#777;font-size:12px}.measure-details-bubble-chart-axis.x{left:50%;bottom:16px;width:500px;margin-left:-250px;text-align:center}.measure-details-bubble-chart-axis.y{top:50%;left:-20px;transform:rotate(-90deg)}.measure-details-bubble-chart-axis.size{display:flex;align-items:center;justify-content:space-around;top:16px;width:100%}.projects-empty-list{padding:32px 0;text-align:center}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BubbleChart from 'sonar-ui-common/components/charts/BubbleChart';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport ColorRatingsLegend from '../../../components/charts/ColorRatingsLegend';\nimport { RATING_COLORS } from '../../../helpers/constants';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Project } from '../types';\n\ninterface Metric {\n  key: string;\n  type: string;\n}\n\ninterface Props {\n  colorMetric?: string;\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n  sizeMetric: Metric;\n  title?: string;\n  xMetric: Metric;\n  yDomain?: [number, number];\n  yMetric: Metric;\n}\n\nexport default class SimpleBubbleChart extends React.PureComponent<Props> {\n  getMetricTooltip(metric: Metric, value?: number) {\n    const name = translate('metric', metric.key, 'name');\n    const formattedValue = value != null ? formatMeasure(value, metric.type) : '–';\n    return (\n      <div>\n        {name}\n        {': '}\n        {formattedValue}\n      </div>\n    );\n  }\n\n  getTooltip(project: Project, x?: number, y?: number, size?: number, color?: number) {\n    const fullProjectName =\n      this.props.displayOrganizations && project.organization ? (\n        <>\n          {project.organization.name}\n          {' / '}\n          <strong>{project.name}</strong>\n        </>\n      ) : (\n        <strong>{project.name}</strong>\n      );\n\n    return (\n      <div className=\"text-left\">\n        <div className=\"little-spacer-bottom display-flex-center display-flex-space-between\">\n          {fullProjectName}\n\n          {project.qualifier === ComponentQualifier.Application && (\n            <div className=\"big-spacer-left nowrap\">\n              <QualifierIcon\n                className=\"little-spacer-right\"\n                fill=\"currentColor\"\n                qualifier={ComponentQualifier.Application}\n              />\n              {translate('qualifier.APP')}\n            </div>\n          )}\n        </div>\n        {this.getMetricTooltip(this.props.xMetric, x)}\n        {this.getMetricTooltip(this.props.yMetric, y)}\n        {this.getMetricTooltip(this.props.sizeMetric, size)}\n        {/* if `color` is defined then `this.props.colorMetric` is defined too */}\n        {color && this.getMetricTooltip({ key: this.props.colorMetric!, type: 'RATING' }, color)}\n      </div>\n    );\n  }\n\n  render() {\n    const { xMetric, yMetric, sizeMetric, colorMetric } = this.props;\n\n    const items = this.props.projects\n      .filter(project => colorMetric == null || project.measures[colorMetric] !== null)\n      .map(project => {\n        const x =\n          project.measures[xMetric.key] != null ? Number(project.measures[xMetric.key]) : undefined;\n        const y =\n          project.measures[yMetric.key] != null ? Number(project.measures[yMetric.key]) : undefined;\n        const size =\n          project.measures[sizeMetric.key] != null\n            ? Number(project.measures[sizeMetric.key])\n            : undefined;\n        const color = colorMetric ? Number(project.measures[colorMetric]) : undefined;\n        return {\n          x: x || 0,\n          y: y || 0,\n          size: size || 0,\n          color: color ? RATING_COLORS[color - 1] : undefined,\n          key: project.key,\n          tooltip: this.getTooltip(project, x, y, size, color),\n          link: getProjectUrl(project.key)\n        };\n      });\n\n    const formatXTick = (tick: number) => formatMeasure(tick, xMetric.type);\n    const formatYTick = (tick: number) => formatMeasure(tick, yMetric.type);\n\n    return (\n      <div>\n        <BubbleChart\n          formatXTick={formatXTick}\n          formatYTick={formatYTick}\n          height={600}\n          items={items}\n          padding={[colorMetric ? 80 : 40, 20, 60, 100]}\n          yDomain={this.props.yDomain}\n        />\n        <div className=\"measure-details-bubble-chart-axis x\">\n          {translate('metric', xMetric.key, 'name')}\n        </div>\n        <div className=\"measure-details-bubble-chart-axis y\">\n          {translate('metric', yMetric.key, 'name')}\n        </div>\n        <div className=\"measure-details-bubble-chart-axis size\">\n          <span className=\"measure-details-bubble-chart-title\">\n            <span className=\"text-middle\">{this.props.title}</span>\n            <HelpTooltip className=\"spacer-left\" overlay={this.props.helpText} />\n          </span>\n          <div>\n            {colorMetric != null && (\n              <span className=\"spacer-right\">\n                {translateWithParameters(\n                  'component_measures.legend.color_x',\n                  translate('metric', colorMetric, 'name')\n                )}\n              </span>\n            )}\n            {translateWithParameters(\n              'component_measures.legend.size_x',\n              translate('metric', sizeMetric.key, 'name')\n            )}\n            {colorMetric != null && <ColorRatingsLegend className=\"big-spacer-top\" />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport SimpleBubbleChart from './SimpleBubbleChart';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default function Coverage(props: Props) {\n  return (\n    <SimpleBubbleChart\n      {...props}\n      sizeMetric={{ key: 'uncovered_lines', type: 'SHORT_INT' }}\n      title={translate('projects.visualization', 'coverage')}\n      xMetric={{ key: 'complexity', type: 'SHORT_INT' }}\n      yDomain={[100, 0]}\n      yMetric={{ key: 'coverage', type: 'PERCENT' }}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport SimpleBubbleChart from './SimpleBubbleChart';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default function Duplications(props: Props) {\n  return (\n    <SimpleBubbleChart\n      {...props}\n      sizeMetric={{ key: 'duplicated_blocks', type: 'SHORT_INT' }}\n      title={translate('projects.visualization', 'duplications')}\n      xMetric={{ key: 'ncloc', type: 'SHORT_INT' }}\n      yMetric={{ key: 'duplicated_lines_density', type: 'PERCENT' }}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport SimpleBubbleChart from './SimpleBubbleChart';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default function Maintainability(props: Props) {\n  return (\n    <SimpleBubbleChart\n      {...props}\n      colorMetric=\"sqale_rating\"\n      sizeMetric={{ key: 'code_smells', type: 'SHORT_INT' }}\n      title={translate('projects.visualization', 'maintainability')}\n      xMetric={{ key: 'ncloc', type: 'SHORT_INT' }}\n      yMetric={{ key: 'sqale_index', type: 'SHORT_WORK_DUR' }}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport SimpleBubbleChart from './SimpleBubbleChart';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default function Reliability(props: Props) {\n  return (\n    <SimpleBubbleChart\n      {...props}\n      colorMetric=\"reliability_rating\"\n      sizeMetric={{ key: 'bugs', type: 'SHORT_INT' }}\n      title={translate('projects.visualization', 'reliability')}\n      xMetric={{ key: 'ncloc', type: 'SHORT_INT' }}\n      yMetric={{ key: 'reliability_remediation_effort', type: 'SHORT_WORK_DUR' }}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BubbleChart from 'sonar-ui-common/components/charts/BubbleChart';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport ColorRatingsLegend from '../../../components/charts/ColorRatingsLegend';\nimport { RATING_COLORS } from '../../../helpers/constants';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Project } from '../types';\n\nconst X_METRIC = 'sqale_index';\nconst X_METRIC_TYPE = 'SHORT_WORK_DUR';\nconst Y_METRIC = 'coverage';\nconst Y_METRIC_TYPE = 'PERCENT';\nconst SIZE_METRIC = 'ncloc';\nconst SIZE_METRIC_TYPE = 'SHORT_INT';\nconst COLOR_METRIC_1 = 'reliability_rating';\nconst COLOR_METRIC_2 = 'security_rating';\nconst COLOR_METRIC_TYPE = 'RATING';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default class Risk extends React.PureComponent<Props> {\n  getMetricTooltip(metric: { key: string; type: string }, value?: number) {\n    const name = translate('metric', metric.key, 'name');\n    const formattedValue = value != null ? formatMeasure(value, metric.type) : '–';\n    return (\n      <div>\n        {name}\n        {': '}\n        {formattedValue}\n      </div>\n    );\n  }\n\n  getTooltip(\n    project: Project,\n    x?: number,\n    y?: number,\n    size?: number,\n    color1?: number,\n    color2?: number\n  ) {\n    const fullProjectName =\n      this.props.displayOrganizations && project.organization ? (\n        <>\n          {project.organization.name}\n          {' / '}\n          <strong>{project.name}</strong>\n        </>\n      ) : (\n        <strong>{project.name}</strong>\n      );\n\n    return (\n      <div className=\"text-left\">\n        <div className=\"little-spacer-bottom display-flex-center display-flex-space-between\">\n          {fullProjectName}\n\n          {project.qualifier === ComponentQualifier.Application && (\n            <div className=\"big-spacer-left nowrap\">\n              <QualifierIcon\n                className=\"little-spacer-right\"\n                fill=\"currentColor\"\n                qualifier={ComponentQualifier.Application}\n              />\n              {translate('qualifier.APP')}\n            </div>\n          )}\n        </div>\n        {this.getMetricTooltip({ key: COLOR_METRIC_1, type: COLOR_METRIC_TYPE }, color1)}\n        {this.getMetricTooltip({ key: COLOR_METRIC_2, type: COLOR_METRIC_TYPE }, color2)}\n        {this.getMetricTooltip({ key: Y_METRIC, type: Y_METRIC_TYPE }, y)}\n        {this.getMetricTooltip({ key: X_METRIC, type: X_METRIC_TYPE }, x)}\n        {this.getMetricTooltip({ key: SIZE_METRIC, type: SIZE_METRIC_TYPE }, size)}\n      </div>\n    );\n  }\n\n  render() {\n    const items = this.props.projects.map(project => {\n      const x = project.measures[X_METRIC] != null ? Number(project.measures[X_METRIC]) : undefined;\n      const y = project.measures[Y_METRIC] != null ? Number(project.measures[Y_METRIC]) : undefined;\n      const size =\n        project.measures[SIZE_METRIC] != null ? Number(project.measures[SIZE_METRIC]) : undefined;\n      const color1 =\n        project.measures[COLOR_METRIC_1] != null\n          ? Number(project.measures[COLOR_METRIC_1])\n          : undefined;\n      const color2 =\n        project.measures[COLOR_METRIC_2] != null\n          ? Number(project.measures[COLOR_METRIC_2])\n          : undefined;\n      return {\n        x: x || 0,\n        y: y || 0,\n        size: size || 0,\n        color:\n          color1 != null && color2 != null\n            ? RATING_COLORS[Math.max(color1, color2) - 1]\n            : undefined,\n        key: project.key,\n        tooltip: this.getTooltip(project, x, y, size, color1, color2),\n        link: getProjectUrl(project.key)\n      };\n    });\n\n    const formatXTick = (tick: number) => formatMeasure(tick, X_METRIC_TYPE);\n    const formatYTick = (tick: number) => formatMeasure(tick, Y_METRIC_TYPE);\n\n    return (\n      <div>\n        <BubbleChart\n          formatXTick={formatXTick}\n          formatYTick={formatYTick}\n          height={600}\n          items={items}\n          padding={[80, 20, 60, 100]}\n          yDomain={[100, 0]}\n        />\n\n        <div className=\"measure-details-bubble-chart-axis x\">\n          {translate('metric', X_METRIC, 'name')}\n        </div>\n        <div className=\"measure-details-bubble-chart-axis y\">\n          {translate('metric', Y_METRIC, 'name')}\n        </div>\n        <div className=\"measure-details-bubble-chart-axis size\">\n          <span className=\"measure-details-bubble-chart-title\">\n            <span className=\"text-middle\">{translate('projects.visualization.risk')}</span>\n            <HelpTooltip className=\"spacer-left\" overlay={this.props.helpText} />\n          </span>\n          <div>\n            <span className=\"spacer-right\">\n              {translateWithParameters(\n                'component_measures.legend.color_x',\n                translate('projects.worse_of_reliablity_and_security')\n              )}\n            </span>\n            {translateWithParameters(\n              'component_measures.legend.size_x',\n              translate('metric', SIZE_METRIC, 'name')\n            )}\n            <ColorRatingsLegend className=\"big-spacer-top\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport SimpleBubbleChart from './SimpleBubbleChart';\n\ninterface Props {\n  displayOrganizations: boolean;\n  helpText: string;\n  projects: Project[];\n}\n\nexport default function Security(props: Props) {\n  return (\n    <SimpleBubbleChart\n      {...props}\n      colorMetric=\"security_rating\"\n      sizeMetric={{ key: 'vulnerabilities', type: 'SHORT_INT' }}\n      title={translate('projects.visualization', 'security')}\n      xMetric={{ key: 'ncloc', type: 'SHORT_INT' }}\n      yMetric={{ key: 'security_remediation_effort', type: 'SHORT_WORK_DUR' }}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../types';\nimport { localizeSorting } from '../utils';\nimport Coverage from './Coverage';\nimport Duplications from './Duplications';\nimport Maintainability from './Maintainability';\nimport Reliability from './Reliability';\nimport Risk from './Risk';\nimport Security from './Security';\n\ninterface Props {\n  displayOrganizations?: boolean;\n  projects: Project[];\n  sort?: string;\n  total?: number;\n  visualization: string;\n}\n\nexport default class Visualizations extends React.PureComponent<Props> {\n  renderVisualization(projects: Project[]) {\n    const visualizationToComponent: T.Dict<any> = {\n      risk: Risk,\n      reliability: Reliability,\n      security: Security,\n      maintainability: Maintainability,\n      coverage: Coverage,\n      duplications: Duplications\n    };\n    const Component = visualizationToComponent[this.props.visualization];\n\n    return Component ? (\n      <Component\n        displayOrganizations={this.props.displayOrganizations}\n        helpText={translate('projects.visualization', this.props.visualization, 'description')}\n        projects={projects}\n      />\n    ) : null;\n  }\n\n  renderFooter() {\n    const { projects, total, sort } = this.props;\n\n    const limitReached = projects != null && total != null && projects.length < total;\n\n    return limitReached ? (\n      <footer className=\"projects-visualizations-footer\">\n        <p className=\"note spacer-top\">\n          {translateWithParameters(\n            'projects.limited_set_of_projects',\n            projects!.length,\n            localizeSorting(sort)\n          )}\n        </p>\n      </footer>\n    ) : null;\n  }\n\n  render() {\n    const { projects } = this.props;\n\n    return (\n      <div className=\"boxed-group projects-visualizations\">\n        <div className=\"projects-visualization\">\n          {projects != null && this.renderVisualization(projects)}\n        </div>\n        {this.renderFooter()}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  query: { search?: string };\n  onQueryChange: (change: { search?: string }) => void;\n}\n\nexport default class SearchFilterContainer extends React.PureComponent<Props> {\n  handleSearch = (search?: string) => {\n    this.props.onQueryChange({ search });\n  };\n\n  render() {\n    return (\n      <div className=\"projects-topbar-item projects-topbar-item-search\">\n        <SearchBox\n          minLength={2}\n          onChange={this.handleSearch}\n          placeholder={translate('projects.search')}\n          value={this.props.query.search || ''}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BubblesIcon from 'sonar-ui-common/components/icons/BubblesIcon';\nimport ListIcon from 'sonar-ui-common/components/icons/ListIcon';\n\nexport interface Option {\n  label: string;\n  type: string;\n  value: string;\n}\n\ninterface Props {\n  option: Option;\n  children?: React.ReactNode;\n  className?: string;\n  isFocused?: boolean;\n  onFocus: (option: Option, event: React.SyntheticEvent<HTMLElement>) => void;\n  onSelect: (option: Option, event: React.SyntheticEvent<HTMLElement>) => void;\n}\n\nexport default class PerspectiveSelectOption extends React.PureComponent<Props> {\n  handleMouseDown = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.props.onSelect(this.props.option, event);\n  };\n\n  handleMouseEnter = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.props.onFocus(this.props.option, event);\n  };\n\n  handleMouseMove = (event: React.SyntheticEvent<HTMLElement>) => {\n    if (this.props.isFocused) {\n      return;\n    }\n    this.props.onFocus(this.props.option, event);\n  };\n\n  render() {\n    const { option } = this.props;\n    return (\n      <div\n        className={this.props.className}\n        onMouseDown={this.handleMouseDown}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseMove={this.handleMouseMove}\n        title={option.label}>\n        <div>\n          {option.type === 'view' && <ListIcon className=\"little-spacer-right\" />}\n          {option.type === 'visualization' && <BubblesIcon className=\"little-spacer-right\" />}\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { VIEWS, VISUALIZATIONS } from '../utils';\nimport PerspectiveSelectOption, { Option } from './PerspectiveSelectOption';\n\ninterface Props {\n  className?: string;\n  onChange: (x: { view: string; visualization?: string }) => void;\n  view: string;\n  visualization?: string;\n}\n\nexport default class PerspectiveSelect extends React.PureComponent<Props> {\n  handleChange = (option: Option) => {\n    if (option.type === 'view') {\n      this.props.onChange({ view: option.value });\n    } else if (option.type === 'visualization') {\n      this.props.onChange({ view: 'visualizations', visualization: option.value });\n    }\n  };\n\n  render() {\n    const { view, visualization } = this.props;\n    const perspective = view === 'visualizations' ? visualization : view;\n    const options = [\n      ...VIEWS.map(opt => ({\n        type: 'view',\n        value: opt.value,\n        label: translate('projects.view', opt.label)\n      })),\n      ...VISUALIZATIONS.map(opt => ({\n        type: 'visualization',\n        value: opt,\n        label: translate('projects.visualization', opt)\n      }))\n    ];\n    return (\n      <div className={this.props.className}>\n        <label>{translate('projects.perspective')}:</label>\n        <Select\n          className=\"little-spacer-left input-medium\"\n          clearable={false}\n          onChange={this.handleChange}\n          optionComponent={PerspectiveSelectOption}\n          options={options}\n          searchable={false}\n          value={perspective}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\n\nexport interface Option {\n  label: string;\n  value: string;\n  class?: string;\n  short?: string;\n}\n\ninterface Props {\n  option: Option;\n  children?: React.ReactNode;\n  className?: string;\n  isFocused?: boolean;\n  onFocus: (option: Option, event: React.SyntheticEvent<HTMLElement>) => void;\n  onSelect: (option: Option, event: React.SyntheticEvent<HTMLElement>) => void;\n}\n\nexport default class ProjectsSortingSelectOption extends React.PureComponent<Props> {\n  handleMouseDown = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    this.props.onSelect(this.props.option, event);\n  };\n\n  handleMouseEnter = (event: React.SyntheticEvent<HTMLElement>) => {\n    this.props.onFocus(this.props.option, event);\n  };\n\n  handleMouseMove = (event: React.SyntheticEvent<HTMLElement>) => {\n    if (this.props.isFocused) {\n      return;\n    }\n    this.props.onFocus(this.props.option, event);\n  };\n\n  render() {\n    const { option } = this.props;\n    return (\n      <div\n        className={classNames(this.props.className, option.class)}\n        onMouseDown={this.handleMouseDown}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseMove={this.handleMouseMove}\n        title={option.label}>\n        {option.short ? option.short : this.props.children}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { ButtonIcon } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport SortAscIcon from 'sonar-ui-common/components/icons/SortAscIcon';\nimport SortDescIcon from 'sonar-ui-common/components/icons/SortDescIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { colors } from '../../../app/theme';\nimport { parseSorting, SORTING_LEAK_METRICS, SORTING_METRICS } from '../utils';\nimport ProjectsSortingSelectOption, { Option } from './ProjectsSortingSelectOption';\n\ninterface Props {\n  className?: string;\n  defaultOption: string;\n  onChange: (sort: string, desc: boolean) => void;\n  selectedSort: string;\n  view: string;\n}\n\nexport default class ProjectsSortingSelect extends React.PureComponent<Props> {\n  getSorting = () => parseSorting(this.props.selectedSort);\n\n  getOptions = () => {\n    const sortMetrics = this.props.view === 'leak' ? SORTING_LEAK_METRICS : SORTING_METRICS;\n    return sortBy(sortMetrics, option => (option.value === this.props.defaultOption ? 0 : 1)).map(\n      option => ({\n        value: option.value,\n        label: translate('projects.sorting', option.value),\n        class: option.class\n      })\n    );\n  };\n\n  handleDescToggle = () => {\n    const sorting = this.getSorting();\n    this.props.onChange(sorting.sortValue, !sorting.sortDesc);\n  };\n\n  handleSortChange = (option: Option) =>\n    this.props.onChange(option.value, this.getSorting().sortDesc);\n\n  render() {\n    const { sortDesc, sortValue } = this.getSorting();\n\n    return (\n      <div className={this.props.className}>\n        <label>{translate('projects.sort_by')}:</label>\n        <Select\n          className=\"little-spacer-left input-medium\"\n          clearable={false}\n          onChange={this.handleSortChange}\n          optionComponent={ProjectsSortingSelectOption}\n          options={this.getOptions()}\n          searchable={false}\n          value={sortValue}\n        />\n        <Tooltip\n          overlay={\n            sortDesc ? translate('projects.sort_descending') : translate('projects.sort_ascending')\n          }>\n          <ButtonIcon\n            className=\"js-projects-sorting-invert spacer-left\"\n            color={colors.gray60}\n            onClick={this.handleDescToggle}>\n            {sortDesc ? <SortDescIcon className=\"\" /> : <SortAscIcon className=\"\" />}\n          </ButtonIcon>\n        </Tooltip>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport HomePageSelect from '../../../components/controls/HomePageSelect';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\nimport SearchFilterContainer from '../filters/SearchFilterContainer';\nimport { Project } from '../types';\nimport PerspectiveSelect from './PerspectiveSelect';\nimport ProjectsSortingSelect from './ProjectsSortingSelect';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  isFavorite: boolean;\n  loading: boolean;\n  onPerspectiveChange: (x: { view: string; visualization?: string }) => void;\n  onQueryChange: (change: T.RawQuery) => void;\n  onSortChange: (sort: string, desc: boolean) => void;\n  organization?: { key: string };\n  projects?: Project[];\n  query: T.RawQuery;\n  selectedSort: string;\n  total?: number;\n  view: string;\n  visualization?: string;\n}\n\nexport default function PageHeader(props: Props) {\n  const { loading, total, projects, currentUser, view } = props;\n  const limitReached = projects != null && total != null && projects.length < total;\n  const defaultOption = isLoggedIn(currentUser) ? 'name' : 'analysis_date';\n  const showHomePageSelect = !isSonarCloud() || props.isFavorite;\n\n  return (\n    <header className=\"page-header projects-topbar-items\">\n      <PerspectiveSelect\n        className=\"projects-topbar-item js-projects-perspective-select\"\n        onChange={props.onPerspectiveChange}\n        view={props.view}\n        visualization={props.visualization}\n      />\n\n      {view === 'visualizations' && !limitReached ? (\n        <Tooltip overlay={translate('projects.sort.disabled')}>\n          <div className=\"projects-topbar-item disabled\">\n            <ProjectsSortingSelect\n              className=\"js-projects-sorting-select\"\n              defaultOption={defaultOption}\n              onChange={props.onSortChange}\n              selectedSort={props.selectedSort}\n              view={props.view}\n            />\n          </div>\n        </Tooltip>\n      ) : (\n        <ProjectsSortingSelect\n          className=\"projects-topbar-item js-projects-sorting-select\"\n          defaultOption={defaultOption}\n          onChange={props.onSortChange}\n          selectedSort={props.selectedSort}\n          view={props.view}\n        />\n      )}\n\n      <SearchFilterContainer onQueryChange={props.onQueryChange} query={props.query} />\n\n      <div\n        className={classNames('projects-topbar-item', 'is-last', {\n          'is-loading': loading\n        })}>\n        {total != null && (\n          <span>\n            <strong id=\"projects-total\">{total}</strong> {translate('projects._projects')}\n          </span>\n        )}\n      </div>\n\n      {showHomePageSelect && (\n        <HomePageSelect\n          className=\"huge-spacer-left\"\n          currentPage={isSonarCloud() ? { type: 'MY_PROJECTS' } : { type: 'PROJECTS' }}\n        />\n      )}\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { Facet } from '../types';\n\nexport type Option = string | number;\n\ninterface Props {\n  property: string;\n  className?: string;\n  onQueryChange: (change: T.RawQuery) => void;\n  options: Option[];\n  renderOption: (option: Option, isSelected: boolean) => React.ReactNode;\n\n  value?: Option | Option[];\n  facet?: Facet;\n  maxFacetValue?: number;\n  optionClassName?: string;\n  organization?: { key: string };\n\n  getFacetValueForOption?: (facet: Facet, option: Option) => number;\n\n  halfWidth?: boolean;\n  highlightUnder?: number;\n  highlightUnderMax?: number;\n\n  header?: React.ReactNode;\n  footer?: React.ReactNode;\n}\n\nconst defaultGetFacetValueForOption = (facet: Facet, option: string | number) => facet[option];\n\nexport default class Filter extends React.PureComponent<Props> {\n  isSelected(option: Option): boolean {\n    const { value } = this.props;\n    return Array.isArray(value) ? value.includes(option) : String(option) === String(value);\n  }\n\n  highlightUnder(option?: Option): boolean {\n    return (\n      this.props.highlightUnder != null &&\n      option != null &&\n      option > this.props.highlightUnder &&\n      (this.props.highlightUnderMax == null || option < this.props.highlightUnderMax)\n    );\n  }\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n\n    const { property, value } = this.props;\n    const { key: option } = event.currentTarget.dataset;\n    let urlOption;\n\n    if (option) {\n      if (Array.isArray(value) && (event.ctrlKey || event.metaKey)) {\n        if (this.isSelected(option)) {\n          urlOption = value.length > 1 ? value.filter(val => val !== option).join(',') : null;\n        } else {\n          urlOption = value.concat(option).join(',');\n        }\n      } else {\n        urlOption =\n          this.isSelected(option) && (!Array.isArray(value) || value.length < 2) ? null : option;\n      }\n\n      this.props.onQueryChange({ [property]: urlOption });\n    }\n  };\n\n  renderOptionBar(facetValue: number | undefined) {\n    if (facetValue === undefined || !this.props.maxFacetValue) {\n      return null;\n    }\n    return (\n      <div className=\"projects-facet-bar\">\n        <div\n          className=\"projects-facet-bar-inner\"\n          style={{ width: (facetValue / this.props.maxFacetValue) * 60 }}\n        />\n      </div>\n    );\n  }\n\n  renderOption(option: Option) {\n    const { facet, getFacetValueForOption = defaultGetFacetValueForOption, value } = this.props;\n    const className = classNames(\n      'facet',\n      'search-navigator-facet',\n      'projects-facet',\n      {\n        active: this.isSelected(option),\n        'search-navigator-facet-half': this.props.halfWidth\n      },\n      this.props.optionClassName\n    );\n\n    const facetValue =\n      facet && getFacetValueForOption ? getFacetValueForOption(facet, option) : undefined;\n\n    const isUnderSelectedOption =\n      typeof value === 'number' &&\n      typeof option === 'number' &&\n      this.highlightUnder(value) &&\n      option > value;\n\n    return (\n      <a className={className} data-key={option} href=\"#\" key={option} onClick={this.handleClick}>\n        <span className=\"facet-name\">\n          {this.props.renderOption(option, this.isSelected(option) || isUnderSelectedOption)}\n        </span>\n        {facetValue != null && (\n          <span className=\"facet-stat\">\n            {formatMeasure(facetValue, 'SHORT_INT')}\n            {this.renderOptionBar(facetValue)}\n          </span>\n        )}\n      </a>\n    );\n  }\n\n  renderOptions = () => {\n    const { options, highlightUnder } = this.props;\n    if (options && options.length > 0) {\n      if (highlightUnder != null) {\n        const max = this.props.highlightUnderMax || options.length;\n        const beforeHighlight = options.slice(0, highlightUnder);\n        const insideHighlight = options.slice(highlightUnder, max);\n        const afterHighlight = options.slice(max);\n        return (\n          <div className=\"search-navigator-facet-list projects-facet-list\">\n            {beforeHighlight.map(option => this.renderOption(option))}\n            <div className=\"search-navigator-facet-highlight-under-container\">\n              {insideHighlight.map(option => this.renderOption(option))}\n            </div>\n            {afterHighlight.map(option => this.renderOption(option))}\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"search-navigator-facet-list projects-facet-list\">\n            {options.map(option => this.renderOption(option))}\n          </div>\n        );\n      }\n    } else {\n      return <div className=\"search-navigator-facet-empty\">{translate('no_results')}</div>;\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className={classNames('search-navigator-facet-box', this.props.className)}\n        data-key={this.props.property}>\n        {this.props.header}\n        {this.renderOptions()}\n        {this.props.footer}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface Props {\n  children?: React.ReactNode;\n  name: string;\n}\n\nexport default function FilterHeader(props: Props) {\n  return (\n    <div className=\"search-navigator-facet-header projects-facet-header\">\n      {props.name}\n      {props.children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getCoverageRatingAverageValue,\n  getCoverageRatingLabel\n} from 'sonar-ui-common/helpers/ratings';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  value?: any;\n}\n\nexport default function CoverageFilter(props: Props) {\n  const { property = 'coverage' } = props;\n\n  return (\n    <Filter\n      className={props.className}\n      facet={props.facet}\n      getFacetValueForOption={getFacetValueForOption}\n      header={<FilterHeader name={translate('metric_domain.Coverage')} />}\n      highlightUnder={1}\n      highlightUnderMax={5}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5, 6]}\n      organization={props.organization}\n      property={property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction getFacetValueForOption(facet: Facet, option: number): number {\n  const map = ['80.0-*', '70.0-80.0', '50.0-70.0', '30.0-50.0', '*-30.0', 'NO_DATA'];\n  return facet[map[option - 1]];\n}\n\nfunction renderOption(option: number, selected: boolean) {\n  return (\n    <span>\n      {option < 6 && (\n        <CoverageRating\n          muted={!selected}\n          size=\"small\"\n          value={getCoverageRatingAverageValue(option)}\n        />\n      )}\n      <span className=\"spacer-left\">\n        {option < 6 ? (\n          getCoverageRatingLabel(option)\n        ) : (\n          <span className=\"big-spacer-left\">{translate('no_data')}</span>\n        )}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport {\n  getDuplicationsRatingAverageValue,\n  getDuplicationsRatingLabel\n} from 'sonar-ui-common/helpers/ratings';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  value?: any;\n}\n\nexport default function DuplicationsFilter(props: Props) {\n  const { property = 'duplications' } = props;\n  return (\n    <Filter\n      className={props.className}\n      facet={props.facet}\n      getFacetValueForOption={getFacetValueForOption}\n      header={<FilterHeader name={translate('metric_domain.Duplications')} />}\n      highlightUnder={1}\n      highlightUnderMax={5}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5, 6]}\n      organization={props.organization}\n      property={property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction getFacetValueForOption(facet: Facet, option: number) {\n  const map = ['*-3.0', '3.0-5.0', '5.0-10.0', '10.0-20.0', '20.0-*', 'NO_DATA'];\n  return facet[map[option - 1]];\n}\n\nfunction renderOption(option: number, selected: boolean) {\n  return (\n    <span>\n      {option < 6 && (\n        <DuplicationsRating\n          muted={!selected}\n          size=\"small\"\n          value={getDuplicationsRatingAverageValue(option)}\n        />\n      )}\n      <span className=\"spacer-left\">\n        {option < 6 ? (\n          getDuplicationsRatingLabel(option)\n        ) : (\n          <span className=\"big-spacer-left\">{translate('no_data')}</span>\n        )}\n      </span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  isFavorite?: boolean;\n  isLoading?: boolean;\n  onInputChange?: (query: string) => void;\n  onOpen?: () => void;\n  onQueryChange: (change: T.RawQuery) => void;\n  options: Array<{ label: string; value: string }>;\n  organization?: { key: string };\n  property: string;\n  query: T.Dict<any>;\n}\n\nexport default class SearchableFilterFooter extends React.PureComponent<Props> {\n  handleOptionChange = ({ value }: { value: string }) => {\n    const urlOptions = (this.props.query[this.props.property] || []).concat(value).join(',');\n    this.props.onQueryChange({ [this.props.property]: urlOptions });\n  };\n\n  render() {\n    return (\n      <div className=\"search-navigator-facet-footer projects-facet-footer\">\n        <Select\n          className=\"input-super-large\"\n          clearable={false}\n          isLoading={this.props.isLoading}\n          onChange={this.handleOptionChange}\n          onInputChange={this.props.onInputChange}\n          onOpen={this.props.onOpen}\n          options={this.props.options}\n          placeholder={translate('search_verb')}\n          searchable={true}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  option?: { name: string };\n  optionKey: string;\n}\n\nexport default function SearchableFilterOption(props: Props) {\n  const optionName = props.option ? props.option.name : props.optionKey;\n  return <span>{props.optionKey !== '<null>' ? optionName : translate('unknown')}</span>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { difference, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getLanguageByKey } from '../../../store/languages';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\nimport SearchableFilterFooter from './SearchableFilterFooter';\nimport SearchableFilterOption from './SearchableFilterOption';\n\ninterface Props {\n  facet?: Facet;\n  languages: T.Languages;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  query: T.Dict<any>;\n  value?: string[];\n}\n\nexport default class LanguagesFilter extends React.Component<Props> {\n  getSearchOptions = () => {\n    const { facet, languages } = this.props;\n    let languageKeys = Object.keys(languages);\n    if (facet) {\n      languageKeys = difference(languageKeys, Object.keys(facet));\n    }\n    return languageKeys.map(key => ({ label: languages[key].name, value: key }));\n  };\n\n  getSortedOptions = (facet: Facet = {}) =>\n    sortBy(Object.keys(facet), [(option: string) => -facet[option], (option: string) => option]);\n\n  renderOption = (option: string) => (\n    <SearchableFilterOption\n      option={getLanguageByKey(this.props.languages, option)}\n      optionKey={option}\n    />\n  );\n\n  render() {\n    const { property = 'languages' } = this.props;\n\n    return (\n      <Filter\n        facet={this.props.facet}\n        footer={\n          <SearchableFilterFooter\n            onQueryChange={this.props.onQueryChange}\n            options={this.getSearchOptions()}\n            organization={this.props.organization}\n            property={property}\n            query={this.props.query}\n          />\n        }\n        header={<FilterHeader name={translate('projects.facets.languages')} />}\n        maxFacetValue={this.props.maxFacetValue}\n        onQueryChange={this.props.onQueryChange}\n        options={this.getSortedOptions(this.props.facet)}\n        organization={this.props.organization}\n        property={property}\n        renderOption={this.renderOption}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport LanguagesFilter from './LanguagesFilter';\n\nconst stateToProps = (state: Store) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect(stateToProps)(LanguagesFilter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  headerDetail?: React.ReactNode;\n  maxFacetValue?: number;\n  name: string;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property: string;\n  value?: any;\n}\n\nexport default function IssuesFilter(props: Props) {\n  return (\n    <Filter\n      className={props.className}\n      facet={props.facet}\n      header={\n        <FilterHeader name={translate('metric_domain', props.name)}>\n          {props.headerDetail}\n        </FilterHeader>\n      }\n      highlightUnder={1}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5]}\n      organization={props.organization}\n      property={props.property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction renderOption(option: number, selected: boolean) {\n  return (\n    <span>\n      <Rating muted={!selected} small={true} value={option} />\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CodeSmellIcon from 'sonar-ui-common/components/icons/CodeSmellIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  headerDetail?: React.ReactNode;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function MaintainabilityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <CodeSmellIcon className=\"little-spacer-right\" />\n          {translate('metric.code_smells.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Maintainability\"\n      property=\"maintainability\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CoverageFilter, { Props } from './CoverageFilter';\n\nexport default function NewCoverageFilter(props: Props) {\n  return <CoverageFilter {...props} className=\"leak-facet-box\" property=\"new_coverage\" />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DuplicationsFilter, { Props } from './DuplicationsFilter';\n\nexport default function NewDuplicationsFilter(props: Props) {\n  return <DuplicationsFilter {...props} className=\"leak-facet-box\" property=\"new_duplications\" />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getSizeRatingLabel } from 'sonar-ui-common/helpers/ratings';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  value?: any;\n}\n\nexport default function NewLinesFilter(props: Props) {\n  const { property = 'new_lines' } = props;\n\n  return (\n    <Filter\n      className=\"leak-facet-box\"\n      facet={props.facet}\n      getFacetValueForOption={getFacetValueForOption}\n      header={<FilterHeader name={translate('projects.facets.new_lines')} />}\n      highlightUnder={1}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5]}\n      organization={props.organization}\n      property={property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction getFacetValueForOption(facet: Facet, option: number) {\n  const map = ['*-1000.0', '1000.0-10000.0', '10000.0-100000.0', '100000.0-500000.0', '500000.0-*'];\n  return facet[map[option - 1]];\n}\n\nfunction renderOption(option: number) {\n  return <span>{getSizeRatingLabel(option)}</span>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CodeSmellIcon from 'sonar-ui-common/components/icons/CodeSmellIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function NewMaintainabilityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      className=\"leak-facet-box\"\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <CodeSmellIcon className=\"little-spacer-right\" />\n          {translate('metric.code_smells.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Maintainability\"\n      property=\"new_maintainability\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from 'sonar-ui-common/components/icons/BugIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function NewReliabilityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      className=\"leak-facet-box\"\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <BugIcon className=\"little-spacer-right\" />\n          {translate('metric.bugs.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Reliability\"\n      property=\"new_reliability\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport VulnerabilityIcon from 'sonar-ui-common/components/icons/VulnerabilityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function NewSecurityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      className=\"leak-facet-box\"\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <VulnerabilityIcon className=\"little-spacer-right\" />\n          {translate('metric.vulnerabilities.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Security\"\n      property=\"new_security\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface QualifierFilterProps {\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value: ComponentQualifier | undefined;\n}\n\nconst options = [ComponentQualifier.Project, ComponentQualifier.Application];\n\nexport default function QualifierFilter(props: QualifierFilterProps) {\n  const { facet, maxFacetValue, organization, value } = props;\n\n  return (\n    <Filter\n      facet={facet}\n      header={<FilterHeader name={translate('projects.facets.qualifier')} />}\n      maxFacetValue={maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={options}\n      organization={organization}\n      property=\"qualifier\"\n      renderOption={renderOption}\n      value={value}\n    />\n  );\n}\n\nfunction renderOption(option: string, selected: boolean) {\n  return (\n    <span className=\"display-flex-center\">\n      <QualifierIcon\n        className=\"spacer-right\"\n        fill={selected ? undefined : 'currentColor'}\n        qualifier={option}\n      />\n      {translate('qualifier', option)}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function QualityGateFilter(props: Props) {\n  const hasWarnStatus = props.facet && props.facet['WARN'] !== undefined;\n  const options = hasWarnStatus ? ['OK', 'WARN', 'ERROR'] : ['OK', 'ERROR'];\n\n  return (\n    <Filter\n      facet={props.facet}\n      header={<FilterHeader name={translate('projects.facets.quality_gate')} />}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={options}\n      organization={props.organization}\n      property=\"gate\"\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction renderOption(option: string, selected: boolean) {\n  return (\n    <>\n      <Level level={option} muted={!selected} small={true} />\n      {option === 'WARN' && (\n        <HelpTooltip\n          className=\"little-spacer-left\"\n          overlay={translate('projects.facets.quality_gate.warning_help')}\n        />\n      )}\n    </>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport BugIcon from 'sonar-ui-common/components/icons/BugIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  headerDetail?: React.ReactNode;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function ReliabilityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <BugIcon className=\"little-spacer-right\" />\n          {translate('metric.bugs.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Reliability\"\n      property=\"reliability\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport VulnerabilityIcon from 'sonar-ui-common/components/icons/VulnerabilityIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport IssuesFilter from './IssuesFilter';\n\ninterface Props {\n  className?: string;\n  facet?: Facet;\n  headerDetail?: React.ReactNode;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  value?: any;\n}\n\nexport default function SecurityFilter(props: Props) {\n  return (\n    <IssuesFilter\n      {...props}\n      headerDetail={\n        <span className=\"note little-spacer-left\">\n          {'( '}\n          <VulnerabilityIcon className=\"little-spacer-right\" />\n          {translate('metric.vulnerabilities.name')}\n          {' )'}\n        </span>\n      }\n      name=\"Security\"\n      property=\"security\"\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SecurityHotspotIcon from 'sonar-ui-common/components/icons/SecurityHotspotIcon';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  value?: any;\n}\n\nconst labels: T.Dict<string> = {\n  1: '≥ 80%',\n  2: '70% - 80%',\n  3: '50% - 70%',\n  4: '30% - 50%',\n  5: '< 30%'\n};\n\nexport default function SecurityReviewFilter(props: Props) {\n  const { property = 'security_review' } = props;\n\n  return (\n    <Filter\n      className={props.className}\n      facet={props.facet}\n      header={\n        <FilterHeader name={translate('metric_domain.SecurityReview')}>\n          <span className=\"note little-spacer-left\">\n            {'( '}\n            <SecurityHotspotIcon className=\"little-spacer-right\" />\n            {translate('metric.security_hotspots.name')}\n            {' )'}\n          </span>\n        </FilterHeader>\n      }\n      highlightUnder={1}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5]}\n      organization={props.organization}\n      property={property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction renderOption(option: number, selected: boolean) {\n  return (\n    <span>\n      <Rating muted={!selected} small={true} value={option} />\n      <span className=\"spacer-left\">{labels[option]}</span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SizeRating from 'sonar-ui-common/components/ui/SizeRating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getSizeRatingAverageValue, getSizeRatingLabel } from 'sonar-ui-common/helpers/ratings';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\n\nexport interface Props {\n  className?: string;\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  value?: any;\n}\n\nexport default function SizeFilter(props: Props) {\n  const { property = 'size' } = props;\n\n  return (\n    <Filter\n      className={props.className}\n      facet={props.facet}\n      getFacetValueForOption={getFacetValueForOption}\n      header={<FilterHeader name={translate('metric_domain.Size')} />}\n      highlightUnder={1}\n      maxFacetValue={props.maxFacetValue}\n      onQueryChange={props.onQueryChange}\n      options={[1, 2, 3, 4, 5]}\n      organization={props.organization}\n      property={property}\n      renderOption={renderOption}\n      value={props.value}\n    />\n  );\n}\n\nfunction getFacetValueForOption(facet: Facet, option: number) {\n  const map = ['*-1000.0', '1000.0-10000.0', '10000.0-100000.0', '100000.0-500000.0', '500000.0-*'];\n  return facet[map[option - 1]];\n}\n\nfunction renderOption(option: number, selected: boolean) {\n  return (\n    <span>\n      <SizeRating muted={!selected} small={true} value={getSizeRatingAverageValue(option)} />\n      <span className=\"spacer-left\">{getSizeRatingLabel(option)}</span>\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, difference, size, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { searchProjectTags } from '../../../api/components';\nimport { Facet } from '../types';\nimport Filter from './Filter';\nimport FilterHeader from './FilterHeader';\nimport SearchableFilterFooter from './SearchableFilterFooter';\nimport SearchableFilterOption from './SearchableFilterOption';\n\ninterface Props {\n  facet?: Facet;\n  maxFacetValue?: number;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  property?: string;\n  query: T.Dict<any>;\n  value?: string[];\n}\n\ninterface State {\n  isLoading: boolean;\n  search: string;\n  tags: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class TagsFilter extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      search: '',\n      tags: []\n    };\n    this.handleSearch = debounce(this.handleSearch, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getSearchOptions = () => {\n    let tagsCopy = [...this.state.tags];\n    if (this.props.facet) {\n      tagsCopy = difference(tagsCopy, Object.keys(this.props.facet));\n    }\n    return tagsCopy.slice(0, LIST_SIZE).map(tag => ({ label: tag, value: tag }));\n  };\n\n  handleSearch = (search?: string) => {\n    if (search !== this.state.search) {\n      search = search || '';\n      this.setState({ search, isLoading: true });\n      searchProjectTags({\n        q: search,\n        ps: size(this.props.facet || {}) + LIST_SIZE\n      }).then(\n        result => {\n          if (this.mounted) {\n            this.setState({ isLoading: false, tags: result.tags });\n          }\n        },\n        () => {}\n      );\n    }\n  };\n\n  getSortedOptions = (facet: Facet = {}) =>\n    sortBy(Object.keys(facet), [(option: string) => -facet[option], (option: string) => option]);\n\n  renderOption = (option: string) => <SearchableFilterOption optionKey={option} />;\n\n  render() {\n    const { property = 'tags' } = this.props;\n\n    return (\n      <Filter\n        facet={this.props.facet}\n        footer={\n          <SearchableFilterFooter\n            isLoading={this.state.isLoading}\n            onInputChange={this.handleSearch}\n            onOpen={this.handleSearch}\n            onQueryChange={this.props.onQueryChange}\n            options={this.getSearchOptions()}\n            organization={this.props.organization}\n            property={property}\n            query={this.props.query}\n          />\n        }\n        header={<FilterHeader name={translate('projects.facets.tags')} />}\n        maxFacetValue={this.props.maxFacetValue}\n        onQueryChange={this.props.onQueryChange}\n        options={this.getSortedOptions(this.props.facet)}\n        organization={this.props.organization}\n        property={property}\n        renderOption={this.renderOption}\n        value={this.props.value}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  onClearAll: () => void;\n}\n\nexport default function ClearAll({ onClearAll }: Props) {\n  return (\n    <div className=\"projects-facets-reset\">\n      <Button className=\"button-red\" onClick={onClearAll}>\n        {translate('clear_all_filters')}\n      </Button>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { IndexLink, Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { save } from 'sonar-ui-common/helpers/storage';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { PROJECTS_ALL, PROJECTS_DEFAULT_FILTER, PROJECTS_FAVORITE } from '../utils';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  organization?: { key: string };\n  query?: T.RawQuery;\n}\n\nexport default class FavoriteFilter extends React.PureComponent<Props> {\n  handleSaveFavorite = () => {\n    if (!this.props.organization) {\n      save(PROJECTS_DEFAULT_FILTER, PROJECTS_FAVORITE);\n    }\n  };\n\n  handleSaveAll = () => {\n    if (!this.props.organization) {\n      save(PROJECTS_DEFAULT_FILTER, PROJECTS_ALL);\n    }\n  };\n\n  render() {\n    if (!isLoggedIn(this.props.currentUser)) {\n      return null;\n    }\n\n    const pathnameForFavorite = this.props.organization\n      ? `/organizations/${this.props.organization.key}/projects/favorite`\n      : '/projects/favorite';\n\n    const pathnameForAll = this.props.organization\n      ? `/organizations/${this.props.organization.key}/projects`\n      : '/projects';\n\n    return (\n      <header className=\"page-header text-center\">\n        <div className=\"button-group\">\n          <Link\n            activeClassName=\"button-active\"\n            className=\"button\"\n            id=\"favorite-projects\"\n            onClick={this.handleSaveFavorite}\n            to={{ pathname: pathnameForFavorite, query: this.props.query }}>\n            {translate('my_favorites')}\n          </Link>\n          <IndexLink\n            activeClassName=\"button-active\"\n            className=\"button\"\n            id=\"all-projects\"\n            onClick={this.handleSaveAll}\n            to={{ pathname: pathnameForAll, query: this.props.query }}>\n            {translate('all')}\n          </IndexLink>\n        </div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport FavoriteFilter from './FavoriteFilter';\n\nfunction mapStateToProps(state: Store) {\n  return { currentUser: getCurrentUser(state) };\n}\n\nexport default connect(mapStateToProps)(FavoriteFilter);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatMap } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport CoverageFilter from '../filters/CoverageFilter';\nimport DuplicationsFilter from '../filters/DuplicationsFilter';\nimport LanguagesFilterContainer from '../filters/LanguagesFilterContainer';\nimport MaintainabilityFilter from '../filters/MaintainabilityFilter';\nimport NewCoverageFilter from '../filters/NewCoverageFilter';\nimport NewDuplicationsFilter from '../filters/NewDuplicationsFilter';\nimport NewLinesFilter from '../filters/NewLinesFilter';\nimport NewMaintainabilityFilter from '../filters/NewMaintainabilityFilter';\nimport NewReliabilityFilter from '../filters/NewReliabilityFilter';\nimport NewSecurityFilter from '../filters/NewSecurityFilter';\nimport QualifierFilter from '../filters/QualifierFilter';\nimport QualityGateFilter from '../filters/QualityGateFilter';\nimport ReliabilityFilter from '../filters/ReliabilityFilter';\nimport SecurityFilter from '../filters/SecurityFilter';\nimport SecurityReviewFilter from '../filters/SecurityReviewFilter';\nimport SizeFilter from '../filters/SizeFilter';\nimport TagsFilter from '../filters/TagsFilter';\nimport { hasFilterParams } from '../query';\nimport { Facets } from '../types';\nimport ClearAll from './ClearAll';\nimport FavoriteFilterContainer from './FavoriteFilterContainer';\n\nexport interface PageSidebarProps {\n  applicationsEnabled: boolean;\n  facets?: Facets;\n  onClearAll: () => void;\n  onQueryChange: (change: T.RawQuery) => void;\n  organization?: { key: string };\n  query: T.RawQuery;\n  view: string;\n  visualization: string;\n}\n\nexport default function PageSidebar(props: PageSidebarProps) {\n  const {\n    applicationsEnabled,\n    facets,\n    onQueryChange,\n    query,\n    organization,\n    view,\n    visualization\n  } = props;\n  const isFiltered = hasFilterParams(query);\n  const isLeakView = view === 'leak';\n  const maxFacetValue = getMaxFacetValue(facets);\n  const facetProps = { onQueryChange, maxFacetValue, organization };\n\n  let linkQuery: T.RawQuery | undefined = undefined;\n  if (view !== 'overall') {\n    linkQuery = { view };\n\n    if (view === 'visualizations') {\n      linkQuery.visualization = visualization;\n    }\n  }\n\n  return (\n    <div>\n      <FavoriteFilterContainer organization={organization} query={linkQuery} />\n\n      <div className=\"projects-facets-header clearfix\">\n        {isFiltered && <ClearAll onClearAll={props.onClearAll} />}\n\n        <h3>{translate('filters')}</h3>\n      </div>\n      <QualityGateFilter {...facetProps} facet={getFacet(facets, 'gate')} value={query.gate} />\n      {!isLeakView && (\n        <>\n          <ReliabilityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'reliability')}\n            value={query.reliability}\n          />\n          <SecurityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'security')}\n            value={query.security}\n          />\n\n          <SecurityReviewFilter\n            {...facetProps}\n            facet={getFacet(facets, 'security_review_rating')}\n            value={query.security_review_rating}\n          />\n\n          <MaintainabilityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'maintainability')}\n            value={query.maintainability}\n          />\n          <CoverageFilter\n            {...facetProps}\n            facet={getFacet(facets, 'coverage')}\n            value={query.coverage}\n          />\n          <DuplicationsFilter\n            {...facetProps}\n            facet={getFacet(facets, 'duplications')}\n            value={query.duplications}\n          />\n          <SizeFilter {...facetProps} facet={getFacet(facets, 'size')} value={query.size} />\n        </>\n      )}\n      {isLeakView && (\n        <>\n          <NewReliabilityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_reliability')}\n            value={query.new_reliability}\n          />\n          <NewSecurityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_security')}\n            value={query.new_security}\n          />\n          <SecurityReviewFilter\n            {...facetProps}\n            className=\"leak-facet-box\"\n            facet={getFacet(facets, 'new_security_review_rating')}\n            property=\"new_security_review_rating\"\n            value={query.new_security_review_rating}\n          />\n          <NewMaintainabilityFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_maintainability')}\n            value={query.new_maintainability}\n          />\n          <NewCoverageFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_coverage')}\n            value={query.new_coverage}\n          />\n          <NewDuplicationsFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_duplications')}\n            value={query.new_duplications}\n          />\n          <NewLinesFilter\n            {...facetProps}\n            facet={getFacet(facets, 'new_lines')}\n            value={query.new_lines}\n          />\n        </>\n      )}\n      <LanguagesFilterContainer\n        {...facetProps}\n        facet={getFacet(facets, 'languages')}\n        query={query}\n        value={query.languages}\n      />\n      {applicationsEnabled && (\n        <QualifierFilter\n          {...facetProps}\n          facet={getFacet(facets, 'qualifier')}\n          value={query.qualifier}\n        />\n      )}\n      <TagsFilter\n        {...facetProps}\n        facet={getFacet(facets, 'tags')}\n        query={query}\n        value={query.tags}\n      />\n    </div>\n  );\n}\n\nfunction getFacet(facets: Facets | undefined, name: string) {\n  return facets && facets[name];\n}\n\nfunction getMaxFacetValue(facets?: Facets) {\n  return facets && Math.max(...flatMap(Object.values(facets), facet => Object.values(facet)));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport '../../../components/common/EmptySearch.css';\nimport { Query } from '../query';\n\nexport default function EmptyFavoriteSearch({ query }: { query: Query }) {\n  return (\n    <div className=\"empty-search\">\n      <h3>{translate('no_results_search.favorites')}</h3>\n      <p className=\"big-spacer-top\">\n        <FormattedMessage\n          defaultMessage={translate('no_results_search.favorites.2')}\n          id=\"no_results_search.favorites.2\"\n          values={{\n            url: <Link to={{ pathname: '/projects', query }}>{translate('all')}</Link>\n          }}\n        />\n      </p>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { OnboardingContextShape } from '../../../app/components/OnboardingContext';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { hasGlobalPermission, isLoggedIn } from '../../../helpers/users';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  openProjectOnboarding: OnboardingContextShape;\n  organization?: T.Organization;\n}\n\nexport default class EmptyInstance extends React.PureComponent<Props> {\n  analyzeNewProject = () => {\n    this.props.openProjectOnboarding(this.props.organization);\n  };\n\n  render() {\n    const { currentUser, organization } = this.props;\n    const showNewProjectButton = isSonarCloud()\n      ? organization && organization.actions && organization.actions.provision\n      : isLoggedIn(currentUser) && hasGlobalPermission(currentUser, 'provisioning');\n\n    return (\n      <div className=\"projects-empty-list\">\n        <h3>\n          {showNewProjectButton\n            ? translate('projects.no_projects.empty_instance.new_project')\n            : translate('projects.no_projects.empty_instance')}\n        </h3>\n        {showNewProjectButton && (\n          <div>\n            <p className=\"big-spacer-top\">\n              {translate('projects.no_projects.empty_instance.how_to_add_projects')}\n            </p>\n            <p className=\"big-spacer-top\">\n              <Button onClick={this.analyzeNewProject}>\n                {translate('my_account.create_new.TRK')}\n              </Button>\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Dropdown from 'sonar-ui-common/components/controls/Dropdown';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { OnboardingContextShape } from '../../../app/components/OnboardingContext';\nimport OrganizationListItem from '../../../components/ui/OrganizationListItem';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { getMyOrganizations, Store } from '../../../store/rootReducer';\n\ninterface OwnProps {\n  openProjectOnboarding: OnboardingContextShape;\n}\n\ninterface StateProps {\n  organizations: T.Organization[];\n}\n\nexport function NoFavoriteProjects(props: StateProps & OwnProps) {\n  return (\n    <div className=\"projects-empty-list\">\n      <h3>{translate('projects.no_favorite_projects')}</h3>\n      {isSonarCloud() ? (\n        <div className=\"spacer-top\">\n          <p>{translate('projects.no_favorite_projects.how_to_add_projects')}</p>\n          <div className=\"huge-spacer-top\">\n            <Button onClick={props.openProjectOnboarding}>\n              {translate('provisioning.analyze_new_project')}\n            </Button>\n\n            {props.organizations.length > 0 && (\n              <Dropdown\n                className=\"display-inline-block big-spacer-left\"\n                overlay={\n                  <ul className=\"menu\">\n                    {sortBy(props.organizations, org => org.name.toLowerCase()).map(\n                      organization => (\n                        <OrganizationListItem key={organization.key} organization={organization} />\n                      )\n                    )}\n                  </ul>\n                }>\n                <a className=\"button\" href=\"#\">\n                  {translate('projects.no_favorite_projects.favorite_projects_from_orgs')}\n                  <DropdownIcon className=\"little-spacer-left\" />\n                </a>\n              </Dropdown>\n            )}\n\n            <Link className=\"button big-spacer-left\" to=\"/explore/projects\">\n              {translate('projects.no_favorite_projects.favorite_public_projects')}\n            </Link>\n          </div>\n        </div>\n      ) : (\n        <div>\n          <p className=\"big-spacer-top\">{translate('projects.no_favorite_projects.engagement')}</p>\n          <p className=\"big-spacer-top\">\n            <Link className=\"button\" to=\"/projects/all\">\n              {translate('projects.explore_projects')}\n            </Link>\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  organizations: getMyOrganizations(state)\n});\n\nexport default connect(mapStateToProps)(NoFavoriteProjects);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueTypeIcon from 'sonar-ui-common/components/icons/IssueTypeIcon';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\n\nexport interface ProjectCardRatingMeasureProps {\n  iconKey?: string;\n  iconLabel: string;\n  measures: T.Dict<string | undefined>;\n  metricKey: string;\n  metricRatingKey: string;\n  metricType: string;\n}\n\nexport default function ProjectCardRatingMeasure(props: ProjectCardRatingMeasureProps) {\n  const { iconKey, iconLabel, measures, metricKey, metricRatingKey, metricType } = props;\n\n  return (\n    <div className=\"project-card-measure\" data-key={metricRatingKey}>\n      <div className=\"project-card-measure-inner\">\n        <div className=\"project-card-measure-number\">\n          <Measure\n            className=\"spacer-right\"\n            metricKey={metricKey}\n            metricType={metricType}\n            value={measures[metricKey]}\n          />\n\n          <Rating value={measures[metricRatingKey]} />\n        </div>\n\n        <div className=\"project-card-measure-label-with-icon\">\n          <IssueTypeIcon className=\"little-spacer-right text-bottom\" query={iconKey || metricKey} />\n\n          {iconLabel}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../../components/measure/Measure';\nimport ProjectCardRatingMeasure from './ProjectCardRatingMeasure';\n\ninterface Props {\n  measures: T.Dict<string>;\n}\n\nexport default function ProjectCardLeakMeasures({ measures }: Props) {\n  return (\n    <div className=\"project-card-leak-measures\">\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.bugs.name')}\n        measures={measures}\n        metricKey=\"new_bugs\"\n        metricRatingKey=\"new_reliability_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.vulnerabilities.name')}\n        measures={measures}\n        metricKey=\"new_vulnerabilities\"\n        metricRatingKey=\"new_security_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconKey=\"security_hotspots\"\n        iconLabel={translate('projects.security_hotspots_reviewed')}\n        measures={measures}\n        metricKey=\"new_security_hotspots_reviewed\"\n        metricRatingKey=\"new_security_review_rating\"\n        metricType=\"PERCENT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.code_smells.name')}\n        measures={measures}\n        metricKey=\"new_code_smells\"\n        metricRatingKey=\"new_maintainability_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      {measures['new_coverage'] != null && (\n        <div className=\"project-card-measure\" data-key=\"new_coverage\">\n          <div className=\"project-card-measure-inner\">\n            <div className=\"project-card-measure-number\">\n              <Measure\n                metricKey=\"new_coverage\"\n                metricType=\"PERCENT\"\n                value={measures['new_coverage']}\n              />\n            </div>\n            <div className=\"project-card-measure-label\">{translate('metric.coverage.name')}</div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"project-card-measure\" data-key=\"new_duplicated_lines_density\">\n        <div className=\"project-card-measure-inner\">\n          <div className=\"project-card-measure-number\">\n            <Measure\n              metricKey=\"new_duplicated_lines_density\"\n              metricType=\"PERCENT\"\n              value={measures['new_duplicated_lines_density']}\n            />\n          </div>\n          <div className=\"project-card-measure-label\">\n            {translate('metric.duplicated_lines_density.short_name')}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"project-card-measure project-card-ncloc\" data-key=\"new_lines\">\n        <div className=\"project-card-measure-inner\">\n          <div className=\"project-card-measure-number\">\n            <Measure metricKey=\"new_lines\" metricType=\"SHORT_INT\" value={measures['new_lines']} />\n          </div>\n          <div className=\"project-card-measure-label\">{translate('metric.lines.name')}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { areThereCustomOrganizations, Store } from '../../../store/rootReducer';\nimport ProjectCardOrganization from './ProjectCardOrganization';\n\nconst stateToProps = (state: Store) => ({\n  organizationsEnabled: areThereCustomOrganizations(state)\n});\n\nexport default connect(stateToProps)(ProjectCardOrganization);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport OrganizationLink from '../../../components/ui/OrganizationLink';\n\ninterface Props {\n  organization?: { key: string; name: string };\n  organizationsEnabled?: boolean;\n}\n\nexport default function ProjectCardOrganization({ organization, organizationsEnabled }: Props) {\n  if (!organization || !organizationsEnabled) {\n    return null;\n  }\n\n  return (\n    <span className=\"text-normal\">\n      <OrganizationLink organization={organization}>{organization.name}</OrganizationLink>\n      <span className=\"slash-separator\" />\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getLanguages, Store } from '../../../store/rootReducer';\nimport ProjectCardLanguages from './ProjectCardLanguages';\n\nconst stateToProps = (state: Store) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect(stateToProps)(ProjectCardLanguages);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  className?: string;\n  distribution?: string;\n  languages: T.Languages;\n}\n\nexport default function ProjectCardLanguages({ className, distribution, languages }: Props) {\n  if (distribution === undefined) {\n    return null;\n  }\n\n  const parsedLanguages = distribution.split(';').map(item => item.split('='));\n  const finalLanguages = sortBy(parsedLanguages, l => -1 * Number(l[1])).map(l =>\n    getLanguageName(languages, l[0])\n  );\n\n  const languagesText =\n    finalLanguages.slice(0, 2).join(', ') + (finalLanguages.length > 2 ? ', ...' : '');\n\n  let tooltip;\n  if (finalLanguages.length > 2) {\n    tooltip = (\n      <span>\n        {finalLanguages.map(language => (\n          <span key={language}>\n            {language}\n            <br />\n          </span>\n        ))}\n      </span>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <Tooltip overlay={tooltip}>\n        <span>{languagesText}</span>\n      </Tooltip>\n    </div>\n  );\n}\n\nfunction getLanguageName(languages: T.Languages, key: string): string {\n  if (key === '<null>') {\n    return translate('unknown');\n  }\n  const language = languages[key];\n  return language != null ? language.name : key;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DuplicationsRating from 'sonar-ui-common/components/ui/DuplicationsRating';\nimport SizeRating from 'sonar-ui-common/components/ui/SizeRating';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Measure from '../../../components/measure/Measure';\nimport CoverageRating from '../../../components/ui/CoverageRating';\nimport { ComponentQualifier } from '../../../types/component';\nimport ProjectCardLanguagesContainer from './ProjectCardLanguagesContainer';\nimport ProjectCardRatingMeasure from './ProjectCardRatingMeasure';\n\ninterface Props {\n  componentQualifier: ComponentQualifier;\n  measures: T.Dict<string | undefined>;\n}\n\nexport default function ProjectCardOverallMeasures({ componentQualifier, measures }: Props) {\n  if (measures === undefined) {\n    return null;\n  }\n\n  const { ncloc } = measures;\n  if (!ncloc) {\n    return (\n      <div className=\"note big-spacer-top\">\n        {componentQualifier === ComponentQualifier.Application\n          ? translate('portfolio.app.empty')\n          : translate('overview.project.main_branch_empty')}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"project-card-measures\">\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.bugs.name')}\n        measures={measures}\n        metricKey=\"bugs\"\n        metricRatingKey=\"reliability_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.vulnerabilities.name')}\n        measures={measures}\n        metricKey=\"vulnerabilities\"\n        metricRatingKey=\"security_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconKey=\"security_hotspots\"\n        iconLabel={translate('projects.security_hotspots_reviewed')}\n        measures={measures}\n        metricKey=\"security_hotspots_reviewed\"\n        metricRatingKey=\"security_review_rating\"\n        metricType=\"PERCENT\"\n      />\n\n      <ProjectCardRatingMeasure\n        iconLabel={translate('metric.code_smells.name')}\n        measures={measures}\n        metricKey=\"code_smells\"\n        metricRatingKey=\"sqale_rating\"\n        metricType=\"SHORT_INT\"\n      />\n\n      {measures['coverage'] != null && (\n        <div className=\"project-card-measure\" data-key=\"coverage\">\n          <div className=\"project-card-measure-inner\">\n            <div className=\"project-card-measure-number\">\n              <span className=\"spacer-right\">\n                <CoverageRating value={measures['coverage']} />\n              </span>\n              <Measure metricKey=\"coverage\" metricType=\"PERCENT\" value={measures['coverage']} />\n            </div>\n            <div className=\"project-card-measure-label\">{translate('metric.coverage.name')}</div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"project-card-measure\" data-key=\"duplicated_lines_density\">\n        <div className=\"project-card-measure-inner\">\n          <div className=\"project-card-measure-number\">\n            {measures['duplicated_lines_density'] != null && (\n              <span className=\"spacer-right\">\n                <DuplicationsRating value={Number(measures['duplicated_lines_density'])} />\n              </span>\n            )}\n            <Measure\n              metricKey=\"duplicated_lines_density\"\n              metricType=\"PERCENT\"\n              value={measures['duplicated_lines_density']}\n            />\n          </div>\n          <div className=\"project-card-measure-label\">\n            {translate('metric.duplicated_lines_density.short_name')}\n          </div>\n        </div>\n      </div>\n\n      {measures['ncloc'] != null && (\n        <div className=\"project-card-measure project-card-ncloc\" data-key=\"ncloc\">\n          <div className=\"project-card-measure-inner pull-right\">\n            <div className=\"project-card-measure-number\">\n              <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n              <span className=\"spacer-left\">\n                <SizeRating value={Number(measures['ncloc'])} />\n              </span>\n            </div>\n            <div className=\"project-card-measure-label\">\n              <ProjectCardLanguagesContainer\n                className=\"project-card-languages\"\n                distribution={measures['ncloc_language_distribution']}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\n\ninterface Props {\n  status?: string;\n}\n\nexport default function ProjectCardQualityGate({ status }: Props) {\n  if (!status) {\n    return null;\n  }\n\n  const tooltip = translateWithParameters(\n    'overview.quality_gate_x',\n    formatMeasure(status, 'LEVEL')\n  );\n\n  return (\n    <div className=\"project-card-quality-gate big-spacer-left\">\n      <Tooltip overlay={tooltip}>\n        <div className=\"project-card-measure-inner\">\n          <Level aria-label={translate('quality_gates.status')} level={status} small={true} />\n          {status === 'WARN' && (\n            <HelpTooltip\n              className=\"little-spacer-left\"\n              overlay={translate('quality_gates.conditions.warning.tooltip')}\n            />\n          )}\n        </div>\n      </Tooltip>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as difference from 'date-fns/difference_in_milliseconds';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DateTimeFormatter from 'sonar-ui-common/components/intl/DateTimeFormatter';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport PrivacyBadgeContainer from '../../../components/common/PrivacyBadgeContainer';\nimport Favorite from '../../../components/controls/Favorite';\nimport TagsList from '../../../components/tags/TagsList';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { Project } from '../types';\nimport { formatDuration } from '../utils';\nimport ProjectCardLeakMeasures from './ProjectCardLeakMeasures';\nimport ProjectCardOrganizationContainer from './ProjectCardOrganizationContainer';\nimport ProjectCardOverallMeasures from './ProjectCardOverallMeasures';\nimport ProjectCardQualityGate from './ProjectCardQualityGate';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  handleFavorite: (component: string, isFavorite: boolean) => void;\n  height: number;\n  organization: T.Organization | undefined;\n  project: Project;\n  type?: string;\n}\n\ninterface Dates {\n  analysisDate: string;\n  leakPeriodDate?: string;\n}\n\nfunction getDates(project: Project, type: string | undefined) {\n  const { analysisDate, leakPeriodDate } = project;\n  if (!analysisDate || (type === 'leak' && !leakPeriodDate)) {\n    return undefined;\n  } else {\n    return { analysisDate, leakPeriodDate };\n  }\n}\n\nfunction renderHeader(props: Props) {\n  const { organization, project } = props;\n  const hasTags = project.tags.length > 0;\n  return (\n    <div className=\"project-card-header\">\n      {project.isFavorite !== undefined && (\n        <Favorite\n          className=\"spacer-right\"\n          component={project.key}\n          favorite={project.isFavorite}\n          handleFavorite={props.handleFavorite}\n          qualifier={project.qualifier}\n        />\n      )}\n      <h2 className=\"project-card-name\">\n        {!organization && <ProjectCardOrganizationContainer organization={project.organization} />}\n        <Link to={getProjectUrl(project.key)}>{project.name}</Link>\n      </h2>\n      {project.analysisDate && <ProjectCardQualityGate status={project.measures['alert_status']} />}\n      <div className=\"project-card-header-right\">\n        <PrivacyBadgeContainer\n          className=\"spacer-left\"\n          organization={organization || project.organization}\n          qualifier={project.qualifier}\n          tooltipProps={{ projectKey: project.key }}\n          visibility={project.visibility}\n        />\n\n        {hasTags && <TagsList className=\"spacer-left note\" tags={project.tags} />}\n      </div>\n    </div>\n  );\n}\n\nfunction renderDates(dates: Dates, type: string | undefined) {\n  const { analysisDate, leakPeriodDate } = dates;\n  const periodMs = leakPeriodDate ? difference(Date.now(), leakPeriodDate) : 0;\n\n  return (\n    <>\n      <DateTimeFormatter date={analysisDate}>\n        {formattedDate => (\n          <span className=\"note\">\n            {translateWithParameters('projects.last_analysis_on_x', formattedDate)}\n          </span>\n        )}\n      </DateTimeFormatter>\n      {type === 'leak' && periodMs !== undefined && (\n        <span className=\"project-card-leak-date big-spacer-left big-spacer-right\">\n          {translateWithParameters('projects.new_code_period_x', formatDuration(periodMs))}\n        </span>\n      )}\n    </>\n  );\n}\n\nfunction renderDateRow(project: Project, dates: Dates | undefined, type: string | undefined) {\n  if (project.qualifier === ComponentQualifier.Application || dates) {\n    return (\n      <div\n        className={classNames('display-flex-center project-card-dates spacer-top', {\n          'big-spacer-left padded-left': project.isFavorite !== undefined\n        })}>\n        {dates && renderDates(dates, type)}\n\n        {project.qualifier === ComponentQualifier.Application && (\n          <div className=\"text-right flex-1-0-auto\">\n            <QualifierIcon className=\"spacer-right\" qualifier={project.qualifier} />\n            {translate('qualifier.APP')}\n            {project.measures.projects && (\n              <>\n                {' ‒ '}\n                {translateWithParameters('x_projects_', project.measures.projects)}\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nfunction renderMeasures(props: Props, dates: Dates | undefined) {\n  const { currentUser, project, type } = props;\n\n  const { measures } = project;\n\n  if (dates) {\n    return type === 'leak' ? (\n      <ProjectCardLeakMeasures measures={measures} />\n    ) : (\n      <ProjectCardOverallMeasures componentQualifier={project.qualifier} measures={measures} />\n    );\n  } else {\n    return (\n      <div className=\"project-card-not-analyzed\">\n        <span className=\"note\">\n          {type === 'leak' && project.analysisDate\n            ? translate('projects.no_new_code_period', project.qualifier)\n            : translate('projects.not_analyzed', project.qualifier)}\n        </span>\n        {project.qualifier !== ComponentQualifier.Application &&\n          !project.analysisDate &&\n          isLoggedIn(currentUser) && (\n            <Link className=\"button spacer-left\" to={getProjectUrl(project.key)}>\n              {translate('projects.configure_analysis')}\n            </Link>\n          )}\n      </div>\n    );\n  }\n}\n\nexport default function ProjectCard(props: Props) {\n  const { height, project, type } = props;\n\n  const dates = getDates(project, type);\n\n  return (\n    <div\n      className=\"boxed-group project-card big-padded display-flex-column display-flex-space-between\"\n      data-key={project.key}\n      style={{ height }}>\n      <div>\n        {renderHeader(props)}\n        {renderDateRow(project, dates, type)}\n      </div>\n      {renderMeasures(props, dates)}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport { List, ListRowProps } from 'react-virtualized/dist/commonjs/List';\nimport { WindowScroller } from 'react-virtualized/dist/commonjs/WindowScroller';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { OnboardingContext } from '../../../app/components/OnboardingContext';\nimport EmptySearch from '../../../components/common/EmptySearch';\nimport { Query } from '../query';\nimport { Project } from '../types';\nimport EmptyFavoriteSearch from './EmptyFavoriteSearch';\nimport EmptyInstance from './EmptyInstance';\nimport NoFavoriteProjects from './NoFavoriteProjects';\nimport ProjectCard from './ProjectCard';\n\ninterface Props {\n  cardType?: string;\n  currentUser: T.CurrentUser;\n  handleFavorite: (component: string, isFavorite: boolean) => void;\n  isFavorite: boolean;\n  isFiltered: boolean;\n  organization: T.Organization | undefined;\n  projects: Project[];\n  query: Query;\n}\n\nexport default class ProjectsList extends React.PureComponent<Props> {\n  getCardHeight = () => {\n    return this.props.cardType === 'leak' ? 159 : 143;\n  };\n\n  renderNoProjects() {\n    const { currentUser, isFavorite, isFiltered, organization, query } = this.props;\n    if (isFiltered) {\n      return isFavorite ? <EmptyFavoriteSearch query={query} /> : <EmptySearch />;\n    }\n    return isFavorite ? (\n      <OnboardingContext.Consumer>\n        {openProjectOnboarding => (\n          <NoFavoriteProjects openProjectOnboarding={openProjectOnboarding} />\n        )}\n      </OnboardingContext.Consumer>\n    ) : (\n      <OnboardingContext.Consumer>\n        {openProjectOnboarding => (\n          <EmptyInstance\n            currentUser={currentUser}\n            openProjectOnboarding={openProjectOnboarding}\n            organization={organization}\n          />\n        )}\n      </OnboardingContext.Consumer>\n    );\n  }\n\n  renderRow = ({ index, key, style }: ListRowProps) => {\n    const project = this.props.projects[index];\n    const height = this.getCardHeight();\n    return (\n      <div key={key} role=\"row\" style={{ ...style, height }}>\n        <div role=\"gridcell\">\n          <ProjectCard\n            currentUser={this.props.currentUser}\n            handleFavorite={this.props.handleFavorite}\n            height={height}\n            key={project.key}\n            organization={this.props.organization}\n            project={project}\n            type={this.props.cardType}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  renderList() {\n    const cardHeight = this.getCardHeight();\n    return (\n      <WindowScroller>\n        {({ height, isScrolling, onChildScroll, scrollTop }) => (\n          <AutoSizer disableHeight={true}>\n            {({ width }) => (\n              <div>\n                <List\n                  aria-label={translate('project_plural')}\n                  autoHeight={true}\n                  height={height}\n                  isScrolling={isScrolling}\n                  onScroll={onChildScroll}\n                  overscanRowCount={2}\n                  rowCount={this.props.projects.length}\n                  rowHeight={cardHeight + 20}\n                  rowRenderer={this.renderRow}\n                  scrollTop={scrollTop}\n                  style={{ outline: 'none' }}\n                  width={width}\n                />\n              </div>\n            )}\n          </AutoSizer>\n        )}\n      </WindowScroller>\n    );\n  }\n\n  render() {\n    const { projects } = this.props;\n\n    return (\n      <div className=\"projects-list\">\n        {projects.length > 0 ? this.renderList() : this.renderNoProjects()}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport handleRequiredAuthentication from 'sonar-ui-common/helpers/handleRequiredAuthentication';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { addSideBarClass, removeSideBarClass } from 'sonar-ui-common/helpers/pages';\nimport { get, save } from 'sonar-ui-common/helpers/storage';\nimport A11ySkipTarget from '../../../app/components/a11y/A11ySkipTarget';\nimport Suggestions from '../../../app/components/embed-docs-modal/Suggestions';\nimport ScreenPositionHelper from '../../../components/common/ScreenPositionHelper';\nimport { Location, Router, withRouter } from '../../../components/hoc/withRouter';\nimport '../../../components/search-navigator.css';\nimport { isLoggedIn } from '../../../helpers/users';\nimport { ComponentQualifier } from '../../../types/component';\nimport { hasFilterParams, hasVisualizationParams, parseUrlQuery, Query } from '../query';\nimport '../styles.css';\nimport { Facets, Project } from '../types';\nimport { fetchProjects, parseSorting, SORTING_SWITCH } from '../utils';\nimport Visualizations from '../visualizations/Visualizations';\nimport PageHeader from './PageHeader';\nimport PageSidebar from './PageSidebar';\nimport ProjectsList from './ProjectsList';\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  isFavorite: boolean;\n  location: Pick<Location, 'pathname' | 'query'>;\n  organization: T.Organization | undefined;\n  qualifiers: ComponentQualifier[];\n  router: Pick<Router, 'push' | 'replace'>;\n  storageOptionsSuffix?: string;\n}\n\ninterface State {\n  facets?: Facets;\n  loading: boolean;\n  pageIndex?: number;\n  projects?: Project[];\n  query: Query;\n  total?: number;\n}\n\nconst PROJECTS_SORT = 'sonarqube.projects.sort';\nconst PROJECTS_VIEW = 'sonarqube.projects.view';\nconst PROJECTS_VISUALIZATION = 'sonarqube.projects.visualization';\n\nexport class AllProjects extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { loading: true, query: {} };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n\n    if (this.props.isFavorite && !isLoggedIn(this.props.currentUser)) {\n      handleRequiredAuthentication();\n      return;\n    }\n    this.handleQueryChange(true);\n    addSideBarClass();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.location.query !== this.props.location.query) {\n      this.handleQueryChange(false);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    removeSideBarClass();\n  }\n\n  fetchProjects = (query: Query) => {\n    this.setState({ loading: true, query });\n    fetchProjects(query, this.props.isFavorite, this.props.organization).then(response => {\n      if (this.mounted) {\n        this.setState({\n          facets: response.facets,\n          loading: false,\n          pageIndex: 1,\n          projects: response.projects,\n          total: response.total\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  fetchMoreProjects = () => {\n    const { pageIndex, projects, query } = this.state;\n    if (pageIndex && projects && query) {\n      this.setState({ loading: true });\n      fetchProjects(query, this.props.isFavorite, this.props.organization, pageIndex + 1).then(\n        response => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              pageIndex: pageIndex + 1,\n              projects: [...projects, ...response.projects]\n            });\n          }\n        },\n        this.stopLoading\n      );\n    }\n  };\n\n  getSort = () => this.state.query.sort || 'name';\n\n  getStorageOptions = () => {\n    const { storageOptionsSuffix } = this.props;\n    const options: {\n      sort?: string;\n      view?: string;\n      visualization?: string;\n    } = {};\n    if (get(PROJECTS_SORT, storageOptionsSuffix)) {\n      options.sort = get(PROJECTS_SORT, storageOptionsSuffix) || undefined;\n    }\n    if (get(PROJECTS_VIEW, storageOptionsSuffix)) {\n      options.view = get(PROJECTS_VIEW, storageOptionsSuffix) || undefined;\n    }\n    if (get(PROJECTS_VISUALIZATION, storageOptionsSuffix)) {\n      options.visualization = get(PROJECTS_VISUALIZATION, storageOptionsSuffix) || undefined;\n    }\n    return options;\n  };\n\n  getView = () => this.state.query.view || 'overall';\n\n  getVisualization = () => this.state.query.visualization || 'risk';\n\n  handleClearAll = () => {\n    this.props.router.push({ pathname: this.props.location.pathname });\n  };\n\n  handleFavorite = (key: string, isFavorite: boolean) => {\n    this.setState(({ projects }) => {\n      if (!projects) {\n        return null;\n      }\n\n      return {\n        projects: projects.map(p => (p.key === key ? { ...p, isFavorite } : p))\n      };\n    });\n  };\n\n  handlePerspectiveChange = ({ view, visualization }: { view: string; visualization?: string }) => {\n    const { storageOptionsSuffix } = this.props;\n    const query: {\n      view: string | undefined;\n      visualization: string | undefined;\n      sort?: string | undefined;\n    } = {\n      view: view === 'overall' ? undefined : view,\n      visualization\n    };\n\n    if (this.state.query.view === 'leak' || view === 'leak') {\n      if (this.state.query.sort) {\n        const sort = parseSorting(this.state.query.sort);\n        if (SORTING_SWITCH[sort.sortValue]) {\n          query.sort = (sort.sortDesc ? '-' : '') + SORTING_SWITCH[sort.sortValue];\n        }\n      }\n      this.props.router.push({ pathname: this.props.location.pathname, query });\n    } else {\n      this.updateLocationQuery(query);\n    }\n\n    save(PROJECTS_SORT, query.sort, storageOptionsSuffix);\n    save(PROJECTS_VIEW, query.view, storageOptionsSuffix);\n    save(PROJECTS_VISUALIZATION, visualization, storageOptionsSuffix);\n  };\n\n  handleQueryChange(initialMount: boolean) {\n    const query = parseUrlQuery(this.props.location.query);\n    const savedOptions = this.getStorageOptions();\n    const savedOptionsSet = savedOptions.sort || savedOptions.view || savedOptions.visualization;\n\n    // if there is no visualization parameters (sort, view, visualization), but there are saved preferences in the localStorage\n    if (initialMount && !hasVisualizationParams(query) && savedOptionsSet) {\n      this.props.router.replace({ pathname: this.props.location.pathname, query: savedOptions });\n    } else {\n      this.fetchProjects(query);\n    }\n  }\n\n  handleSortChange = (sort: string, desc: boolean) => {\n    const asString = (desc ? '-' : '') + sort;\n    this.updateLocationQuery({ sort: asString });\n    save(PROJECTS_SORT, asString, this.props.storageOptionsSuffix);\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  updateLocationQuery = (newQuery: T.RawQuery) => {\n    const query = omitBy({ ...this.props.location.query, ...newQuery }, x => !x);\n    this.props.router.push({ pathname: this.props.location.pathname, query });\n  };\n\n  renderSide = () => (\n    <ScreenPositionHelper className=\"layout-page-side-outer\">\n      {({ top }) => (\n        <div className=\"layout-page-side projects-page-side\" style={{ top }}>\n          <div className=\"layout-page-side-inner\">\n            <div className=\"layout-page-filters\">\n              <A11ySkipTarget\n                anchor=\"projects_filters\"\n                label={translate('projects.skip_to_filters')}\n                weight={10}\n              />\n\n              <PageSidebar\n                applicationsEnabled={this.props.qualifiers.includes(ComponentQualifier.Application)}\n                facets={this.state.facets}\n                onClearAll={this.handleClearAll}\n                onQueryChange={this.updateLocationQuery}\n                organization={this.props.organization}\n                query={this.state.query}\n                view={this.getView()}\n                visualization={this.getVisualization()}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </ScreenPositionHelper>\n  );\n\n  renderHeader = () => (\n    <div className=\"layout-page-header-panel layout-page-main-header\">\n      <div className=\"layout-page-header-panel-inner layout-page-main-header-inner\">\n        <div className=\"layout-page-main-inner\">\n          <PageHeader\n            currentUser={this.props.currentUser}\n            isFavorite={this.props.isFavorite}\n            loading={this.state.loading}\n            onPerspectiveChange={this.handlePerspectiveChange}\n            onQueryChange={this.updateLocationQuery}\n            onSortChange={this.handleSortChange}\n            organization={this.props.organization}\n            projects={this.state.projects}\n            query={this.state.query}\n            selectedSort={this.getSort()}\n            total={this.state.total}\n            view={this.getView()}\n            visualization={this.getVisualization()}\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  renderMain = () => {\n    if (this.state.loading && this.state.projects === undefined) {\n      return <DeferredSpinner />;\n    }\n\n    return this.getView() === 'visualizations' ? (\n      <div className=\"layout-page-main-inner\">\n        {this.state.projects && (\n          <Visualizations\n            displayOrganizations={false}\n            projects={this.state.projects}\n            sort={this.state.query.sort}\n            total={this.state.total}\n            visualization={this.getVisualization()}\n          />\n        )}\n      </div>\n    ) : (\n      <div className=\"layout-page-main-inner\">\n        {this.state.projects && (\n          <ProjectsList\n            cardType={this.getView()}\n            currentUser={this.props.currentUser}\n            handleFavorite={this.handleFavorite}\n            isFavorite={this.props.isFavorite}\n            isFiltered={hasFilterParams(this.state.query)}\n            organization={this.props.organization}\n            projects={this.state.projects}\n            query={this.state.query}\n          />\n        )}\n        <ListFooter\n          count={this.state.projects !== undefined ? this.state.projects.length : 0}\n          loading={this.state.loading}\n          loadMore={this.fetchMoreProjects}\n          ready={!this.state.loading}\n          total={this.state.total !== undefined ? this.state.total : 0}\n        />\n      </div>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"layout-page projects-page\" id=\"projects-page\">\n        <Suggestions suggestions=\"projects\" />\n        <Helmet defer={false} title={translate('projects.page')} />\n\n        {this.renderSide()}\n\n        <div className=\"layout-page-main\">\n          <A11ySkipTarget anchor=\"projects_main\" />\n\n          {this.renderHeader()}\n          {this.renderMain()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(AllProjects);\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { filterContent } from '../../helpers/markdown';\n\nconst DocMarkdownBlock = lazyLoadComponent(() => import('./DocMarkdownBlock'), 'DocMarkdownBlock');\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: T.Dict<string>;\n}\n\ninterface State {\n  content?: string;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {};\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.doc.then(\n      ({ default: content }) => {\n        if (this.mounted) {\n          this.setState({ content });\n        }\n      },\n      () => {}\n    );\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={filterContent(this.state.content)}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\nexport enum ComponentQualifier {\n  Application = 'APP',\n  Directory = 'DIR',\n  Developper = 'DEV',\n  File = 'FIL',\n  Portfolio = 'VW',\n  Project = 'TRK',\n  SubPortfolio = 'SVW',\n  SubProject = 'BRC',\n  TestFile = 'UTS'\n}\n\nexport function isPortfolioLike(componentQualifier?: string | ComponentQualifier) {\n  return (\n    !!componentQualifier &&\n    [ComponentQualifier.Portfolio.toString(), ComponentQualifier.SubPortfolio.toString()].includes(\n      componentQualifier\n    )\n  );\n}\n\nexport enum Visibility {\n  Public = 'public',\n  Private = 'private'\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n// keep this file in JavaScript, because it is used by a webpack loader\nmodule.exports = { getFrontMatter, separateFrontMatter, filterContent };\n\nfunction getFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  return position ? parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine)) : {};\n}\n\nfunction separateFrontMatter(content) {\n  const lines = content.split('\\n');\n  const position = getFrontMatterPosition(lines);\n  if (position) {\n    const frontmatter = parseFrontMatter(lines.slice(position.firstLine + 1, position.lastLine));\n    const content = lines.slice(position.lastLine + 1).join('\\n');\n    return { frontmatter, content };\n  } else {\n    return { frontmatter: {}, content };\n  }\n}\n\nfunction getFrontMatterPosition(lines) {\n  let firstLine;\n  let lastLine;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line.trim() === '---') {\n      if (firstLine === undefined) {\n        firstLine = i;\n      } else {\n        lastLine = i;\n        break;\n      }\n    }\n  }\n  return lastLine !== undefined ? { firstLine, lastLine } : undefined;\n}\n\nfunction parseFrontMatter(lines) {\n  const data = {};\n  for (let i = 0; i < lines.length; i++) {\n    const tokens = lines[i].split(':').map(x => x.trim());\n    if (tokens.length === 2) {\n      data[tokens[0]] = tokens[1];\n    }\n  }\n  return data;\n}\n\n/**\n * @param {string} content\n * @returns {string}\n */\nfunction filterContent(content) {\n  const regexBase = '<!-- \\\\/?(sonarqube|sonarcloud|static) -->';\n  const { isSonarCloud, getInstance } = require('./system');\n  const contentWithInstance = content.replace(/{instance}/gi, getInstance());\n  const contentWithoutStatic = cutConditionalContent(contentWithInstance, 'static');\n  const filteredContent = isSonarCloud()\n    ? cutConditionalContent(contentWithoutStatic, 'sonarqube')\n    : cutConditionalContent(contentWithoutStatic, 'sonarcloud');\n  return filteredContent\n    .replace(new RegExp(`^${regexBase}(\\n|\\r|\\r\\n|$)`, 'gm'), '') // First, remove single-line ones, including ending carriage-returns.\n    .replace(new RegExp(`${regexBase}`, 'g'), ''); // Now remove all remaining ones.\n}\n\n/**\n * @param {string} content\n * @param {string} tag\n * @returns {string}\n */\nfunction cutConditionalContent(content, tag) {\n  const beginning = `<!-- ${tag} -->`;\n  const ending = `<!-- /${tag} -->`;\n\n  let newContent = content;\n  let start = newContent.indexOf(beginning);\n  let end = newContent.indexOf(ending);\n  while (start !== -1 && end !== -1) {\n    if (start < end) {\n      newContent = newContent.substring(0, start) + newContent.substring(end + ending.length);\n    } else {\n      // When conditional tags are incorrectly used we log an error, strip them out and pass to the next pair of tags\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(\n          `Documentation - incorrect usage of conditional formatting tags here: \"${newContent.substring(\n            end,\n            start + beginning.length\n          )}\"`\n        )\n      );\n      newContent =\n        newContent.substring(0, end) +\n        newContent.substring(end + ending.length, start) +\n        newContent.substring(start + beginning.length);\n    }\n    start = newContent.indexOf(beginning);\n    end = newContent.indexOf(ending);\n  }\n\n  return newContent;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating',\n  'security_review_rating'\n];\n\nexport function enhanceMeasure(measure: T.Measure, metrics: T.Dict<T.Metric>): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.MeasureIntern | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport Level from 'sonar-ui-common/components/ui/Level';\nimport Rating from 'sonar-ui-common/components/ui/Rating';\nimport { formatMeasure } from 'sonar-ui-common/helpers/measures';\nimport { getRatingTooltip } from './utils';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span className={className}>–</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, {\n      decimals,\n      omitExtraDecimalZeros: metricType === 'PERCENT'\n    });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./TagsList.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseDate } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { ApplicationPeriod } from '../types/application';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter || '';\n\n  switch (period.mode) {\n    case 'SPECIFIC_ANALYSIS':\n      parameter = dateFormatter(period.date);\n      break;\n    case 'PREVIOUS_VERSION':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    /*\n     * Handle legacy period modes, that predate MMF-1579\n     */\n    case 'previous_version':\n      if (!parameter) {\n        return translate('overview.period.previous_version_only_date');\n      }\n      break;\n    case 'date':\n      parameter = parameter && dateFormatter(parameter);\n      break;\n    case 'manual_baseline':\n      parameter = parameter || dateFormatter(period.date);\n      break;\n    default: // No change in the parameter\n  }\n\n  return translateWithParameters(`overview.period.${period.mode.toLowerCase()}`, parameter);\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n\nexport function isApplicationPeriod(\n  period: T.Period | ApplicationPeriod\n): period is ApplicationPeriod {\n  return (period as ApplicationPeriod).project !== undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce } from 'lodash';\nimport * as React from 'react';\n\ninterface Props {\n  className?: string;\n  children: (position: { top: number; left: number }) => React.ReactElement<any>;\n}\n\nexport default class ScreenPositionHelper extends React.PureComponent<Props> {\n  container?: HTMLDivElement;\n  debouncedOnResize: () => void;\n\n  constructor(props: Props) {\n    super(props);\n    this.debouncedOnResize = debounce(() => this.forceUpdate(), 250);\n  }\n\n  componentDidMount() {\n    this.forceUpdate();\n    window.addEventListener('resize', this.debouncedOnResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.debouncedOnResize);\n  }\n\n  getPosition = () => {\n    const containerPos = this.container && this.container.getBoundingClientRect();\n    if (!containerPos) {\n      return { top: 0, left: 0 };\n    }\n    return {\n      top: window.pageYOffset + containerPos.top,\n      left: window.pageXOffset + containerPos.left\n    };\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        ref={container => (this.container = container as HTMLDivElement)}>\n        {this.props.children(this.getPosition())}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport DropdownIcon from 'sonar-ui-common/components/icons/DropdownIcon';\nimport TagsIcon from 'sonar-ui-common/components/icons/TagsIcon';\nimport { translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport './TagsList.css';\n\ninterface Props {\n  allowUpdate?: boolean;\n  className?: string;\n  tags: string[];\n}\n\nexport default function TagsList({ allowUpdate = false, className, tags }: Props) {\n  return (\n    <span\n      aria-label={translateWithParameters('tags_list_x', tags.join(', '))}\n      className={classNames('tags-list', className)}>\n      <TagsIcon className=\"text-middle\" />\n      <span aria-hidden={true} className=\"text-ellipsis text-middle\" title={tags.join(', ')}>\n        {tags.join(', ')}\n      </span>\n      {allowUpdate && <DropdownIcon className=\"text-middle\" />}\n    </span>\n  );\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tags-list{white-space:nowrap;line-height:16px}.tags-list i:before{font-size:12px}.tags-list span{display:inline-block;vertical-align:middle;text-align:left;max-width:220px;padding-left:4px;padding-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport { colors } from '../../app/theme';\n\nconst DonutChart = lazyLoadComponent(\n  () => import('sonar-ui-common/components/charts/DonutChart'),\n  'DonutChart'\n);\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\nexport interface CoverageRatingProps {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({\n  muted = false,\n  size = 'normal',\n  value\n}: CoverageRatingProps) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n  let padAngle = 0;\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? colors.gray71 : colors.green },\n      { value: 100 - numberValue, fill: muted ? colors.barBackgroundColor : colors.lineCoverageRed }\n    ];\n    if (numberValue !== 0 && numberValue < 100) {\n      padAngle = 0.1; // Same for all sizes, because it scales automatically\n    }\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return (\n    <DonutChart\n      data={data}\n      height={width}\n      padAngle={padAngle}\n      thickness={thickness}\n      width={width}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteButton from 'sonar-ui-common/components/controls/FavoriteButton';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n  handleFavorite?: (component: string, isFavorite: boolean) => void;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class Favorite extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      favorite: props.favorite\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    if (prevState.favorite !== this.props.favorite) {\n      this.setState({ favorite: this.props.favorite });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite;\n    const apiMethod = newFavorite ? addFavorite : removeFavorite;\n\n    return apiMethod(this.props.component).then(() => {\n      if (this.mounted) {\n        this.setState({ favorite: newFavorite }, () => {\n          if (this.props.handleFavorite) {\n            this.props.handleFavorite(this.props.component, newFavorite);\n          }\n        });\n      }\n    });\n  };\n\n  render() {\n    const { className, qualifier } = this.props;\n    const { favorite } = this.state;\n\n    return (\n      <FavoriteButton\n        className={className}\n        favorite={favorite}\n        qualifier={qualifier}\n        toggleFavorite={this.toggleFavorite}\n      />\n    );\n  }\n}\n/*  */\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from 'sonar-ui-common/helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { ButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport HomeIcon from 'sonar-ui-common/components/icons/HomeIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getCurrentUser, Store } from '../../store/rootReducer';\nimport { setHomePage } from '../../store/users';\n\ninterface StateProps {\n  currentUser: T.CurrentUser;\n}\n\ninterface DispatchProps {\n  setHomePage: (homepage: T.HomePage) => void;\n}\n\ninterface Props extends StateProps, DispatchProps {\n  className?: string;\n  currentPage: T.HomePage;\n}\n\nclass HomePageSelect extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.setHomePage(this.props.currentPage);\n  };\n\n  render() {\n    const { currentPage, currentUser } = this.props;\n\n    if (!isLoggedIn(currentUser)) {\n      return null;\n    }\n\n    const { homepage } = currentUser;\n    const checked = homepage !== undefined && isSameHomePage(homepage, currentPage);\n    const tooltip = checked ? translate('homepage.current') : translate('homepage.check');\n\n    return (\n      <Tooltip overlay={tooltip}>\n        {checked ? (\n          <span\n            aria-label={tooltip}\n            className={classNames('display-inline-block', this.props.className)}>\n            <HomeIcon filled={checked} />\n          </span>\n        ) : (\n          <ButtonLink\n            aria-label={tooltip}\n            className={classNames('link-no-underline', 'set-homepage-link', this.props.className)}\n            onClick={this.handleClick}>\n            <HomeIcon filled={checked} />\n          </ButtonLink>\n        )}\n      </Tooltip>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  currentUser: getCurrentUser(state)\n});\n\nconst mapDispatchToProps: DispatchProps = { setHomePage };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePageSelect);\n\nfunction isSameHomePage(a: T.HomePage, b: T.HomePage) {\n  return (\n    a.type === b.type &&\n    (a as any).branch === (b as any).branch &&\n    (a as any).component === (b as any).component &&\n    (a as any).organization === (b as any).organization\n  );\n}\n","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!./search-navigator.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-navigator.sticky .search-navigator-workspace-header{position:fixed;z-index:50;top:0;left:300px;right:0}.search-navigator.sticky .search-navigator-workspace-details,.search-navigator.sticky .search-navigator-workspace-list{padding-top:43px}.search-navigator-facet-box{background-color:#f3f3f3;font-size:13px}.search-navigator-facet-box.leak-facet-box{background-color:#fbf3d5;border:1px solid #f1e8cb}.search-navigator-facet-box.is-inner{margin-left:8px;padding-left:12px;border-left:1px solid #e6e6e6}.search-navigator-facet-box.is-inner .search-navigator-facet-header{padding-top:6px;padding-bottom:6px}.leak-facet-box:not(.hidden)+.leak-facet-box{border-top:none}.search-navigator-facet-box-forbidden{background-color:transparent;opacity:.5}.search-navigator-facet-box-forbidden .search-navigator-facet-container,.search-navigator-facet-box-forbidden .search-navigator-facet-empty,.search-navigator-facet-box-forbidden .search-navigator-facet-list{display:none}.search-navigator-facet-box-forbidden .search-navigator-facet-header{color:#777}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#4b9fd5}.search-navigator-facet-box-forbidden .search-navigator-facet-header{cursor:default}.search-navigator-facet-box-forbidden .search-navigator-facet-header:hover{color:#777}.search-navigator-facet{position:relative;display:inline-flex;justify-content:space-between;align-items:center;width:100%;height:24px;margin:0 0 1px;padding:0 6px;border:1px solid transparent;border-radius:2px;box-sizing:border-box;white-space:normal;opacity:.3;cursor:not-allowed;transition:none}a.search-navigator-facet{opacity:1;cursor:pointer}a.search-navigator-facet .facet-name{color:#444}.search-navigator-facet.active,a.search-navigator-facet:focus,a.search-navigator-facet:hover{border-color:#4b9fd5}.search-navigator-facet.facet-category{opacity:1;cursor:default}.search-navigator-facet.facet-category .facet-name{color:#777}.search-navigator-facet .facet-name{flex:1 1 auto;min-width:0;line-height:16px;padding:1px 0;color:#777;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-navigator-facet .facet-stat{display:flex;align-items:center;margin-left:8px;color:#777;font-size:12px}.search-navigator-facet .facet-toggle{display:none;float:left;height:16px;line-height:16px;margin-top:-1px;padding:0 5px;border-radius:2px;font-size:11px;text-transform:lowercase}.search-navigator-facet .facet-toggle:hover{color:#444}.search-navigator-facet .facet-toggle-active.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet .facet-toggle-active.facet-toggle-red{background-color:#d4333f;color:#fff}.leak-facet-box .search-navigator-facet .facet-name,.leak-facet-box .search-navigator-facet .facet-stat{background-color:#fbf3d5}.leak-facet-box .search-navigator-facet .facet-stat:before{background-image:linear-gradient(90deg,rgba(251,243,213,0),#fbf3d5 75%)}.search-navigator-facet.active{background-color:#cae3f2;text-decoration:none}.search-navigator-facet.active .facet-toggle{display:inline}.search-navigator-facet.compare .facet-toggle{cursor:not-allowed;opacity:.5}.search-navigator-facet.compare .facet-toggle.facet-toggle-green{background-color:#0a0;color:#fff}.search-navigator-facet.compare .facet-toggle.facet-toggle-red{background-color:transparent;color:#777}.search-navigator-facet-half{width:45%}.search-navigator-facet-half:nth-child(odd){margin-right:10%}.search-navigator-facet-highlight-under-container{margin-bottom:1px}.search-navigator-facet-highlight-under-container .search-navigator-facet{margin-bottom:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover{border-bottom:none;padding-bottom:1px;border-radius:2px 2px 0 0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet{border-top:none;border-bottom:none;border-left-color:#4b9fd5;border-right-color:#4b9fd5;border-radius:0}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:0 0 2px 2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active:last-of-type,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover:last-of-type{border-bottom:1px solid #4b9fd5;border-radius:2px}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet{background-color:#cae3f2;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet:hover~.search-navigator-facet.active{border-top:1px solid #4b9fd5}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet{background-color:#a1cde8;text-decoration:none}.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover .facet-toggle,.search-navigator-facet-highlight-under-container .search-navigator-facet.active~.search-navigator-facet:hover~.search-navigator-facet .facet-toggle{display:inline}.search-navigator-facet-header{display:block;flex-shrink:0;padding:8px 0;color:#444;font-weight:600;overflow:hidden;white-space:nowrap}.search-navigator-facet-header>a{border-bottom:none;color:#444}.search-navigator-facet-header>a:focus,.search-navigator-facet-header>a:hover{color:#4b9fd5}.search-navigator-facet-header>.note{font-weight:400}.search-navigator-facet-header-value{display:block;overflow:hidden}.search-navigator-facet-header-value>.badge{display:block}.search-navigator-facet-header-button{flex-shrink:0;margin-left:auto}.search-navigator-facet-header-wrapper{display:flex;align-items:center}.search-navigator-facet-list{padding-bottom:8px;font-size:0}.search-navigator-facet-list-title{margin:0 8px 4px;font-size:12px;font-weight:700}.search-navigator-facet-list+.search-navigator-facet-list>.search-navigator-facet-list-title{border-top:1px solid #e6e6e6;padding-top:8px}.search-navigator-facet-empty{margin:0;padding:0 10px 10px;color:#444;font-size:12px;white-space:nowrap}.search-navigator-facet-footer{display:block;padding-bottom:8px;border-bottom:none}.search-navigator-facet-container{margin-top:6px;padding:0 10px 16px}.search-navigator-date-facet-selection{position:relative;padding-left:8px;font-size:12px}.search-navigator-date-facet-selection:after,.search-navigator-date-facet-selection:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-date-facet-selection:after{clear:both}.search-navigator-date-facet-selection .date-input-control-input{width:115px!important}.search-navigator-date-facet-selection-dropdown-left{float:left;border-bottom:none}.search-navigator-date-facet-selection-dropdown-right{float:right;border-bottom:none}.search-navigator-date-facet-selection-input-left{position:absolute;left:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection-input-right{position:absolute;right:0;width:100px;visibility:hidden}.search-navigator-date-facet-selection .date-input-control:not(:first-of-type) .date-input-calendar{left:auto;right:0}.search-navigator-filters{position:relative;padding:5px 10px;background-color:#f3f3f3}.search-navigator-filters:after,.search-navigator-filters:before{display:table;content:\\\"\\\";line-height:0}.search-navigator-filters:after{clear:both}.search-navigator-filters-header{margin-bottom:12px;padding-bottom:11px;border-bottom:1px solid #e6e6e6}.search-navigator-intro{width:500px;margin:0 auto;padding-top:100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}