{"version":3,"sources":["webpack:///./src/main/js/app/components/notifications/NotificationsSidebar.tsx","webpack:///./node_modules/sonar-ui-common/components/intl/DateFormatter.js","webpack:///./node_modules/date-fns/difference_in_milliseconds/index.js","webpack:///./node_modules/date-fns/difference_in_seconds/index.js"],"names":["NotificationsSidebar","props","loading","loadingMore","news","notificationsLastReadDate","paging","header","contentLabel","onRequestClose","onClose","className","iconProps","size","thin","onClick","timeout","map","slice","index","Notification","key","publicationDate","notification","unread","isUnread","total","length","href","fetchMoreFeatureNews","notificationDate","lastReadDate","date","long","features","feature","Feature","categories","category","name","style","backgroundColor","color","description","readMore","rel","target","__assign","this","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","React","react_intl_1","dates_1","formatterOption","year","month","day","longFormatterOption","default","_a","children","createElement","FormattedDate","parseDate","parse","module","dirtyDateLeft","dirtyDateRight","dateLeft","dateRight","getTime","differenceInMilliseconds","diff","Math","floor","ceil"],"mappings":"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","file":"js/374.1588858339197.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2020 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as differenceInSeconds from 'date-fns/difference_in_seconds';\nimport * as React from 'react';\nimport { ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { PrismicFeatureNews } from '../../../api/news';\n\nexport interface Props {\n  fetchMoreFeatureNews: () => void;\n  loading: boolean;\n  loadingMore: boolean;\n  news: PrismicFeatureNews[];\n  onClose: () => void;\n  notificationsLastReadDate?: Date;\n  paging?: T.Paging;\n}\n\nexport default function NotificationsSidebar(props: Props) {\n  const { loading, loadingMore, news, notificationsLastReadDate, paging } = props;\n  const header = translate('embed_docs.whats_new');\n  return (\n    <Modal contentLabel={header} onRequestClose={props.onClose}>\n      <div className=\"notifications-sidebar\">\n        <div className=\"notifications-sidebar-top\">\n          <h3>{header}</h3>\n          <ClearButton\n            className=\"button-tiny\"\n            iconProps={{ size: 12, thin: true }}\n            onClick={props.onClose}\n          />\n        </div>\n        <div className=\"notifications-sidebar-content\">\n          {loading ? (\n            <div className=\"text-center\">\n              <DeferredSpinner className=\"big-spacer-top\" timeout={200} />\n            </div>\n          ) : (\n            news.map((slice, index) => (\n              <Notification\n                key={slice.publicationDate}\n                notification={slice}\n                unread={isUnread(index, slice.publicationDate, notificationsLastReadDate)}\n              />\n            ))\n          )}\n        </div>\n        {!loading && paging && paging.total > news.length && (\n          <div className=\"notifications-sidebar-footer\">\n            <div className=\"spacer-top note text-center\">\n              <a className=\"spacer-left\" href=\"#\" onClick={props.fetchMoreFeatureNews}>\n                {translate('show_more')}\n              </a>\n              {loadingMore && (\n                <DeferredSpinner className=\"text-bottom spacer-left position-absolute\" />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport function isUnread(index: number, notificationDate: string, lastReadDate?: Date) {\n  return !lastReadDate ? index < 1 : differenceInSeconds(notificationDate, lastReadDate) > 0;\n}\n\ninterface NotificationProps {\n  notification: PrismicFeatureNews;\n  unread: boolean;\n}\n\nexport function Notification({ notification, unread }: NotificationProps) {\n  return (\n    <div className={classNames('notifications-sidebar-slice', { unread })}>\n      <h4>\n        <DateFormatter date={notification.publicationDate} long={false} />\n      </h4>\n      {notification.features.map((feature, index) => (\n        <Feature feature={feature} key={index} />\n      ))}\n    </div>\n  );\n}\n\ninterface FeatureProps {\n  feature: PrismicFeatureNews['features'][0];\n}\n\nexport function Feature({ feature }: FeatureProps) {\n  return (\n    <div className=\"feature\">\n      <ul className=\"categories spacer-bottom\">\n        {feature.categories.map(category => (\n          <li key={category.name} style={{ backgroundColor: category.color }}>\n            {category.name}\n          </li>\n        ))}\n      </ul>\n      <span>{feature.description}</span>\n      {feature.readMore && (\n        <a\n          className=\"learn-more\"\n          href={feature.readMore}\n          rel=\"noopener noreferrer nofollow\"\n          target=\"_blank\">\n          {translate('learn_more')}\n        </a>\n      )}\n    </div>\n  );\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar react_intl_1 = require(\"react-intl\");\nvar dates_1 = require(\"../../helpers/dates\");\nexports.formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\nexports.longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\nfunction DateFormatter(_a) {\n    var children = _a.children, date = _a.date, long = _a.long;\n    return (React.createElement(react_intl_1.FormattedDate, __assign({ value: dates_1.parseDate(date) }, (long ? exports.longFormatterOption : exports.formatterOption)), children));\n}\nexports.default = DateFormatter;\n//# sourceMappingURL=DateFormatter.js.map","var parse = require('../parse/index.js')\n\n/**\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * var result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nfunction differenceInMilliseconds (dirtyDateLeft, dirtyDateRight) {\n  var dateLeft = parse(dirtyDateLeft)\n  var dateRight = parse(dirtyDateRight)\n  return dateLeft.getTime() - dateRight.getTime()\n}\n\nmodule.exports = differenceInMilliseconds\n","var differenceInMilliseconds = require('../difference_in_milliseconds/index.js')\n\n/**\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * var result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nfunction differenceInSeconds (dirtyDateLeft, dirtyDateRight) {\n  var diff = differenceInMilliseconds(dirtyDateLeft, dirtyDateRight) / 1000\n  return diff > 0 ? Math.floor(diff) : Math.ceil(diff)\n}\n\nmodule.exports = differenceInSeconds\n"],"sourceRoot":""}